"use strict";(self.webpackChunkfrosthaven_assistant_angular=self.webpackChunkfrosthaven_assistant_angular||[]).push([[699],{4699:(M,p,s)=>{s.r(p),s.d(p,{ArmoryComponent:()=>R});var f=s(467),l=s(2200),m=s(4341),u=s(7556),r=s(3757),t=s(3664);function I(o,c){if(1&o&&t.nrm(0,"div",6),2&o){const e=t.XpG(2);t.HbH(e.item)}}function v(o,c){if(1&o&&(t.j41(0,"div",4),t.DNE(1,I,1,2,"div",5),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.getItemResources())}}let h=(()=>{class o{item;unlockedItemIds;craftItem=new t.bkB;constructor(){}getItemSrc(e){let n=e.name.toLocaleLowerCase();n=n.replaceAll(" ","-");let i=e.id.toString().padStart(3,"00");return this.isItemLocked()?"./images/fh/items/item-back-fh.png":`./images/items/fh-${i}-${n}.jpeg`}isItemLocked(){return this.unlockedItemIds?.indexOf(this.item.id)<0}getItemResources(){return Object.keys(this.item.resources)}craft(){this.craftItem.emit(this.item.resources)}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=t.VBU({type:o,selectors:[["app-single-item"]],inputs:{item:"item",unlockedItemIds:"unlockedItemIds"},outputs:{craftItem:"craftItem"},decls:5,vars:3,consts:[[1,"item",3,"click"],[1,"id"],[3,"src"],["class","resources",4,"ngIf"],[1,"resources"],["class","icon",3,"class",4,"ngFor","ngForOf"],[1,"icon"]],template:function(n,i){1&n&&(t.j41(0,"div",0),t.bIt("click",function(){return i.craft()}),t.j41(1,"div",1),t.EFF(2),t.k0s(),t.nrm(3,"img",2),t.DNE(4,v,2,1,"div",3),t.k0s()),2&n&&(t.R7$(2),t.JRh(i.item.id),t.R7$(),t.Y8G("src",i.getItemSrc(i.item),t.B4B),t.R7$(),t.Y8G("ngIf",i.isItemLocked()))},dependencies:[l.MD,l.Sq,l.bT,m.YN],styles:[".item[_ngcontent-%COMP%]{position:relative}.item[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:10px}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:160px;height:240px}.item[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]{position:absolute;height:100%;display:flex;gap:.3rem;flex-direction:column;right:0;top:0;justify-content:center}.item[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:var(--font-color)}"]})}return o})();var d=s(2615),_=s(4384),C=s(1948);function y(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",4),t.nrm(1,"div",5),t.j41(2,"input",6),t.mxI("ngModelChange",function(i){const a=d.eBV(e).$implicit,g=t.XpG();return t.DH7(g.inventory[a],i)||(g.inventory[a]=i),d.Njj(i)}),t.k0s()()}if(2&o){const e=c.$implicit,n=t.XpG();t.R7$(),t.HbH(e),t.R7$(),t.R50("ngModel",n.inventory[e])}}function O(o,c){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"app-single-item",11),t.bIt("craftItem",function(i){d.eBV(e);const a=t.XpG(2);return d.Njj(a.craftItem(i))}),t.k0s()()}if(2&o){const e=c.$implicit,n=t.XpG(2);t.R7$(),t.Y8G("item",e)("unlockedItemIds",n.unlockedItemIds)}}function k(o,c){if(1&o&&(t.j41(0,"div",7)(1,"div",8),t.EFF(2),t.k0s(),t.j41(3,"div",9),t.DNE(4,O,2,2,"div",10),t.k0s()()),2&o){const e=c.$implicit,n=t.XpG();t.R7$(2),t.JRh(e),t.R7$(2),t.Y8G("ngForOf",n.getSlotItems(e))}}let R=(()=>{class o{dataLoader;db;unlockedItemIds;slots=Object.values(r.o);inventory={};head;body;legs;onehand;twohand;small;RESOURCE_KEYS;constructor(e,n){this.dataLoader=e,this.db=n}ngOnInit(){var e=this;return(0,f.A)(function*(){yield e.loadUnlockedItems()})()}getSlotItems(e){return this[e]}loadUnlockedItems(){var e=this;return(0,f.A)(function*(){const n=yield e.db.getUnlockedItems();e.unlockedItemIds=n.map(i=>i.id),e.loadItems()})()}craftItem(e){}loadItems(){const e=this.dataLoader.getUnlockedItems(this.unlockedItemIds);console.log(e),this.RESOURCE_KEYS=this.dataLoader.ALL_RESOURCE_KEYS,Object.entries({head:r.o.Head,body:r.o.Body,legs:r.o.Legs,onehand:r.o.Onehand,twohand:r.o.Twohand,small:r.o.Small}).forEach(([i,a])=>{this[i]=e.filter(g=>g?.slot?.toLocaleLowerCase()===a.toLocaleLowerCase())})}static \u0275fac=function(n){return new(n||o)(t.rXU(_.y),t.rXU(C.a))};static \u0275cmp=t.VBU({type:o,selectors:[["app-armory"]],decls:4,vars:2,consts:[[1,"filters","content"],["class","materials",4,"ngFor","ngForOf"],[1,"items-container"],["class","items-group",4,"ngFor","ngForOf"],[1,"materials"],[1,"icon"],["type","tel","placeholder","#",3,"ngModelChange","ngModel"],[1,"items-group"],[1,"title"],[1,"container"],[4,"ngFor","ngForOf"],[3,"craftItem","item","unlockedItemIds"]],template:function(n,i){1&n&&(t.j41(0,"div",0),t.DNE(1,y,3,3,"div",1),t.k0s(),t.j41(2,"div",2),t.DNE(3,k,5,2,"div",3),t.k0s()),2&n&&(t.R7$(),t.Y8G("ngForOf",i.RESOURCE_KEYS),t.R7$(2),t.Y8G("ngForOf",i.slots))},dependencies:[l.MD,l.Sq,m.YN,m.me,m.BC,m.vS,u.S,h],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:.3rem}.filters[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem}.filters[_ngcontent-%COMP%]   .materials[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-direction:row;align-items:center}@media (max-width: 768px){.container[_ngcontent-%COMP%]{justify-content:space-around}.filters[_ngcontent-%COMP%]{flex-direction:column}.title[_ngcontent-%COMP%]{justify-content:center}}"]})}return o})()}}]);