<!DOCTYPE html>
<html>
<head>
    <title>Simple Game</title>
</head>
<body>
    <h1>Simple Game</h1>
    
    <div id="game-content">
        <label for="sharedNumber">Shared Number:</label>
        <input type="number" id="sharedNumber" value="0">
    </div>

    <script>
        // Connect to the WebSocket server
        const ws = new WebSocket('ws://localhost:8080');

        // When the WebSocket connection opens, join or create a session
        ws.onopen = () => {
            const sessionId = prompt("Enter session ID or leave blank to create a new one:");
            ws.send(JSON.stringify({ type: 'join-session', sessionId }));
        };

        // Listen for messages from the server
        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);

            if (data.type === 'session-joined') {
                alert(`Joined session: ${data.sessionId}`);
            } else if (data.type === 'update-number') {
                // Update the number input when another client changes it
                document.getElementById('sharedNumber').value = data.value;
            }
        };

        // Listen for changes to the input field and send updates
        const numberInput = document.getElementById('sharedNumber');
        numberInput.addEventListener('input', () => {
            const newValue = numberInput.value;
            ws.send(JSON.stringify({ type: 'update-number', value: newValue }));
        });
    </script>
</body>
</html>