<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frosthaven Assistant</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="styles.css">
    <base href="./">
</head>

<body>
    <!-- master-container is a workaround to handle the focus event on all number fields in the page -->
    <div id="master-container">
        <h1> <img src="favicon.ico" /> Frosthaven Assistant</h1>
        <div class="row">
            <div class="game-setup">
                <button class="initiative" onclick="toggleTodoVisibility()">Setup todos<span>&#9660;</span></button>
                <ul id="todoList" onchange="toggleDone(event)">
                    <li><label><input type="checkbox">map tiles</label></li>
                    <li><label><input type="checkbox">map overlays</label></li>
                    <li><label><input type="checkbox">monsters</label></li>
                    <li><label><input type="checkbox">monster attack modifiers</label></li>
                    <li><label><input type="checkbox">monster conditional modifiers</label>
                    </li>
                    <li><label><input type="checkbox">player conditional modifiers</label>
                    </li>
                    <li><label><input type="checkbox">player boxes</label></li>
                    <li><label><input type="checkbox">battle goals</label></li>
                    <li><label><input type="checkbox">setup website</label></li>
                </ul>
            </div>
        </div>
        <div class="add-char">
            <div class="row">
                <button class="initiative" onclick="resetSaved()">New Game</button>
                <h3>Add Monster</h3>
                <div class="default-stats">
                    <label for="Type">Type: </label>
                    <select id="type" autocomplete="on"></select>
                </div>
                <div class="default-stats">
                    <label for="Level">Level: </label>
                    <input type="number" id="level" placeholder="#" value="1" />
                </div>
                <div class="default-stats">
                    <label for="Standee">Standee: </label>
                    <input type="number" id="standee-number" placeholder="#" />
                </div>
                <div class="default-stats">
                    <label for="Elite">Elite: </label>
                    <input type="checkbox" id="elite-monster" />
                </div>
                <button class="initiative" onclick="addCharacter()">Add Monster</button>
                <button class="attack" onclick="nextRound()">Next Round</button>
            </div>
        </div>
        <h3>Elements</h3>
        <span class="icon-wrapper">
            <svg class="clickable-icon" viewBox="0 0 197.55556 197.55556" onclick="toggleColor(this)" version="1.1"
                id="svg-fire" sodipodi:docname="fire.svg" inkscape:version="1.1.2 (0a00cf5339, 2022-02-04)"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
                xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg"
                xmlns:svg="http://www.w3.org/2000/svg">
                <path class="bg"
                    d="m 98.77778,194.73333 c -25.630363,0 -49.727202,-9.98114 -67.850807,-28.10475 C 12.803368,148.50498 2.8222266,124.40814 2.8222266,98.777777 2.8222266,73.14706 12.803368,49.050575 30.926973,30.92697 49.050578,12.803365 73.147417,2.8222231 98.77778,2.8222231 c 25.63036,0 49.7272,9.9811419 67.85081,28.1047469 18.1236,18.123605 28.10474,42.22009 28.10474,67.850807 0,25.630363 -9.98114,49.727203 -28.10474,67.850803 -18.12361,18.12361 -42.22045,28.10475 -67.85081,28.10475"
                >
                </path>
                <g id="outline" transform="matrix(0.35277777,0,0,-0.35277777,98.77778,1.9e-6)">
                    <path
                        d="m 0,0 c -37.793,0 -74.464,-7.405 -108.993,-22.01 -33.345,-14.104 -63.287,-34.291 -88.997,-60 -25.709,-25.71 -45.897,-55.652 -59.999,-88.996 C -272.595,-205.537 -280,-242.207 -280,-280 c 0,-37.793 7.405,-74.464 22.011,-108.993 14.102,-33.345 34.29,-63.287 59.999,-88.997 25.71,-25.709 55.652,-45.897 88.997,-59.999 C -74.464,-552.595 -37.793,-560 0,-560 c 37.793,0 74.464,7.405 108.993,22.011 33.345,14.102 63.287,34.29 88.997,59.999 25.709,25.71 45.897,55.652 59.999,88.997 14.606,34.529 22.011,71.2 22.011,108.993 0,37.793 -7.405,74.463 -22.011,108.994 -14.102,33.344 -34.29,63.286 -59.999,88.996 -25.71,25.709 -55.652,45.896 -88.997,60 C 74.464,-7.405 37.793,0 0,0 m 0,-16 c 145.803,0 264,-118.197 264,-264 0,-145.803 -118.197,-264 -264,-264 -145.803,0 -264,118.197 -264,264 0,145.803 118.197,264 264,264"
                        style="fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path1294"></path>
                </g>
                <g id="symbol" transform="matrix(0.35277777,0,0,-0.35277777,129.1384,74.102455)">
                    <path
                        d="m 0,0 c -42.5,34.5 -58.5,99.5 -47,143.5 -25.5,-2.5 -66.272,-25.288 -83.5,-89.5 -22,-82 43.996,-140.5 0,-170.5 -51.444,-35.079 -86.5,26 -82,82.5 -30,-23.5 -48.447,-119.579 -9.5,-178 28,-42 63.811,-66.136 109.516,-71.391 -14.745,10.442 -15.741,29.913 -10.516,44.891 7.5,21.5 32.239,31.107 55.5,49 26,20 37,40 38.5,49.5 13,-19.5 28.581,-48.317 15.5,-91 -6.013,-19.62 -16.979,-38.34 -34.339,-49.45 C 7.137,-266.249 71.825,-218.559 72,-134.5 72.156,-59.5 34.135,-27.709 0,0"
                        style="fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path1298"></path>
                </g>
            </svg>
        </span>
        <h3>Characters & Monsters</h3>
        <div class="creatures">
            <div class='creature-container' id="creaturesTable">
                <!-- Dynamic content will go here -->
            </div>
        </div>

        <h3>Battle Log</h3>
        <div id="battle-log-container">
            <ul id="battle-log">
            </ul>
        </div>
        <div>
            <span id="last-saved-timestamp"></span>
            <span id="loading-spinner"></span>
        </div>

        <!-- Attack Modal -->
        <div id="modal-attack" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeAttackModal()">&times;</span>
                <h3>Damage</h3>
                <span id="attack-combatants"></span>
                <br>

                <input type="number" id="attack-input" min="0" value="0">

                <button class="initiative" onclick="applyDamage(this.previousElementSibling)">OK</button>
                <!-- Icons (0-3) -->
                <div id="attack-conditions" class="conditions">
                    <!-- Conditions on target, if any -->
                </div>
            </div>
        </div>

        <!-- Conditions Modal -->
        <div id="modal-conditions" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeConditionsModal()">&times;</span>
                <input type="number" id="condition-armor" class="condition-input" min="0" value="0">
                <div class="condition-number-img">
                    <img id="armor-img" onclick="incrementInput('condition-armor')" src='images/action/shield.svg'>
                </div>
                <div class="condition-number"></div>
                <input type="number" id="condition-retaliate" class="condition-input" min="0" value="0">
                <div class="condition-number-img">
                    <img id="retaliate-img" onclick="incrementInput('condition-retaliate')"
                        src='images/action/retaliate.svg'>
                </div>
                <br>
                <hr>

                <input type="checkbox" id="condition-poison">
                <img id="poison-img" class="condition-img" src='images/condition/poison.svg'>
                <input type="checkbox" id="condition-brittle">
                <img id="brittle-img" class="condition-img" src='images/condition/brittle.svg'>
                <input type="checkbox" id="condition-ward">
                <img id="ward-img" class="condition-img" src='images/condition/ward.svg'>

                <button class="initiative condition-btn" onclick="applyCondition()">OK</button>
            </div>
        </div>
        <script src="data.js"></script>
        <script src="images.js"></script>
        <script src="script.js"></script>
    </div>
</body>

</html>