(self.webpackChunkfrosthaven_assistant_angular=self.webpackChunkfrosthaven_assistant_angular||[]).push([[792],{60:function(yt,ie,se){"use strict";var we=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(ie,"__esModule",{value:!0}),ie.PostgrestError=ie.PostgrestBuilder=ie.PostgrestTransformBuilder=ie.PostgrestFilterBuilder=ie.PostgrestQueryBuilder=ie.PostgrestClient=void 0;const ce=we(se(242));ie.PostgrestClient=ce.default;const Ne=we(se(666));ie.PostgrestQueryBuilder=Ne.default;const he=we(se(608));ie.PostgrestFilterBuilder=he.default;const D=we(se(342));ie.PostgrestTransformBuilder=D.default;const k=we(se(958));ie.PostgrestBuilder=k.default;const R=we(se(659));ie.PostgrestError=R.default,ie.default={PostgrestClient:ce.default,PostgrestQueryBuilder:Ne.default,PostgrestFilterBuilder:he.default,PostgrestTransformBuilder:D.default,PostgrestBuilder:k.default,PostgrestError:R.default}},242:function(yt,ie,se){"use strict";var we=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(ie,"__esModule",{value:!0});const ce=we(se(666)),Ne=we(se(608));class he{constructor(k,{headers:R={},schema:O,fetch:B}={}){this.url=k,this.headers=new Headers(R),this.schemaName=O,this.fetch=B}from(k){const R=new URL(`${this.url}/${k}`);return new ce.default(R,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(k){return new he(this.url,{headers:this.headers,schema:k,fetch:this.fetch})}rpc(k,R={},{head:O=!1,get:B=!1,count:ve}={}){var Te;let be;const ue=new URL(`${this.url}/rpc/${k}`);let F;O||B?(be=O?"HEAD":"GET",Object.entries(R).filter(([Yn,ln])=>void 0!==ln).map(([Yn,ln])=>[Yn,Array.isArray(ln)?`{${ln.join(",")}}`:`${ln}`]).forEach(([Yn,ln])=>{ue.searchParams.append(Yn,ln)})):(be="POST",F=R);const Ot=new Headers(this.headers);return ve&&Ot.set("Prefer",`count=${ve}`),new Ne.default({method:be,url:ue,headers:Ot,schema:this.schemaName,body:F,fetch:null!==(Te=this.fetch)&&void 0!==Te?Te:fetch})}}ie.default=he},286:(yt,ie,se)=>{"use strict";se.r(ie),se.d(ie,{Headers:()=>D,Request:()=>k,Response:()=>R,default:()=>he,fetch:()=>Ne});var ce=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();const Ne=ce.fetch,he=ce.fetch.bind(ce),D=ce.Headers,k=ce.Request,R=ce.Response},293:yt=>{function ie(we,ce,Ne,he,D,k,R){try{var O=we[k](R),B=O.value}catch(ve){return void Ne(ve)}O.done?ce(B):Promise.resolve(B).then(he,D)}yt.exports=function se(we){return function(){var ce=this,Ne=arguments;return new Promise(function(he,D){var k=we.apply(ce,Ne);function R(B){ie(k,he,D,R,O,"next",B)}function O(B){ie(k,he,D,R,O,"throw",B)}R(void 0)})}},yt.exports.__esModule=!0,yt.exports.default=yt.exports},342:function(yt,ie,se){"use strict";var we=this&&this.__importDefault||function(he){return he&&he.__esModule?he:{default:he}};Object.defineProperty(ie,"__esModule",{value:!0});const ce=we(se(958));ie.default=class Ne extends ce.default{select(D){let k=!1;const R=(D??"*").split("").map(O=>/\s/.test(O)&&!k?"":('"'===O&&(k=!k),O)).join("");return this.url.searchParams.set("select",R),this.headers.append("Prefer","return=representation"),this}order(D,{ascending:k=!0,nullsFirst:R,foreignTable:O,referencedTable:B=O}={}){const ve=B?`${B}.order`:"order",Te=this.url.searchParams.get(ve);return this.url.searchParams.set(ve,`${Te?`${Te},`:""}${D}.${k?"asc":"desc"}${void 0===R?"":R?".nullsfirst":".nullslast"}`),this}limit(D,{foreignTable:k,referencedTable:R=k}={}){return this.url.searchParams.set(typeof R>"u"?"limit":`${R}.limit`,`${D}`),this}range(D,k,{foreignTable:R,referencedTable:O=R}={}){const ve=typeof O>"u"?"limit":`${O}.limit`;return this.url.searchParams.set(typeof O>"u"?"offset":`${O}.offset`,`${D}`),this.url.searchParams.set(ve,""+(k-D+1)),this}abortSignal(D){return this.signal=D,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.headers.set("Accept","GET"===this.method?"application/json":"application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:D=!1,verbose:k=!1,settings:R=!1,buffers:O=!1,wal:B=!1,format:ve="text"}={}){var Te;const be=[D?"analyze":null,k?"verbose":null,R?"settings":null,O?"buffers":null,B?"wal":null].filter(Boolean).join("|"),ue=null!==(Te=this.headers.get("Accept"))&&void 0!==Te?Te:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${ve}; for="${ue}"; options=${be};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(D){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${D}`),this}}},608:function(yt,ie,se){"use strict";var we=this&&this.__importDefault||function(he){return he&&he.__esModule?he:{default:he}};Object.defineProperty(ie,"__esModule",{value:!0});const ce=we(se(342));ie.default=class Ne extends ce.default{eq(D,k){return this.url.searchParams.append(D,`eq.${k}`),this}neq(D,k){return this.url.searchParams.append(D,`neq.${k}`),this}gt(D,k){return this.url.searchParams.append(D,`gt.${k}`),this}gte(D,k){return this.url.searchParams.append(D,`gte.${k}`),this}lt(D,k){return this.url.searchParams.append(D,`lt.${k}`),this}lte(D,k){return this.url.searchParams.append(D,`lte.${k}`),this}like(D,k){return this.url.searchParams.append(D,`like.${k}`),this}likeAllOf(D,k){return this.url.searchParams.append(D,`like(all).{${k.join(",")}}`),this}likeAnyOf(D,k){return this.url.searchParams.append(D,`like(any).{${k.join(",")}}`),this}ilike(D,k){return this.url.searchParams.append(D,`ilike.${k}`),this}ilikeAllOf(D,k){return this.url.searchParams.append(D,`ilike(all).{${k.join(",")}}`),this}ilikeAnyOf(D,k){return this.url.searchParams.append(D,`ilike(any).{${k.join(",")}}`),this}is(D,k){return this.url.searchParams.append(D,`is.${k}`),this}in(D,k){const R=Array.from(new Set(k)).map(O=>"string"==typeof O&&new RegExp("[,()]").test(O)?`"${O}"`:`${O}`).join(",");return this.url.searchParams.append(D,`in.(${R})`),this}contains(D,k){return"string"==typeof k?this.url.searchParams.append(D,`cs.${k}`):Array.isArray(k)?this.url.searchParams.append(D,`cs.{${k.join(",")}}`):this.url.searchParams.append(D,`cs.${JSON.stringify(k)}`),this}containedBy(D,k){return"string"==typeof k?this.url.searchParams.append(D,`cd.${k}`):Array.isArray(k)?this.url.searchParams.append(D,`cd.{${k.join(",")}}`):this.url.searchParams.append(D,`cd.${JSON.stringify(k)}`),this}rangeGt(D,k){return this.url.searchParams.append(D,`sr.${k}`),this}rangeGte(D,k){return this.url.searchParams.append(D,`nxl.${k}`),this}rangeLt(D,k){return this.url.searchParams.append(D,`sl.${k}`),this}rangeLte(D,k){return this.url.searchParams.append(D,`nxr.${k}`),this}rangeAdjacent(D,k){return this.url.searchParams.append(D,`adj.${k}`),this}overlaps(D,k){return this.url.searchParams.append(D,"string"==typeof k?`ov.${k}`:`ov.{${k.join(",")}}`),this}textSearch(D,k,{config:R,type:O}={}){let B="";return"plain"===O?B="pl":"phrase"===O?B="ph":"websearch"===O&&(B="w"),this.url.searchParams.append(D,`${B}fts${void 0===R?"":`(${R})`}.${k}`),this}match(D){return Object.entries(D).forEach(([k,R])=>{this.url.searchParams.append(k,`eq.${R}`)}),this}not(D,k,R){return this.url.searchParams.append(D,`not.${k}.${R}`),this}or(D,{foreignTable:k,referencedTable:R=k}={}){return this.url.searchParams.append(R?`${R}.or`:"or",`(${D})`),this}filter(D,k,R){return this.url.searchParams.append(D,`${k}.${R}`),this}}},659:(yt,ie)=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});class se extends Error{constructor(ce){super(ce.message),this.name="PostgrestError",this.details=ce.details,this.hint=ce.hint,this.code=ce.code}}ie.default=se},666:function(yt,ie,se){"use strict";var we=this&&this.__importDefault||function(he){return he&&he.__esModule?he:{default:he}};Object.defineProperty(ie,"__esModule",{value:!0});const ce=we(se(608));ie.default=class Ne{constructor(D,{headers:k={},schema:R,fetch:O}){this.url=D,this.headers=new Headers(k),this.schema=R,this.fetch=O}select(D,{head:k=!1,count:R}={}){const O=k?"HEAD":"GET";let B=!1;const ve=(D??"*").split("").map(Te=>/\s/.test(Te)&&!B?"":('"'===Te&&(B=!B),Te)).join("");return this.url.searchParams.set("select",ve),R&&this.headers.append("Prefer",`count=${R}`),new ce.default({method:O,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(D,{count:k,defaultToNull:R=!0}={}){var O;if(k&&this.headers.append("Prefer",`count=${k}`),R||this.headers.append("Prefer","missing=default"),Array.isArray(D)){const ve=D.reduce((Te,be)=>Te.concat(Object.keys(be)),[]);if(ve.length>0){const Te=[...new Set(ve)].map(be=>`"${be}"`);this.url.searchParams.set("columns",Te.join(","))}}return new ce.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:D,fetch:null!==(O=this.fetch)&&void 0!==O?O:fetch})}upsert(D,{onConflict:k,ignoreDuplicates:R=!1,count:O,defaultToNull:B=!0}={}){var ve;if(this.headers.append("Prefer",`resolution=${R?"ignore":"merge"}-duplicates`),void 0!==k&&this.url.searchParams.set("on_conflict",k),O&&this.headers.append("Prefer",`count=${O}`),B||this.headers.append("Prefer","missing=default"),Array.isArray(D)){const be=D.reduce((ue,F)=>ue.concat(Object.keys(F)),[]);if(be.length>0){const ue=[...new Set(be)].map(F=>`"${F}"`);this.url.searchParams.set("columns",ue.join(","))}}return new ce.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:D,fetch:null!==(ve=this.fetch)&&void 0!==ve?ve:fetch})}update(D,{count:k}={}){var R;return k&&this.headers.append("Prefer",`count=${k}`),new ce.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:D,fetch:null!==(R=this.fetch)&&void 0!==R?R:fetch})}delete({count:D}={}){var k;return D&&this.headers.append("Prefer",`count=${D}`),new ce.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(k=this.fetch)&&void 0!==k?k:fetch})}}},958:function(yt,ie,se){"use strict";var we=se(293).default,ce=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(ie,"__esModule",{value:!0});const Ne=ce(se(286)),he=ce(se(659));ie.default=class D{constructor(R){var O,B;this.shouldThrowOnError=!1,this.method=R.method,this.url=R.url,this.headers=new Headers(R.headers),this.schema=R.schema,this.body=R.body,this.shouldThrowOnError=null!==(O=R.shouldThrowOnError)&&void 0!==O&&O,this.signal=R.signal,this.isMaybeSingle=null!==(B=R.isMaybeSingle)&&void 0!==B&&B,this.fetch=R.fetch?R.fetch:typeof fetch>"u"?Ne.default:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(R,O){return this.headers=new Headers(this.headers),this.headers.set(R,O),this}then(R,O){var B=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let Te=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var be=we(function*(ue){var F,Ot,Yn,ln;let Xe=null,st=null,yi=null,kn=ue.status,wr=ue.statusText;if(ue.ok){if("HEAD"!==B.method){const Cn=yield ue.text();""===Cn||(st="text/csv"===B.headers.get("Accept")||B.headers.get("Accept")&&null!==(F=B.headers.get("Accept"))&&void 0!==F&&F.includes("application/vnd.pgrst.plan+text")?Cn:JSON.parse(Cn))}const oo=null===(Ot=B.headers.get("Prefer"))||void 0===Ot?void 0:Ot.match(/count=(exact|planned|estimated)/),Zn=null===(Yn=ue.headers.get("content-range"))||void 0===Yn?void 0:Yn.split("/");oo&&Zn&&Zn.length>1&&(yi=parseInt(Zn[1])),B.isMaybeSingle&&"GET"===B.method&&Array.isArray(st)&&(st.length>1?(Xe={code:"PGRST116",details:`Results contain ${st.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},st=null,yi=null,kn=406,wr="Not Acceptable"):st=1===st.length?st[0]:null)}else{const oo=yield ue.text();try{Xe=JSON.parse(oo),Array.isArray(Xe)&&404===ue.status&&(st=[],Xe=null,kn=200,wr="OK")}catch{404===ue.status&&""===oo?(kn=204,wr="No Content"):Xe={message:oo}}if(Xe&&B.isMaybeSingle&&!(null===(ln=Xe?.details)||void 0===ln)&&ln.includes("0 rows")&&(Xe=null,kn=200,wr="OK"),Xe&&B.shouldThrowOnError)throw new he.default(Xe)}return{error:Xe,data:st,count:yi,status:kn,statusText:wr}});return function(ue){return be.apply(this,arguments)}}());return this.shouldThrowOnError||(Te=Te.catch(be=>{var ue,F,Ot;return{error:{message:`${null!==(ue=be?.name)&&void 0!==ue?ue:"FetchError"}: ${be?.message}`,details:`${null!==(F=be?.stack)&&void 0!==F?F:""}`,hint:"",code:`${null!==(Ot=be?.code)&&void 0!==Ot?Ot:""}`},data:null,count:null,status:0,statusText:""}})),Te.then(R,O)}returns(){return this}overrideTypes(){return this}}},983:(yt,ie,se)=>{"use strict";let we;function ce(){return we}function Ne(e){const n=we;return we=e,n}const D=Symbol("NotFound");function R(e){return e===D||"\u0275NotFound"===e?.name}function O(e,n){return Object.is(e,n)}Error;let B=null,ve=!1,Te=1;const ue=Symbol("SIGNAL");function F(e){const n=B;return B=e,n}const Xe={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function st(e){if(ve)throw new Error("");if(null===B)return;B.consumerOnSignalRead(e);const n=B.producersTail;if(void 0!==n&&n.producer===e)return;let t;const r=B.recomputing;if(r&&(t=void 0!==n?n.nextProducer:B.producers,void 0!==t&&t.producer===e))return B.producersTail=t,void(t.lastReadVersion=e.version);const o=e.consumersTail;if(void 0!==o&&o.consumer===B&&(!r||function tD(e,n){const t=n.producersTail;if(void 0!==t){let r=n.producers;do{if(r===e)return!0;if(r===t)break;r=r.nextProducer}while(void 0!==r)}return!1}(o,B)))return;const a=ra(B),i={producer:e,consumer:B,nextProducer:t,prevConsumer:o,lastReadVersion:e.version,nextConsumer:void 0};B.producersTail=i,void 0!==n?n.nextProducer=i:B.producers=i,a&&Cg(e,i)}function kn(e){if((!ra(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==Te)){if(!e.producerMustRecompute(e)&&!al(e))return void Zn(e);e.producerRecomputeValue(e),Zn(e)}}function wr(e){if(void 0===e.consumers)return;const n=ve;ve=!0;try{for(let t=e.consumers;void 0!==t;t=t.nextConsumer){const r=t.consumer;r.dirty||oo(r)}}finally{ve=n}}function hd(){return!1!==B?.consumerAllowSignalWrites}function oo(e){e.dirty=!0,wr(e),e.consumerMarkedDirty?.(e)}function Zn(e){e.dirty=!1,e.lastCleanEpoch=Te}function Cn(e){return e&&(e.producersTail=void 0,e.recomputing=!0),F(e)}function gi(e,n){if(F(n),!e)return;e.recomputing=!1;const t=e.producersTail;let r=void 0!==t?t.nextProducer:e.producers;if(void 0!==r){if(ra(e))do{r=fd(r)}while(void 0!==r);void 0!==t?t.nextProducer=void 0:e.producers=void 0}}function al(e){for(let n=e.producers;void 0!==n;n=n.nextProducer){const t=n.producer,r=n.lastReadVersion;if(r!==t.version||(kn(t),r!==t.version))return!0}return!1}function il(e){if(ra(e)){let n=e.producers;for(;void 0!==n;)n=fd(n)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function Cg(e,n){const t=e.consumersTail,r=ra(e);if(void 0!==t?(n.nextConsumer=t.nextConsumer,t.nextConsumer=n):(n.nextConsumer=void 0,e.consumers=n),n.prevConsumer=t,e.consumersTail=n,!r)for(let o=e.producers;void 0!==o;o=o.nextProducer)Cg(o.producer,o)}function fd(e){const n=e.producer,t=e.nextProducer,r=e.nextConsumer,o=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,void 0!==r?r.prevConsumer=o:n.consumersTail=o,void 0!==o)o.nextConsumer=r;else if(n.consumers=r,!ra(n)){let a=n.producers;for(;void 0!==a;)a=fd(a)}return t}function ra(e){return e.consumerIsAlwaysLive||void 0!==e.consumers}const ao=Symbol("UNSET"),oa=Symbol("COMPUTING"),kr=Symbol("ERRORED"),rD={...Xe,value:ao,dirty:!0,error:null,equal:O,kind:"computed",producerMustRecompute:e=>e.value===ao||e.value===oa,producerRecomputeValue(e){if(e.value===oa)throw new Error("");const n=e.value;e.value=oa;const t=Cn(e);let r,o=!1;try{r=e.computation(),F(null),o=n!==ao&&n!==kr&&r!==kr&&e.equal(n,r)}catch(a){r=kr,e.error=a}finally{gi(e,t)}o?e.value=n:(e.value=r,e.version++)}};let Eg=function oD(){throw new Error};function Dg(e){Eg(e)}function iD(e,n){const t=Object.create(Sg);t.value=e,void 0!==n&&(t.equal=n);const r=()=>function sD(e){return st(e),e.value}(t);return r[ue]=t,[r,i=>gd(t,i),i=>function xg(e,n){hd()||Dg(e),gd(e,n(e.value))}(t,i)]}function gd(e,n){hd()||Dg(e),e.equal(e.value,n)||(e.value=n,function lD(e){e.version++,function yi(){Te++}(),wr(e)}(e))}const Sg={...Xe,equal:O,value:void 0,kind:"signal"};function Je(e){return"function"==typeof e}function Tg(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const vd=Tg(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function bd(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class Gt{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const a of t)a.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Je(r))try{r()}catch(a){n=a instanceof vd?a.errors:[a]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const a of o)try{Ag(a)}catch(i){n=n??[],i instanceof vd?n=[...n,...i.errors]:n.push(i)}}if(n)throw new vd(n)}}add(n){var t;if(n&&n!==this)if(this.closed)Ag(n);else{if(n instanceof Gt){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&bd(t,n)}remove(n){const{_finalizers:t}=this;t&&bd(t,n),n instanceof Gt&&n._removeParent(this)}}Gt.EMPTY=(()=>{const e=new Gt;return e.closed=!0,e})();const Ig=Gt.EMPTY;function Mg(e){return e instanceof Gt||e&&"closed"in e&&Je(e.remove)&&Je(e.add)&&Je(e.unsubscribe)}function Ag(e){Je(e)?e():e.unsubscribe()}const io={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ll={setTimeout(e,n,...t){const{delegate:r}=ll;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=ll;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Ng(e){ll.setTimeout(()=>{const{onUnhandledError:n}=io;if(!n)throw e;n(e)})}function _d(){}const uD=wd("C",void 0,void 0);function wd(e,n,t){return{kind:e,value:n,error:t}}let so=null;function ul(e){if(io.useDeprecatedSynchronousErrorHandling){const n=!so;if(n&&(so={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=so;if(so=null,t)throw r}}else e()}class kd extends Gt{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Mg(n)&&n.add(this)):this.destination=yD}static create(n,t,r){return new Ed(n,t,r)}next(n){this.isStopped?Dd(function dD(e){return wd("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Dd(function cD(e){return wd("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Dd(uD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const pD=Function.prototype.bind;function Cd(e,n){return pD.call(e,n)}class hD{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){cl(r)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){cl(r)}else cl(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){cl(t)}}}class Ed extends kd{constructor(n,t,r){let o;if(super(),Je(n)||!n)o={next:n??void 0,error:t??void 0,complete:r??void 0};else{let a;this&&io.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&Cd(n.next,a),error:n.error&&Cd(n.error,a),complete:n.complete&&Cd(n.complete,a)}):o=n}this.destination=new hD(o)}}function cl(e){io.useDeprecatedSynchronousErrorHandling?function mD(e){io.useDeprecatedSynchronousErrorHandling&&so&&(so.errorThrown=!0,so.error=e)}(e):Ng(e)}function Dd(e,n){const{onStoppedNotification:t}=io;t&&ll.setTimeout(()=>t(e,n))}const yD={closed:!0,next:_d,error:function fD(e){throw e},complete:_d},xd="function"==typeof Symbol&&Symbol.observable||"@@observable";function dl(e){return e}let gt=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,o){const a=function vD(e){return e&&e instanceof kd||function gD(e){return e&&Je(e.next)&&Je(e.error)&&Je(e.complete)}(e)&&Mg(e)}(t)?t:new Ed(t,r,o);return ul(()=>{const{operator:i,source:s}=this;a.add(i?i.call(a,s):s?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Og(r))((o,a)=>{const i=new Ed({next:s=>{try{t(s)}catch(l){a(l),i.unsubscribe()}},error:a,complete:o});this.subscribe(i)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[xd](){return this}pipe(...t){return function Rg(e){return 0===e.length?dl:1===e.length?e[0]:function(t){return e.reduce((r,o)=>o(r),t)}}(t)(this)}toPromise(t){return new(t=Og(t))((r,o)=>{let a;this.subscribe(i=>a=i,i=>o(i),()=>r(a))})}}return e.create=n=>new e(n),e})();function Og(e){var n;return null!==(n=e??io.Promise)&&void 0!==n?n:Promise}const bD=Tg(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Cr=(()=>{class e extends gt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Pg(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new bD}next(t){ul(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){ul(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ul(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:o,observers:a}=this;return r||o?Ig:(this.currentObservers=null,a.push(t),new Gt(()=>{this.currentObservers=null,bd(a,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:o,isStopped:a}=this;r?t.error(o):a&&t.complete()}asObservable(){const t=new gt;return t.source=this,t}}return e.create=(n,t)=>new Pg(n,t),e})();class Pg extends Cr{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:Ig}}class En extends Cr{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}const Fg="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class _ extends Error{code;constructor(n,t){super(function Dn(e,n){return`${function _D(e){return`NG0${Math.abs(e)}`}(e)}${n?": "+n:""}`}(n,t)),this.code=n}}const ze=globalThis;function _e(e){for(let n in e)if(e[n]===_e)return n;throw Error("")}function wD(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function un(e){if("string"==typeof e)return e;if(Array.isArray(e))return`[${e.map(un).join(", ")}]`;if(null==e)return""+e;const n=e.overriddenName||e.name;if(n)return`${n}`;const t=e.toString();if(null==t)return""+t;const r=t.indexOf("\n");return r>=0?t.slice(0,r):t}function Sd(e,n){return e?n?`${e} ${n}`:e:n||""}const kD=_e({__forward_ref__:_e});function Oe(e){return e.__forward_ref__=Oe,e.toString=function(){return un(this())},e}function ee(e){return ml(e)?e():e}function ml(e){return"function"==typeof e&&e.hasOwnProperty(kD)&&e.__forward_ref__===Oe}function U(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function aa(e){return{providers:e.providers||[],imports:e.imports||[]}}function pl(e){return function TD(e,n){return e.hasOwnProperty(n)&&e[n]||null}(e,fl)}function hl(e){return e&&e.hasOwnProperty(Td)?e[Td]:null}const fl=_e({\u0275prov:_e}),Td=_e({\u0275inj:_e});class N{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(n,t){this._desc=n,this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=U({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Md(e){return e&&!!e.\u0275providers}const Ad=_e({\u0275cmp:_e}),RD=_e({\u0275dir:_e}),OD=_e({\u0275pipe:_e}),uo=_e({\u0275fac:_e}),_i=_e({__NG_ELEMENT_ID__:_e}),Bg=_e({__NG_ENV_ID__:_e});function Y(e){return"string"==typeof e?e:null==e?"":String(e)}const Nd=_e({ngErrorCode:_e}),Vg=_e({ngErrorMessage:_e}),wi=_e({ngTokenPath:_e});function Rd(e,n){return Hg("",-200,n)}function Od(e,n){throw new _(-201,!1)}function Hg(e,n,t){const r=new _(n,e);return r[Nd]=n,r[Vg]=e,t&&(r[wi]=t),r}let Pd;function Ug(){return Pd}function Pt(e){const n=Pd;return Pd=e,n}function zg(e,n,t){const r=pl(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:8&t?null:void 0!==n?n:void Od()}const co={},Fd="__NG_DI_FLAG__";class VD{injector;constructor(n){this.injector=n}retrieve(n,t){const r=ki(t)||0;try{return this.injector.get(n,8&r?null:co,r)}catch(o){if(R(o))return o;throw o}}}function $D(e,n=0){const t=ce();if(void 0===t)throw new _(-203,!1);if(null===t)return zg(e,void 0,n);{const r=function HD(e){return{optional:!!(8&e),host:!!(1&e),self:!!(2&e),skipSelf:!!(4&e)}}(n),o=t.retrieve(e,r);if(R(o)){if(r.optional)return null;throw o}return o}}function H(e,n=0){return(Ug()||$D)(ee(e),n)}function P(e,n){return H(e,ki(n))}function ki(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ld(e){const n=[];for(let t=0;t<e.length;t++){const r=ee(e[t]);if(Array.isArray(r)){if(0===r.length)throw new _(900,!1);let o,a=0;for(let i=0;i<r.length;i++){const s=r[i],l=UD(s);"number"==typeof l?-1===l?o=s.token:a|=l:o=s}n.push(H(o,a))}else n.push(H(r))}return n}function Ci(e,n){return e[Fd]=n,e.prototype[Fd]=n,e}function UD(e){return e[Fd]}function mo(e,n){return e.hasOwnProperty(uo)?e[uo]:null}function ia(e,n){e.forEach(t=>Array.isArray(t)?ia(t,n):n(t))}function qg(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function yl(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function vl(e,n,t){let r=Ei(e,n);return r>=0?e[1|r]=t:(r=~r,function Kg(e,n,t,r){let o=e.length;if(o==n)e.push(t,r);else if(1===o)e.push(r,e[0]),e[0]=t;else{for(o--,e.push(e[o-1],e[o]);o>n;)e[o]=e[o-2],o--;e[n]=t,e[n+1]=r}}(e,r,n,t)),r}function jd(e,n){const t=Ei(e,n);if(t>=0)return e[1|t]}function Ei(e,n){return function GD(e,n,t){let r=0,o=e.length>>t;for(;o!==r;){const a=r+(o-r>>1),i=e[a<<t];if(n===i)return a<<t;i>n?o=a:r=a+1}return~(o<<t)}(e,n,1)}const Fn={},Pe=[],po=new N(""),Qg=new N("",-1),Bd=new N("");class bl{get(n,t=co){if(t===co){const o=Hg("",-201);throw o.name="\u0275NotFound",o}return t}}function ke(e){return e[Ad]||null}function Et(e){return e[RD]||null}function xn(e){return e[OD]||null}function WD(...e){return{\u0275providers:Hd(0,e),\u0275fromNgModule:!0}}function Hd(e,...n){const t=[],r=new Set;let o;const a=i=>{t.push(i)};return ia(n,i=>{const s=i;_l(s,a,[],r)&&(o||=[],o.push(s))}),void 0!==o&&Jg(o,a),t}function Jg(e,n){for(let t=0;t<e.length;t++){const{ngModule:r,providers:o}=e[t];Ud(o,a=>{n(a,r)})}}function _l(e,n,t,r){if(!(e=ee(e)))return!1;let o=null,a=hl(e);const i=!a&&ke(e);if(a||i){if(i&&!i.standalone)return!1;o=e}else{const l=e.ngModule;if(a=hl(l),!a)return!1;o=l}const s=r.has(o);if(i){if(s)return!1;if(r.add(o),i.dependencies){const l="function"==typeof i.dependencies?i.dependencies():i.dependencies;for(const u of l)_l(u,n,t,r)}}else{if(!a)return!1;{if(null!=a.imports&&!s){let u;r.add(o);try{ia(a.imports,c=>{_l(c,n,t,r)&&(u||=[],u.push(c))})}finally{}void 0!==u&&Jg(u,n)}if(!s){const u=mo(o)||(()=>new o);n({provide:o,useFactory:u,deps:Pe},o),n({provide:Bd,useValue:o,multi:!0},o),n({provide:po,useValue:()=>H(o),multi:!0},o)}const l=a.providers;if(null!=l&&!s){const u=e;Ud(l,c=>{n(c,u)})}}}return o!==e&&void 0!==e.providers}function Ud(e,n){for(let t of e)Md(t)&&(t=t.\u0275providers),Array.isArray(t)?Ud(t,n):n(t)}const KD=_e({provide:String,useValue:_e});function zd(e){return null!==e&&"object"==typeof e&&KD in e}function Xn(e){return"function"==typeof e}const Gd=new N(""),wl={},ev={};let qd;function Wd(){return void 0===qd&&(qd=new bl),qd}class Wt{}class ho extends Wt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(n,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,Qd(n,i=>this.processProvider(i)),this.records.set(Qg,sa(void 0,this)),o.has("environment")&&this.records.set(Wt,sa(void 0,this));const a=this.records.get(Gd);null!=a&&"string"==typeof a.value&&this.scopes.add(a.value),this.injectorDefTypes=new Set(this.get(Bd,Pe,{self:!0}))}retrieve(n,t){const r=ki(t)||0;try{return this.get(n,co,r)}catch(o){if(R(o))return o;throw o}}destroy(){xi(this),this._destroyed=!0;const n=F(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),F(n)}}onDestroy(n){return xi(this),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){xi(this);const t=Ne(this),r=Pt(void 0);try{return n()}finally{Ne(t),Pt(r)}}get(n,t=co,r){if(xi(this),n.hasOwnProperty(Bg))return n[Bg](this);const o=ki(r),i=Ne(this),s=Pt(void 0);try{if(!(4&o)){let u=this.records.get(n);if(void 0===u){const c=function XD(e){return"function"==typeof e||"object"==typeof e&&"InjectionToken"===e.ngMetadataName}(n)&&pl(n);u=c&&this.injectableDefInScope(c)?sa(Kd(n),wl):null,this.records.set(n,u)}if(null!=u)return this.hydrate(n,u,o)}return(2&o?Wd():this.parent).get(n,t=8&o&&t===co?null:t)}catch(l){const u=function jD(e){return e[Nd]}(l);throw-200===u||-201===u?new _(u,null):l}finally{Pt(s),Ne(i)}}resolveInjectorInitializers(){const n=F(null),t=Ne(this),r=Pt(void 0);try{const a=this.get(po,Pe,{self:!0});for(const i of a)i()}finally{Ne(t),Pt(r),F(n)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(un(r));return`R3Injector[${n.join(", ")}]`}processProvider(n){let t=Xn(n=ee(n))?n:ee(n&&n.provide);const r=function JD(e){return zd(e)?sa(void 0,e.useValue):sa(tv(e),wl)}(n);if(!Xn(n)&&!0===n.multi){let o=this.records.get(t);o||(o=sa(void 0,wl,!0),o.factory=()=>Ld(o.multi),this.records.set(t,o)),t=n,o.multi.push(n)}this.records.set(t,r)}hydrate(n,t,r){const o=F(null);try{if(t.value===ev)throw Rd(un(n));return t.value===wl&&(t.value=ev,t.value=t.factory(void 0,r)),"object"==typeof t.value&&t.value&&function ZD(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{F(o)}}injectableDefInScope(n){if(!n.providedIn)return!1;const t=ee(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){const t=this._onDestroyHooks.indexOf(n);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Kd(e){const n=pl(e),t=null!==n?n.factory:mo(e);if(null!==t)return t;if(e instanceof N)throw new _(204,!1);if(e instanceof Function)return function QD(e){if(e.length>0)throw new _(204,!1);const t=function ID(e){return(e?.[fl]??null)||null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new _(204,!1)}function tv(e,n,t){let r;if(Xn(e)){const o=ee(e);return mo(o)||Kd(o)}if(zd(e))r=()=>ee(e.useValue);else if(function Zg(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Ld(e.deps||[]));else if(function Yg(e){return!(!e||!e.useExisting)}(e))r=(o,a)=>H(ee(e.useExisting),void 0!==a&&8&a?8:void 0);else{const o=ee(e&&(e.useClass||e.provide));if(!function YD(e){return!!e.deps}(e))return mo(o)||Kd(o);r=()=>new o(...Ld(e.deps))}return r}function xi(e){if(e.destroyed)throw new _(205,!1)}function sa(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function Qd(e,n){for(const t of e)Array.isArray(t)?Qd(t,n):t&&Md(t)?Qd(t.\u0275providers,n):n(t)}function Jd(e,n){let t;e instanceof ho?(xi(e),t=e):t=new VD(e);const o=Ne(t),a=Pt(void 0);try{return n()}finally{Ne(o),Pt(a)}}const G=26;function He(e){return Array.isArray(e)&&"object"==typeof e[1]}function Dt(e){return Array.isArray(e)&&!0===e[1]}function rv(e){return!!(4&e.flags)}function Sr(e){return e.componentOffset>-1}function ma(e){return!(1&~e.flags)}function Qt(e){return!!e.template}function Tr(e){return!!(512&e[2])}function nr(e){return!(256&~e[2])}function ut(e){for(;Array.isArray(e);)e=e[0];return e}function pa(e,n){return ut(n[e])}function xt(e,n){return ut(n[e.index])}function ha(e,n){return e.data[n]}function bo(e,n){return e[n]}function St(e,n){const t=n[e];return He(t)?t:t[0]}function tm(e){return!(128&~e[2])}function _t(e,n){return null==n?null:e[n]}function uv(e){e[17]=0}function cv(e){1024&e[2]||(e[2]|=1024,tm(e)&&fa(e))}function Dl(e){return!!(9216&e[2]||e[24]?.dirty)}function nm(e){e[10].changeDetectionScheduler?.notify(8),64&e[2]&&(e[2]|=1024),Dl(e)&&fa(e)}function fa(e){e[10].changeDetectionScheduler?.notify(0);let n=rr(e);for(;null!==n&&!(8192&n[2])&&(n[2]|=8192,tm(n));)n=rr(n)}function xl(e,n){if(nr(e))throw new _(911,!1);null===e[21]&&(e[21]=[]),e[21].push(n)}function rr(e){const n=e[3];return Dt(n)?n[3]:n}function mv(e){return e[7]??=[]}function pv(e){return e.cleanup??=[]}const Q={lFrame:Tv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let am=!1;function hv(){Q.lFrame.elementDepthCount--}function im(){return Q.bindingsEnabled}function yv(e){return Q.skipHydrationRootTNode===e}function gv(){Q.skipHydrationRootTNode=null}function C(){return Q.lFrame.lView}function re(){return Q.lFrame.tView}function mt(e){return Q.lFrame.contextLView=e,e[8]}function pt(e){return Q.lFrame.contextLView=null,e}function oe(){let e=vv();for(;null!==e&&64===e.type;)e=e.parent;return e}function vv(){return Q.lFrame.currentTNode}function or(e,n){const t=Q.lFrame;t.currentTNode=e,t.isParent=n}function bv(){return Q.lFrame.isParent}function Cv(){return am}function Sl(e){const n=am;return am=e,n}function Tt(){const e=Q.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function Jt(){return Q.lFrame.bindingIndex++}function ir(e){const n=Q.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function mx(e,n){const t=Q.lFrame;t.bindingIndex=t.bindingRootIndex=e,sm(n)}function sm(e){Q.lFrame.currentDirectiveIndex=e}function um(){return Q.lFrame.currentQueryIndex}function Tl(e){Q.lFrame.currentQueryIndex=e}function hx(e){const n=e[1];return 2===n.type?n.declTNode:1===n.type?e[5]:null}function xv(e,n,t){if(4&t){let o=n,a=e;for(;!(o=o.parent,null!==o||1&t||(o=hx(a),null===o||(a=a[14],10&o.type))););if(null===o)return!1;n=o,e=a}const r=Q.lFrame=Sv();return r.currentTNode=n,r.lView=e,!0}function cm(e){const n=Sv(),t=e[1];Q.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function Sv(){const e=Q.lFrame,n=null===e?null:e.child;return null===n?Tv(e):n}function Tv(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function Iv(){const e=Q.lFrame;return Q.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Mv=Iv;function dm(){const e=Iv();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ht(){return Q.lFrame.selectedIndex}function _o(e){Q.lFrame.selectedIndex=e}function jn(){const e=Q.lFrame;return ha(e.tView,e.selectedIndex)}function mm(){Q.lFrame.currentNamespace="svg"}let Av=!0;function Il(){return Av}function Mi(e){Av=e}function Nv(e,n=null,t=null,r){const o=function Rv(e,n=null,t=null,r,o=new Set){const a=[t||Pe,WD(e)];return r=r||("object"==typeof e?void 0:un(e)),new ho(a,n||Wd(),r||null,o)}(e,n,t,r);return o.resolveInjectorInitializers(),o}class Yt{static THROW_IF_NOT_FOUND=co;static NULL=new bl;static create(n,t){if(Array.isArray(n))return Nv({name:""},t,n,"");{const r=n.name??"";return Nv({name:r},n.parent,n.providers,r)}}static \u0275prov=U({token:Yt,providedIn:"any",factory:()=>H(Qg)});static __NG_ELEMENT_ID__=-1}const Bn=new N("");let sr=(()=>class e{static __NG_ELEMENT_ID__=_x;static __NG_ENV_ID__=t=>t})();class Ov extends sr{_lView;constructor(n){super(),this._lView=n}get destroyed(){return nr(this._lView)}onDestroy(n){const t=this._lView;return xl(t,n),()=>function rm(e,n){if(null===e[21])return;const t=e[21].indexOf(n);-1!==t&&e[21].splice(t,1)}(t,n)}}function _x(){return new Ov(C())}class ga{_console=console;handleError(n){this._console.error("ERROR",n)}}const lr=new N("",{providedIn:"root",factory:()=>{const e=P(Wt);let n;return t=>{e.destroyed&&!n?setTimeout(()=>{throw t}):(n??=e.get(ga),n.handleError(t))}}}),Pv={provide:po,useValue:()=>{P(ga)},multi:!0};function Ir(e,n){const[t,r,o]=iD(e,n?.equal),a=t;return a.set=r,a.update=o,a.asReadonly=pm.bind(a),a}function pm(){const e=this[ue];if(void 0===e.readonlyFn){const n=()=>this();n[ue]=e,e.readonlyFn=n}return e.readonlyFn}function Lv(e){return function Fv(e){return"function"==typeof e&&void 0!==e[ue]}(e)&&"function"==typeof e.set}class wo{}const jv=new N("",{providedIn:"root",factory:()=>!1}),Bv=new N(""),Vv=new N("");let ko=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new En(!1);get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new gt(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=U({token:e,providedIn:"root",factory:()=>new e})}return e})(),fm=(()=>{class e{internalPendingTasks=P(ko);scheduler=P(wo);errorHandler=P(lr);add(){const t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){const r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=U({token:e,providedIn:"root",factory:()=>new e})}return e})();function Ai(...e){}let $v=(()=>{class e{static \u0275prov=U({token:e,providedIn:"root",factory:()=>new Cx})}return e})();class Cx{dirtyEffectCount=0;queues=new Map;add(n){this.enqueue(n),this.schedule(n)}schedule(n){n.dirty&&this.dirtyEffectCount++}remove(n){const r=this.queues.get(n.zone);r.has(n)&&(r.delete(n),n.dirty&&this.dirtyEffectCount--)}enqueue(n){const t=n.zone;this.queues.has(t)||this.queues.set(t,new Set);const r=this.queues.get(t);r.has(n)||r.add(n)}flush(){for(;this.dirtyEffectCount>0;){let n=!1;for(const[t,r]of this.queues)n||=null===t?this.flushQueue(r):t.run(()=>this.flushQueue(r));n||(this.dirtyEffectCount=0)}}flushQueue(n){let t=!1;for(const r of n)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}}let Hv=null;function Ni(){return Hv}class Dx{}function Uv(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[o,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===n)return decodeURIComponent(a)}return null}class zv{}function Gv(e,n,t,r,o,a,i){try{var s=e[a](i),l=s.value}catch(u){return void t(u)}s.done?n(l):Promise.resolve(l).then(r,o)}function b(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function i(l){Gv(a,r,o,i,s,"next",l)}function s(l){Gv(a,r,o,i,s,"throw",l)}i(void 0)})}}function Vn(e){return n=>{if(function Tx(e){return Je(e?.lift)}(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Sn(e,n,t,r,o){return new Ix(e,n,t,r,o)}class Ix extends kd{constructor(n,t,r,o,a,i){super(n),this.onFinalize=a,this.shouldUnsubscribe=i,this._next=t?function(s){try{t(s)}catch(l){n.error(l)}}:super._next,this._error=o?function(s){try{o(s)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(s){n.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Ft(e,n){return Vn((t,r)=>{let o=0;t.subscribe(Sn(r,a=>{r.next(e.call(n,a,o++))}))})}function ur(e){return{toString:e}.toString()}const ba="__parameters__";function wa(e,n,t){return ur(()=>{const r=function ym(e){return function(...t){if(e){const r=e(...t);for(const o in r)this[o]=r[o]}}}(n);function o(...a){if(this instanceof o)return r.apply(this,a),this;const i=new o(...a);return s.annotation=i,s;function s(l,u,c){const d=l.hasOwnProperty(ba)?l[ba]:Object.defineProperty(l,ba,{value:[]})[ba];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(i),l}}return o.prototype.ngMetadataName=e,o.annotationCls=o,o})}const gm=Ci(wa("Optional"),8),vm=Ci(wa("SkipSelf"),4);class Vx{previousValue;currentValue;firstChange;constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Kv(e,n,t,r){null!==n?n.applyValueToInputSignal(n,r):e[t]=r}const Mr=(()=>{const e=()=>Qv;return e.ngInherit=!0,e})();function Qv(e){return e.type.prototype.ngOnChanges&&(e.setInput=Hx),$x}function $x(){const e=Yv(this),n=e?.current;if(n){const t=e.previous;if(t===Fn)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function Hx(e,n,t,r,o){const a=this.declaredInputs[r],i=Yv(e)||function Ux(e,n){return e[Jv]=n}(e,{previous:Fn,current:null}),s=i.current||(i.current={}),l=i.previous,u=l[a];s[a]=new Vx(u&&u.currentValue,t,l===Fn),Kv(e,n,o,t)}const Jv="__ngSimpleChanges__";function Yv(e){return e[Jv]||null}const Co=[],Ee=function(e,n=null,t){for(let r=0;r<Co.length;r++)(0,Co[r])(e,n,t)};function Zv(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const a=e.data[t].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:s,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=a;i&&(e.contentHooks??=[]).push(-t,i),s&&((e.contentHooks??=[]).push(t,s),(e.contentCheckHooks??=[]).push(t,s)),l&&(e.viewHooks??=[]).push(-t,l),u&&((e.viewHooks??=[]).push(t,u),(e.viewCheckHooks??=[]).push(t,u)),null!=c&&(e.destroyHooks??=[]).push(t,c)}}function Al(e,n,t){Xv(e,n,3,t)}function Nl(e,n,t,r){(3&e[2])===t&&Xv(e,n,t,r)}function _m(e,n){let t=e[2];(3&t)===n&&(t&=16383,t+=1,e[2]=t)}function Xv(e,n,t,r){const a=r??-1,i=n.length-1;let s=0;for(let l=void 0!==r?65535&e[17]:0;l<i;l++)if("number"==typeof n[l+1]){if(s=n[l],null!=r&&s>=r)break}else n[l]<0&&(e[17]+=65536),(s<a||-1==a)&&(Kx(e,t,n,l),e[17]=(4294901760&e[17])+l+2),l++}function e1(e,n){Ee(4,e,n);const t=F(null);try{n.call(e)}finally{F(t),Ee(5,e,n)}}function Kx(e,n,t,r){const o=t[r]<0,a=t[r+1],s=e[o?-t[r]:t[r]];o?e[2]>>14<e[17]>>16&&(3&e[2])===n&&(e[2]+=16384,e1(s,a)):e1(s,a)}class Oi{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(n,t,r,o){this.factory=n,this.name=o,this.canSeeViewProviders=t,this.injectImpl=r}}function n1(e){return 3===e||4===e||6===e}function r1(e){return 64===e.charCodeAt(0)}function Ca(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const o=n[r];"number"==typeof o?t=o:0===t||o1(e,t,o,0,-1===t||2===t?n[++r]:null)}}return e}function o1(e,n,t,r,o){let a=0,i=e.length;if(-1===n)i=-1;else for(;a<e.length;){const s=e[a++];if("number"==typeof s){if(s===n){i=-1;break}if(s>n){i=a-1;break}}}for(;a<e.length;){const s=e[a];if("number"==typeof s)break;if(s===t)return void(null!==o&&(e[a+1]=o));a++,null!==o&&a++}-1!==i&&(e.splice(i,0,n),a=i+1),e.splice(a++,0,t),null!==o&&e.splice(a++,0,o)}function km(e){return-1!==e}function Pi(e){return 32767&e}function Fi(e,n){let t=function Zx(e){return e>>16}(e),r=n;for(;t>0;)r=r[14],t--;return r}let Cm=!0;function Rl(e){const n=Cm;return Cm=e,n}let Xx=0;const $n={};function Ol(e,n){const t=s1(e,n);if(-1!==t)return t;const r=n[1];r.firstCreatePass&&(e.injectorIndex=n.length,Em(r.data,e),Em(n,null),Em(r.blueprint,null));const o=Pl(e,n),a=e.injectorIndex;if(km(o)){const i=Pi(o),s=Fi(o,n),l=s[1].data;for(let u=0;u<8;u++)n[a+u]=s[i+u]|l[i+u]}return n[a+8]=o,a}function Em(e,n){e.push(0,0,0,0,0,0,0,0,n)}function s1(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Pl(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,o=n;for(;null!==o;){if(r=h1(o),null===r)return-1;if(t++,o=o[14],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Dm(e,n,t){!function eS(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(_i)&&(r=t[_i]),null==r&&(r=t[_i]=Xx++);const o=255&r;n.data[e+(o>>5)]|=1<<o}(e,n,t)}function l1(e,n,t){if(8&t||void 0!==e)return e;Od()}function u1(e,n,t,r){if(8&t&&void 0===r&&(r=null),!(3&t)){const o=e[9],a=Pt(void 0);try{return o?o.get(n,r,8&t):zg(n,r,8&t)}finally{Pt(a)}}return l1(r,0,t)}function c1(e,n,t,r=0,o){if(null!==e){if(2048&n[2]&&!(2&r)){const i=function aS(e,n,t,r,o){let a=e,i=n;for(;null!==a&&null!==i&&2048&i[2]&&!Tr(i);){const s=d1(a,i,t,2|r,$n);if(s!==$n)return s;let l=a.parent;if(!l){const u=i[20];if(u){const c=u.get(t,$n,r);if(c!==$n)return c}l=h1(i),i=i[14]}a=l}return o}(e,n,t,r,$n);if(i!==$n)return i}const a=d1(e,n,t,r,$n);if(a!==$n)return a}return u1(n,t,r,o)}function d1(e,n,t,r,o){const a=function rS(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(_i)?e[_i]:void 0;return"number"==typeof n?n>=0?255&n:oS:n}(t);if("function"==typeof a){if(!xv(n,e,r))return 1&r?l1(o,0,r):u1(n,t,r,o);try{let i;if(i=a(r),null!=i||8&r)return i;Od()}finally{Mv()}}else if("number"==typeof a){let i=null,s=s1(e,n),l=-1,u=1&r?n[15][5]:null;for((-1===s||4&r)&&(l=-1===s?Pl(e,n):n[s+8],-1!==l&&p1(r,!1)?(i=n[1],s=Pi(l),n=Fi(l,n)):s=-1);-1!==s;){const c=n[1];if(m1(a,s,c.data)){const d=nS(s,n,t,i,r,u);if(d!==$n)return d}l=n[s+8],-1!==l&&p1(r,n[1].data[s+8]===u)&&m1(a,s,n)?(i=c,s=Pi(l),n=Fi(l,n)):s=-1}}return o}function nS(e,n,t,r,o,a){const i=n[1],s=i.data[e+8],c=Fl(s,i,t,null==r?Sr(s)&&Cm:r!=i&&!!(3&s.type),1&o&&a===s);return null!==c?Li(n,i,c,s,o):$n}function Fl(e,n,t,r,o){const a=e.providerIndexes,i=n.data,s=1048575&a,l=e.directiveStart,c=a>>20,p=o?s+c:e.directiveEnd;for(let m=r?s:s+c;m<p;m++){const h=i[m];if(m<l&&t===h||m>=l&&h.type===t)return m}if(o){const m=i[l];if(m&&Qt(m)&&m.type===t)return l}return null}function Li(e,n,t,r,o){let a=e[t];const i=n.data;if(a instanceof Oi){const s=a;if(s.resolving)throw function me(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Y(e)}(i[t]),Rd();const l=Rl(s.canSeeViewProviders);s.resolving=!0;const d=s.injectImpl?Pt(s.injectImpl):null;xv(e,r,0);try{a=e[t]=s.factory(void 0,o,i,e,r),n.firstCreatePass&&t>=r.directiveStart&&function Wx(e,n,t){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:a}=n.type.prototype;if(r){const i=Qv(n);(t.preOrderHooks??=[]).push(e,i),(t.preOrderCheckHooks??=[]).push(e,i)}o&&(t.preOrderHooks??=[]).push(0-e,o),a&&((t.preOrderHooks??=[]).push(e,a),(t.preOrderCheckHooks??=[]).push(e,a))}(t,i[t],n)}finally{null!==d&&Pt(d),Rl(l),s.resolving=!1,Mv()}}return a}function m1(e,n,t){return!!(t[n+(e>>5)]&1<<e)}function p1(e,n){return!(2&e||1&e&&n)}class We{_tNode;_lView;constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return c1(this._tNode,this._lView,n,ki(r),t)}}function oS(){return new We(oe(),C())}function wt(e){return ur(()=>{const n=e.prototype.constructor,t=n[uo]||xm(n),r=Object.prototype;let o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){const a=o[uo]||xm(o);if(a&&a!==t)return a;o=Object.getPrototypeOf(o)}return a=>new a})}function xm(e){return ml(e)?()=>{const n=xm(ee(e));return n&&n()}:mo(e)}function h1(e){const n=e[1],t=n.type;return 2===t?n.declTNode:1===t?e[5]:null}function pS(){return Ea(oe(),C())}function Ea(e,n){return new pn(xt(e,n))}let pn=(()=>class e{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=pS})();function b1(e){return e instanceof pn?e.nativeElement:e}function hS(){return this._results[Symbol.iterator]()}class fS{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Cr}constructor(n=!1){this._emitDistinctChangesOnly=n}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){this.dirty=!1;const r=function cn(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function zD(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let o=e[r],a=n[r];if(t&&(o=t(o),a=t(a)),a!==o)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=hS}function ji(e){return!(128&~e.flags)}var jl=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(jl||{});const Bl=new Map;let vS=0;function Mm(e){Bl.delete(e[19])}const Nm="__ngContext__";function jt(e,n){He(n)?(e[Nm]=n[19],function _S(e){Bl.set(e[19],e)}(n)):e[Nm]=n}function M1(e){return N1(e[12])}function A1(e){return N1(e[4])}function N1(e){for(;null!==e&&!Dt(e);)e=e[4];return e}let Rm;const $l=new N("",{providedIn:"root",factory:()=>HS}),HS="ng",B1=new N(""),Om=new N("",{providedIn:"platform",factory:()=>"unknown"}),V1=new N(""),$1=new N("",{providedIn:"root",factory:()=>function Do(){if(void 0!==Rm)return Rm;if(typeof document<"u")return document;throw new _(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),YS=new N("",{providedIn:"root",factory:()=>!1});function Gl(e){return!(32&~e.flags)}function db(e,n){const t=e.contentQueries;if(null!==t){const r=F(null);try{for(let o=0;o<t.length;o+=2){const i=t[o+1];if(-1!==i){const s=e.data[i];Tl(t[o]),s.contentQueries(2,n[i],i)}}}finally{F(r)}}}function Ym(e,n,t){Tl(0);const r=F(null);try{n(e,t)}finally{F(r)}}function Zm(e,n,t){if(rv(n)){const r=F(null);try{const a=n.directiveEnd;for(let i=n.directiveStart;i<a;i++){const s=e.data[i];s.contentQueries&&s.contentQueries(1,t[i],i)}}finally{F(r)}}}var cr=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(cr||{});class yb{changingThisBreaksApplicationSecurity;constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Fg})`}}function Rr(e){return e instanceof yb?e.changingThisBreaksApplicationSecurity:e}const OT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Ma=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Ma||{});function op(e){const n=function zi(){const e=C();return e&&e[10].sanitizer}();return n?n.sanitize(Ma.URL,e)||"":function Hi(e,n){const t=function MT(e){return e instanceof yb&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${Fg})`)}return t===n}(e,"URL")?Rr(e):function ep(e){return(e=String(e)).match(OT)?e:"unsafe:"+e}(Y(e))}const YT=/^>|^->|<!--|-->|--!>|<!-$/g,ZT=/(<|>)/g;function dI(e,n,t){let r=e.length;for(;;){const o=e.indexOf(n,t);if(-1===o)return o;if(0===o||e.charCodeAt(o-1)<=32){const a=n.length;if(o+a===r||e.charCodeAt(o+a)<=32)return o}t=o+1}}const Ob="ng-template";function mI(e,n,t,r){let o=0;if(r){for(;o<n.length&&"string"==typeof n[o];o+=2)if("class"===n[o]&&-1!==dI(n[o+1].toLowerCase(),t,0))return!0}else if(sp(e))return!1;if(o=n.indexOf(1,o),o>-1){let a;for(;++o<n.length&&"string"==typeof(a=n[o]);)if(a.toLowerCase()===t)return!0}return!1}function sp(e){return 4===e.type&&e.value!==Ob}function pI(e,n,t){return n===(4!==e.type||t?e.value:Ob)}function hI(e,n,t){let r=4;const o=e.attrs,a=null!==o?function gI(e){for(let n=0;n<e.length;n++)if(n1(e[n]))return n;return e.length}(o):0;let i=!1;for(let s=0;s<n.length;s++){const l=n[s];if("number"!=typeof l){if(!i)if(4&r){if(r=2|1&r,""!==l&&!pI(e,l,t)||""===l&&1===n.length){if(Tn(r))return!1;i=!0}}else if(8&r){if(null===o||!mI(e,o,l,t)){if(Tn(r))return!1;i=!0}}else{const u=n[++s],c=fI(l,o,sp(e),t);if(-1===c){if(Tn(r))return!1;i=!0;continue}if(""!==u){let d;if(d=c>a?"":o[c+1].toLowerCase(),2&r&&u!==d){if(Tn(r))return!1;i=!0}}}}else{if(!i&&!Tn(r)&&!Tn(l))return!1;if(i&&Tn(l))continue;i=!1,r=l|1&r}}return Tn(r)||i}function Tn(e){return!(1&e)}function fI(e,n,t,r){if(null===n)return-1;let o=0;if(r||!t){let a=!1;for(;o<n.length;){const i=n[o];if(i===e)return o;if(3===i||6===i)a=!0;else{if(1===i||2===i){let s=n[++o];for(;"string"==typeof s;)s=n[++o];continue}if(4===i)break;if(0===i){o+=4;continue}}o+=a?1:2}return-1}return function vI(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function Pb(e,n,t=!1){for(let r=0;r<n.length;r++)if(hI(e,n[r],t))return!0;return!1}function Fb(e,n){return e?":not("+n.trim()+")":n}function _I(e){let n=e[0],t=1,r=2,o="",a=!1;for(;t<e.length;){let i=e[t];if("string"==typeof i)if(2&r){const s=e[++t];o+="["+i+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?o+="."+i:4&r&&(o+=" "+i);else""!==o&&!Tn(i)&&(n+=Fb(a,o),o=""),r=i,a=a||!Tn(r);t++}return""!==o&&(n+=Fb(a,o)),n}const xe={};function up(e,n){return e.createComment(function xb(e){return e.replace(YT,n=>n.replace(ZT,"\u200b$1\u200b"))}(n))}function tu(e,n,t){return e.createElement(n,t)}function xo(e,n,t,r,o){e.insertBefore(n,t,r,o)}function jb(e,n,t){e.appendChild(n,t)}function Bb(e,n,t,r,o){null!==r?xo(e,n,t,r,o):jb(e,n,t)}function $b(e,n,t){const{mergedAttrs:r,classes:o,styles:a}=t;null!==r&&function Yx(e,n,t){let r=0;for(;r<t.length;){const o=t[r];if("number"==typeof o){if(0!==o)break;r++;const a=t[r++],i=t[r++],s=t[r++];e.setAttribute(n,i,s,a)}else{const a=o,i=t[++r];r1(a)?e.setProperty(n,a,i):e.setAttribute(n,a,i),r++}}}(e,n,r),null!==o&&function EI(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}(e,n,o),null!==a&&function CI(e,n,t){e.setAttribute(n,"style",t)}(e,n,a)}function cp(e,n,t,r,o,a,i,s,l,u,c){const d=G+r,p=d+o,m=function DI(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:xe);return t}(d,p),h="function"==typeof u?u():u;return m[1]={type:e,blueprint:m,template:t,queries:null,viewQuery:s,declTNode:n,data:m.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof i?i():i,firstChild:null,schemas:l,consts:h,incompleteFirstPass:!1,ssrId:c}}function nu(e,n,t,r,o,a,i,s,l,u,c){const d=n.blueprint.slice();return d[0]=o,d[2]=1228|r,(null!==u||e&&2048&e[2])&&(d[2]|=2048),uv(d),d[3]=d[14]=e,d[8]=t,d[10]=i||e&&e[10],d[11]=s||e&&e[11],d[9]=l||e&&e[9]||null,d[5]=a,d[19]=function bS(){return vS++}(),d[6]=c,d[20]=u,d[15]=2==n.type?e[15]:d,d}function dp(e){let n=16;return e.signals?n=4096:e.onPush&&(n=64),n}function qi(e,n,t,r){if(0===t)return-1;const o=n.length;for(let a=0;a<t;a++)n.push(r),e.blueprint.push(r),e.data.push(null);return o}function mp(e,n){return e[12]?e[13][4]=n:e[12]=n,e[13]=n,n}function I(e=1){Ub(re(),C(),ht()+e,!1)}function Ub(e,n,t,r){if(!r)if(3&~n[2]){const a=e.preOrderHooks;null!==a&&Nl(n,a,0,t)}else{const a=e.preOrderCheckHooks;null!==a&&Al(n,a,t)}_o(t)}var ru=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(ru||{});function Wi(e,n,t,r){const o=F(null);try{const[a,i,s]=e.inputs[t];let l=null;0!==(i&ru.SignalBased)&&(l=n[a][ue]),null!==l&&void 0!==l.transformFn?r=l.transformFn(r):null!==s&&(r=s.call(n,r)),null!==e.setInput?e.setInput(n,l,r,t,a):Kv(n,l,a,r)}finally{F(o)}}var Or=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Or||{});function hp(e,n){return undefined(e,n)}function Na(e,n,t,r,o){if(null!=r){let a,i=!1;Dt(r)?a=r:He(r)&&(i=!0,r=r[0]);const s=ut(r);0===e&&null!==t?null==o?jb(n,t,s):xo(n,t,s,o||null,!0):1===e&&null!==t?xo(n,t,s,o||null,!0):2===e?function Gi(e,n,t){e.removeChild(null,n,t)}(n,s,i):3===e&&n.destroyNode(s),null!=a&&function RI(e,n,t,r,o){const a=t[7];a!==ut(t)&&Na(n,e,r,a,o);for(let s=10;s<t.length;s++){const l=t[s];ou(l[1],l,e,n,r,a)}}(n,e,a,t,o)}}function Gb(e,n){n[10].changeDetectionScheduler?.notify(9),ou(e,n,n[11],2,null,null)}function fp(e,n){const t=e[9],r=t.indexOf(n);t.splice(r,1)}function Ki(e,n){if(nr(n))return;const t=n[11];t.destroyNode&&ou(e,n,t,3,null,null),function II(e){let n=e[12];if(!n)return yp(e[1],e);for(;n;){let t=null;if(He(n))t=n[12];else{const r=n[10];r&&(t=r)}if(!t){for(;n&&!n[4]&&n!==e;)He(n)&&yp(n[1],n),n=n[3];null===n&&(n=e),He(n)&&yp(n[1],n),t=n&&n[4]}n=t}}(n)}function yp(e,n){if(nr(n))return;const t=F(null);try{n[2]&=-129,n[2]|=256,n[24]&&il(n[24]),function AI(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const o=n[t[r]];if(!(o instanceof Oi)){const a=t[r+1];if(Array.isArray(a))for(let i=0;i<a.length;i+=2){const s=o[a[i]],l=a[i+1];Ee(4,s,l);try{l.call(s)}finally{Ee(5,s,l)}}else{Ee(4,o,a);try{a.call(o)}finally{Ee(5,o,a)}}}}}(e,n),function MI(e,n){const t=e.cleanup,r=n[7];if(null!==t)for(let i=0;i<t.length-1;i+=2)if("string"==typeof t[i]){const s=t[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else t[i].call(r[t[i+1]]);null!==r&&(n[7]=null);const o=n[21];if(null!==o){n[21]=null;for(let i=0;i<o.length;i++)(0,o[i])()}const a=n[23];if(null!==a){n[23]=null;for(const i of a)i.destroy()}}(e,n),1===n[1].type&&n[11].destroy();const r=n[16];if(null!==r&&Dt(n[3])){r!==n[3]&&fp(r,n);const o=n[18];null!==o&&o.detachView(e)}Mm(n)}finally{F(t)}}function gp(e,n,t){return function qb(e,n,t){let r=n;for(;null!==r&&168&r.type;)r=(n=r).parent;if(null===r)return t[0];if(Sr(r)){const{encapsulation:o}=e.data[r.directiveStart+r.componentOffset];if(o===cr.None||o===cr.Emulated)return null}return xt(r,t)}(e,n.parent,t)}let Qb=function Kb(e,n,t){return 40&e.type?xt(e,t):null};function bp(e,n,t,r){const o=gp(e,r,n),a=n[11],s=function Wb(e,n,t){return Qb(e,n,t)}(r.parent||n[5],r,n);if(null!=o)if(Array.isArray(t))for(let l=0;l<t.length;l++)Bb(a,o,t[l],s,!1);else Bb(a,o,t,s,!1)}function So(e,n){if(null!==n){const t=n.type;if(3&t)return xt(n,e);if(4&t)return _p(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return So(e,r);{const o=e[n.index];return Dt(o)?_p(-1,o):ut(o)}}if(128&t)return So(e,n.next);if(32&t)return hp(n,e)()||ut(e[n.index]);{const r=Yb(e,n);return null!==r?Array.isArray(r)?r[0]:So(rr(e[15]),r):So(e,n.next)}}return null}function Yb(e,n){return null!==n?e[15][5].projection[n.projection]:null}function _p(e,n){const t=10+e+1;if(t<n.length){const r=n[t],o=r[1].firstChild;if(null!==o)return So(r,o)}return n[7]}function wp(e,n,t,r,o,a,i){for(;null!=t;){if(128===t.type){t=t.next;continue}const s=r[t.index],l=t.type;if(i&&0===n&&(s&&jt(ut(s),r),t.flags|=2),!Gl(t))if(8&l)wp(e,n,t.child,r,o,a,!1),Na(n,e,o,s,a);else if(32&l){const u=hp(t,r);let c;for(;c=u();)Na(n,e,o,c,a);Na(n,e,o,s,a)}else 16&l?Zb(e,n,r,t,o,a):Na(n,e,o,s,a);t=i?t.projectionNext:t.next}}function ou(e,n,t,r,o,a){wp(t,r,e.firstChild,n,o,a,!1)}function Zb(e,n,t,r,o,a){const i=t[15],l=i[5].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)Na(n,e,o,l[u],a);else{let u=l;const c=i[3];ji(r)&&(u.flags|=128),wp(e,n,u,c,o,a,!0)}}function Xb(e,n,t,r,o){const a=ht(),i=2&r;try{_o(-1),i&&n.length>G&&Ub(e,n,G,!1),Ee(i?2:0,o,t),t(r,o)}finally{_o(a),Ee(i?3:1,o,t)}}function au(e,n,t){(function VI(e,n,t){const r=t.directiveStart,o=t.directiveEnd;Sr(t)&&function xI(e,n,t){const r=xt(n,e),o=function Hb(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=cp(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}(t),a=e[10].rendererFactory,i=mp(e,nu(e,o,null,dp(t),r,n,null,a.createRenderer(r,t),null,null,null));e[n.index]=i}(n,t,e.data[r+t.componentOffset]),e.firstCreatePass||Ol(t,n);const a=t.initialInputs;for(let i=r;i<o;i++){const s=e.data[i],l=Li(n,e,i,t);jt(l,n),null!==a&&zI(0,i-r,l,s,0,a),Qt(s)&&(St(t.index,n)[8]=Li(n,e,i,t))}})(e,n,t),!(64&~t.flags)&&function $I(e,n,t){const r=t.directiveStart,o=t.directiveEnd,a=t.index,i=function px(){return Q.lFrame.currentDirectiveIndex}();try{_o(a);for(let s=r;s<o;s++){const l=e.data[s],u=n[s];sm(s),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&HI(l,u)}}finally{_o(-1),sm(i)}}(e,n,t)}function Ra(e,n,t=xt){const r=n.localNames;if(null!==r){let o=n.index+1;for(let a=0;a<r.length;a+=2){const i=r[a+1],s=-1===i?t(n,e):e[i];e[o++]=s}}}let e_=()=>null;function kp(e,n,t,r,o,a){Sp(e,n[1],n,t,r)?Sr(e)&&function BI(e,n){const t=St(n,e);16&t[2]||(t[2]|=64)}(n,e.index):(3&e.type&&(t=function jI(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(t)),function Cp(e,n,t,r,o,a){if(3&e.type){const i=xt(e,n);r=null!=a?a(r,e.value||"",t):r,o.setProperty(i,t,r)}}(e,n,t,r,o,a))}function HI(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function Ep(e,n){const t=e.directiveRegistry;let r=null;if(t)for(let o=0;o<t.length;o++){const a=t[o];Pb(n,a.selectors,!1)&&(r??=[],Qt(a)?r.unshift(a):r.push(a))}return r}function zI(e,n,t,r,o,a){const i=a[n];if(null!==i)for(let s=0;s<i.length;s+=2)Wi(r,t,i[s],i[s+1])}function iu(e,n,t,r,o){const a=G+t,i=n[1],s=o(i,n,e,r,t);n[a]=s,or(e,!0);const l=2===e.type;return l?($b(n[11],s,e),(0===function sx(){return Q.lFrame.elementDepthCount}()||ma(e))&&jt(s,n),function lx(){Q.lFrame.elementDepthCount++}()):jt(s,n),Il()&&(!l||!Gl(e))&&bp(i,n,s,e),e}function su(e){let n=e;return bv()?function _v(){Q.lFrame.isParent=!1}():(n=n.parent,or(n,!1)),n}function Sp(e,n,t,r,o){const a=e.inputs?.[r],i=e.hostDirectiveInputs?.[r];let s=!1;if(i)for(let l=0;l<i.length;l+=2){const u=i[l];Wi(n.data[u],t[u],i[l+1],o),s=!0}if(a)for(const l of a)Wi(n.data[l],t[l],r,o),s=!0;return s}function qI(e,n){const t=St(n,e),r=t[1];!function WI(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}(r,t);const o=t[0];null!==o&&null===t[6]&&(t[6]=null),Ee(18),lu(r,t,t[8]),Ee(19,t[8])}function lu(e,n,t){cm(n);try{const r=e.viewQuery;null!==r&&Ym(1,r,t);const o=e.template;null!==o&&Xb(e,n,o,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),n[18]?.finishViewCreation(e),e.staticContentQueries&&db(e,n),e.staticViewQueries&&Ym(2,e.viewQuery,t);const a=e.components;null!==a&&function KI(e,n){for(let t=0;t<n.length;t++)qI(e,n[t])}(n,a)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[2]&=-5,dm()}}function To(e,n){return!n||null===n.firstChild||ji(e)}function Qi(e,n,t,r,o=!1){for(;null!==t;){if(128===t.type){t=o?t.projectionNext:t.next;continue}const a=n[t.index];null!==a&&r.push(ut(a)),Dt(a)&&JI(a,r);const i=t.type;if(8&i)Qi(e,n,t.child,r);else if(32&i){const s=hp(t,n);let l;for(;l=s();)r.push(l)}else if(16&i){const s=Yb(n,t);if(Array.isArray(s))r.push(...s);else{const l=rr(n[15]);Qi(l[1],l,s,r,!0)}}t=o?t.projectionNext:t.next}return r}function JI(e,n){for(let t=10;t<e.length;t++){const r=e[t],o=r[1].firstChild;null!==o&&Qi(r[1],r,o,n)}e[7]!==e[0]&&n.push(e[7])}function o_(e){if(null!==e[25]){for(const n of e[25])n.impl.addSequence(n);e[25].length=0}}let a_=[];const eM={...Xe,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{fa(e.lView)},consumerOnSignalRead(){this.lView[24]=this}},nM={...Xe,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let n=rr(e.lView);for(;n&&!i_(n[1]);)n=rr(n);n&&cv(n)},consumerOnSignalRead(){this.lView[24]=this}};function i_(e){return 2!==e.type}function s_(e){if(null===e[23])return;let n=!0;for(;n;){let t=!1;for(const r of e[23])r.dirty&&(t=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));n=t&&!!(8192&e[2])}}function uu(e,n=0){const r=e[10].rendererFactory;r.begin?.();try{!function oM(e,n){const t=Cv();try{Sl(!0),Tp(e,n);let r=0;for(;Dl(e);){if(100===r)throw new _(103,!1);r++,Tp(e,1)}}finally{Sl(t)}}(e,n)}finally{r.end?.()}}function l_(e,n,t,r){if(nr(n))return;const o=n[2];cm(n);let s=!0,l=null,u=null;i_(e)?(u=function YI(e){return e[24]??function ZI(e){const n=a_.pop()??Object.create(eM);return n.lView=e,n}(e)}(n),l=Cn(u)):null===function Ot(){return B}()?(s=!1,u=function tM(e){const n=e[24]??Object.create(nM);return n.lView=e,n}(n),l=Cn(u)):n[24]&&(il(n[24]),n[24]=null);try{uv(n),function Ev(e){return Q.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&Xb(e,n,t,2,r);const c=!(3&~o);if(c){const m=e.preOrderCheckHooks;null!==m&&Al(n,m,null)}else{const m=e.preOrderHooks;null!==m&&Nl(n,m,0,null),_m(n,0)}if(function iM(e){for(let n=M1(e);null!==n;n=A1(n)){if(!(2&n[2]))continue;const t=n[9];for(let r=0;r<t.length;r++)cv(t[r])}}(n),s_(n),u_(n,0),null!==e.contentQueries&&db(e,n),c){const m=e.contentCheckHooks;null!==m&&Al(n,m)}else{const m=e.contentHooks;null!==m&&Nl(n,m,1),_m(n,1)}!function lM(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const o=t[r];if(o<0)_o(~o);else{const a=o,i=t[++r],s=t[++r];mx(i,a);const l=n[a];Ee(24,l),s(2,l),Ee(25,l)}}}finally{_o(-1)}}(e,n);const d=e.components;null!==d&&d_(n,d,0);const p=e.viewQuery;if(null!==p&&Ym(2,p,r),c){const m=e.viewCheckHooks;null!==m&&Al(n,m)}else{const m=e.viewHooks;null!==m&&Nl(n,m,2),_m(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[22]){for(const m of n[22])m();n[22]=null}o_(n),n[2]&=-73}catch(c){throw fa(n),c}finally{null!==u&&(gi(u,l),s&&function XI(e){e.lView[24]!==e&&(e.lView=null,a_.push(e))}(u)),dm()}}function u_(e,n){for(let t=M1(e);null!==t;t=A1(t))for(let r=10;r<t.length;r++)c_(t[r],n)}function sM(e,n,t){Ee(18);const r=St(n,e);c_(r,t),Ee(19,r[8])}function c_(e,n){tm(e)&&Tp(e,n)}function Tp(e,n){const r=e[1],o=e[2],a=e[24];let i=!!(0===n&&16&o);if(i||=!!(64&o&&0===n),i||=!!(1024&o),i||=!(!a?.dirty||!al(a)),i||=!1,a&&(a.dirty=!1),e[2]&=-9217,i)l_(r,e,r.template,e[8]);else if(8192&o){const s=F(null);try{s_(e),u_(e,1);const l=r.components;null!==l&&d_(e,l,1),o_(e)}finally{F(s)}}}function d_(e,n,t){for(let r=0;r<n.length;r++)sM(e,n[r],t)}function Pa(e,n){const t=Cv()?64:1088;for(e[10].changeDetectionScheduler?.notify(n);e;){e[2]|=t;const r=rr(e);if(Tr(e)&&!r)return e;e=r}return null}function m_(e,n,t,r){return[e,!0,0,n,null,r,null,t,null,null]}function Ji(e,n){if(e.length<=10)return;const t=10+n,r=e[t];if(r){const o=r[16];null!==o&&o!==e&&fp(o,r),n>0&&(e[t-1][4]=r[4]);const a=yl(e,10+n);!function zb(e,n){Gb(e,n),n[0]=null,n[5]=null}(r[1],r);const i=a[18];null!==i&&i.detachView(a[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function h_(e,n){const t=e[9],r=n[3];(He(r)||n[15]!==r[3][15])&&(e[2]|=2),null===t?e[9]=[n]:t.push(n)}class Yi{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const n=this._lView,t=n[1];return Qi(t,n,t.firstChild,[])}constructor(n,t){this._lView=n,this._cdRefInjectingView=t}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return nr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Dt(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(Ji(n,r),yl(t,r))}this._attachedToViewContainer=!1}Ki(this._lView[1],this._lView)}onDestroy(n){xl(this._lView,n)}markForCheck(){Pa(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){nm(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,uu(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const n=Tr(this._lView),t=this._lView[16];null!==t&&!n&&fp(t,this._lView),Gb(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new _(902,!1);this._appRef=n;const t=Tr(this._lView),r=this._lView[16];null!==r&&!t&&h_(r,this._lView),nm(this._lView)}}let mr=(()=>class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=cM;constructor(t,r,o){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,o){const a=function Oa(e,n,t,r){const o=F(null);try{const a=n.tView,l=nu(e,a,t,4096&e[2]?4096:16,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);l[16]=e[n.index];const c=e[18];return null!==c&&(l[18]=c.createEmbeddedView(a)),lu(a,l,t),l}finally{F(o)}}(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:o});return new Yi(a)}})();function cM(){return cu(oe(),C())}function cu(e,n){return 4&e.type?new mr(n,e,Ea(e,n)):null}function Io(e,n,t,r,o){let a=e.data[n];if(null===a)a=function Rp(e,n,t,r,o){const a=vv(),i=bv(),l=e.data[n]=function bM(e,n,t,r,o,a){let i=n?n.injectorIndex:-1,s=0;return function fv(){return null!==Q.skipHydrationRootTNode}()&&(s|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:i,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:o,attrs:a,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,i?a:a&&a.parent,t,n,r,o);return function vM(e,n,t,r){null===e.firstChild&&(e.firstChild=n),null!==t&&(r?null==t.child&&null!==n.parent&&(t.child=n):null===t.next&&(t.next=n,n.prev=t))}(e,l,a,i),l}(e,n,t,r,o),function dx(){return Q.lFrame.inI18n}()&&(a.flags|=32);else if(64&a.type){a.type=t,a.value=r,a.attrs=o;const i=function Ii(){const e=Q.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();a.injectorIndex=null===i?-1:i.injectorIndex}return or(a,!0),a}let tA=class{},B_=class{};class nA{resolveComponentFactory(n){throw new _(917,!1)}}let vu=class{static NULL=new nA};class bu{}let Ao=(()=>class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>function rA(){const e=C(),t=St(oe().index,e);return(He(t)?t:e)[11]}()})(),oA=(()=>{class e{static \u0275prov=U({token:e,providedIn:"root",factory:()=>null})}return e})();const $p={};class Ba{injector;parentInjector;constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){const o=this.injector.get(n,$p,r);return o!==$p||t===$p?o:this.parentInjector.get(n,t,r)}}function wu(e,n,t){let r=t?e.styles:null,o=t?e.classes:null,a=0;if(null!==n)for(let i=0;i<n.length;i++){const s=n[i];"number"==typeof s?a=s:1==a?o=Sd(o,s):2==a&&(r=Sd(r,s+": "+n[++i]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=o:e.classesWithoutHost=o}function x(e,n=0){const t=C();return null===t?H(e,n):c1(oe(),t,ee(e),n)}function $_(e,n,t,r,o){const a=null===r?null:{"":-1},i=o(e,t);if(null!==i){let s=i,l=null,u=null;for(const c of i)if(null!==c.resolveHostDirectives){[s,l,u]=c.resolveHostDirectives(i);break}!function dA(e,n,t,r,o,a,i){const s=r.length;let l=!1;for(let p=0;p<s;p++){const m=r[p];!l&&Qt(m)&&(l=!0,cA(e,t,p)),Dm(Ol(t,n),e,m.type)}!function gA(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,s);for(let p=0;p<s;p++){const m=r[p];m.providersResolver&&m.providersResolver(m)}let u=!1,c=!1,d=qi(e,n,s,null);s>0&&(t.directiveToIndex=new Map);for(let p=0;p<s;p++){const m=r[p];if(t.mergedAttrs=Ca(t.mergedAttrs,m.hostAttrs),pA(e,t,n,d,m),yA(d,m,o),null!==i&&i.has(m)){const[f,y]=i.get(m);t.directiveToIndex.set(m.type,[d,f+t.directiveStart,y+t.directiveStart])}else(null===a||!a.has(m))&&t.directiveToIndex.set(m.type,d);null!==m.contentQueries&&(t.flags|=4),(null!==m.hostBindings||null!==m.hostAttrs||0!==m.hostVars)&&(t.flags|=64);const h=m.type.prototype;!u&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),u=!0),!c&&(h.ngOnChanges||h.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),c=!0),d++}!function mA(e,n,t){for(let r=n.directiveStart;r<n.directiveEnd;r++){const o=e.data[r];if(null!==t&&t.has(o)){const a=t.get(o);U_(0,n,a,r),U_(1,n,a,r),G_(n,r,!0)}else H_(0,n,o,r),H_(1,n,o,r),G_(n,r,!1)}}(e,t,a)}(e,n,t,s,a,l,u)}null!==a&&null!==r&&function uA(e,n,t){const r=e.localNames=[];for(let o=0;o<n.length;o+=2){const a=t[n[o+1]];if(null==a)throw new _(-301,!1);r.push(n[o],a)}}(t,r,a)}function cA(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function H_(e,n,t,r){const o=0===e?t.inputs:t.outputs;for(const a in o)if(o.hasOwnProperty(a)){let i;i=0===e?n.inputs??={}:n.outputs??={},i[a]??=[],i[a].push(r),z_(n,a)}}function U_(e,n,t,r){const o=0===e?t.inputs:t.outputs;for(const a in o)if(o.hasOwnProperty(a)){const i=o[a];let s;s=0===e?n.hostDirectiveInputs??={}:n.hostDirectiveOutputs??={},s[i]??=[],s[i].push(r,a),z_(n,i)}}function z_(e,n){"class"===n?e.flags|=8:"style"===n&&(e.flags|=16)}function G_(e,n,t){const{attrs:r,inputs:o,hostDirectiveInputs:a}=e;if(null===r||!t&&null===o||t&&null===a||sp(e))return e.initialInputs??=[],void e.initialInputs.push(null);let i=null,s=0;for(;s<r.length;){const l=r[s];if(0!==l)if(5!==l){if("number"==typeof l)break;if(!t&&o.hasOwnProperty(l)){const u=o[l];for(const c of u)if(c===n){i??=[],i.push(l,r[s+1]);break}}else if(t&&a.hasOwnProperty(l)){const u=a[l];for(let c=0;c<u.length;c+=2)if(u[c]===n){i??=[],i.push(u[c+1],r[s+1]);break}}s+=2}else s+=2;else s+=4}e.initialInputs??=[],e.initialInputs.push(i)}function pA(e,n,t,r,o){e.data[r]=o;const a=o.factory||(o.factory=mo(o.type)),i=new Oi(a,Qt(o),x,null);e.blueprint[r]=i,t[r]=i,function hA(e,n,t,r,o){const a=o.hostBindings;if(a){let i=e.hostBindingOpCodes;null===i&&(i=e.hostBindingOpCodes=[]);const s=~n.index;(function fA(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(i)!=s&&i.push(s),i.push(t,r,a)}}(e,n,r,qi(e,t,o.hostVars,xe),o)}function yA(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;Qt(n)&&(t[""]=e)}}function Hp(e,n,t,r,o,a,i,s){const l=n[1],u=l.consts,d=Io(l,e,t,r,_t(u,i));return a&&$_(l,n,d,_t(u,s),o),d.mergedAttrs=Ca(d.mergedAttrs,d.attrs),null!==d.attrs&&wu(d,d.attrs,!1),null!==d.mergedAttrs&&wu(d,d.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,d),d}function Up(e,n){Zv(e,n),rv(n)&&e.queries.elementEnd(n)}function ku(e){return!!function zp(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Un(e,n,t){return e[n]=t}function Be(e,n,t){return t!==xe&&(!Object.is(e[n],t)&&(e[n]=t,!0))}function No(e,n,t,r){const o=Be(e,n,t);return Be(e,n+1,r)||o}function ls(e,n,t){return function r(o){Pa(Sr(e)?St(e.index,n):n,5);const i=n[8];let s=W_(n,i,t,o),l=r.__ngNextListenerFn__;for(;l;)s=W_(n,i,l,o)&&s,l=l.__ngNextListenerFn__;return s}}function W_(e,n,t,r){const o=F(null);try{return Ee(6,n,t),!1!==t(r)}catch(a){return function xp(e,n){const t=e[9];t&&t.get(lr,null)?.(n)}(e,a),!1}finally{Ee(7,n,t),F(o)}}function K_(e,n,t,r,o,a,i,s){const l=ma(e);let u=!1,c=null;if(!r&&l&&(c=function wA(e,n,t,r){const o=e.cleanup;if(null!=o)for(let a=0;a<o.length-1;a+=2){const i=o[a];if(i===t&&o[a+1]===r){const s=n[7],l=o[a+2];return s&&s.length>l?s[l]:null}"string"==typeof i&&(a+=2)}return null}(n,t,a,e.index)),null!==c)(c.__ngLastListenerFn__||c).__ngNextListenerFn__=i,c.__ngLastListenerFn__=i,u=!0;else{const d=xt(e,t),p=r?r(d):d,m=o.listen(p,a,s);Q_(r?f=>r(ut(f[e.index])):e.index,n,t,a,s,m,!1)}return u}function Q_(e,n,t,r,o,a,i){const s=n.firstCreatePass?pv(n):null,l=mv(t),u=l.length;l.push(o,a),s&&s.push(r,e,u,(u+1)*(i?-1:1))}function Eu(e,n,t,r,o,a){const s=n[1],d=n[t][s.data[t].outputs[r]].subscribe(a);Q_(e.index,s,n,o,a,d,!0)}const Fr=Symbol("BINDING");class J_ extends vu{ngModule;constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=ke(n);return new Gp(t,this.ngModule)}}class Gp extends B_{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function IA(e){return Object.keys(e).map(n=>{const[t,r,o]=e[n],a={propName:t,templateName:n,isSignal:0!==(r&ru.SignalBased)};return o&&(a.transform=o),a})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function MA(e){return Object.keys(e).map(n=>({propName:e[n],templateName:n}))}(this.componentDef.outputs),this.cachedOutputs}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function wI(e){return e.map(_I).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors??[],this.isBoundToModule=!!t}create(n,t,r,o,a,i){Ee(22);const s=F(null);try{const l=this.componentDef,u=function OA(e,n,t,r){const o=e?["ng-version","20.1.6"]:function kI(e){const n=[],t=[];let r=1,o=2;for(;r<e.length;){let a=e[r];if("string"==typeof a)2===o?""!==a&&n.push(a,e[++r]):8===o&&t.push(a);else{if(!Tn(o))break;o=a}r++}return t.length&&n.push(1,...t),n}(n.selectors[0]);let a=null,i=null,s=0;if(t)for(const c of t)s+=c[Fr].requiredVars,c.create&&(c.targetIdx=0,(a??=[]).push(c)),c.update&&(c.targetIdx=0,(i??=[]).push(c));if(r)for(let c=0;c<r.length;c++){const d=r[c];if("function"!=typeof d)for(const p of d.bindings){s+=p[Fr].requiredVars;const m=c+1;p.create&&(p.targetIdx=m,(a??=[]).push(p)),p.update&&(p.targetIdx=m,(i??=[]).push(p))}}const l=[n];if(r)for(const c of r){const p=Et("function"==typeof c?c:c.type);l.push(p)}return cp(0,null,function PA(e,n){return e||n?t=>{if(1&t&&e)for(const r of e)r.create();if(2&t&&n)for(const r of n)r.update()}:null}(a,i),1,s,l,null,null,null,[o],null)}(r,l,i,a),c=function AA(e,n,t){let r=n instanceof Wt?n:n?.injector;return r&&null!==e.getStandaloneInjector&&(r=e.getStandaloneInjector(r)||r),r?new Ba(t,r):t}(l,o||this.ngModule,n),d=function NA(e){const n=e.get(bu,null);if(null===n)throw new _(407,!1);return{rendererFactory:n,sanitizer:e.get(oA,null),changeDetectionScheduler:e.get(wo,null),ngReflect:!1}}(c),p=d.rendererFactory.createRenderer(null,l),m=r?function PI(e,n,t,r){const a=r.get(YS,!1)||t===cr.ShadowDom,i=e.selectRootElement(n,a);return function FI(e){e_(e)}(i),i}(p,r,l.encapsulation,c):function RA(e,n){const t=(e.selectors[0][0]||"div").toLowerCase();return tu(n,t,"svg"===t?"svg":"math"===t?"math":null)}(l,p),h=i?.some(Y_)||a?.some(g=>"function"!=typeof g&&g.bindings.some(Y_)),f=nu(null,u,null,512|dp(l),null,null,d,p,c,null,null);f[G]=m,cm(f);let y=null;try{const g=Hp(G,f,2,"#host",()=>u.directiveRegistry,!0,0);m&&($b(p,m,g),jt(m,f)),au(u,f,g),Zm(u,g,f),Up(u,g),void 0!==t&&function LA(e,n,t){const r=e.projection=[];for(let o=0;o<n.length;o++){const a=t[o];r.push(null!=a&&a.length?Array.from(a):null)}}(g,this.ngContentSelectors,t),y=St(g.index,f),f[8]=y[8],lu(u,f,null)}catch(g){throw null!==y&&Mm(y),Mm(f),g}finally{Ee(23),dm()}return new FA(this.componentType,f,!!h)}finally{F(s)}}}function Y_(e){const n=e[Fr].kind;return"input"===n||"twoWay"===n}class FA extends tA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(n,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=ha(t[1],G),this.location=Ea(this._tNode,t),this.instance=St(this._tNode.index,t)[8],this.hostView=this.changeDetectorRef=new Yi(t,void 0),this.componentType=n}setInput(n,t){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;const o=this._rootLView;Sp(r,o[1],o,n,t),this.previousInputValues.set(n,t),Pa(St(r.index,o),1)}get injector(){return new We(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}let zn=(()=>class e{static __NG_ELEMENT_ID__=jA})();function jA(){return ew(oe(),C())}const BA=zn,Z_=class extends BA{_lContainer;_hostTNode;_hostLView;constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return Ea(this._hostTNode,this._hostLView)}get injector(){return new We(this._hostTNode,this._hostLView)}get parentInjector(){const n=Pl(this._hostTNode,this._hostLView);if(km(n)){const t=Fi(n,this._hostLView),r=Pi(n);return new We(t[1].data[r+8],t)}return new We(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=X_(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,t,r){let o,a;"number"==typeof r?o=r:null!=r&&(o=r.index,a=r.injector);const s=n.createEmbeddedViewImpl(t||{},a,null);return this.insertImpl(s,o,To(this._hostTNode,null)),s}createComponent(n,t,r,o,a,i,s){const l=n&&!function Ri(e){return"function"==typeof e}(n);let u;if(l)u=t;else{const y=t||{};u=y.index,r=y.injector,o=y.projectableNodes,a=y.environmentInjector||y.ngModuleRef,i=y.directives,s=y.bindings}const c=l?n:new Gp(ke(n)),d=r||this.parentInjector;if(!a&&null==c.ngModule){const g=(l?d:this.parentInjector).get(Wt,null);g&&(a=g)}ke(c.componentType??{});const f=c.create(d,o,null,a,i,s);return this.insertImpl(f.hostView,u,To(this._hostTNode,null)),f}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,r){const o=n._lView;if(function ax(e){return Dt(e[3])}(o)){const s=this.indexOf(n);if(-1!==s)this.detach(s);else{const l=o[3],u=new Z_(l,l[5],l[3]);u.detach(u.indexOf(n))}}const a=this._adjustIndex(t),i=this._lContainer;return function Fa(e,n,t,r=!0){const o=n[1];if(function uM(e,n,t,r){const o=10+r,a=t.length;r>0&&(t[o-1][4]=n),r<a-10?(n[4]=t[o],qg(t,10+r,n)):(t.push(n),n[4]=null),n[3]=t;const i=n[16];null!==i&&t!==i&&h_(i,n);const s=n[18];null!==s&&s.insertView(e),nm(n),n[2]|=128}(o,n,e,t),r){const i=_p(t,e),s=n[11],l=s.parentNode(e[7]);null!==l&&function TI(e,n,t,r,o,a){r[0]=o,r[5]=n,ou(e,r,t,1,o,a)}(o,e[5],s,n,l,i)}const a=n[6];null!==a&&null!==a.firstChild&&(a.firstChild=null)}(i,o,a,r),n.attachToViewContainerRef(),qg(qp(i),a,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=X_(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=Ji(this._lContainer,t);r&&(yl(qp(this._lContainer),t),Ki(r[1],r))}detach(n){const t=this._adjustIndex(n,-1),r=Ji(this._lContainer,t);return r&&null!=yl(qp(this._lContainer),t)?new Yi(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function X_(e){return e[8]}function qp(e){return e[8]||(e[8]=[])}function ew(e,n){let t;const r=n[e.index];return Dt(r)?t=r:(t=m_(r,n,null,e),n[e.index]=t,mp(n,t)),tw(t,n,e,r),new Z_(t,e,n)}let tw=function rw(e,n,t,r){if(e[7])return;let o;o=8&t.type?ut(r):function VA(e,n){const t=e[11],r=t.createComment(""),o=xt(n,e),a=t.parentNode(o);return xo(t,a,r,t.nextSibling(o),!1),r}(n,t),e[7]=o};class Kp{queryList;matches=null;constructor(n){this.queryList=n}clone(){return new Kp(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qp{queries;constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const r=null!==n.contentQueries?n.contentQueries[0]:t.length,o=[];for(let a=0;a<r;a++){const i=t.getByIndex(a);o.push(this.queries[i.indexInDeclarationView].clone())}return new Qp(o)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==eh(n,t).matches&&this.queries[t].setDirty()}}class ow{flags;read;predicate;constructor(n,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof n?function WA(e){return e.split(",").map(n=>n.trim())}(n):n}}class Jp{queries;constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){const o=null!==t?t.length:0,a=this.getByIndex(r).embeddedTView(n,o);a&&(a.indexInDeclarationView=r,null!==t?t.push(a):t=[a])}return null!==t?new Jp(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Yp{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(n,t=-1){this.metadata=n,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new Yp(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const a=r[o];this.matchTNodeWithReadOption(n,t,UA(t,a)),this.matchTNodeWithReadOption(n,t,Fl(t,n,a,!1,!1))}else r===mr?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,Fl(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===pn||o===zn||o===mr&&4&t.type)this.addMatch(t.index,-2);else{const a=Fl(t,n,o,!1,!1);null!==a&&this.addMatch(t.index,a)}else this.addMatch(t.index,r)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function UA(e,n){const t=e.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1];return null}function GA(e,n,t,r){return-1===t?function zA(e,n){return 11&e.type?Ea(e,n):4&e.type?cu(e,n):null}(n,e):-2===t?function qA(e,n,t){return t===pn?Ea(n,e):t===mr?cu(n,e):t===zn?ew(n,e):void 0}(e,n,r):Li(e,e[1],t,n)}function aw(e,n,t,r){const o=n[18].queries[r];if(null===o.matches){const a=e.data,i=t.matches,s=[];for(let l=0;null!==i&&l<i.length;l+=2){const u=i[l];s.push(u<0?null:GA(n,a[u],i[l+1],t.metadata.read))}o.matches=s}return o.matches}function Zp(e,n,t,r){const o=e.queries.getByIndex(t),a=o.matches;if(null!==a){const i=aw(e,n,o,t);for(let s=0;s<a.length;s+=2){const l=a[s];if(l>0)r.push(i[s/2]);else{const u=a[s+1],c=n[-l];for(let d=10;d<c.length;d++){const p=c[d];p[16]===p[3]&&Zp(p[1],p,u,r)}if(null!==c[9]){const d=c[9];for(let p=0;p<d.length;p++){const m=d[p];Zp(m[1],m,u,r)}}}}}return r}function sw(e,n,t){const r=re();return r.firstCreatePass&&(function uw(e,n,t){null===e.queries&&(e.queries=new Jp),e.queries.track(new Yp(n,t))}(r,new ow(e,n,t),-1),!(2&~n)&&(r.staticViewQueries=!0)),function iw(e,n,t){const r=new fS(!(4&~t));return function ix(e,n,t,r){const o=mv(n);o.push(t),e.firstCreatePass&&pv(e).push(r,o.length-1)}(e,n,r,r.destroy),(n[18]??=new Qp).queries.push(new Kp(r))-1}(r,C(),n)}function eh(e,n){return e.queries.getByIndex(n)}function cw(e,n){const t=e[1],r=eh(t,n);return r.crossesNgTemplate?Zp(t,e,n,[]):aw(t,e,r,n)}const fw=new Set;function Zt(e){fw.has(e)||(fw.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}let Ro=class{};class gw extends Ro{injector;componentFactoryResolver=new J_(this);instance=null;constructor(n){super();const t=new ho([...n.providers,{provide:Ro,useValue:this},{provide:vu,useValue:this.componentFactoryResolver}],n.parent||Wd(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}let sN=(()=>{class e{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=Hd(0,t.type),o=r.length>0?function vw(e,n,t=null){return new gw({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=U({token:e,providedIn:"environment",factory:()=>new e(H(Wt))})}return e})();function Bt(e){return ur(()=>{const n=_w(e),t={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===jl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:n.standalone?o=>o.get(sN).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||cr.Emulated,styles:e.styles||Pe,_:null,schemas:e.schemas||null,tView:null,id:""};n.standalone&&Zt("NgStandalone"),ww(t);const r=e.dependencies;return t.directiveDefs=Du(r,bw),t.pipeDefs=Du(r,xn),t.id=function dN(e){let n=0;const r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,"function"==typeof e.consts?"":e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(const a of r.join("|"))n=Math.imul(31,n)+a.charCodeAt(0)|0;return n+=2147483648,"c"+n}(t),t})}function bw(e){return ke(e)||Et(e)}function cs(e){return ur(()=>({type:e.type,bootstrap:e.bootstrap||Pe,declarations:e.declarations||Pe,imports:e.imports||Pe,exports:e.exports||Pe,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function lN(e,n){if(null==e)return Fn;const t={};for(const r in e)if(e.hasOwnProperty(r)){const o=e[r];let a,i,s,l;Array.isArray(o)?(s=o[0],a=o[1],i=o[2]??a,l=o[3]||null):(a=o,i=o,s=ru.None,l=null),t[a]=[r,s,l],n[a]=i}return t}function uN(e){if(null==e)return Fn;const n={};for(const t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}function Z(e){return ur(()=>{const n=_w(e);return ww(n),n})}function Vt(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function _w(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputConfig:e.inputs||Fn,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:!0===e.signals,selectors:e.selectors||Pe,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:lN(e.inputs,n),outputs:uN(e.outputs),debugInfo:null}}function ww(e){e.features?.forEach(n=>n(e))}function Du(e,n){return e?()=>{const t="function"==typeof e?e():e,r=[];for(const o of t){const a=n(o);null!==a&&r.push(a)}return r}:null}function Se(e){let n=function kw(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const r=[e];for(;n;){let o;if(Qt(e))o=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new _(903,!1);o=n.\u0275dir}if(o){if(t){r.push(o);const i=e;i.inputs=oh(e.inputs),i.declaredInputs=oh(e.declaredInputs),i.outputs=oh(e.outputs);const s=o.hostBindings;s&&yN(e,s);const l=o.viewQuery,u=o.contentQueries;if(l&&hN(e,l),u&&fN(e,u),mN(e,o),wD(e.outputs,o.outputs),Qt(o)&&o.data.animation){const c=e.data;c.animation=(c.animation||[]).concat(o.data.animation)}}const a=o.features;if(a)for(let i=0;i<a.length;i++){const s=a[i];s&&s.ngInherit&&s(e),s===Se&&(t=!1)}}n=Object.getPrototypeOf(n)}!function pN(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){const o=e[r];o.hostVars=n+=o.hostVars,o.hostAttrs=Ca(o.hostAttrs,t=Ca(t,o.hostAttrs))}}(r)}function mN(e,n){for(const t in n.inputs){if(!n.inputs.hasOwnProperty(t)||e.inputs.hasOwnProperty(t))continue;const r=n.inputs[t];void 0!==r&&(e.inputs[t]=r,e.declaredInputs[t]=n.declaredInputs[t])}}function oh(e){return e===Fn?{}:e===Pe?[]:e}function hN(e,n){const t=e.viewQuery;e.viewQuery=t?(r,o)=>{n(r,o),t(r,o)}:n}function fN(e,n){const t=e.contentQueries;e.contentQueries=t?(r,o,a)=>{n(r,o,a),t(r,o,a)}:n}function yN(e,n){const t=e.hostBindings;e.hostBindings=t?(r,o)=>{n(r,o),t(r,o)}:n}function Ie(e,n,t,r,o,a,i,s){const l=C(),u=re();return function CN(e,n,t,r,o,a,i,s,l,u,c){const d=t+G;let p;n.firstCreatePass?(p=Io(n,d,4,i||null,s||null),im()&&$_(n,e,p,_t(n.consts,u),Ep),Zv(n,p)):p=n.data[d],function Sw(e,n,t,r,o,a,i,s){if(t.firstCreatePass){e.mergedAttrs=Ca(e.mergedAttrs,e.attrs);const c=e.tView=cp(2,e,o,a,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);null!==t.queries&&(t.queries.template(t,e),c.queries=t.queries.embeddedTView(e))}s&&(e.flags|=s),or(e,!1);const l=Iw(t,n,e,r);Il()&&bp(t,n,l,e),jt(l,n);const u=m_(l,n,l,e);n[r+G]=u,mp(n,u)}(p,e,n,t,r,o,a,l),ma(p)&&au(n,e,p),null!=u&&Ra(e,p,c)}(l,u,e,n,t,r,o,_t(u.consts,a),void 0,i,s),Ie}let Iw=function Mw(e,n,t,r){return Mi(!0),n[11].createComment("")};var ih=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(ih||{});const ps=new N(""),Pw=!1,ot=class IN extends Cr{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(n=!1){super(),this.__isAsync=n,function Yd(){return void 0!==Ug()||null!=ce()}()&&(this.destroyRef=P(sr,{optional:!0})??void 0,this.pendingTasks=P(ko,{optional:!0})??void 0)}emit(n){const t=F(null);try{super.next(n)}finally{F(t)}}subscribe(n,t,r){let o=n,a=t||(()=>null),i=r;if(n&&"object"==typeof n){const l=n;o=l.next?.bind(l),a=l.error?.bind(l),i=l.complete?.bind(l)}this.__isAsync&&(a=this.wrapInTimeout(a),o&&(o=this.wrapInTimeout(o)),i&&(i=this.wrapInTimeout(i)));const s=super.subscribe({next:o,error:a,complete:i});return n instanceof Gt&&n.add(s),s}wrapInTimeout(n){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{n(t)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function Fw(e){let n,t;function r(){e=Ai;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==n&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{e(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Lw(e){return queueMicrotask(()=>e()),()=>{e=Ai}}const sh="isAngularZone",Iu=sh+"_ID";let MN=0;class De{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ot(!1);onMicrotaskEmpty=new ot(!1);onStable=new ot(!1);onError=new ot(!1);constructor(n){const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:a=Pw}=n;if(typeof Zone>"u")throw new _(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!o&&r,i.shouldCoalesceRunChangeDetection=o,i.callbackScheduled=!1,i.scheduleInRootZone=a,function RN(e){const n=()=>{!function NN(e){function n(){Fw(()=>{e.callbackScheduled=!1,uh(e),e.isCheckStableRunning=!0,lh(e),e.isCheckStableRunning=!1})}e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,e.scheduleInRootZone?Zone.root.run(()=>{n()}):e._outer.run(()=>{n()}),uh(e))}(e)},t=MN++;e._inner=e._inner.fork({name:"angular",properties:{[sh]:!0,[Iu]:t,[Iu+t]:!0},onInvokeTask:(r,o,a,i,s,l)=>{if(function ON(e){return Vw(e,"__ignore_ng_zone__")}(l))return r.invokeTask(a,i,s,l);try{return jw(e),r.invokeTask(a,i,s,l)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||e.shouldCoalesceRunChangeDetection)&&n(),Bw(e)}},onInvoke:(r,o,a,i,s,l,u)=>{try{return jw(e),r.invoke(a,i,s,l,u)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!function PN(e){return Vw(e,"__scheduler_tick__")}(l)&&n(),Bw(e)}},onHasTask:(r,o,a,i)=>{r.hasTask(a,i),o===a&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,uh(e),lh(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(r,o,a,i)=>(r.handleError(a,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(sh)}static assertInAngularZone(){if(!De.isInAngularZone())throw new _(909,!1)}static assertNotInAngularZone(){if(De.isInAngularZone())throw new _(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,o){const a=this._inner,i=a.scheduleEventTask("NgZoneEvent: "+o,n,AN,Ai,Ai);try{return a.runTask(i,t,r)}finally{a.cancelTask(i)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const AN={};function lh(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function uh(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&!0===e.callbackScheduled)}function jw(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Bw(e){e._nesting--,lh(e)}class ch{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ot;onMicrotaskEmpty=new ot;onStable=new ot;onError=new ot;run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,o){return n.apply(t,r)}}function Vw(e,n){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0]?.data?.[n]}let $w=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=U({token:e,providedIn:"root",factory:()=>new e})}return e})();const h2=new N("");function Pu(e){return!!e&&"function"==typeof e.then}function f2(e){return!!e&&"function"==typeof e.subscribe}const y2=new N("");let g2=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=P(y2,{optional:!0})??[];injector=P(Yt);constructor(){}runInitializers(){if(this.initialized)return;const t=[];for(const o of this.appInits){const a=Jd(this.injector,o);if(Pu(a))t.push(a);else if(f2(a)){const i=new Promise((s,l)=>{a.subscribe({complete:s,error:l})});t.push(i)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),0===t.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const UR=new N("");let jr=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(lr);afterRenderManager=P($w);zonelessEnabled=P(jv);rootEffectScheduler=P($v);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Cr;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P(ko);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ft(t=>!t))}constructor(){P(ps,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=P(Wt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,o=Yt.NULL){return this._injector.get(De).run(()=>{Ee(10);const i=t instanceof B_;if(!this._injector.get(g2).done)throw new _(405,"");let l;l=i?t:this._injector.get(vu).resolveComponentFactory(t),this.componentTypes.push(l.componentType);const u=function GR(e){return e.isBoundToModule}(l)?void 0:this._injector.get(Ro),d=l.create(o,[],r||l.selector,u),p=d.location.nativeElement,m=d.injector.get(h2,null);return m?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),Fu(this.components,d),m?.unregisterApplication(p)}),this._loadComponent(d),Ee(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ee(12),null!==this.tracingSnapshot?this.tracingSnapshot.run(ih.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new _(101,!1);const t=F(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,F(t),this.afterTick.next(),Ee(13)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(bu,null,{optional:!0}));let t=0;for(;0!==this.dirtyFlags&&t++<10;)Ee(14),this.synchronizeOnce(),Ee(15)}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews)(r||Dl(o))&&(uu(o,r&&!this.zonelessEnabled?0:1),t=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>Dl(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Fu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(t),this._injector.get(UR,[]).forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Fu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new _(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Fu(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function It(e,n,t,r){const o=C();return Be(o,Jt(),n)&&(re(),function UI(e,n,t,r,o,a){const i=xt(e,n);!function Dp(e,n,t,r,o,a,i){if(null==a)e.removeAttribute(n,o,t);else{const s=null==i?Y(a):i(a,r||"",o);e.setAttribute(n,o,s,t)}}(n[11],i,a,e.value,t,r,o)}(jn(),o,e,n,t,r)),It}function V(e,n,t){const r=C();return Be(r,Jt(),n)&&(re(),kp(jn(),r,e,n,r[11],t)),V}function Th(e,n,t,r,o){Sp(n,e,t,o?"class":"style",r)}function w(e,n,t,r){const o=C(),a=o[1],i=e+G,s=a.firstCreatePass?Hp(i,o,2,n,Ep,im(),t,r):a.data[i];if(iu(s,o,e,n,Ih),ma(s)){const l=o[1];au(l,o,s),Zm(l,s,o)}return null!=r&&Ra(o,s),w}function E(){const e=re(),t=su(oe());return e.firstCreatePass&&Up(e,t),yv(t)&&gv(),hv(),null!=t.classesWithoutHost&&function Qx(e){return!!(8&e.flags)}(t)&&Th(e,t,C(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Jx(e){return!!(16&e.flags)}(t)&&Th(e,t,C(),t.stylesWithoutHost,!1),E}function fe(e,n,t,r){return w(e,n,t,r),E(),fe}function gs(e,n,t,r){const o=C(),a=o[1],i=e+G,s=a.firstCreatePass?function q_(e,n,t,r,o,a){const i=n.consts,l=Io(n,e,t,r,_t(i,o));if(l.mergedAttrs=Ca(l.mergedAttrs,l.attrs),null!=a){const u=_t(i,a);l.localNames=[];for(let c=0;c<u.length;c+=2)l.localNames.push(u[c],-1)}return null!==l.attrs&&wu(l,l.attrs,!1),null!==l.mergedAttrs&&wu(l,l.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,l),l}(i,a,2,n,t,r):a.data[i];return iu(s,o,e,n,Ih),null!=r&&Ra(o,s),gs}function vs(){return yv(su(oe()))&&gv(),hv(),vs}let Ih=(e,n,t,r,o)=>(Mi(!0),tu(n[11],r,function bx(){return Q.lFrame.currentNamespace}()));function ju(e,n,t){const r=C(),o=r[1],a=e+G,i=o.firstCreatePass?Hp(a,r,8,"ng-container",Ep,im(),n,t):o.data[a];if(iu(i,r,e,"ng-container",Ah),ma(i)){const s=r[1];au(s,r,i),Zm(s,i,r)}return null!=t&&Ra(r,i),ju}function bs(){const e=re(),t=su(oe());return e.firstCreatePass&&Up(e,t),bs}let Ah=(e,n,t,r,o)=>(Mi(!0),up(n[11],""));function Xt(){return C()}const Bo=void 0;var z5=["en",[["a","p"],["AM","PM"],Bo],[["AM","PM"],Bo,Bo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bo,"{1} 'at' {0}",Bo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function U5(e){const n=Math.floor(Math.abs(e)),t=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===t?1:5}];let Wa={};function Mt(e){const n=function G5(e){return e.toLowerCase().replace(/_/g,"-")}(e);let t=L2(n);if(t)return t;const r=n.split("-")[0];if(t=L2(r),t)return t;if("en"===r)return z5;throw new _(701,!1)}function L2(e){return e in Wa||(Wa[e]=ze.ng&&ze.ng.common&&ze.ng.common.locales&&ze.ng.common.locales[e]),Wa[e]}var Le=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Le||{});const Bu="en-US";let j2=Bu;function J(e,n,t){const r=C(),o=re(),a=oe();return Ph(o,r,r[11],a,e,n,t),J}function Oh(e,n,t){const r=C(),o=re(),a=oe();return(3&a.type||t)&&K_(a,o,r,t,r[11],e,n,ls(a,r,n)),Oh}function Ph(e,n,t,r,o,a,i){let s=!0,l=null;if((3&r.type||i)&&(l??=ls(r,n,a),K_(r,e,n,i,t,o,a,l)&&(s=!1)),s){const u=r.outputs?.[o],c=r.hostDirectiveOutputs?.[o];if(c&&c.length)for(let d=0;d<c.length;d+=2){const p=c[d],m=c[d+1];l??=ls(r,n,a),Eu(r,n,p,m,o,l)}if(u&&u.length)for(const d of u)l??=ls(r,n,a),Eu(r,n,d,o,o,l)}}function pe(e=1){return function fx(e){return(Q.lFrame.contextLView=function dv(e,n){for(;e>0;)n=n[14],e--;return n}(e,Q.lFrame.contextLView))[8]}(e)}function ik(e){return bo(function wv(){return Q.lFrame.contextLView}(),G+e)}function Uu(e,n){return e<<17|n<<2}function Vo(e){return e>>17&32767}function Fh(e){return 2|e}function Ka(e){return(131068&e)>>2}function Lh(e,n){return-131069&e|n<<2}function jh(e){return 1|e}function sk(e,n,t,r){const o=e[t+1],a=null===n;let i=r?Vo(o):Ka(o),s=!1;for(;0!==i&&(!1===s||a);){const u=e[i+1];GO(e[i],n)&&(s=!0,e[i+1]=r?jh(u):Fh(u)),i=r?Vo(u):Ka(u)}s&&(e[t+1]=r?Fh(o):jh(o))}function GO(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&Ei(e,n)>=0}const at={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function lk(e){return e.substring(at.key,at.keyEnd)}function uk(e,n){const t=at.textEnd;return t===n?-1:(n=at.keyEnd=function QO(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,at.key=n,t),Qa(e,n,t))}function Qa(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function $o(e,n,t){return hk(e,n,t,!1),$o}function zu(e,n){return hk(e,n,null,!0),zu}function Gu(e){!function fk(e,n,t,r){const o=re(),a=ir(2);o.firstUpdatePass&&gk(o,null,a,r);const i=C();if(t!==xe&&Be(i,a,t)){const s=o.data[ht()];if(wk(s,r)&&!yk(o,a)){let l=r?s.classesWithoutHost:s.stylesWithoutHost;null!==l&&(t=Sd(l,t||"")),Th(o,s,i,t,r)}else!function sP(e,n,t,r,o,a,i,s){o===xe&&(o=Pe);let l=0,u=0,c=0<o.length?o[0]:null,d=0<a.length?a[0]:null;for(;null!==c||null!==d;){const p=l<o.length?o[l+1]:void 0,m=u<a.length?a[u+1]:void 0;let f,h=null;c===d?(l+=2,u+=2,p!==m&&(h=d,f=m)):null===d||null!==c&&c<d?(l+=2,h=c):(u+=2,h=d,f=m),null!==h&&bk(e,n,t,r,h,f,i,s),c=l<o.length?o[l]:null,d=u<a.length?a[u]:null}}(o,s,i,i[11],i[a+1],i[a+1]=function aP(e,n,t){if(null==t||""===t)return Pe;const r=[],o=Rr(t);if(Array.isArray(o))for(let a=0;a<o.length;a++)e(r,o[a],!0);else if("object"==typeof o)for(const a in o)o.hasOwnProperty(a)&&e(r,a,o[a]);else"string"==typeof o&&n(r,o);return r}(e,n,t),r,a)}}(iP,eP,e,!0)}function eP(e,n){for(let t=function WO(e){return function dk(e){at.key=0,at.keyEnd=0,at.value=0,at.valueEnd=0,at.textEnd=e.length}(e),uk(e,Qa(e,0,at.textEnd))}(n);t>=0;t=uk(n,t))vl(e,lk(n),!0)}function hk(e,n,t,r){const o=C(),a=re(),i=ir(2);a.firstUpdatePass&&gk(a,e,i,r),n!==xe&&Be(o,i,n)&&bk(a,a.data[ht()],o,o[11],e,o[i+1]=function lP(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=un(Rr(e)))),e}(n,t),r,i)}function yk(e,n){return n>=e.expandoStartIndex}function gk(e,n,t,r){const o=e.data;if(null===o[t+1]){const a=o[ht()],i=yk(e,t);wk(a,r)&&null===n&&!i&&(n=!1),n=function tP(e,n,t,r){const o=function lm(e){const n=Q.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let a=r?n.residualClasses:n.residualStyles;if(null===o)0===(r?n.classBindings:n.styleBindings)&&(t=Ds(t=Bh(null,e,n,t,r),n.attrs,r),a=null);else{const i=n.directiveStylingLast;if(-1===i||e[i]!==o)if(t=Bh(o,e,n,t,r),null===a){let l=function nP(e,n,t){const r=t?n.classBindings:n.styleBindings;if(0!==Ka(r))return e[Vo(r)]}(e,n,r);void 0!==l&&Array.isArray(l)&&(l=Bh(null,e,n,l[1],r),l=Ds(l,n.attrs,r),function rP(e,n,t,r){e[Vo(t?n.classBindings:n.styleBindings)]=r}(e,n,r,l))}else a=function oP(e,n,t){let r;const o=n.directiveEnd;for(let a=1+n.directiveStylingLast;a<o;a++)r=Ds(r,e[a].hostAttrs,t);return Ds(r,n.attrs,t)}(e,n,r)}return void 0!==a&&(r?n.residualClasses=a:n.residualStyles=a),t}(o,a,n,r),function UO(e,n,t,r,o,a){let i=a?n.classBindings:n.styleBindings,s=Vo(i),l=Ka(i);e[r]=t;let c,u=!1;if(Array.isArray(t)?(c=t[1],(null===c||Ei(t,c)>0)&&(u=!0)):c=t,o)if(0!==l){const p=Vo(e[s+1]);e[r+1]=Uu(p,s),0!==p&&(e[p+1]=Lh(e[p+1],r)),e[s+1]=function $O(e,n){return 131071&e|n<<17}(e[s+1],r)}else e[r+1]=Uu(s,0),0!==s&&(e[s+1]=Lh(e[s+1],r)),s=r;else e[r+1]=Uu(l,0),0===s?s=r:e[l+1]=Lh(e[l+1],r),l=r;u&&(e[r+1]=Fh(e[r+1])),sk(e,c,r,!0),sk(e,c,r,!1),function zO(e,n,t,r,o){const a=o?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof n&&Ei(a,n)>=0&&(t[r+1]=jh(t[r+1]))}(n,c,e,r,a),i=Uu(s,l),a?n.classBindings=i:n.styleBindings=i}(o,a,n,t,i,r)}}function Bh(e,n,t,r,o){let a=null;const i=t.directiveEnd;let s=t.directiveStylingLast;for(-1===s?s=t.directiveStart:s++;s<i&&(a=n[s],r=Ds(r,a.hostAttrs,o),a!==e);)s++;return null!==e&&(t.directiveStylingLast=s),r}function Ds(e,n,t){const r=t?1:2;let o=-1;if(null!==n)for(let a=0;a<n.length;a++){const i=n[a];"number"==typeof i?o=i:o===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),vl(e,i,!!t||n[++a]))}return void 0===e?null:e}function iP(e,n,t){const r=String(n);""!==r&&!r.includes(" ")&&vl(e,r,t)}function bk(e,n,t,r,o,a,i,s){if(!(3&n.type))return;const l=e.data,u=l[s+1],c=function HO(e){return!(1&~e)}(u)?_k(l,n,t,o,Ka(u),i):void 0;qu(c)||(qu(a)||function VO(e){return!(2&~e)}(u)&&(a=_k(l,null,t,o,s,i)),function OI(e,n,t,r,o){if(n)o?e.addClass(t,r):e.removeClass(t,r);else{let a=-1===r.indexOf("-")?void 0:Or.DashCase;null==o?e.removeStyle(t,r,a):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),a|=Or.Important),e.setStyle(t,r,o,a))}}(r,i,pa(ht(),t),o,a))}function _k(e,n,t,r,o,a){const i=null===n;let s;for(;o>0;){const l=e[o],u=Array.isArray(l),c=u?l[1]:l,d=null===c;let p=t[o+1];p===xe&&(p=d?Pe:void 0);let m=d?jd(p,r):c===r?p:void 0;if(u&&!qu(m)&&(m=jd(l,r)),qu(m)&&(s=m,i))return s;const h=e[o+1];o=i?Vo(h):Ka(h)}if(null!==n){let l=a?n.residualClasses:n.residualStyles;null!=l&&(s=jd(l,r))}return s}function qu(e){return void 0!==e}function wk(e,n){return!!(e.flags&(n?8:16))}function L(e,n=""){const t=C(),r=re(),o=e+G,a=r.firstCreatePass?Io(r,o,1,n,null):r.data[o],i=kk(r,t,a,n,e);t[o]=i,Il()&&bp(r,t,i,a),or(a,!1)}let kk=(e,n,t,r,o)=>(Mi(!0),function lp(e,n){return e.createText(n)}(n[11],r));function Dk(e,n,t,r,o,a=""){const s=No(e,function ar(){return Q.lFrame.bindingIndex}(),t,o);return ir(2),s?n+Y(t)+r+Y(o)+a:xe}function fn(e){return zt("",e),fn}function zt(e,n,t){const r=C(),o=function Ek(e,n,t,r=""){return Be(e,Jt(),t)?n+Y(t)+r:xe}(r,e,n,t);return o!==xe&&pr(r,ht(),o),zt}function Wu(e,n,t,r,o){const a=C(),i=Dk(a,e,n,t,r,o);return i!==xe&&pr(a,ht(),i),Wu}function pr(e,n,t){const r=pa(n,e);!function Lb(e,n,t){e.setValue(n,t)}(e[11],r,t)}function yn(e,n,t){Lv(n)&&(n=n());const r=C();return Be(r,Jt(),n)&&(re(),kp(jn(),r,e,n,r[11],t)),yn}function In(e,n){const t=Lv(e);return t&&e.set(n),t}function gn(e,n){const t=C(),r=re(),o=oe();return Ph(r,t,t[11],o,e,n),gn}function Vh(e,n,t,r,o){if(e=ee(e),Array.isArray(e))for(let a=0;a<e.length;a++)Vh(e[a],n,t,r,o);else{const a=re(),i=C(),s=oe();let l=Xn(e)?e:ee(e.provide);const u=tv(e),c=1048575&s.providerIndexes,d=s.directiveStart,p=s.providerIndexes>>20;if(Xn(e)||!e.multi){const m=new Oi(u,o,x,null),h=Hh(l,n,o?c:c+p,d);-1===h?(Dm(Ol(s,i),a,l),$h(a,e,n.length),n.push(l),s.directiveStart++,s.directiveEnd++,o&&(s.providerIndexes+=1048576),t.push(m),i.push(m)):(t[h]=m,i[h]=m)}else{const m=Hh(l,n,c+p,d),h=Hh(l,n,c,c+p),y=h>=0&&t[h];if(o&&!y||!o&&!(m>=0&&t[m])){Dm(Ol(s,i),a,l);const g=function xP(e,n,t,r,o){const i=new Oi(e,t,x,null);return i.multi=[],i.index=n,i.componentProviders=0,$k(i,o,r&&!t),i}(o?DP:EP,t.length,o,r,u);!o&&y&&(t[h].providerFactory=g),$h(a,e,n.length,0),n.push(l),s.directiveStart++,s.directiveEnd++,o&&(s.providerIndexes+=1048576),t.push(g),i.push(g)}else $h(a,e,m>-1?m:h,$k(t[o?h:m],u,!o&&r));!o&&r&&y&&t[h].componentProviders++}}}function $h(e,n,t,r){const o=Xn(n),a=function Xg(e){return!!e.useClass}(n);if(o||a){const l=(a?ee(n.useClass):n).prototype.ngOnDestroy;if(l){const u=e.destroyHooks||(e.destroyHooks=[]);if(!o&&n.multi){const c=u.indexOf(t);-1===c?u.push(t,[r,l]):u[c+1].push(r,l)}else u.push(t,l)}}}function $k(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function Hh(e,n,t,r){for(let o=t;o<r;o++)if(n[o]===e)return o;return-1}function EP(e,n,t,r,o){return Uh(this.multi,[])}function DP(e,n,t,r,o){const a=this.multi;let i;if(this.providerFactory){const s=this.providerFactory.componentProviders,l=Li(r,r[1],this.providerFactory.index,o);i=l.slice(0,s),Uh(a,i);for(let u=s;u<l.length;u++)i.push(l[u])}else i=[],Uh(a,i);return i}function Uh(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function Ve(e,n=[]){return t=>{t.providersResolver=(r,o)=>function CP(e,n,t){const r=re();if(r.firstCreatePass){const o=Qt(e);Vh(t,r.data,r.blueprint,o,!0),Vh(n,r.data,r.blueprint,o,!1)}}(r,o?o(e):e,n)}}function zh(e,n,t,r,o){return Gk(C(),Tt(),e,n,t,r,o)}function Uk(e,n,t,r,o,a){return function qk(e,n,t,r,o,a,i,s){const l=n+t;return function Cu(e,n,t,r,o){const a=No(e,n,t,r);return Be(e,n+2,o)||a}(e,l,o,a,i)?Un(e,l+3,s?r.call(s,o,a,i):r(o,a,i)):xs(e,l+3)}(C(),Tt(),e,n,t,r,o,a)}function xs(e,n){const t=e[n];return t===xe?void 0:t}function Gk(e,n,t,r,o,a,i){const s=n+t;return No(e,s,o,a)?Un(e,s+2,i?r.call(i,o,a):r(o,a)):xs(e,s+2)}function Ss(e,n){const t=re();let r;const o=e+G;t.firstCreatePass?(r=function jP(e,n){if(n)for(let t=n.length-1;t>=0;t--){const r=n[t];if(e===r.name)return r}}(n,t.pipeRegistry),t.data[o]=r,r.onDestroy&&(t.destroyHooks??=[]).push(o,r.onDestroy)):r=t.data[o];const a=r.factory||(r.factory=mo(r.type)),s=Pt(x);try{const l=Rl(!1),u=a();return Rl(l),function em(e,n,t,r){t>=e.data.length&&(e.data[t]=null,e.blueprint[t]=null),n[t]=r}(t,C(),o,u),u}finally{Pt(s)}}function Qu(e,n,t){const r=e+G,o=C(),a=bo(o,r);return Ts(o,r)?function zk(e,n,t,r,o,a){const i=n+t;return Be(e,i,o)?Un(e,i+1,a?r.call(a,o):r(o)):xs(e,i+1)}(o,Tt(),n,a.transform,t,a):a.transform(t)}function Ts(e,n){return e[1].data[n].pure}function Jk(e,n){return cu(e,n)}let gF=(()=>{class e{zone=P(De);changeDetectionScheduler=P(wo);applicationRef=P(jr);applicationErrorHandler=P(lr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Qh({ngZoneFactory:e,ignoreChangesOutsideZone:n,scheduleInRootZone:t}){return e??=()=>new De({...Jh(),scheduleInRootZone:t}),[{provide:De,useFactory:e},{provide:po,multi:!0,useFactory:()=>{const r=P(gF,{optional:!0});return()=>r.initialize()}},{provide:po,multi:!0,useFactory:()=>{const r=P(bF);return()=>{r.initialize()}}},!0===n?{provide:Bv,useValue:!0}:[],{provide:Vv,useValue:t??Pw},{provide:lr,useFactory:()=>{const r=P(De),o=P(Wt);let a;return i=>{r.runOutsideAngular(()=>{o.destroyed&&!a?setTimeout(()=>{throw i}):(a??=o.get(ga),a.handleError(i))})}}}]}function Jh(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}let bF=(()=>{class e{subscription=new Gt;initialized=!1;zone=P(De);pendingTasks=P(ko);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Zh=(()=>{class e{applicationErrorHandler=P(lr);appRef=P(jr);taskService=P(ko);ngZone=P(De);zonelessEnabled=P(jv);tracing=P(ps,{optional:!0});disableScheduling=P(Bv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Gt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Iu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(Vv,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ch||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;let r=!1;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const o=this.useMicrotaskScheduler?Lw:Fw;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>o(()=>this.tick())):this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Iu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Lw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const $r=new N("",{providedIn:"root",factory:()=>P($r,{optional:!0,skipSelf:!0})||function _F(){return typeof $localize<"u"&&$localize.locale||Bu}()});new N("").__NG_ELEMENT_ID__=e=>{const n=oe();if(null===n)throw new _(204,!1);if(2&n.type)return n.value;if(8&e)return null;throw new _(204,!1)};const tc=new N(""),RF=new N("");function Ms(e){return!e.moduleRef}let x3,Hr=null;let of=(()=>class e{static __NG_ELEMENT_ID__=BF})();function BF(e){return function VF(e,n,t){if(Sr(e)&&!t){const r=St(e.index,n);return new Yi(r,r)}return 175&e.type?new Yi(n[15],n):null}(oe(),C(),!(16&~e))}class R3{constructor(){}supports(n){return ku(n)}create(n){return new HF(n)}}const $F=(e,n)=>n;class HF{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(n){this._trackByFn=n||$F}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,o=0,a=null;for(;t||r;){const i=!r||t&&t.currentIndex<P3(r,o,a)?t:r,s=P3(i,o,a),l=i.currentIndex;if(i===r)o--,r=r._nextRemoved;else if(t=t._next,null==i.previousIndex)o++;else{a||(a=[]);const u=s-o,c=l-o;if(u!=c){for(let p=0;p<u;p++){const m=p<a.length?a[p]:a[p]=0,h=m+p;c<=h&&h<u&&(a[p]=m+1)}a[i.previousIndex]=c-u}}s!==l&&n(i,s,l)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!ku(n))throw new _(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o,a,i,t=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let s=0;s<this.length;s++)a=n[s],i=this._trackByFn(s,a),null!==t&&Object.is(t.trackById,i)?(r&&(t=this._verifyReinsertion(t,a,i,s)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,i,s),r=!0),t=t._next}else o=0,function bA(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Symbol.iterator]();let r;for(;!(r=t.next()).done;)n(r.value)}}(n,s=>{i=this._trackByFn(o,s),null!==t&&Object.is(t.trackById,i)?(r&&(t=this._verifyReinsertion(t,s,i,o)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,i,o),r=!0),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,o){let a;return null===n?a=this._itTail:(a=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,a,o)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,a,o)):n=this._addAfter(new UF(t,r),a,o),n}_verifyReinsertion(n,t,r,o){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==a?n=this._reinsertAfter(a,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,a=n._nextRemoved;return null===o?this._removalsHead=a:o._nextRemoved=a,null===a?this._removalsTail=o:a._prevRemoved=o,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){const o=null===t?this._itHead:t._next;return n._next=o,n._prev=t,null===o?this._itTail=n:o._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new O3),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,r=n._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new O3),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class UF{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(n,t){this.item=n,this.trackById=t}}class zF{_head=null;_tail=null;add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const t=n._prevDup,r=n._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class O3{map=new Map;put(n){const t=n.trackById;let r=this.map.get(t);r||(r=new zF,this.map.set(t,r)),r.add(n)}get(n,t){const o=this.map.get(n);return o?o.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function P3(e,n,t){const r=e.previousIndex;if(null===r)return r;let o=0;return t&&r<t.length&&(o=t[r]),r+n+o}function L3(){return new af([new R3])}let af=(()=>{class e{factories;static \u0275prov=U({token:e,providedIn:"root",factory:L3});constructor(t){this.factories=t}static create(t,r){if(null!=r){const o=r.factories.slice();t=t.concat(o)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||L3()),deps:[[e,new vm,new gm]]}}find(t){const r=this.factories.find(o=>o.supports(t));if(null!=r)return r;throw new _(901,!1)}}return e})();function QF(e){Ee(8);try{const{rootComponent:n,appProviders:t,platformProviders:r}=e,o=function jF(e=[]){if(Hr)return Hr;const n=function M3(e=[],n){return Yt.create({name:n,providers:[{provide:Gd,useValue:"platform"},{provide:tc,useValue:new Set([()=>Hr=null])},...e]})}(e);return Hr=n,function zR(){!function aD(e){Eg=e}(()=>{throw new _(600,"")})}(),function A3(e){const n=e.get(B1,null);Jd(e,()=>{n?.forEach(t=>t())})}(n),n}(r),a=[Qh({}),{provide:wo,useExisting:Zh},Pv,...t||[]];return function D3(e){const n=Ms(e)?e.r3Injector:e.moduleRef.injector,t=n.get(De);return t.run(()=>{Ms(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();const r=n.get(lr);let o;if(t.runOutsideAngular(()=>{o=t.onError.subscribe({next:r})}),Ms(e)){const a=()=>n.destroy(),i=e.platformInjector.get(tc);i.add(a),n.onDestroy(()=>{o.unsubscribe(),i.delete(a)})}else{const a=()=>e.moduleRef.destroy(),i=e.platformInjector.get(tc);i.add(a),e.moduleRef.onDestroy(()=>{Fu(e.allPlatformModules,e.moduleRef),o.unsubscribe(),i.delete(a)})}return function PF(e,n,t){try{const r=t();return Pu(r)?r.catch(o=>{throw n.runOutsideAngular(()=>e(o)),o}):r}catch(r){throw n.runOutsideAngular(()=>e(r)),r}}(r,t,()=>{const a=n.get(ko),i=a.add(),s=n.get(g2);return s.runInitializers(),s.donePromise.then(()=>{if(function Q5(e){"string"==typeof e&&(j2=e.toLowerCase().replace(/_/g,"-"))}(n.get($r,Bu)||Bu),!n.get(RF,!0))return Ms(e)?n.get(jr):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Ms(e)){const c=n.get(jr);return void 0!==e.rootComponent&&c.bootstrap(e.rootComponent),c}return x3?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>{a.remove(i)})})})}({r3Injector:new gw({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:o,rootComponent:n})}catch(n){return Promise.reject(n)}finally{Ee(9)}}const pf=new N("");let d0=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o,a){return this._findPluginFor(r).addEventListener(t,r,o,a)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new _(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||e)(H(pf),H(De))};static \u0275prov=U({token:e,factory:e.\u0275fac})}return e})();class m0{_doc;constructor(n){this._doc=n}manager}const hf="ng-app-id";function p0(e){for(const n of e)n.remove()}function h0(e,n){const t=n.createElement("style");return t.textContent=e,t}function ff(e,n){const t=n.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),t}let f0=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,o,a={}){this.doc=t,this.appId=r,this.nonce=o,function JL(e,n,t,r){const o=e.head?.querySelectorAll(`style[${hf}="${n}"],link[${hf}="${n}"]`);if(o)for(const a of o)a.removeAttribute(hf),a instanceof HTMLLinkElement?r.set(a.href.slice(a.href.lastIndexOf("/")+1),{usage:0,elements:[a]}):a.textContent&&t.set(a.textContent,{usage:0,elements:[a]})}(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(const o of t)this.addUsage(o,this.inline,h0);r?.forEach(o=>this.addUsage(o,this.external,ff))}removeStyles(t,r){for(const o of t)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(t,r,o){const a=r.get(t);a?a.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(i=>this.addElement(i,o(t,this.doc)))})}removeUsage(t,r){const o=r.get(t);o&&(o.usage--,o.usage<=0&&(p0(o.elements),r.delete(t)))}ngOnDestroy(){for(const[,{elements:t}]of[...this.inline,...this.external])p0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(const[r,{elements:o}]of this.inline)o.push(this.addElement(t,h0(r,this.doc)));for(const[r,{elements:o}]of this.external)o.push(this.addElement(t,ff(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||e)(H(Bn),H($l),H($1,8),H(Om))};static \u0275prov=U({token:e,factory:e.\u0275fac})}return e})();const yf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},gf=/%COMP%/g,n6=new N("",{providedIn:"root",factory:()=>!0});function g0(e,n){return n.map(t=>t.replace(gf,e))}let vf=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,o,a,i,s,l,u=null,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=a,this.doc=i,this.platformId=s,this.ngZone=l,this.nonce=u,this.tracingService=c,this.platformIsServer=!1,this.defaultRenderer=new bf(t,i,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(t,r);return o instanceof b0?o.applyToHost(t):o instanceof _f&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let a=o.get(r.id);if(!a){const i=this.doc,s=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,c=this.removeStylesOnCompDestroy,d=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case cr.Emulated:a=new b0(l,u,r,this.appId,c,i,s,d,p);break;case cr.ShadowDom:return new i6(l,u,t,r,i,s,this.nonce,d,p);default:a=new _f(l,u,r,c,i,s,d,p)}o.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||e)(H(d0),H(f0),H($l),H(n6),H(Bn),H(Om),H(De),H($1),H(ps,8))};static \u0275prov=U({token:e,factory:e.\u0275fac})}return e})();class bf{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,t,r,o,a){this.eventManager=n,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.tracingService=a}destroy(){}destroyNode=null;createElement(n,t){return t?this.doc.createElementNS(yf[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(v0(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(v0(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){t.remove()}selectRootElement(n,t){let r="string"==typeof n?this.doc.querySelector(n):n;if(!r)throw new _(-5104,!1);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,o){if(o){t=o+":"+t;const a=yf[o];a?n.setAttributeNS(a,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const o=yf[r];o?n.removeAttributeNS(o,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,o){o&(Or.DashCase|Or.Important)?n.style.setProperty(t,r,o&Or.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&Or.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){null!=n&&(n[t]=r)}setValue(n,t){n.nodeValue=t}listen(n,t,r,o){if("string"==typeof n&&!(n=Ni().getGlobalEventTarget(this.doc,n)))throw new _(5102,!1);let a=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(a=this.tracingService.wrapEventListener(n,t,a)),this.eventManager.addEventListener(n,t,a,o)}decoratePreventDefault(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&t.preventDefault()}}}function v0(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class i6 extends bf{sharedStylesHost;hostEl;shadowRoot;constructor(n,t,r,o,a,i,s,l,u){super(n,a,i,l,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=o.styles;c=g0(o.id,c);for(const p of c){const m=document.createElement("style");s&&m.setAttribute("nonce",s),m.textContent=p,this.shadowRoot.appendChild(m)}const d=o.getExternalStyles?.();if(d)for(const p of d){const m=ff(p,a);s&&m.setAttribute("nonce",s),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class _f extends bf{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,t,r,o,a,i,s,l,u){super(n,a,i,s,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o;let c=r.styles;this.styles=u?g0(u,c):c,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class b0 extends _f{contentAttr;hostAttr;constructor(n,t,r,o,a,i,s,l,u){const c=o+"-"+r.id;super(n,t,r,a,i,s,l,u,c),this.contentAttr=function r6(e){return"_ngcontent-%COMP%".replace(gf,e)}(c),this.hostAttr=function o6(e){return"_nghost-%COMP%".replace(gf,e)}(c)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}class wf extends Dx{supportsDOMEvents=!0;static makeCurrent(){!function Ex(e){Hv??=e}(new wf)}onAndCancel(n,t,r,o){return n.addEventListener(t,r,o),()=>{n.removeEventListener(t,r,o)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function s6(){return Ps=Ps||document.head.querySelector("base"),Ps?Ps.getAttribute("href"):null}();return null==t?null:function l6(e){return new URL(e,document.baseURI).pathname}(t)}resetBaseElement(){Ps=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Uv(document.cookie,n)}}let Ps=null,c6=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=U({token:e,factory:e.\u0275fac})}return e})();const _0=["alt","control","meta","shift"],m6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},p6={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};function w0(e){return{appProviders:[...w6,...e?.providers??[]],platformProviders:b6}}const b6=[{provide:Om,useValue:"browser"},{provide:B1,useValue:function y6(){wf.makeCurrent()},multi:!0},{provide:Bn,useFactory:function v6(){return function $S(e){Rm=e}(document),document}}],w6=[{provide:Gd,useValue:"root"},{provide:ga,useFactory:function g6(){return new ga}},{provide:pf,useClass:(()=>{class e extends m0{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o,a){return t.addEventListener(r,o,a),()=>this.removeEventListener(t,r,o,a)}removeEventListener(t,r,o,a){return t.removeEventListener(r,o,a)}static \u0275fac=function(r){return new(r||e)(H(Bn))};static \u0275prov=U({token:e,factory:e.\u0275fac})}return e})(),multi:!0,deps:[Bn]},{provide:pf,useClass:(()=>{class e extends m0{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,o,a){const i=e.parseEventName(r),s=e.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ni().onAndCancel(t,i.domEventName,s,a))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const a=e._normalizeKey(r.pop());let i="",s=r.indexOf("code");if(s>-1&&(r.splice(s,1),i="code."),_0.forEach(u=>{const c=r.indexOf(u);c>-1&&(r.splice(c,1),i+=u+".")}),i+=a,0!=r.length||0===a.length)return null;const l={};return l.domEventName=o,l.fullKey=i,l}static matchEventFullKeyCode(t,r){let o=m6[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(o=t.code,a="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),_0.forEach(i=>{i!==o&&(0,p6[i])(t)&&(a+=i+".")}),a+=o,a===r)}static eventCallback(t,r,o){return a=>{e.matchEventFullKeyCode(a,t)&&o.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}static \u0275fac=function(r){return new(r||e)(H(Bn))};static \u0275prov=U({token:e,factory:e.\u0275fac})}return e})(),multi:!0,deps:[Bn]},vf,f0,d0,{provide:bu,useExisting:vf},{provide:zv,useClass:c6},[]];function tt(e){return function D6(e){const n=F(null);try{return e()}finally{F(n)}}(e)}function Mn(e,n){return function nD(e,n){const t=Object.create(rD);t.computation=e,void 0!==n&&(t.equal=n);const r=()=>{if(kn(t),st(t),t.value===kr)throw t.error;return t.value};return r[ue]=t,r}(e,n?.equal)}Error,Error;var At=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}(At||{}),Re=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}(Re||{}),en=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}(en||{});function dc(e,n){return bn(Mt(e)[Le.DateFormat],n)}function mc(e,n){return bn(Mt(e)[Le.TimeFormat],n)}function pc(e,n){return bn(Mt(e)[Le.DateTimeFormat],n)}function vn(e,n){const t=Mt(e),r=t[Le.NumberSymbols][n];if(typeof r>"u"){if(12===n)return t[Le.NumberSymbols][0];if(13===n)return t[Le.NumberSymbols][1]}return r}function I0(e){if(!e[Le.ExtraData])throw new _(2303,!1)}function bn(e,n){for(let t=n;t>-1;t--)if(typeof e[t]<"u")return e[t];throw new _(2304,!1)}function Df(e){const[n,t]=e.split(":");return{hours:+n,minutes:+t}}const X6=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,hc={},e7=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function t7(e,n,t,r){let o=function c7(e){if(N0(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[o,a=1,i=1]=e.split("-").map(s=>+s);return fc(o,a-1,i)}const t=parseFloat(e);if(!isNaN(e-t))return new Date(t);let r;if(r=e.match(X6))return function d7(e){const n=new Date(0);let t=0,r=0;const o=e[8]?n.setUTCFullYear:n.setFullYear,a=e[8]?n.setUTCHours:n.setHours;e[9]&&(t=Number(e[9]+e[10]),r=Number(e[9]+e[11])),o.call(n,Number(e[1]),Number(e[2])-1,Number(e[3]));const i=Number(e[4]||0)-t,s=Number(e[5]||0)-r,l=Number(e[6]||0),u=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return a.call(n,i,s,l,u),n}(r)}const n=new Date(e);if(!N0(n))throw new _(2302,!1);return n}(e);n=hr(t,n)||n;let s,i=[];for(;n;){if(s=e7.exec(n),!s){i.push(n);break}{i=i.concat(s.slice(1));const c=i.pop();if(!c)break;n=c}}let l=o.getTimezoneOffset();r&&(l=A0(r,l),o=function u7(e,n){const o=e.getTimezoneOffset();return function l7(e,n){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+n),e}(e,-1*(A0(n,o)-o))}(o,r));let u="";return i.forEach(c=>{const d=function s7(e){if(Sf[e])return Sf[e];let n;switch(e){case"G":case"GG":case"GGG":n=Fe(3,Re.Abbreviated);break;case"GGGG":n=Fe(3,Re.Wide);break;case"GGGGG":n=Fe(3,Re.Narrow);break;case"y":n=rt(0,1,0,!1,!0);break;case"yy":n=rt(0,2,0,!0,!0);break;case"yyy":n=rt(0,3,0,!1,!0);break;case"yyyy":n=rt(0,4,0,!1,!0);break;case"Y":n=bc(1);break;case"YY":n=bc(2,!0);break;case"YYY":n=bc(3);break;case"YYYY":n=bc(4);break;case"M":case"L":n=rt(1,1,1);break;case"MM":case"LL":n=rt(1,2,1);break;case"MMM":n=Fe(2,Re.Abbreviated);break;case"MMMM":n=Fe(2,Re.Wide);break;case"MMMMM":n=Fe(2,Re.Narrow);break;case"LLL":n=Fe(2,Re.Abbreviated,At.Standalone);break;case"LLLL":n=Fe(2,Re.Wide,At.Standalone);break;case"LLLLL":n=Fe(2,Re.Narrow,At.Standalone);break;case"w":n=xf(1);break;case"ww":n=xf(2);break;case"W":n=xf(1,!0);break;case"d":n=rt(2,1);break;case"dd":n=rt(2,2);break;case"c":case"cc":n=rt(7,1);break;case"ccc":n=Fe(1,Re.Abbreviated,At.Standalone);break;case"cccc":n=Fe(1,Re.Wide,At.Standalone);break;case"ccccc":n=Fe(1,Re.Narrow,At.Standalone);break;case"cccccc":n=Fe(1,Re.Short,At.Standalone);break;case"E":case"EE":case"EEE":n=Fe(1,Re.Abbreviated);break;case"EEEE":n=Fe(1,Re.Wide);break;case"EEEEE":n=Fe(1,Re.Narrow);break;case"EEEEEE":n=Fe(1,Re.Short);break;case"a":case"aa":case"aaa":n=Fe(0,Re.Abbreviated);break;case"aaaa":n=Fe(0,Re.Wide);break;case"aaaaa":n=Fe(0,Re.Narrow);break;case"b":case"bb":case"bbb":n=Fe(0,Re.Abbreviated,At.Standalone,!0);break;case"bbbb":n=Fe(0,Re.Wide,At.Standalone,!0);break;case"bbbbb":n=Fe(0,Re.Narrow,At.Standalone,!0);break;case"B":case"BB":case"BBB":n=Fe(0,Re.Abbreviated,At.Format,!0);break;case"BBBB":n=Fe(0,Re.Wide,At.Format,!0);break;case"BBBBB":n=Fe(0,Re.Narrow,At.Format,!0);break;case"h":n=rt(3,1,-12);break;case"hh":n=rt(3,2,-12);break;case"H":n=rt(3,1);break;case"HH":n=rt(3,2);break;case"m":n=rt(4,1);break;case"mm":n=rt(4,2);break;case"s":n=rt(5,1);break;case"ss":n=rt(5,2);break;case"S":n=rt(6,1);break;case"SS":n=rt(6,2);break;case"SSS":n=rt(6,3);break;case"Z":case"ZZ":case"ZZZ":n=gc(0);break;case"ZZZZZ":n=gc(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=gc(1);break;case"OOOO":case"ZZZZ":case"zzzz":n=gc(2);break;default:return null}return Sf[e]=n,n}(c);u+=d?d(o,t,l):"''"===c?"'":c.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function fc(e,n,t){const r=new Date(0);return r.setFullYear(e,n,t),r.setHours(0,0,0),r}function hr(e,n){const t=function $6(e){return Mt(e)[Le.LocaleId]}(e);if(hc[t]??={},hc[t][n])return hc[t][n];let r="";switch(n){case"shortDate":r=dc(e,en.Short);break;case"mediumDate":r=dc(e,en.Medium);break;case"longDate":r=dc(e,en.Long);break;case"fullDate":r=dc(e,en.Full);break;case"shortTime":r=mc(e,en.Short);break;case"mediumTime":r=mc(e,en.Medium);break;case"longTime":r=mc(e,en.Long);break;case"fullTime":r=mc(e,en.Full);break;case"short":const o=hr(e,"shortTime"),a=hr(e,"shortDate");r=yc(pc(e,en.Short),[o,a]);break;case"medium":const i=hr(e,"mediumTime"),s=hr(e,"mediumDate");r=yc(pc(e,en.Medium),[i,s]);break;case"long":const l=hr(e,"longTime"),u=hr(e,"longDate");r=yc(pc(e,en.Long),[l,u]);break;case"full":const c=hr(e,"fullTime"),d=hr(e,"fullDate");r=yc(pc(e,en.Full),[c,d])}return r&&(hc[t][n]=r),r}function yc(e,n){return n&&(e=e.replace(/\{([^}]+)}/g,function(t,r){return null!=n&&r in n?n[r]:t})),e}function An(e,n,t="-",r,o){let a="";(e<0||o&&e<=0)&&(o?e=1-e:(e=-e,a=t));let i=String(e);for(;i.length<n;)i="0"+i;return r&&(i=i.slice(i.length-n)),a+i}function rt(e,n,t=0,r=!1,o=!1){return function(a,i){let s=function r7(e,n){switch(e){case 0:return n.getFullYear();case 1:return n.getMonth();case 2:return n.getDate();case 3:return n.getHours();case 4:return n.getMinutes();case 5:return n.getSeconds();case 6:return n.getMilliseconds();case 7:return n.getDay();default:throw new _(2301,!1)}}(e,a);if((t>0||s>-t)&&(s+=t),3===e)0===s&&-12===t&&(s=12);else if(6===e)return function n7(e,n){return An(e,3).substring(0,n)}(s,n);const l=vn(i,5);return An(s,n,l,r,o)}}function Fe(e,n,t=At.Format,r=!1){return function(o,a){return function o7(e,n,t,r,o,a){switch(t){case 2:return function z6(e,n,t){const r=Mt(e),a=bn([r[Le.MonthsFormat],r[Le.MonthsStandalone]],n);return bn(a,t)}(n,o,r)[e.getMonth()];case 1:return function U6(e,n,t){const r=Mt(e),a=bn([r[Le.DaysFormat],r[Le.DaysStandalone]],n);return bn(a,t)}(n,o,r)[e.getDay()];case 0:const i=e.getHours(),s=e.getMinutes();if(a){const u=function K6(e){const n=Mt(e);return I0(n),(n[Le.ExtraData][2]||[]).map(r=>"string"==typeof r?Df(r):[Df(r[0]),Df(r[1])])}(n),c=function Q6(e,n,t){const r=Mt(e);I0(r);const a=bn([r[Le.ExtraData][0],r[Le.ExtraData][1]],n)||[];return bn(a,t)||[]}(n,o,r),d=u.findIndex(p=>{if(Array.isArray(p)){const[m,h]=p,f=i>=m.hours&&s>=m.minutes,y=i<h.hours||i===h.hours&&s<h.minutes;if(m.hours<h.hours){if(f&&y)return!0}else if(f||y)return!0}else if(p.hours===i&&p.minutes===s)return!0;return!1});if(-1!==d)return c[d]}return function H6(e,n,t){const r=Mt(e),a=bn([r[Le.DayPeriodsFormat],r[Le.DayPeriodsStandalone]],n);return bn(a,t)}(n,o,r)[i<12?0:1];case 3:return function G6(e,n){return bn(Mt(e)[Le.Eras],n)}(n,r)[e.getFullYear()<=0?0:1];default:throw new _(2302,!1)}}(o,a,e,n,t,r)}}function gc(e){return function(n,t,r){const o=-1*r,a=vn(t,5),i=o>0?Math.floor(o/60):Math.ceil(o/60);switch(e){case 0:return(o>=0?"+":"")+An(i,2,a)+An(Math.abs(o%60),2,a);case 1:return"GMT"+(o>=0?"+":"")+An(i,1,a);case 2:return"GMT"+(o>=0?"+":"")+An(i,2,a)+":"+An(Math.abs(o%60),2,a);case 3:return 0===r?"Z":(o>=0?"+":"")+An(i,2,a)+":"+An(Math.abs(o%60),2,a);default:throw new _(2302,!1)}}}const a7=0,vc=4;function M0(e){const n=e.getDay(),t=0===n?-3:vc-n;return fc(e.getFullYear(),e.getMonth(),e.getDate()+t)}function xf(e,n=!1){return function(t,r){let o;if(n){const a=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,i=t.getDate();o=1+Math.floor((i+a)/7)}else{const a=M0(t),i=function i7(e){const n=fc(e,a7,1).getDay();return fc(e,0,1+(n<=vc?vc:vc+7)-n)}(a.getFullYear()),s=a.getTime()-i.getTime();o=1+Math.round(s/6048e5)}return An(o,e,vn(r,5))}}function bc(e,n=!1){return function(t,r){return An(M0(t).getFullYear(),e,vn(r,5),n)}}const Sf={};function A0(e,n){e=e.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(t)?n:t}function N0(e){return e instanceof Date&&!isNaN(e.valueOf())}const Rf=/\s+/,F0=[];let Xa=(()=>{class e{_ngEl;_renderer;initialClasses=F0;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=null!=t?t.trim().split(Rf):F0}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Rf):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const o=this.stateMap.get(t);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],o=t[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Rf).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static \u0275fac=function(r){return new(r||e)(x(pn),x(Ao))};static \u0275dir=Z({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return e})();class E7{$implicit;ngForOf;index;count;constructor(n,t,r,o){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gn=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,a,i)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new E7(o.item,this._ngForOf,-1,-1),null===i?void 0:i);else if(null==i)r.remove(null===a?void 0:a);else if(null!==a){const s=r.get(a);r.move(s,i),j0(s,o)}});for(let o=0,a=r.length;o<a;o++){const s=r.get(o).context;s.index=o,s.count=a,s.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{j0(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||e)(x(zn),x(mr),x(af))};static \u0275dir=Z({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function j0(e,n){e.context.$implicit=n.item}let fr=(()=>{class e{_viewContainer;_context=new D7;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){B0(t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){B0(t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||e)(x(zn),x(mr))};static \u0275dir=Z({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})();class D7{$implicit=null;ngIf=null}function B0(e,n){if(e&&!e.createEmbeddedView)throw new _(2020,!1)}function Nn(e,n){return new _(2100,!1)}class T7{createSubscription(n,t,r){return tt(()=>n.subscribe({next:t,error:r}))}dispose(n){tt(()=>n.unsubscribe())}}class I7{createSubscription(n,t,r){return n.then(o=>t?.(o),o=>r?.(o)),{unsubscribe:()=>{t=null,r=null}}}dispose(n){n.unsubscribe()}}const M7=new I7,A7=new T7;let $0=(()=>{class e{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=P(lr);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(Pu(t))return M7;if(f2(t))return A7;throw Nn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||e)(x(of,16))};static \u0275pipe=Vt({name:"async",type:e,pure:!1})}return e})();const L7=new N(""),j7=new N("");let H0=(()=>{class e{locale;defaultTimezone;defaultOptions;constructor(t,r,o){this.locale=t,this.defaultTimezone=r,this.defaultOptions=o}transform(t,r,o,a){if(null==t||""===t||t!=t)return null;try{return t7(t,r??this.defaultOptions?.dateFormat??"mediumDate",a||this.locale,o??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(i){throw Nn()}}static \u0275fac=function(r){return new(r||e)(x($r,16),x(L7,24),x(j7,24))};static \u0275pipe=Vt({name:"date",type:e,pure:!0})}return e})(),tn=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=cs({type:e});static \u0275inj=aa({})}return e})(),Ur=(()=>{class e{messageSubject=new Cr;message$=this.messageSubject.asObservable();emitErrorMessage(t){this.messageSubject.next({type:"error",message:t})}emitInfoMessage(t){this.messageSubject.next({type:"info",message:t})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const K7=(e,n)=>({"toast-error":e,"toast-info":n});function Q7(e,n){if(1&e){const t=Xt();w(0,"div",2)(1,"div",3)(2,"strong",4),L(3),E(),w(4,"small"),L(5),Ss(6,"date"),E(),w(7,"button",5),J("click",function(){const o=mt(t).$implicit;return pt(pe().removeMessage(o.id))}),L(8,"\xd7"),E()(),w(9,"div",6),L(10),E()()}if(2&e){const t=n.$implicit;V("ngClass",zh(7,K7,"error"===t.type,"info"===t.type)),I(3),fn("error"===t.type?"Error":"Information"),I(2),fn(function Qk(e,n,t,r){const o=e+G,a=C(),i=bo(a,o);return Ts(a,o)?Gk(a,Tt(),n,i.transform,t,r,i):i.transform(t,r)}(6,4,t.timestamp,"HH:mm:ss")),I(5),zt(" ",t.message," ")}}let J7=(()=>{class e{notificationService;messages=[];subscription=new Gt;messageCounter=0;displayDuration=3500;constructor(t){this.notificationService=t}ngOnInit(){this.subscription.add(this.notificationService.message$.subscribe(t=>{const r=this.messageCounter++;this.messages.push({id:r,type:t.type,message:t.message,timestamp:new Date}),setTimeout(()=>{this.removeMessage(r)},this.displayDuration)}))}ngOnDestroy(){this.subscription.unsubscribe()}removeMessage(t){const r=this.messages.findIndex(o=>o.id===t);-1!==r&&this.messages.splice(r,1)}static \u0275fac=function(r){return new(r||e)(x(Ur))};static \u0275cmp=Bt({type:e,selectors:[["app-toast-notification"]],decls:2,vars:1,consts:[[1,"toast-container"],["class","toast",3,"ngClass",4,"ngFor","ngForOf"],[1,"toast",3,"ngClass"],[1,"toast-header"],[1,"toast-title"],["type","button",1,"toast-close",3,"click"],[1,"toast-body"]],template:function(r,o){1&r&&(w(0,"div",0),Ie(1,Q7,11,10,"div",1),E()),2&r&&(I(),V("ngForOf",o.messages))},dependencies:[tn,Xa,Gn,H0],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:9999;max-width:350px}.toast[_ngcontent-%COMP%]{position:relative;margin-bottom:10px;padding:12px 15px;border-radius:4px;box-shadow:0 4px 12px #00000026;overflow:hidden;transition:all .3s ease;animation:_ngcontent-%COMP%_slide-in .5s ease-out;background-color:#fff;border-left:4px solid #777;color:#212529}.toast.toast-error[_ngcontent-%COMP%]{border-left-color:#d9534f}.toast.toast-error[_ngcontent-%COMP%]   .toast-title[_ngcontent-%COMP%]{color:#d9534f}.toast.toast-info[_ngcontent-%COMP%]{border-left-color:#5bc0de}.toast.toast-info[_ngcontent-%COMP%]   .toast-title[_ngcontent-%COMP%]{color:#5bc0de}.toast-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:5px}.toast-header[_ngcontent-%COMP%]   .toast-title[_ngcontent-%COMP%]{font-weight:700;margin-right:10px}.toast-header[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-size:.8em}.toast-header[_ngcontent-%COMP%]   .toast-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;line-height:1;color:#6c757d;cursor:pointer;padding:0;margin-left:10px}.toast-header[_ngcontent-%COMP%]   .toast-close[_ngcontent-%COMP%]:hover{color:#212529}.toast-body[_ngcontent-%COMP%]{word-wrap:break-word}@keyframes _ngcontent-%COMP%_slide-in{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@keyframes _ngcontent-%COMP%_slide-out{0%{transform:translate(0);opacity:1}to{transform:translate(100%);opacity:0}}"]})}return e})();function zr(e){return this instanceof zr?(this.v=e,this):new zr(e)}function W0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function $f(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=e[a]&&function(i){return new Promise(function(s,l){!function o(a,i,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},i)}(s,l,(i=e[a](i)).done,i.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const K0=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Q0(e){return Je(e?.then)}function J0(e){return Je(e[xd])}function Y0(e){return Symbol.asyncIterator&&Je(e?.[Symbol.asyncIterator])}function Z0(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const X0=function C8(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function eC(e){return Je(e?.[X0])}function tC(e){return function q0(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=t.apply(e,n||[]),a=[];return o=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function i(m){return function(h){return Promise.resolve(h).then(m,d)}}),o[Symbol.asyncIterator]=function(){return this},o;function s(m,h){r[m]&&(o[m]=function(f){return new Promise(function(y,g){a.push([m,f,y,g])>1||l(m,f)})},h&&(o[m]=h(o[m])))}function l(m,h){try{!function u(m){m.value instanceof zr?Promise.resolve(m.value.v).then(c,d):p(a[0][2],m)}(r[m](h))}catch(f){p(a[0][3],f)}}function c(m){l("next",m)}function d(m){l("throw",m)}function p(m,h){m(h),a.shift(),a.length&&l(a[0][0],a[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:o}=yield zr(t.read());if(o)return yield zr(void 0);yield yield zr(r)}}finally{t.releaseLock()}})}function nC(e){return Je(e?.getReader)}function Gr(e){if(e instanceof gt)return e;if(null!=e){if(J0(e))return function E8(e){return new gt(n=>{const t=e[xd]();if(Je(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(K0(e))return function D8(e){return new gt(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(Q0(e))return function x8(e){return new gt(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Ng)})}(e);if(Y0(e))return rC(e);if(eC(e))return function S8(e){return new gt(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(nC(e))return function T8(e){return rC(tC(e))}(e)}throw Z0(e)}function rC(e){return new gt(n=>{(function I8(e,n){var t,r,o,a;return function z0(e,n,t,r){return new(t||(t=Promise))(function(a,i){function s(c){try{u(r.next(c))}catch(d){i(d)}}function l(c){try{u(r.throw(c))}catch(d){i(d)}}function u(c){c.done?a(c.value):function o(a){return a instanceof t?a:new t(function(i){i(a)})}(c.value).then(s,l)}u((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=W0(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(i){o={error:i}}finally{try{r&&!r.done&&(a=t.return)&&(yield a.call(t))}finally{if(o)throw o.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function yr(e,n,t,r=0,o=!1){const a=n.schedule(function(){t(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(a),!o)return a}function oC(e,n=0){return Vn((t,r)=>{t.subscribe(Sn(r,o=>yr(r,e,()=>r.next(o),n),()=>yr(r,e,()=>r.complete(),n),o=>yr(r,e,()=>r.error(o),n)))})}function aC(e,n=0){return Vn((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function iC(e,n){if(!e)throw new Error("Iterable cannot be null");return new gt(t=>{yr(t,n,()=>{const r=e[Symbol.asyncIterator]();yr(t,n,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function Ls(e,n){return n?function P8(e,n){if(null!=e){if(J0(e))return function M8(e,n){return Gr(e).pipe(aC(n),oC(n))}(e,n);if(K0(e))return function N8(e,n){return new gt(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(Q0(e))return function A8(e,n){return Gr(e).pipe(aC(n),oC(n))}(e,n);if(Y0(e))return iC(e,n);if(eC(e))return function R8(e,n){return new gt(t=>{let r;return yr(t,n,()=>{r=e[X0](),yr(t,n,()=>{let o,a;try{({value:o,done:a}=r.next())}catch(i){return void t.error(i)}a?t.complete():t.next(o)},0,!0)}),()=>Je(r?.return)&&r.return()})}(e,n);if(nC(e))return function O8(e,n){return iC(tC(e),n)}(e,n)}throw Z0(e)}(e,n):Gr(e)}const{isArray:F8}=Array,{getPrototypeOf:L8,prototype:j8,keys:B8}=Object;function sC(e){if(1===e.length){const n=e[0];if(F8(n))return{args:n,keys:null};if(function V8(e){return e&&"object"==typeof e&&L8(e)===j8}(n)){const t=B8(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}function Uf(e){return e[e.length-1]}function lC(e){return Je(Uf(e))?e.pop():void 0}function wc(e){return function $8(e){return e&&Je(e.schedule)}(Uf(e))?e.pop():void 0}const{isArray:H8}=Array;function uC(e){return Ft(n=>function U8(e,n){return H8(n)?e(...n):e(n)}(e,n))}function cC(e,n){return e.reduce((t,r,o)=>(t[r]=n[o],t),{})}let dC=(()=>{class e{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||e)(x(Ao),x(pn))};static \u0275dir=Z({type:e})}return e})(),Uo=(()=>{class e extends dC{static \u0275fac=(()=>{let t;return function(o){return(t||(t=wt(e)))(o||e)}})();static \u0275dir=Z({type:e,features:[Se]})}return e})();const qn=new N(""),G8={provide:qn,useExisting:Oe(()=>zf),multi:!0};let zf=(()=>{class e extends Uo{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(o){return(t||(t=wt(e)))(o||e)}})();static \u0275dir=Z({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){1&r&&J("change",function(i){return o.onChange(i.target.checked)})("blur",function(){return o.onTouched()})},standalone:!1,features:[Ve([G8]),Se]})}return e})();const q8={provide:qn,useExisting:Oe(()=>ei),multi:!0},K8=new N("");let ei=(()=>{class e extends dC{_compositionMode;_composing=!1;constructor(t,r,o){super(t,r),this._compositionMode=o,null==this._compositionMode&&(this._compositionMode=!function W8(){const e=Ni()?Ni().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||e)(x(Ao),x(pn),x(K8,8))};static \u0275dir=Z({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){1&r&&J("input",function(i){return o._handleInput(i.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(i){return o._compositionEnd(i.target.value)})},standalone:!1,features:[Ve([q8]),Se]})}return e})();const kt=new N(""),qr=new N("");function vC(e){return n=>{const t=n.value?.length??function qf(e){return null==e?null:Array.isArray(e)||"string"==typeof e?e.length:e instanceof Set?e.size:null}(n.value);return null!==t&&t>e?{maxlength:{requiredLength:e,actualLength:t}}:null}}function kc(e){return null}function _C(e){return null!=e}function wC(e){return Pu(e)?Ls(e):e}function kC(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function CC(e,n){return n.map(t=>t(e))}function EC(e){return e.map(n=>function J8(e){return!e.validate}(n)?n:t=>n.validate(t))}function Wf(e){return null!=e?function DC(e){if(!e)return null;const n=e.filter(_C);return 0==n.length?null:function(t){return kC(CC(t,n))}}(EC(e)):null}function Kf(e){return null!=e?function xC(e){if(!e)return null;const n=e.filter(_C);return 0==n.length?null:function(t){return function z8(...e){const n=lC(e),{args:t,keys:r}=sC(e),o=new gt(a=>{const{length:i}=t;if(!i)return void a.complete();const s=new Array(i);let l=i,u=i;for(let c=0;c<i;c++){let d=!1;Gr(t[c]).subscribe(Sn(a,p=>{d||(d=!0,u--),s[c]=p},()=>l--,void 0,()=>{(!l||!d)&&(u||a.next(r?cC(r,s):s),a.complete())}))}});return n?o.pipe(uC(n)):o}(CC(t,n).map(wC)).pipe(Ft(kC))}}(EC(e)):null}function SC(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function Qf(e){return e?Array.isArray(e)?e:[e]:[]}function Cc(e,n){return Array.isArray(e)?e.includes(n):e===n}function MC(e,n){const t=Qf(n);return Qf(e).forEach(o=>{Cc(t,o)||t.push(o)}),t}function AC(e,n){return Qf(n).filter(t=>!Cc(e,t))}class NC{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Wf(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=Kf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class Nt extends NC{name;get formDirective(){return null}get path(){return null}}class Wr extends NC{_parent=null;name=null;valueAccessor=null}class RC{_cd;constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let Ec=(()=>{class e extends RC{constructor(t){super(t)}static \u0275fac=function(r){return new(r||e)(x(Wr,2))};static \u0275dir=Z({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){2&r&&zu("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[Se]})}return e})();const js="VALID",xc="INVALID",ti="PENDING",Bs="DISABLED";class ni{}class PC extends ni{value;source;constructor(n,t){super(),this.value=n,this.source=t}}class Zf extends ni{pristine;source;constructor(n,t){super(),this.pristine=n,this.source=t}}class Xf extends ni{touched;source;constructor(n,t){super(),this.touched=n,this.source=t}}class Sc extends ni{status;source;constructor(n,t){super(),this.status=n,this.source=t}}function Tc(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class ny{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(n,t){this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return tt(this.statusReactive)}set status(n){tt(()=>this.statusReactive.set(n))}_status=Mn(()=>this.statusReactive());statusReactive=Ir(void 0);get valid(){return this.status===js}get invalid(){return this.status===xc}get pending(){return this.status==ti}get disabled(){return this.status===Bs}get enabled(){return this.status!==Bs}errors;get pristine(){return tt(this.pristineReactive)}set pristine(n){tt(()=>this.pristineReactive.set(n))}_pristine=Mn(()=>this.pristineReactive());pristineReactive=Ir(!0);get dirty(){return!this.pristine}get touched(){return tt(this.touchedReactive)}set touched(n){tt(()=>this.touchedReactive.set(n))}_touched=Mn(()=>this.touchedReactive());touchedReactive=Ir(!1);get untouched(){return!this.touched}_events=new Cr;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(MC(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(MC(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(AC(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(AC(n,this._rawAsyncValidators))}hasValidator(n){return Cc(this._rawValidators,n)}hasAsyncValidator(n){return Cc(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){const t=!1===this.touched;this.touched=!0;const r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched({...n,sourceControl:r}),t&&!1!==n.emitEvent&&this._events.next(new Xf(!0,r))}markAllAsDirty(n={}){this.markAsDirty({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(n))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(n))}markAsUntouched(n={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=n.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:r})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,r),t&&!1!==n.emitEvent&&this._events.next(new Xf(!1,r))}markAsDirty(n={}){const t=!0===this.pristine;this.pristine=!1;const r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty({...n,sourceControl:r}),t&&!1!==n.emitEvent&&this._events.next(new Zf(!1,r))}markAsPristine(n={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=n.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,r),t&&!1!==n.emitEvent&&this._events.next(new Zf(!0,r))}markAsPending(n={}){this.status=ti;const t=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new Sc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending({...n,sourceControl:t})}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=Bs,this.errors=null,this._forEachChild(o=>{o.disable({...n,onlySelf:!0})}),this._updateValue();const r=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new PC(this.value,r)),this._events.next(new Sc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t},this),this._onDisabledChange.forEach(o=>o(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=js,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n,t){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===js||this.status===ti)&&this._runAsyncValidator(r,n.emitEvent)}const t=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new PC(this.value,t)),this._events.next(new Sc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity({...n,sourceControl:t})}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bs:js}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,t){if(this.asyncValidator){this.status=ti,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t,shouldHaveEmitted:!1!==n};const r=wC(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:t,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const n=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(n,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,t,r){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||r)&&this._events.next(new Sc(this.status,t)),this._parent&&this._parent._updateControlsErrors(n,t,r)}_initObservables(){this.valueChanges=new ot,this.statusChanges=new ot}_calculateStatus(){return this._allControlsDisabled()?Bs:this.errors?xc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ti)?ti:this._anyControlsHaveStatus(xc)?xc:js}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,t){const r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,t),o&&this._events.next(new Zf(this.pristine,t))}_updateTouched(n={},t){this.touched=this._anyControlsTouched(),this._events.next(new Xf(this.touched,t)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,t)}_onDisabledChange=[];_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Tc(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function oj(e){return Array.isArray(e)?Wf(e):e||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function aj(e){return Array.isArray(e)?Kf(e):e||null}(this._rawAsyncValidators)}}const ri=new N("",{providedIn:"root",factory:()=>Ic}),Ic="always";function Vs(e,n,t=Ic){(function oy(e,n){const t=function TC(e){return e._rawValidators}(e);null!==n.validator?e.setValidators(SC(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const r=function IC(e){return e._rawAsyncValidators}(e);null!==n.asyncValidator?e.setAsyncValidators(SC(r,n.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const o=()=>e.updateValueAndValidity();Nc(n._rawValidators,o),Nc(n._rawAsyncValidators,o)})(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||"always"===t)&&n.valueAccessor.setDisabledState?.(e.disabled),function lj(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&VC(e,n)})}(e,n),function cj(e,n){const t=(r,o)=>{n.valueAccessor.writeValue(r),o&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function uj(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&VC(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function sj(e,n){if(n.valueAccessor.setDisabledState){const t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function Nc(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function VC(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function UC(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function zC(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}Promise.resolve();const GC=class extends ny{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(n=null,t,r){super(function ey(e){return(Tc(e)?e.validators:e)||null}(t),function ty(e,n){return(Tc(n)?n.asyncValidators:e)||null}(r,t)),this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=zC(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){UC(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){UC(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){zC(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},_j={provide:Wr,useExisting:Oe(()=>Hs)},qC=Promise.resolve();let Hs=(()=>{class e extends Wr{_changeDetectorRef;callSetDisabledState;control=new GC;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ot;constructor(t,r,o,a,i,s){super(),this._changeDetectorRef=i,this.callSetDisabledState=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function sy(e,n){if(!n)return null;let t,r,o;return Array.isArray(n),n.forEach(a=>{a.constructor===ei?t=a:function pj(e){return Object.getPrototypeOf(e.constructor)===Uo}(a)?r=a:o=a}),o||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function iy(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Vs(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){qC.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&function lf(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}(r);qC.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Mc(e,n){return[...n.path,e]}(t,this._parent):[t]}static \u0275fac=function(r){return new(r||e)(x(Nt,9),x(kt,10),x(qr,10),x(qn,10),x(of,8),x(ri,8))};static \u0275dir=Z({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ve([_j]),Se,Mr]})}return e})();let zo=(()=>{class e{_validator=kc;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):kc,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Z({type:e,features:[Mr]})}return e})();const Uj={provide:kt,useExisting:Oe(()=>dy),multi:!0};let dy=(()=>{class e extends zo{maxlength;inputName="maxlength";normalizeInput=t=>function nE(e){return"number"==typeof e?e:parseInt(e,10)}(t);createValidator=t=>vC(t);static \u0275fac=(()=>{let t;return function(o){return(t||(t=wt(e)))(o||e)}})();static \u0275dir=Z({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,o){2&r&&It("maxlength",o._enabled?o.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Ve([Uj]),Se]})}return e})(),Gj=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=cs({type:e});static \u0275inj=aa({})}return e})(),Go=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:ri,useValue:t.callSetDisabledState??Ic}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=cs({type:e});static \u0275inj=aa({imports:[Gj]})}return e})(),oi=(()=>{class e{el;previousValue="";constructor(t){this.el=t}onFocus(){this.previousValue=this.el.nativeElement.value,this.el.nativeElement.value=""}onBlur(){""===this.el.nativeElement.value&&(this.el.nativeElement.value=this.previousValue,this.el.nativeElement.dispatchEvent(new Event("input",{bubbles:!0})))}static \u0275fac=function(r){return new(r||e)(x(pn))};static \u0275dir=Z({type:e,selectors:[["input","type","tel"]],hostBindings:function(r,o){1&r&&J("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()})}})}return e})();var zs=function(e){return e.poison="poison",e.wound="wound",e.brittle="brittle",e.ward="ward",e.immobilize="immobilize",e.bane="bane",e.muddle="muddle",e.stun="stun",e.impair="impair",e.disarm="disarm",e}(zs||{}),Qe=function(e){return e.None="none",e.Full="full",e.Half="half",e}(Qe||{}),nn=function(e){return e.Fire="fire",e.Ice="ice",e.Earth="earth",e.Air="air",e.Light="light",e.Dark="dark",e}(nn||{});let Gs=(()=>{class e{constructor(){}getData(){return{conditions:["stun","immobilize","disarm","wound","muddle","poison","invisible","strengthen","regenerate","ward","brittle","bane","impair","curse","bless"],monsters:[{name:"abael-herder",edition:"fh",count:6,baseStat:{type:"normal"},stats:[{level:0,health:4,movement:3,attack:2},{level:1,health:6,movement:3,attack:2},{level:2,health:8,movement:3,attack:2},{level:3,health:9,movement:3,attack:3},{level:4,health:11,movement:4,attack:3},{level:5,health:14,movement:4,attack:3},{level:6,health:18,movement:4,attack:4,actions:[{type:"condition",value:"muddle"}]},{level:7,health:24,movement:4,attack:4,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:0,health:6,movement:3,attack:3,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:1,health:9,movement:3,attack:3,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:2,health:11,movement:4,attack:3,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:3,health:13,movement:4,attack:4,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:4,health:17,movement:4,attack:4,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:5,health:20,movement:4,attack:5,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:6,health:28,movement:5,attack:5,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:7,health:36,movement:5,attack:6,actions:[{type:"condition",value:"muddle"}]}]},{name:"abael-scout",edition:"fh",deck:"scout",count:6,baseStat:{type:"normal"},stats:[{level:0,health:2,movement:3,attack:3},{level:1,health:3,movement:3,attack:3,actions:[{type:"condition",value:"poison"}]},{level:2,health:4,movement:4,attack:3,actions:[{type:"condition",value:"poison"}]},{level:3,health:4,movement:4,attack:4,actions:[{type:"condition",value:"poison"}]},{level:4,health:5,movement:4,attack:4,actions:[{type:"condition",value:"poison"}]},{level:5,health:7,movement:4,attack:4,actions:[{type:"condition",value:"poison"}]},{level:6,health:10,movement:4,attack:5,actions:[{type:"condition",value:"poison"}]},{level:7,health:14,movement:4,attack:5,actions:[{type:"condition",value:"poison"}]},{type:"elite",level:0,health:5,movement:4,attack:3},{type:"elite",level:1,health:5,movement:4,attack:4,actions:[{type:"condition",value:"poison"}]},{type:"elite",level:2,health:7,movement:4,attack:4,actions:[{type:"condition",value:"poison"}]},{type:"elite",level:3,health:9,movement:5,attack:4,actions:[{type:"condition",value:"poison"}]},{type:"elite",level:4,health:10,movement:5,attack:5,actions:[{type:"condition",value:"poison"}]},{type:"elite",level:5,health:13,movement:5,attack:5,actions:[{type:"condition",value:"poison"}]},{type:"elite",level:6,health:17,movement:5,attack:6,actions:[{type:"condition",value:"poison"}]},{type:"elite",level:7,health:23,movement:5,attack:6,actions:[{type:"condition",value:"poison"}]}]},{name:"algox-archer",edition:"fh",deck:"archer",count:6,baseStat:{type:"normal",movement:2},stats:[{level:0,health:4,movement:1,attack:3},{level:1,health:5,movement:2,attack:3},{level:2,health:7,movement:2,attack:3},{level:3,health:7,movement:2,attack:4},{level:4,health:10,movement:2,attack:4},{level:5,health:13,movement:2,attack:4},{level:6,health:19,movement:2,attack:4},{level:7,health:22,movement:2,attack:5},{type:"elite",level:0,health:6,attack:4},{type:"elite",level:1,health:8,attack:4},{type:"elite",level:2,health:11,attack:4},{type:"elite",level:3,health:12,attack:5},{type:"elite",level:4,health:16,attack:5},{type:"elite",level:5,health:18,attack:6},{type:"elite",level:6,health:28,attack:6},{type:"elite",level:7,health:33,attack:7}]},{name:"algox-guard",edition:"fh",deck:"guard",count:6,baseStat:{type:"normal"},stats:[{level:0,health:6,movement:2,attack:3},{level:1,health:7,movement:3,attack:3},{level:2,health:10,movement:3,attack:3},{level:3,health:12,movement:3,attack:4},{level:4,health:15,movement:4,attack:4},{level:5,health:19,movement:4,attack:4},{level:6,health:25,movement:4,attack:5},{level:7,health:33,movement:5,attack:5},{type:"elite",level:0,health:10,movement:2,attack:4},{type:"elite",level:1,health:12,movement:3,attack:4},{type:"elite",level:2,health:15,movement:3,attack:5},{type:"elite",level:3,health:19,movement:4,attack:5},{type:"elite",level:4,health:22,movement:4,attack:6},{type:"elite",level:5,health:27,movement:5,attack:6},{type:"elite",level:6,health:37,movement:5,attack:7},{type:"elite",level:7,health:47,movement:6,attack:7}]},{name:"algox-icespeaker",edition:"fh",count:4,baseStat:{type:"normal"},stats:[{level:0,health:6,movement:2,attack:3,actions:[{type:"shield",value:1}]},{level:1,health:8,movement:2,attack:3,actions:[{type:"shield",value:1}]},{level:2,health:10,movement:2,attack:3,actions:[{type:"shield",value:1}]},{level:3,health:12,movement:3,attack:3,actions:[{type:"shield",value:1}]},{level:4,health:14,movement:3,attack:4,actions:[{type:"shield",value:1}]},{level:5,health:15,movement:3,attack:4,actions:[{type:"shield",value:2}]},{level:6,health:20,movement:3,attack:5,actions:[{type:"shield",value:2}]},{level:7,health:27,movement:4,attack:5,actions:[{type:"shield",value:2}],immunities:["brittle"]},{type:"elite",level:0,health:8,movement:2,attack:4,actions:[{type:"shield",value:2}]},{type:"elite",level:1,health:8,movement:2,attack:4,actions:[{type:"shield",value:2},{type:"condition",value:"brittle"}]},{type:"elite",level:2,health:10,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"condition",value:"brittle"}]},{type:"elite",level:3,health:12,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"condition",value:"brittle"}]},{type:"elite",level:4,health:15,movement:4,attack:5,actions:[{type:"shield",value:2},{type:"condition",value:"brittle"}]},{type:"elite",level:5,health:18,movement:4,attack:6,actions:[{type:"shield",value:2},{type:"condition",value:"brittle"}]},{type:"elite",level:6,health:26,movement:4,attack:6,actions:[{type:"shield",value:2},{type:"condition",value:"brittle"}],immunities:["brittle"]},{type:"elite",level:7,health:35,movement:4,attack:6,actions:[{type:"shield",value:2},{type:"condition",value:"brittle"}],immunities:["brittle"]}]},{name:"algox-priest",edition:"fh",deck:"priest",count:6,baseStat:{type:"normal",movement:2},stats:[{level:0,health:5,attack:2},{level:1,health:6,attack:2,actions:[{type:"shield",value:1}]},{level:2,health:7,attack:3,actions:[{type:"shield",value:1}]},{level:3,health:9,attack:3,actions:[{type:"shield",value:1}]},{level:4,health:12,attack:3,actions:[{type:"shield",value:1}]},{level:5,health:15,attack:3,actions:[{type:"shield",value:1}]},{level:6,health:20,attack:4,actions:[{type:"shield",value:1}]},{level:7,health:27,attack:4,actions:[{type:"shield",value:1}]},{type:"elite",level:0,health:7,movement:3,attack:3,actions:[{type:"pierce",value:2}]},{type:"elite",level:1,health:7,movement:3,attack:3,actions:[{type:"shield",value:2},{type:"pierce",value:2}]},{type:"elite",level:2,health:9,movement:3,attack:3,actions:[{type:"shield",value:2},{type:"pierce",value:2}]},{type:"elite",level:3,health:12,movement:3,attack:3,actions:[{type:"shield",value:2},{type:"pierce",value:2}]},{type:"elite",level:4,health:14,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"pierce",value:2}]},{type:"elite",level:5,health:19,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"pierce",value:2}]},{type:"elite",level:6,health:25,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"pierce",value:3}]},{type:"elite",level:7,health:34,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"pierce",value:3}]}]},{name:"algox-scout",edition:"fh",deck:"scout",count:6,baseStat:{type:"normal"},stats:[{level:0,health:7,movement:3,attack:2},{level:1,health:8,movement:4,attack:2},{level:2,health:11,movement:4,attack:2},{level:3,health:12,movement:4,attack:3},{level:4,health:15,movement:4,attack:3},{level:5,health:18,movement:5,attack:3},{level:6,health:24,movement:5,attack:4},{level:7,health:33,movement:5,attack:4},{type:"elite",level:0,health:10,movement:4,attack:3},{type:"elite",level:1,health:12,movement:4,attack:3,actions:[{type:"condition",value:"impair"}]},{type:"elite",level:2,health:13,movement:5,attack:4,actions:[{type:"condition",value:"impair"}]},{type:"elite",level:3,health:17,movement:5,attack:4,actions:[{type:"condition",value:"impair"}]},{type:"elite",level:4,health:22,movement:5,attack:4,actions:[{type:"condition",value:"impair"}]},{type:"elite",level:5,health:26,movement:5,attack:5,actions:[{type:"condition",value:"impair"}]},{type:"elite",level:6,health:32,movement:6,attack:6,actions:[{type:"condition",value:"impair"}]},{type:"elite",level:7,health:40,movement:6,attack:7,actions:[{type:"condition",value:"impair"}]}]},{name:"algox-snowspeaker",edition:"fh",count:4,baseStat:{type:"normal"},stats:[{level:0,health:6,movement:1,attack:2,actions:[{type:"retaliate",value:1,subActions:[{type:"range",value:5,small:!0}]}]},{level:1,health:7,movement:1,attack:3,actions:[{type:"retaliate",value:1,subActions:[{type:"range",value:5,small:!0}]}]},{level:2,health:9,movement:2,attack:3,actions:[{type:"retaliate",value:1,subActions:[{type:"range",value:5,small:!0}]}]},{level:3,health:12,movement:2,attack:3,actions:[{type:"retaliate",value:1,subActions:[{type:"range",value:5,small:!0}]}]},{level:4,health:13,movement:2,attack:4,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:5,small:!0}]}]},{level:5,health:15,movement:3,attack:4,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:5,small:!0}]}]},{level:6,health:20,movement:3,attack:5,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:5,small:!0}]}]},{level:7,health:27,movement:3,attack:5,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:5,small:!0}]}],immunities:["brittle"]},{type:"elite",level:0,health:8,movement:2,attack:3,actions:[{type:"retaliate",value:1,subActions:[{type:"range",value:5,small:!0}]}]},{type:"elite",level:1,health:10,movement:2,attack:4,actions:[{type:"retaliate",value:1,subActions:[{type:"range",value:5,small:!0}]},{type:"push",value:1}]},{type:"elite",level:2,health:12,movement:2,attack:4,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:5,small:!0}]},{type:"push",value:1}]},{type:"elite",level:3,health:15,movement:3,attack:4,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:5,small:!0}]},{type:"push",value:1}]},{type:"elite",level:4,health:17,movement:3,attack:5,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:5,small:!0}]},{type:"push",value:2}]},{type:"elite",level:5,health:21,movement:4,attack:5,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:5,small:!0}]},{type:"push",value:2}]},{type:"elite",level:6,health:27,movement:4,attack:6,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:5,small:!0}]},{type:"push",value:2}],immunities:["brittle"]},{type:"elite",level:7,health:35,movement:4,attack:7,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:5,small:!0}]},{type:"push",value:2}],immunities:["brittle"]}]},{name:"algox-stormcaller",edition:"fh",deck:"boss",boss:!0,hidden:!0,count:1,baseStat:{type:"boss",health:"Cx20",movement:2,attack:3,immunities:["immobilize","disarm","stun","curse"],special:[[{type:"attack",value:1,valueType:"minus",subActions:[{type:"target",value:"[C]",small:!0},{type:"range",value:5,small:!0},{type:"push",value:2,small:!0}]},{type:"summon",value:"monsterStandee",valueObject:[{monster:{name:"wind-demon",player2:"normal",player3:"normal",player4:"elite"}}]}],[{type:"custom",value:"%data.custom.fh.algox-stormcaller.1%",small:!0},{type:"summon",value:"monsterStandee",valueObject:[{monster:{name:"frost-demon",player2:"normal",player3:"elite",player4:"elite"}}]}]]},stats:[{level:0,health:"Cx20",movement:2,attack:3},{level:1,health:"Cx20",movement:3,attack:3,actions:[{type:"shield",value:1}]},{level:2,health:"Cx22",movement:3,attack:4,actions:[{type:"shield",value:1}]},{level:3,health:"Cx26",movement:3,attack:4,actions:[{type:"shield",value:1}]},{level:4,health:"Cx29",movement:3,attack:5,actions:[{type:"shield",value:1}]},{level:5,health:"Cx29",movement:3,attack:5,actions:[{type:"shield",value:2}]},{level:6,health:"Cx39",movement:3,attack:6,actions:[{type:"shield",value:2}]},{level:7,health:"Cx44",movement:3,attack:7,actions:[{type:"shield",value:3}]}]},{name:"ancient-artillery",edition:"fh",count:6,baseStat:{type:"normal",immunities:["muddle"]},stats:[{level:0,health:4,attack:2},{level:1,health:6,attack:2},{level:2,health:8,attack:2},{level:3,health:9,attack:3},{level:4,health:12,attack:3},{level:5,health:15,attack:3},{level:6,health:18,attack:4},{level:7,health:21,attack:5},{type:"elite",level:0,health:7,attack:3},{type:"elite",level:1,health:9,attack:3},{type:"elite",level:2,health:12,attack:3},{type:"elite",level:3,health:14,attack:4},{type:"elite",level:4,health:16,attack:5},{type:"elite",level:5,health:21,attack:5},{type:"elite",level:6,health:26,attack:6},{type:"elite",level:7,health:34,attack:7}]},{name:"augmented-mindthief",edition:"fh",deck:"steel-automaton",boss:!0,hidden:!0,count:1,standeeShare:"steel-automaton",baseStat:{type:"boss",immunities:["poison","disarm"]},stats:[{level:0,health:"10x(C-1)",movement:2,attack:4},{level:1,health:"12x(C-1)",movement:2,attack:4},{level:2,health:"14x(C-1)",movement:2,attack:5},{level:3,health:"17x(C-1)",movement:3,attack:5},{level:4,health:"22x(C-1)",movement:3,attack:5},{level:5,health:"25x(C-1)",movement:3,attack:6},{level:6,health:"26x(C-1)",movement:3,attack:7},{level:7,health:"36x(C-1)",movement:4,attack:7}]},{name:"belara",edition:"fh",boss:!0,hidden:!0,count:1,standeeShare:"savvas-lavaflow",baseStat:{type:"boss",immunities:["stun"]},stats:[{level:0,health:"13xC/2",movement:3,attack:3},{level:1,health:"15xC/2",movement:3,attack:3,actions:[{type:"condition",value:"wound"}]},{level:2,health:"18xC/2",movement:3,attack:3,actions:[{type:"condition",value:"poison"},{type:"condition",value:"wound"}]},{level:3,health:"21xC/2",movement:3,attack:4,actions:[{type:"condition",value:"poison"},{type:"condition",value:"wound"}]},{level:4,health:"25xC/2",movement:4,attack:4,actions:[{type:"condition",value:"poison"},{type:"condition",value:"wound"}]},{level:5,health:"30xC/2",movement:4,attack:5,actions:[{type:"condition",value:"poison"},{type:"condition",value:"wound"}]},{level:6,health:"40xC/2",movement:4,attack:6,actions:[{type:"condition",value:"poison"},{type:"condition",value:"wound"}]},{level:7,health:"50xC/2",movement:4,attack:7,actions:[{type:"condition",value:"poison"},{type:"condition",value:"wound"}]}]},{name:"black-imp",edition:"fh",deck:"imp",catching:!0,count:10,baseStat:{type:"normal",movement:1},stats:[{level:0,health:3,attack:1},{level:1,health:3,attack:1,actions:[{type:"condition",value:"poison"}]},{level:2,health:4,attack:1,actions:[{type:"condition",value:"poison"}]},{level:3,health:4,attack:2,actions:[{type:"condition",value:"poison"}]},{level:4,health:5,attack:2,actions:[{type:"condition",value:"poison"}]},{level:5,health:7,attack:2,actions:[{type:"condition",value:"poison"}]},{level:6,health:9,attack:3,actions:[{type:"condition",value:"poison"}]},{level:7,health:13,attack:3,actions:[{type:"condition",value:"poison"}]},{type:"elite",level:0,health:3,attack:2,actions:[{type:"condition",value:"poison"}]},{type:"elite",level:1,health:5,attack:2,actions:[{type:"condition",value:"poison"}]},{type:"elite",level:2,health:7,attack:2,actions:[{type:"condition",value:"poison"}]},{type:"elite",level:3,health:7,attack:2,actions:[{type:"custom",value:"%data.custom.fh.black-imp.1%",small:!0},{type:"condition",value:"poison"}]},{type:"elite",level:4,health:7,attack:3,actions:[{type:"custom",value:"%data.custom.fh.black-imp.1%",small:!0},{type:"condition",value:"poison"}]},{type:"elite",level:5,health:9,attack:3,actions:[{type:"custom",value:"%data.custom.fh.black-imp.1%",small:!0},{type:"condition",value:"poison"}]},{type:"elite",level:6,health:12,attack:4,actions:[{type:"custom",value:"%data.custom.fh.black-imp.1%",small:!0},{type:"condition",value:"poison"}]},{type:"elite",level:7,health:18,attack:4,actions:[{type:"custom",value:"%data.custom.fh.black-imp.1%",small:!0},{type:"condition",value:"poison"}]}]},{name:"blacksmith",edition:"fh",deck:"guard",boss:!0,hidden:!0,count:1,standeeShare:"city-guard",baseStat:{type:"boss"},stats:[{level:0,health:"6xC",movement:2,attack:3,actions:[{type:"shield",value:1}]},{level:1,health:"6xC",movement:2,attack:3,actions:[{type:"shield",value:2}]},{level:2,health:"9xC",movement:2,attack:3,actions:[{type:"shield",value:2}]},{level:3,health:"9xC",movement:2,attack:4,actions:[{type:"shield",value:2},{type:"retaliate",value:1}]},{level:4,health:"10xC",movement:3,attack:4,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]},{level:5,health:"13xC",movement:3,attack:4,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]},{level:6,health:"15xC",movement:3,attack:4,actions:[{type:"shield",value:3},{type:"retaliate",value:3}]},{level:7,health:"20xC",movement:3,attack:5,actions:[{type:"shield",value:3},{type:"retaliate",value:3}]}]},{name:"brother",edition:"fh",deck:"boss",boss:!0,hidden:!0,count:2,standeeShare:"city-guard",baseStat:{type:"boss",movement:0,attack:4,special:[[{type:"custom",value:"%data.custom.fh.brother.1%",small:!0,subActions:[{type:"attack",value:0,valueType:"plus"}]}],[{type:"custom",value:"%data.custom.fh.brother.2%",small:!0,subActions:[{type:"heal",value:2,subActions:[{type:"specialTarget",value:"allies",small:!0},{type:"range",value:2,small:!0}]}]}]]},stats:[{level:0,health:"2xC"},{level:1,health:"3xC"},{level:2,health:"4xC"},{level:3,health:"5xC"},{level:4,health:"6xC"},{level:5,health:"7xC"},{level:6,health:"8xC"},{level:7,health:"9xC"}]},{name:"burrowing-blade",edition:"fh",count:6,baseStat:{type:"normal"},stats:[{level:0,health:4,movement:2,attack:2,actions:[{type:"shield",value:1}]},{level:1,health:4,movement:3,attack:2,actions:[{type:"shield",value:2},{type:"condition",value:"wound"}]},{level:2,health:5,movement:3,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"wound"}]},{level:3,health:7,movement:3,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"wound"}]},{level:4,health:7,movement:3,attack:3,actions:[{type:"shield",value:3},{type:"condition",value:"wound"}]},{level:5,health:8,movement:3,attack:4,actions:[{type:"shield",value:3},{type:"condition",value:"wound"}]},{level:6,health:11,movement:4,attack:4,actions:[{type:"shield",value:3},{type:"condition",value:"wound"}]},{level:7,health:13,movement:4,attack:5,actions:[{type:"shield",value:3},{type:"condition",value:"wound"}]},{type:"elite",level:0,health:5,movement:3,attack:3,actions:[{type:"shield",value:2}]},{type:"elite",level:1,health:5,movement:4,attack:3,actions:[{type:"shield",value:3},{type:"condition",value:"wound"}]},{type:"elite",level:2,health:6,movement:4,attack:4,actions:[{type:"shield",value:3},{type:"condition",value:"wound"}]},{type:"elite",level:3,health:7,movement:4,attack:5,actions:[{type:"shield",value:3},{type:"condition",value:"wound"}]},{type:"elite",level:4,health:9,movement:4,attack:5,actions:[{type:"shield",value:3},{type:"condition",value:"wound"}]},{type:"elite",level:5,health:11,movement:5,attack:5,actions:[{type:"shield",value:3},{type:"condition",value:"wound"}]},{type:"elite",level:6,health:15,movement:5,attack:6,actions:[{type:"shield",value:3},{type:"condition",value:"wound"}]},{type:"elite",level:7,health:19,movement:5,attack:7,actions:[{type:"shield",value:3},{type:"condition",value:"wound"}]}]},{name:"chaos-demon",edition:"fh",count:6,baseStat:{type:"normal",actions:[{type:"condition",value:"muddle"}]},stats:[{level:0,health:7,movement:3,attack:2},{level:1,health:8,movement:3,attack:3},{level:2,health:11,movement:3,attack:3},{level:3,health:12,movement:3,attack:4},{level:4,health:14,movement:4,attack:4},{level:5,health:16,movement:4,attack:5},{level:6,health:20,movement:4,attack:6},{level:7,health:25,movement:4,attack:7,immunities:["curse"]},{type:"elite",level:0,health:10,movement:4,attack:3},{type:"elite",level:1,health:12,movement:4,attack:4},{type:"elite",level:2,health:14,movement:4,attack:5},{type:"elite",level:3,health:18,movement:5,attack:5},{type:"elite",level:4,health:21,movement:5,attack:6},{type:"elite",level:5,health:26,movement:5,attack:6},{type:"elite",level:6,health:33,movement:5,attack:8,immunities:["curse"]},{type:"elite",level:7,health:39,movement:6,attack:9,immunities:["curse"]}]},{name:"chaos-lieutenant",edition:"fh",deck:"chaos-demon",boss:!0,hidden:!0,count:1,standeeShare:"chaos-demon",baseStat:{type:"boss",actions:[{type:"condition",value:"muddle"},{type:"custom",value:"%data.custom.fh.chaos-lieutenant.1%",small:!0,subActions:[{type:"heal",value:"X",subActions:[{type:"specialTarget",value:"self",small:!0},{type:"custom",value:"%data.custom.fh.chaos-lieutenant.2%",small:!0}]}]}]},stats:[{level:0,health:10,movement:4,attack:3,immunities:["disarm","stun"]},{level:1,health:12,movement:4,attack:4,immunities:["disarm","stun"]},{level:2,health:14,movement:4,attack:5,immunities:["disarm","stun"]},{level:3,health:18,movement:5,attack:5,immunities:["disarm","stun"]},{level:4,health:21,movement:5,attack:6,immunities:["disarm","stun"]},{level:5,health:26,movement:5,attack:6,immunities:["disarm","stun"]},{level:6,health:33,movement:5,attack:8,immunities:["disarm","stun","curse"]},{level:7,health:39,movement:6,attack:9,immunities:["disarm","stun","curse"]}]},{name:"chaos-spark",edition:"fh",boss:!0,hidden:!0,count:"Cx2",standeeCount:12,baseStat:{type:"boss",actions:[{type:"custom",value:"%data.custom.fh.chaos-spark.3%"}]},stats:[{level:0,health:1},{level:1,health:2},{level:2,health:3},{level:3,health:4},{level:4,health:5},{level:5,health:6},{level:6,health:7},{level:7,health:8}]},{name:"city-guard-scenario-1",edition:"fh",hidden:!0,count:6,standeeShare:"city-guard",baseStat:{type:"normal"},stats:[{level:0,health:5,movement:2,attack:2,actions:[{type:"shield",value:1},{type:"retaliate",value:2}]},{level:1,health:5,movement:2,attack:2,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]},{level:2,health:7,movement:2,attack:2,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]},{level:3,health:8,movement:2,attack:3,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]},{level:4,health:9,movement:3,attack:3,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]},{level:5,health:10,movement:3,attack:3,actions:[{type:"shield",value:3},{type:"retaliate",value:2}]},{level:6,health:13,movement:3,attack:4,actions:[{type:"shield",value:3},{type:"retaliate",value:2}]},{level:7,health:17,movement:3,attack:4,actions:[{type:"shield",value:3},{type:"retaliate",value:2}]},{type:"elite",level:0,health:6,movement:2,attack:3,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]},{type:"elite",level:1,health:6,movement:2,attack:3,actions:[{type:"shield",value:3},{type:"retaliate",value:2}]},{type:"elite",level:2,health:9,movement:2,attack:3,actions:[{type:"shield",value:3},{type:"retaliate",value:2}]},{type:"elite",level:3,health:9,movement:2,attack:4,actions:[{type:"shield",value:3},{type:"retaliate",value:3}]},{type:"elite",level:4,health:10,movement:3,attack:4,actions:[{type:"shield",value:3},{type:"retaliate",value:4}]},{type:"elite",level:5,health:13,movement:3,attack:4,actions:[{type:"shield",value:3},{type:"retaliate",value:4}]},{type:"elite",level:6,health:15,movement:3,attack:4,actions:[{type:"shield",value:4},{type:"retaliate",value:5}]},{type:"elite",level:7,health:20,movement:3,attack:5,actions:[{type:"shield",value:4},{type:"retaliate",value:5}]}]},{name:"city-guard-scenario-129",edition:"fh",deck:"archer",hidden:!0,count:6,baseStat:{type:"normal"},stats:[{level:0,health:5,movement:2,attack:2},{level:1,health:5,movement:2,attack:2,actions:[{type:"shield",value:1}]},{level:2,health:7,movement:2,attack:2,actions:[{type:"shield",value:1}]},{level:3,health:8,movement:2,attack:3,actions:[{type:"shield",value:1}]},{level:4,health:9,movement:3,attack:3,actions:[{type:"shield",value:1}]},{level:5,health:10,movement:3,attack:3,actions:[{type:"shield",value:2}]},{level:6,health:13,movement:3,attack:4,actions:[{type:"shield",value:2}]},{level:7,health:17,movement:3,attack:4,actions:[{type:"shield",value:2}]},{type:"elite",level:0,health:6,movement:2,attack:3,actions:[{type:"shield",value:1}]},{type:"elite",level:1,health:6,movement:2,attack:3,actions:[{type:"shield",value:2}]},{type:"elite",level:2,health:9,movement:2,attack:3,actions:[{type:"shield",value:2}]},{type:"elite",level:3,health:9,movement:2,attack:4,actions:[{type:"shield",value:2},{type:"retaliate",value:1}]},{type:"elite",level:4,health:10,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]},{type:"elite",level:5,health:13,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]},{type:"elite",level:6,health:15,movement:3,attack:4,actions:[{type:"shield",value:3},{type:"retaliate",value:3}]},{type:"elite",level:7,health:20,movement:3,attack:5,actions:[{type:"shield",value:3},{type:"retaliate",value:3}]}]},{name:"city-guard",edition:"fh",deck:"guard",count:6,baseStat:{type:"normal"},stats:[{level:0,health:5,movement:2,attack:2},{level:1,health:5,movement:2,attack:2,actions:[{type:"shield",value:1}]},{level:2,health:7,movement:2,attack:2,actions:[{type:"shield",value:1}]},{level:3,health:8,movement:2,attack:3,actions:[{type:"shield",value:1}]},{level:4,health:9,movement:3,attack:3,actions:[{type:"shield",value:1}]},{level:5,health:10,movement:3,attack:3,actions:[{type:"shield",value:2}]},{level:6,health:13,movement:3,attack:4,actions:[{type:"shield",value:2}]},{level:7,health:17,movement:3,attack:4,actions:[{type:"shield",value:2}]},{type:"elite",level:0,health:6,movement:2,attack:3,actions:[{type:"shield",value:1}]},{type:"elite",level:1,health:6,movement:2,attack:3,actions:[{type:"shield",value:2}]},{type:"elite",level:2,health:9,movement:2,attack:3,actions:[{type:"shield",value:2}]},{type:"elite",level:3,health:9,movement:2,attack:4,actions:[{type:"shield",value:2},{type:"retaliate",value:1}]},{type:"elite",level:4,health:10,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]},{type:"elite",level:5,health:13,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]},{type:"elite",level:6,health:15,movement:3,attack:4,actions:[{type:"shield",value:3},{type:"retaliate",value:3}]},{type:"elite",level:7,health:20,movement:3,attack:5,actions:[{type:"shield",value:3},{type:"retaliate",value:3}]}]},{name:"coral-corpse",edition:"fh",deck:"frozen-corpse",boss:!0,hidden:!0,count:1,standeeShare:"frozen-corpse",baseStat:{type:"boss",actions:[{type:"condition",value:"brittle"}],immunities:["immobilize","disarm","stun"]},stats:[{level:0,health:"10xC",movement:2,attack:2},{level:1,health:"10xC",movement:2,attack:2,actions:[{type:"shield",value:1},{type:"retaliate",value:1},{type:"condition",value:"brittle"}]},{level:2,health:"11xC",movement:2,attack:3,actions:[{type:"shield",value:1},{type:"retaliate",value:1},{type:"condition",value:"brittle"}]},{level:3,health:"14xC",movement:2,attack:3,actions:[{type:"shield",value:1},{type:"retaliate",value:2},{type:"condition",value:"brittle"}]},{level:4,health:"17xC",movement:2,attack:4,actions:[{type:"shield",value:1},{type:"retaliate",value:2},{type:"condition",value:"brittle"}]},{level:5,health:"20xC",movement:3,attack:4,actions:[{type:"shield",value:1},{type:"retaliate",value:3},{type:"condition",value:"brittle"}]},{level:6,health:"24xC",movement:3,attack:5,actions:[{type:"shield",value:2},{type:"retaliate",value:3},{type:"condition",value:"brittle"}]},{level:7,health:"31xC",movement:4,attack:6,actions:[{type:"shield",value:2},{type:"retaliate",value:3},{type:"condition",value:"brittle"}]}]},{name:"deep-terror",edition:"fh",count:10,baseStat:{type:"normal"},stats:[{level:0,health:3,attack:2},{level:1,health:4,attack:2,actions:[{type:"retaliate",value:1}]},{level:2,health:4,attack:3,actions:[{type:"retaliate",value:1}]},{level:3,health:5,attack:3,actions:[{type:"retaliate",value:2}]},{level:4,health:7,attack:3,actions:[{type:"retaliate",value:2}]},{level:5,health:7,attack:4,actions:[{type:"retaliate",value:3}]},{level:6,health:9,attack:4,actions:[{type:"retaliate",value:3}]},{level:7,health:9,attack:5,actions:[{type:"retaliate",value:4}]},{type:"elite",level:0,health:5,attack:3},{type:"elite",level:1,health:6,attack:3,actions:[{type:"retaliate",value:1}]},{type:"elite",level:2,health:7,attack:4,actions:[{type:"retaliate",value:1}]},{type:"elite",level:3,health:8,attack:4,actions:[{type:"retaliate",value:2}]},{type:"elite",level:4,health:9,attack:5,actions:[{type:"retaliate",value:2}]},{type:"elite",level:5,health:11,attack:5,actions:[{type:"retaliate",value:3}]},{type:"elite",level:6,health:13,attack:6,actions:[{type:"retaliate",value:3}]},{type:"elite",level:7,health:16,attack:6,actions:[{type:"retaliate",value:4}]}]},{name:"earth-demon",edition:"fh",count:6,baseStat:{type:"normal"},stats:[{level:0,health:7,movement:1,attack:3},{level:1,health:9,movement:1,attack:3},{level:2,health:12,movement:1,attack:3},{level:3,health:13,movement:2,attack:3},{level:4,health:15,movement:2,attack:4},{level:5,health:17,movement:2,attack:4,actions:[{type:"condition",value:"immobilize"}]},{level:6,health:21,movement:3,attack:4,actions:[{type:"condition",value:"immobilize"}]},{level:7,health:25,movement:3,attack:5,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:0,health:10,movement:2,attack:4},{type:"elite",level:1,health:13,movement:2,attack:4},{type:"elite",level:2,health:18,movement:2,attack:4},{type:"elite",level:3,health:20,movement:2,attack:4,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:4,health:21,movement:3,attack:5,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:5,health:25,movement:3,attack:5,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:6,health:32,movement:3,attack:6,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:7,health:42,movement:3,attack:7,actions:[{type:"condition",value:"immobilize"}]}]},{name:"elder-ooze",edition:"fh",deck:"boss",boss:!0,count:1,baseStat:{type:"boss",health:"Cx16",movement:3,attack:3,immunities:["wound","poison","immobilize","stun"],special:[[{type:"move",value:1,valueType:"plus"},{type:"attack",value:1,valueType:"minus",subActions:[{type:"custom",value:"%data.custom.fh.elder-ooze.1%",small:!0}]},{type:"custom",value:"%data.custom.fh.elder-ooze.2%",small:!0}],[{type:"specialTarget",value:"focusEnemyFarthest",small:!0,subActions:[{type:"attack",value:1,valueType:"plus",subActions:[{type:"range",value:8,small:!0}]}]},{type:"push",value:2,subActions:[{type:"target",value:"%game.target.all%",small:!0},{type:"range",value:1,small:!0}]}]]},stats:[{level:0,health:"Cx16",movement:3,attack:3},{level:1,health:"Cx20",movement:4,attack:3},{level:2,health:"Cx24",movement:4,attack:4},{level:3,health:"Cx30",movement:5,attack:4},{level:4,health:"Cx36",movement:5,attack:5},{level:5,health:"Cx42",movement:5,attack:5},{level:6,health:"Cx59",movement:5,attack:6},{level:7,health:"Cx76",movement:5,attack:7}]},{name:"fish-king-scenario-76",edition:"fh",boss:!0,hidden:!0,count:1,standeeShare:"fish-king",baseStat:{type:"boss",health:"Cx8/2",immunities:["bane","brittle","poison","wound","curse","regenerate","ward","invisible"]},stats:[{level:0,health:"Cx8/2"},{level:1,health:"Cx10/2"},{level:2,health:"Cx12/2"},{level:3,health:"Cx16/2"},{level:4,health:"Cx18/2"},{level:5,health:"Cx24/2"},{level:6,health:"Cx32/2"},{level:7,health:"Cx40/2"}]},{name:"fish-king-scenario-77",edition:"fh",deck:"boss",boss:!0,hidden:!0,count:1,standeeShare:"fish-king",baseStat:{type:"boss",health:"Cx8",attack:3,immunities:["poison","immobilize","disarm","stun","muddle"],special:[[{type:"move",value:0,valueType:"plus"},{type:"attack",value:1,valueType:"minus",subActions:[{type:"specialTarget",value:"enemiesAdjacent",small:!0},{type:"push",value:2,small:!0}]},{type:"summon",value:"monsterStandee",valueObject:[{monster:{name:"piranha-pig",player2:"normal",player3:"elite",player4:"elite"}}]}],[{type:"move",value:0,valueType:"plus"},{type:"specialTarget",value:"focusEnemyFarthest",small:!0,subActions:[{type:"attack",value:0,valueType:"plus",subActions:[{type:"range",value:5,small:!0},{type:"pull",value:4,small:!0},{type:"condition",value:"poison",small:!0}]}]},{type:"custom",value:"%data.custom.fh.fish-king-scenario-77.1%",small:!0}]]},stats:[{level:0,health:"Cx8",attack:3},{level:1,health:"Cx10",attack:4},{level:2,health:"Cx12",attack:5},{level:3,health:"Cx16",attack:5},{level:4,health:"Cx18",attack:6},{level:5,health:"Cx24",attack:6},{level:6,health:"Cx32",attack:7},{level:7,health:"Cx40",attack:8}]},{name:"fish-king",edition:"fh",deck:"boss",boss:!0,count:1,baseStat:{type:"boss",health:"Cx8",movement:3,attack:3,immunities:["poison","immobilize","disarm","stun","muddle"],special:[[{type:"move",value:0,valueType:"plus"},{type:"attack",value:1,valueType:"minus",subActions:[{type:"specialTarget",value:"enemiesAdjacent",small:!0},{type:"push",value:2,small:!0}]},{type:"summon",value:"monsterStandee",valueObject:[{monster:{name:"piranha-pig",player2:"normal",player3:"elite",player4:"elite"}}]}],[{type:"move",value:0,valueType:"plus"},{type:"specialTarget",value:"focusEnemyFarthest",small:!0,subActions:[{type:"attack",value:0,valueType:"plus",subActions:[{type:"range",value:5,small:!0},{type:"pull",value:4,small:!0},{type:"condition",value:"poison",small:!0}]}]}]]},stats:[{level:0,health:"Cx8",movement:3,attack:3},{level:1,health:"Cx10",movement:3,attack:4},{level:2,health:"Cx12",movement:3,attack:5},{level:3,health:"Cx16",movement:4,attack:5},{level:4,health:"Cx18",movement:4,attack:6},{level:5,health:"Cx24",movement:4,attack:6},{level:6,health:"Cx32",movement:4,attack:7},{level:7,health:"Cx40",movement:4,attack:8}]},{name:"flame-demon",edition:"fh",flying:!0,count:6,baseStat:{type:"normal"},stats:[{level:0,health:2,movement:3,attack:2,actions:[{type:"shield",value:2}]},{level:1,health:2,movement:3,attack:2,actions:[{type:"shield",value:3}]},{level:2,health:3,movement:3,attack:3,actions:[{type:"shield",value:3}]},{level:3,health:3,movement:3,attack:3,actions:[{type:"shield",value:3},{type:"retaliate",value:2,subActions:[{type:"range",value:2,small:!0}]}]},{level:4,health:3,movement:4,attack:3,actions:[{type:"shield",value:3},{type:"retaliate",value:3,subActions:[{type:"range",value:2,small:!0}]}]},{level:5,health:4,movement:4,attack:3,actions:[{type:"shield",value:4},{type:"retaliate",value:3,subActions:[{type:"range",value:2,small:!0}]}]},{level:6,health:4,movement:4,attack:4,actions:[{type:"shield",value:4},{type:"retaliate",value:4,subActions:[{type:"range",value:2,small:!0}]}]},{level:7,health:6,movement:4,attack:4,actions:[{type:"shield",value:4},{type:"retaliate",value:5,subActions:[{type:"range",value:2,small:!0}]}]},{type:"elite",level:0,health:3,movement:3,attack:2,actions:[{type:"shield",value:3}]},{type:"elite",level:1,health:3,movement:3,attack:2,actions:[{type:"shield",value:4},{type:"retaliate",value:2,subActions:[{type:"range",value:3,small:!0}]}]},{type:"elite",level:2,health:4,movement:3,attack:3,actions:[{type:"shield",value:4},{type:"retaliate",value:2,subActions:[{type:"range",value:3,small:!0}]}]},{type:"elite",level:3,health:5,movement:3,attack:3,actions:[{type:"shield",value:4},{type:"retaliate",value:2,subActions:[{type:"range",value:3,small:!0}]}]},{type:"elite",level:4,health:5,movement:4,attack:4,actions:[{type:"shield",value:4},{type:"retaliate",value:3,subActions:[{type:"range",value:3,small:!0}]}]},{type:"elite",level:5,health:6,movement:4,attack:4,actions:[{type:"shield",value:5},{type:"retaliate",value:3,subActions:[{type:"range",value:3,small:!0}]}]},{type:"elite",level:6,health:7,movement:4,attack:5,actions:[{type:"shield",value:5},{type:"retaliate",value:4,subActions:[{type:"range",value:3,small:!0}]}]},{type:"elite",level:7,health:9,movement:4,attack:6,actions:[{type:"shield",value:5},{type:"retaliate",value:5,subActions:[{type:"range",value:3,small:!0}]}]}]},{name:"flaming-bladespinner",edition:"fh",count:6,baseStat:{type:"normal",immunities:["wound"]},stats:[{level:0,health:6,movement:2,attack:2,actions:[{type:"target",value:2}]},{level:1,health:6,movement:2,attack:2,actions:[{type:"retaliate",value:2},{type:"target",value:3}]},{level:2,health:7,movement:2,attack:3,actions:[{type:"retaliate",value:2},{type:"target",value:3}]},{level:3,health:8,movement:3,attack:3,actions:[{type:"retaliate",value:2},{type:"target",value:3}]},{level:4,health:11,movement:3,attack:3,actions:[{type:"retaliate",value:2},{type:"target",value:3}]},{level:5,health:13,movement:3,attack:4,actions:[{type:"retaliate",value:3},{type:"target",value:3}]},{level:6,health:19,movement:3,attack:4,actions:[{type:"retaliate",value:3},{type:"target",value:3}]},{level:7,health:22,movement:4,attack:4,actions:[{type:"retaliate",value:4},{type:"target",value:3}]},{type:"elite",level:0,health:8,movement:2,attack:3,actions:[{type:"target",value:3}]},{type:"elite",level:1,health:10,movement:2,attack:3,actions:[{type:"retaliate",value:3},{type:"target",value:3}]},{type:"elite",level:2,health:13,movement:2,attack:3,actions:[{type:"retaliate",value:3},{type:"target",value:3}]},{type:"elite",level:3,health:15,movement:2,attack:4,actions:[{type:"retaliate",value:3},{type:"target",value:3}]},{type:"elite",level:4,health:15,movement:3,attack:4,actions:[{type:"retaliate",value:4},{type:"target",value:3}]},{type:"elite",level:5,health:18,movement:3,attack:5,actions:[{type:"retaliate",value:4},{type:"target",value:3}]},{type:"elite",level:6,health:24,movement:3,attack:5,actions:[{type:"retaliate",value:5},{type:"target",value:3}]},{type:"elite",level:7,health:32,movement:4,attack:5,actions:[{type:"retaliate",value:5},{type:"target",value:3}]}]},{name:"flaming-sword-of-justice",edition:"fh",deck:"guard",boss:!0,hidden:!0,count:1,standeeShare:"city-guard",baseStat:{type:"boss"},stats:[{level:0,health:6,movement:2,attack:4,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]},{level:1,health:6,movement:2,attack:4,actions:[{type:"shield",value:2},{type:"condition",value:"wound"}]},{level:2,health:9,movement:2,attack:4,actions:[{type:"shield",value:2},{type:"condition",value:"wound"}]},{level:3,health:9,movement:2,attack:5,actions:[{type:"shield",value:2},{type:"retaliate",value:1},{type:"condition",value:"wound"}]},{level:4,health:10,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"retaliate",value:2},{type:"condition",value:"wound"}]},{level:5,health:13,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"retaliate",value:2},{type:"condition",value:"wound"}]},{level:6,health:15,movement:3,attack:5,actions:[{type:"shield",value:3},{type:"retaliate",value:3},{type:"condition",value:"wound"}]},{level:7,health:20,movement:3,attack:6,actions:[{type:"shield",value:3},{type:"retaliate",value:3},{type:"condition",value:"wound"}]}]},{name:"forest-imp",edition:"fh",deck:"imp",flying:!0,catching:!0,count:10,baseStat:{type:"normal"},stats:[{level:0,health:1,movement:3,attack:1,actions:[{type:"shield",value:1}]},{level:1,health:2,movement:3,attack:1,actions:[{type:"shield",value:1}]},{level:2,health:2,movement:3,attack:2,actions:[{type:"shield",value:1}]},{level:3,health:3,movement:4,attack:2,actions:[{type:"shield",value:1}]},{level:4,health:3,movement:4,attack:2,actions:[{type:"shield",value:2}]},{level:5,health:4,movement:4,attack:2,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{level:6,health:5,movement:4,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{level:7,health:8,movement:4,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{type:"elite",level:0,health:4,movement:3,attack:1,actions:[{type:"shield",value:1}]},{type:"elite",level:1,health:5,movement:3,attack:2,actions:[{type:"shield",value:1}]},{type:"elite",level:2,health:6,movement:3,attack:2,actions:[{type:"shield",value:1},{type:"condition",value:"curse"}]},{type:"elite",level:3,health:7,movement:4,attack:2,actions:[{type:"shield",value:1},{type:"condition",value:"curse"}]},{type:"elite",level:4,health:7,movement:4,attack:2,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{type:"elite",level:5,health:8,movement:4,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{type:"elite",level:6,health:10,movement:4,attack:4,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{type:"elite",level:7,health:14,movement:4,attack:4,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]}]},{name:"fracture-of-the-deep",edition:"fh",deck:"boss",boss:!0,count:1,baseStat:{type:"boss",health:20,movement:2,attack:3,immunities:["wound","poison","disarm","stun","curse"],special:[[{type:"push",value:1,subActions:[{type:"target",value:"%game.target.all%",small:!0},{type:"range",value:1,small:!0}]},{type:"element",value:"ice:wild:wild",valueType:"minus",subActions:[{type:"summon",small:!0,value:"monsterStandee",valueObject:[{monster:{name:"lurker-clawcrusher",player2:"normal",player3:"elite",player4:"elite"}}]}]},{type:"element",value:"dark:wild:wild",valueType:"minus",subActions:[{type:"summon",small:!0,value:"monsterStandee",valueObject:[{monster:{name:"lurker-mindsnipper",player2:"normal",player3:"normal",player4:"elite"}}]}]}],[{type:"move",value:0,valueType:"plus",subActions:[{type:"element",value:"air",valueType:"minus",subActions:[{type:"jump",value:"",small:!0}]}]},{type:"attack",value:0,valueType:"plus",subActions:[{type:"element",value:"fire",valueType:"minus",subActions:[{type:"attack",value:"[C]",valueType:"add",small:!0}]}]},{type:"element",value:"light:wild:wild",valueType:"minus",subActions:[{type:"summon",small:!0,value:"monsterStandee",valueObject:[{monster:{name:"lurker-wavethrower",player2:"normal",player3:"normal",player4:"elite"}}]}]}]]},stats:[{level:0,health:20,movement:2,attack:3},{level:1,health:25,movement:2,attack:4},{level:2,health:30,movement:3,attack:5},{level:3,health:36,movement:3,attack:6},{level:4,health:42,movement:3,attack:7},{level:5,health:50,movement:4,attack:7},{level:6,health:70,movement:4,attack:8},{level:7,health:90,movement:4,attack:9}]},{name:"frost-demon",edition:"fh",count:6,baseStat:{type:"normal"},stats:[{level:0,health:5,movement:2,attack:3},{level:1,health:6,movement:2,attack:3,actions:[{type:"retaliate",value:1}]},{level:2,health:7,movement:3,attack:3,actions:[{type:"retaliate",value:2}]},{level:3,health:8,movement:3,attack:4,actions:[{type:"retaliate",value:2}]},{level:4,health:11,movement:3,attack:4,actions:[{type:"retaliate",value:2}]},{level:5,health:13,movement:3,attack:4,actions:[{type:"retaliate",value:3}]},{level:6,health:18,movement:3,attack:5,actions:[{type:"retaliate",value:3}]},{level:7,health:25,movement:3,attack:5,actions:[{type:"retaliate",value:3}]},{type:"elite",level:0,health:10,movement:3,attack:3},{type:"elite",level:1,health:10,movement:3,attack:3,actions:[{type:"retaliate",value:2}]},{type:"elite",level:2,health:12,movement:4,attack:4,actions:[{type:"retaliate",value:2}]},{type:"elite",level:3,health:14,movement:4,attack:4,actions:[{type:"retaliate",value:3}]},{type:"elite",level:4,health:19,movement:4,attack:4,actions:[{type:"retaliate",value:3}]},{type:"elite",level:5,health:22,movement:4,attack:5,actions:[{type:"retaliate",value:3}]},{type:"elite",level:6,health:29,movement:4,attack:6,actions:[{type:"retaliate",value:4}]},{type:"elite",level:7,health:40,movement:4,attack:7,actions:[{type:"retaliate",value:4}]}]},{name:"frozen-corpse-scenario-118",edition:"fh",deck:"frozen-corpse",hidden:!0,count:6,standeeShare:"frozen-corpse",baseStat:{type:"normal"},stats:[{level:0,health:7,movement:1,attack:2,actions:[{type:"shield",value:3}]},{level:1,health:7,movement:1,attack:2,actions:[{type:"shield",value:4}]},{level:2,health:9,movement:1,attack:2,actions:[{type:"shield",value:4}]},{level:3,health:10,movement:2,attack:2,actions:[{type:"shield",value:4}]},{level:4,health:12,movement:2,attack:3,actions:[{type:"shield",value:4}]},{level:5,health:15,movement:2,attack:3,actions:[{type:"shield",value:4}]},{level:6,health:17,movement:2,attack:4,actions:[{type:"shield",value:5}]},{level:7,health:23,movement:3,attack:5,actions:[{type:"shield",value:5}]},{type:"elite",level:0,health:10,movement:2,attack:2,actions:[{type:"shield",value:3}]},{type:"elite",level:1,health:10,movement:2,attack:2,actions:[{type:"shield",value:4},{type:"retaliate",value:1}]},{type:"elite",level:2,health:11,movement:2,attack:3,actions:[{type:"shield",value:4},{type:"retaliate",value:1}]},{type:"elite",level:3,health:14,movement:2,attack:3,actions:[{type:"shield",value:4},{type:"retaliate",value:2}]},{type:"elite",level:4,health:17,movement:2,attack:4,actions:[{type:"shield",value:4},{type:"retaliate",value:2}]},{type:"elite",level:5,health:20,movement:3,attack:4,actions:[{type:"shield",value:4},{type:"retaliate",value:3}]},{type:"elite",level:6,health:24,movement:3,attack:5,actions:[{type:"shield",value:5},{type:"retaliate",value:3}]},{type:"elite",level:7,health:31,movement:4,attack:6,actions:[{type:"shield",value:5},{type:"retaliate",value:3}]}]},{name:"frozen-corpse-scenario-32",edition:"fh",deck:"frozen-corpse",hidden:!0,count:6,standeeShare:"frozen-corpse",baseStat:{type:"normal"},stats:[{level:0,health:7,movement:1,attack:2,actions:[{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{level:1,health:7,movement:1,attack:2,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{level:2,health:9,movement:1,attack:2,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{level:3,health:10,movement:2,attack:2,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{level:4,health:12,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{level:5,health:15,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{level:6,health:17,movement:2,attack:4,actions:[{type:"shield",value:2},{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{level:7,health:23,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{type:"elite",level:0,health:10,movement:2,attack:2,actions:[{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{type:"elite",level:1,health:10,movement:2,attack:2,actions:[{type:"shield",value:1},{type:"retaliate",value:1},{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{type:"elite",level:2,health:11,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"retaliate",value:1},{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{type:"elite",level:3,health:14,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"retaliate",value:2},{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{type:"elite",level:4,health:17,movement:2,attack:4,actions:[{type:"shield",value:1},{type:"retaliate",value:2},{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{type:"elite",level:5,health:20,movement:3,attack:4,actions:[{type:"shield",value:1},{type:"retaliate",value:3},{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{type:"elite",level:6,health:24,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"retaliate",value:3},{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]},{type:"elite",level:7,health:31,movement:4,attack:6,actions:[{type:"shield",value:2},{type:"retaliate",value:3},{type:"custom",value:"%data.custom.fh.frozen-corpse-scenario-32.1%"}]}]},{name:"frozen-corpse-scenario-65",edition:"fh",deck:"frozen-corpse",hidden:!0,count:6,standeeShare:"frozen-corpse",baseStat:{type:"normal"},stats:[{level:0,health:7,movement:1,attack:2,actions:[{type:"push",value:1}]},{level:1,health:7,movement:1,attack:2,actions:[{type:"shield",value:1},{type:"push",value:1}]},{level:2,health:9,movement:1,attack:2,actions:[{type:"shield",value:1},{type:"push",value:1}]},{level:3,health:10,movement:2,attack:2,actions:[{type:"shield",value:1},{type:"push",value:1}]},{level:4,health:12,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"push",value:2}]},{level:5,health:15,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"push",value:2}]},{level:6,health:17,movement:2,attack:4,actions:[{type:"shield",value:2},{type:"push",value:2}]},{level:7,health:23,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"push",value:2}]},{type:"elite",level:0,health:10,movement:2,attack:2,actions:[{type:"push",value:1}]},{type:"elite",level:1,health:10,movement:2,attack:2,actions:[{type:"shield",value:1},{type:"retaliate",value:1},{type:"push",value:1}]},{type:"elite",level:2,health:11,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"retaliate",value:1},{type:"push",value:1}]},{type:"elite",level:3,health:14,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"retaliate",value:2},{type:"push",value:1}]},{type:"elite",level:4,health:17,movement:2,attack:4,actions:[{type:"shield",value:1},{type:"retaliate",value:2},{type:"push",value:2}]},{type:"elite",level:5,health:20,movement:3,attack:4,actions:[{type:"shield",value:1},{type:"retaliate",value:3},{type:"push",value:2}]},{type:"elite",level:6,health:24,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"retaliate",value:3},{type:"push",value:2}]},{type:"elite",level:7,health:31,movement:4,attack:6,actions:[{type:"shield",value:2},{type:"retaliate",value:3},{type:"push",value:2}]}]},{name:"frozen-corpse",edition:"fh",count:6,baseStat:{type:"normal"},stats:[{level:0,health:7,movement:1,attack:2},{level:1,health:7,movement:1,attack:2,actions:[{type:"shield",value:1}]},{level:2,health:9,movement:1,attack:2,actions:[{type:"shield",value:1}]},{level:3,health:10,movement:2,attack:2,actions:[{type:"shield",value:1}]},{level:4,health:12,movement:2,attack:3,actions:[{type:"shield",value:1}]},{level:5,health:15,movement:2,attack:3,actions:[{type:"shield",value:1}]},{level:6,health:17,movement:2,attack:4,actions:[{type:"shield",value:2}]},{level:7,health:23,movement:3,attack:5,actions:[{type:"shield",value:2}]},{type:"elite",level:0,health:10,movement:2,attack:2},{type:"elite",level:1,health:10,movement:2,attack:2,actions:[{type:"shield",value:1},{type:"retaliate",value:1}]},{type:"elite",level:2,health:11,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"retaliate",value:1}]},{type:"elite",level:3,health:14,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"retaliate",value:2}]},{type:"elite",level:4,health:17,movement:2,attack:4,actions:[{type:"shield",value:1},{type:"retaliate",value:2}]},{type:"elite",level:5,health:20,movement:3,attack:4,actions:[{type:"shield",value:1},{type:"retaliate",value:3}]},{type:"elite",level:6,health:24,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"retaliate",value:3}]},{type:"elite",level:7,health:31,movement:4,attack:6,actions:[{type:"shield",value:2},{type:"retaliate",value:3}]}]},{name:"frozen-fist",edition:"fh",deck:"boss",boss:!0,count:1,baseStat:{type:"boss",immunities:["wound","immobilize","disarm","stun","muddle","curse"],special:[[{type:"move",value:0,valueType:"plus"},{type:"attack",value:1,valueType:"plus",subActions:[{type:"condition",value:"stun"}]},{type:"element",value:"ice"}],[{type:"shield",value:"[L/3+1{$math.ceil}]"},{type:"move",value:1,valueType:"plus"},{type:"attack",value:0,valueType:"plus",subActions:[{type:"target",value:3,small:!0}]}]]},stats:[{level:0,health:"Cx13",movement:3,attack:"Cx2"},{level:1,health:"Cx15",movement:3,attack:"Cx2"},{level:2,health:"Cx16",movement:3,attack:"Cx3"},{level:3,health:"Cx20",movement:4,attack:"Cx3"},{level:4,health:"Cx22",movement:4,attack:"Cx4"},{level:5,health:"Cx27",movement:4,attack:"Cx4"},{level:6,health:"Cx36",movement:4,attack:"Cx5"},{level:7,health:"Cx47",movement:4,attack:"Cx5"}]},{name:"giant-piranha-pig-boss",edition:"fh",boss:!0,hidden:!0,count:1,standeeShare:"piranha-pig",baseStat:{type:"boss",health:0,special:[[{type:"custom",value:"%data.custom.fh.giant-piranha-pig-boss.2%"}],[{type:"custom",value:"%data.custom.fh.giant-piranha-pig-boss.3%"},{type:"summon",value:"piranha-pig"}]]},stats:[{level:0},{level:1},{level:2},{level:3},{level:4},{level:5},{level:6},{level:7}]},{name:"giant-piranha-pig",edition:"fh",deck:"piranha-pig",hidden:!0,count:1,standeeShare:"piranha-pig",baseStat:{type:"normal",movement:1},stats:[{level:0,health:"7xC",attack:3,actions:[{type:"shield",value:1}]},{level:1,health:"7xC",attack:3,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]},{level:2,health:"9xC",attack:3,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]},{level:3,health:"11xC",attack:4,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]},{level:4,health:"15xC",attack:4,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]},{level:5,health:"19xC",attack:4,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]},{level:6,health:"25xC",attack:5,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]},{level:7,health:"33xC",attack:6,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]},{type:"elite",level:0,health:"7xC",attack:3,actions:[{type:"shield",value:1}]},{type:"elite",level:1,health:"7xC",attack:3,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]},{type:"elite",level:2,health:"9xC",attack:3,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]},{type:"elite",level:3,health:"11xC",attack:4,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]},{type:"elite",level:4,health:"15xC",attack:4,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]},{type:"elite",level:5,health:"19xC",attack:4,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]},{type:"elite",level:6,health:"25xC",attack:5,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]},{type:"elite",level:7,health:"33xC",attack:6,actions:[{type:"shield",value:1},{type:"condition",value:"wound"}]}]},{name:"guard-captain",edition:"fh",deck:"guard",hidden:!0,count:6,standeeShare:"city-guard",baseStat:{type:"normal"},stats:[{level:0,health:5,movement:2,attack:2},{level:1,health:5,movement:2,attack:2,actions:[{type:"shield",value:1}]},{level:2,health:7,movement:2,attack:2,actions:[{type:"shield",value:1}]},{level:3,health:8,movement:2,attack:3,actions:[{type:"shield",value:1}]},{level:4,health:9,movement:3,attack:3,actions:[{type:"shield",value:1}]},{level:5,health:10,movement:3,attack:3,actions:[{type:"shield",value:2}]},{level:6,health:10,movement:3,attack:3,actions:[{type:"shield",value:2}]},{level:7,health:10,movement:3,attack:3,actions:[{type:"shield",value:2}]},{type:"elite",level:0,health:6,movement:2,attack:3,actions:[{type:"shield",value:1}]},{type:"elite",level:1,health:6,movement:2,attack:3,actions:[{type:"shield",value:2}]},{type:"elite",level:2,health:9,movement:2,attack:3,actions:[{type:"shield",value:2}]},{type:"elite",level:3,health:9,movement:2,attack:4,actions:[{type:"shield",value:2},{type:"retaliate",value:1}]},{type:"elite",level:4,health:10,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]},{type:"elite",level:5,health:13,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]},{type:"elite",level:6,health:13,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]},{type:"elite",level:7,health:13,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"retaliate",value:2}]}]},{name:"harbinger-of-shadow-1",edition:"fh",deck:"boss",boss:!0,count:1,standeeShare:"harbinger-of-shadow",baseStat:{type:"boss",health:"7xC",movement:2,attack:3,immunities:["wound","poison","immobilize","stun","curse"],special:[[{type:"move",value:0,valueType:"plus"},{type:"attack",value:1,valueType:"minus"},{type:"summon",value:"monsterStandee",valueObject:[{monster:{name:"black-imp",type:"normal"}}],small:!0}],[{type:"custom",value:"%data.custom.fh.harbinger-of-shadow.1%",small:!0}]]},stats:[{level:0,health:24,movement:2,attack:3},{level:1,health:30,movement:3,attack:3},{level:2,health:39,movement:3,attack:4},{level:3,health:48,movement:3,attack:5},{level:4,health:60,movement:3,attack:5},{level:5,health:72,movement:3,attack:6},{level:6,health:97,movement:3,attack:7},{level:7,health:125,movement:3,attack:8}]},{name:"harbinger-of-shadow-2",edition:"fh",deck:"boss",boss:!0,count:1,standeeShare:"harbinger-of-shadow",baseStat:{type:"boss",health:"7xC",movement:2,attack:3,immunities:["wound","poison","immobilize","stun","curse"],special:[[{type:"custom",value:"%data.custom.fh.harbinger-of-shadow.2%",small:!0}],[{type:"move",value:0,valueType:"plus"},{type:"attack",value:1,valueType:"plus",subActions:[{type:"condition",value:"curse",small:!0}]}]]},stats:[{level:0,health:24,movement:2,attack:3},{level:1,health:30,movement:3,attack:3},{level:2,health:39,movement:3,attack:4},{level:3,health:48,movement:3,attack:5},{level:4,health:60,movement:3,attack:5},{level:5,health:72,movement:3,attack:6},{level:6,health:97,movement:3,attack:7},{level:7,health:125,movement:3,attack:8}]},{name:"harbinger-of-shadow",edition:"fh",deck:"boss",boss:!0,count:2,baseStat:{type:"boss",health:"7xC",movement:2,attack:3,immunities:["wound","poison","immobilize","stun","curse"],special:[[{type:"move",value:0,valueType:"plus"},{type:"attack",value:1,valueType:"minus"},{type:"summon",value:"monsterStandee",valueObject:[{monster:{name:"black-imp",type:"normal"}}],small:!0},{type:"custom",value:"%data.custom.fh.harbinger-of-shadow.2%",small:!0}],[{type:"move",value:0,valueType:"plus"},{type:"attack",value:1,valueType:"plus",subActions:[{type:"condition",value:"curse",small:!0}]},{type:"custom",value:"%data.custom.fh.harbinger-of-shadow.1%",small:!0}]]},stats:[{level:0,health:24,movement:2,attack:3},{level:1,health:30,movement:3,attack:3},{level:2,health:39,movement:3,attack:4},{level:3,health:48,movement:3,attack:5},{level:4,health:60,movement:3,attack:5},{level:5,health:72,movement:3,attack:6},{level:6,health:97,movement:3,attack:7},{level:7,health:125,movement:3,attack:8}]},{name:"harrower-infester",edition:"fh",count:4,baseStat:{type:"normal"},stats:[{level:0,health:6,movement:2,attack:2},{level:1,health:7,movement:2,attack:2,actions:[{type:"retaliate",value:1}]},{level:2,health:8,movement:2,attack:2,actions:[{type:"retaliate",value:2}]},{level:3,health:10,movement:2,attack:3,actions:[{type:"retaliate",value:2}]},{level:4,health:12,movement:3,attack:3,actions:[{type:"retaliate",value:2}]},{level:5,health:12,movement:3,attack:4,actions:[{type:"retaliate",value:3}]},{level:6,health:15,movement:3,attack:5,actions:[{type:"retaliate",value:3}]},{level:7,health:18,movement:3,attack:5,actions:[{type:"retaliate",value:4}],immunities:["poison"]},{type:"elite",level:0,health:12,movement:2,attack:2},{type:"elite",level:1,health:12,movement:3,attack:2,actions:[{type:"retaliate",value:2}]},{type:"elite",level:2,health:14,movement:3,attack:3,actions:[{type:"retaliate",value:2}]},{type:"elite",level:3,health:17,movement:3,attack:3,actions:[{type:"retaliate",value:3}]},{type:"elite",level:4,health:19,movement:3,attack:4,actions:[{type:"retaliate",value:3}]},{type:"elite",level:5,health:21,movement:3,attack:5,actions:[{type:"retaliate",value:3}]},{type:"elite",level:6,health:27,movement:3,attack:6,actions:[{type:"retaliate",value:4}],immunities:["poison"]},{type:"elite",level:7,health:32,movement:4,attack:6,actions:[{type:"retaliate",value:4}],immunities:["poison"]}]},{name:"hateful-corpse",edition:"fh",deck:"living-doom",boss:!0,hidden:!0,count:1,standeeShare:"living-doom",baseStat:{type:"boss"},stats:[{level:0,health:"10xC/2",movement:2,attack:6,actions:[{type:"shield",value:1}],immunities:["disarm","stun"]},{level:1,health:"10xC/2",movement:3,attack:6,actions:[{type:"shield",value:2}],immunities:["disarm","stun"]},{level:2,health:"11xC/2",movement:3,attack:7,actions:[{type:"shield",value:2}],immunities:["disarm","stun"]},{level:3,health:"14xC/2",movement:4,attack:7,actions:[{type:"shield",value:2}],immunities:["disarm","stun"]},{level:4,health:"18xC/2",movement:4,attack:7,actions:[{type:"shield",value:2}],immunities:["disarm","stun"]},{level:5,health:"20xC/2",movement:4,attack:8,actions:[{type:"shield",value:2}],immunities:["disarm","stun"]},{level:6,health:"27xC/2",movement:4,attack:9,actions:[{type:"shield",value:2}],immunities:["bane","disarm","stun"]},{level:7,health:"30xC/2",movement:4,attack:9,actions:[{type:"shield",value:3}],immunities:["bane","disarm","stun"]}]},{name:"hound-scenario-0",edition:"fh",hidden:!0,count:6,standeeShare:"hound",baseStat:{type:"normal"},stats:[{level:0,health:4,movement:3,attack:2},{level:1,health:4,movement:4,attack:2,actions:[{type:"retaliate",value:1}]},{level:2,health:6,movement:4,attack:2,actions:[{type:"retaliate",value:1}]},{level:3,health:8,movement:4,attack:2,actions:[{type:"retaliate",value:1}]},{level:4,health:9,movement:4,attack:3,actions:[{type:"retaliate",value:1}]},{level:5,health:10,movement:4,attack:3,actions:[{type:"retaliate",value:2}]},{level:6,health:14,movement:5,attack:3,actions:[{type:"retaliate",value:2}]},{level:7,health:17,movement:5,attack:4,actions:[{type:"retaliate",value:2}]},{type:"elite",level:0,health:6,movement:5,attack:2},{type:"elite",level:1,health:6,movement:5,attack:2,actions:[{type:"retaliate",value:2}]},{type:"elite",level:2,health:7,movement:5,attack:3,actions:[{type:"retaliate",value:2}]},{type:"elite",level:3,health:8,movement:5,attack:4,actions:[{type:"retaliate",value:2}]},{type:"elite",level:4,health:11,movement:5,attack:4,actions:[{type:"retaliate",value:2}]},{type:"elite",level:5,health:13,movement:5,attack:4,actions:[{type:"retaliate",value:3}]},{type:"elite",level:6,health:17,movement:6,attack:5,actions:[{type:"retaliate",value:3}]},{type:"elite",level:7,health:23,movement:6,attack:6,actions:[{type:"retaliate",value:3}]}]},{name:"hound-scenario-112",edition:"fh",deck:"hound",hidden:!0,count:6,standeeShare:"hound",baseStat:{type:"normal"},stats:[{level:0,health:8,movement:3,attack:2},{level:1,health:8,movement:4,attack:2,actions:[{type:"retaliate",value:1}]},{level:2,health:12,movement:4,attack:2,actions:[{type:"retaliate",value:1}]},{level:3,health:16,movement:4,attack:2,actions:[{type:"retaliate",value:1}]},{level:4,health:18,movement:4,attack:3,actions:[{type:"retaliate",value:1}]},{level:5,health:20,movement:4,attack:3,actions:[{type:"retaliate",value:2}]},{level:6,health:28,movement:5,attack:3,actions:[{type:"retaliate",value:2}]},{level:7,health:34,movement:5,attack:4,actions:[{type:"retaliate",value:2}]},{type:"elite",level:0,health:12,movement:5,attack:2},{type:"elite",level:1,health:12,movement:5,attack:2,actions:[{type:"retaliate",value:2}]},{type:"elite",level:2,health:14,movement:5,attack:3,actions:[{type:"retaliate",value:2}]},{type:"elite",level:3,health:16,movement:5,attack:4,actions:[{type:"retaliate",value:2}]},{type:"elite",level:4,health:22,movement:5,attack:4,actions:[{type:"retaliate",value:2}]},{type:"elite",level:5,health:26,movement:5,attack:4,actions:[{type:"retaliate",value:3}]},{type:"elite",level:6,health:34,movement:6,attack:5,actions:[{type:"retaliate",value:3}]},{type:"elite",level:7,health:46,movement:6,attack:6,actions:[{type:"retaliate",value:3}]}]},{name:"hound",edition:"fh",catching:!0,count:6,baseStat:{type:"normal"},stats:[{level:0,health:4,movement:3,attack:2},{level:1,health:4,movement:4,attack:2,actions:[{type:"retaliate",value:1}]},{level:2,health:6,movement:4,attack:2,actions:[{type:"retaliate",value:1}]},{level:3,health:8,movement:4,attack:2,actions:[{type:"retaliate",value:1}]},{level:4,health:9,movement:4,attack:3,actions:[{type:"retaliate",value:1}]},{level:5,health:10,movement:4,attack:3,actions:[{type:"retaliate",value:2}]},{level:6,health:14,movement:5,attack:3,actions:[{type:"retaliate",value:2}]},{level:7,health:17,movement:5,attack:4,actions:[{type:"retaliate",value:2}]},{type:"elite",level:0,health:6,movement:5,attack:2},{type:"elite",level:1,health:6,movement:5,attack:2,actions:[{type:"retaliate",value:2}]},{type:"elite",level:2,health:7,movement:5,attack:3,actions:[{type:"retaliate",value:2}]},{type:"elite",level:3,health:8,movement:5,attack:4,actions:[{type:"retaliate",value:2}]},{type:"elite",level:4,health:11,movement:5,attack:4,actions:[{type:"retaliate",value:2}]},{type:"elite",level:5,health:13,movement:5,attack:4,actions:[{type:"retaliate",value:3}]},{type:"elite",level:6,health:17,movement:6,attack:5,actions:[{type:"retaliate",value:3}]},{type:"elite",level:7,health:23,movement:6,attack:6,actions:[{type:"retaliate",value:3}]}]},{name:"hungry-maw",edition:"fh",deck:"boss",boss:!0,hidden:!0,count:1,standeeShare:"frozen-corpse",baseStat:{type:"boss",immunities:["wound","poison","immobilize","disarm","stun","curse"],special:[[{type:"move",value:1,valueType:"plus"},{type:"attack",value:1,valueType:"plus",subActions:[{type:"target",value:2,small:!0}]},{type:"push",value:2,subActions:[{type:"target",value:"%game.target.all%",small:!0},{type:"range",value:1,small:!0}]},{type:"element",value:"ice"}],[{type:"shield",value:1},{type:"move",value:0,valueType:"plus",subActions:[{type:"element",value:"fire",valueType:"minus",small:!0,subActions:[{type:"move",value:2,valueType:"add",small:!0},{type:"sufferDamage",value:1,small:!0}]}]},{type:"attack",value:0,valueType:"plus"},{type:"element",value:"ice",valueType:"minus",subActions:[{type:"push",value:2,valueType:"add",small:!0},{type:"target",value:"%game.target.all%",small:!0},{type:"range",value:1,small:!0},{type:"condition",value:"brittle",small:!0}]}]]},stats:[{level:0,health:"10xC",movement:2,attack:2},{level:1,health:"10xC",movement:2,attack:2,actions:[{type:"shield",value:1},{type:"retaliate",value:1}]},{level:2,health:"11xC",movement:2,attack:3,actions:[{type:"shield",value:1},{type:"retaliate",value:1}]},{level:3,health:"14xC",movement:2,attack:3,actions:[{type:"shield",value:1},{type:"retaliate",value:2}]},{level:4,health:"17xC",movement:2,attack:4,actions:[{type:"shield",value:1},{type:"retaliate",value:2}]},{level:5,health:"20xC",movement:3,attack:4,actions:[{type:"shield",value:1},{type:"retaliate",value:3}]},{level:6,health:"24xC",movement:3,attack:5,actions:[{type:"shield",value:2},{type:"retaliate",value:3}]},{level:7,health:"31xC",movement:4,attack:6,actions:[{type:"shield",value:2},{type:"retaliate",value:3}]}]},{name:"ice-wraith",edition:"fh",flying:!0,count:6,baseStat:{type:"normal"},stats:[{level:0,health:7,movement:2,attack:2,actions:[{type:"shield",value:1}]},{level:1,health:8,movement:2,attack:2,actions:[{type:"shield",value:2}]},{level:2,health:10,movement:3,attack:2,actions:[{type:"shield",value:2}]},{level:3,health:10,movement:3,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{level:4,health:12,movement:3,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{level:5,health:16,movement:3,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{level:6,health:21,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}],immunities:["curse"]},{level:7,health:27,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}],immunities:["curse"]},{type:"elite",level:0,health:7,movement:4,attack:3},{type:"elite",level:1,health:8,movement:4,attack:3,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:2,small:!0}]}]},{type:"elite",level:2,health:10,movement:5,attack:3,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:2}]}]},{type:"elite",level:3,health:10,movement:5,attack:4,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:2}]},{type:"condition",value:"wound"}]},{type:"elite",level:4,health:12,movement:5,attack:4,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"}]},{type:"elite",level:5,health:16,movement:5,attack:5,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"}]},{type:"elite",level:6,health:21,movement:5,attack:5,actions:[{type:"retaliate",value:4,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"}],immunities:["curse"]},{type:"elite",level:7,health:27,movement:5,attack:6,actions:[{type:"retaliate",value:4,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"}],immunities:["curse"]}]},{name:"lady-in-white",edition:"fh",deck:"ice-wraith",hidden:!0,count:1,standeeShare:"ice-wraith",baseStat:{type:"normal"},stats:[{level:0,health:"7xC",movement:2,attack:2,actions:[{type:"shield",value:1}]},{level:1,health:"8xC",movement:2,attack:2,actions:[{type:"shield",value:2}]},{level:2,health:"10xC",movement:3,attack:2,actions:[{type:"shield",value:2}]},{level:3,health:"10xC",movement:3,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{level:4,health:"12xC",movement:3,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{level:5,health:"16xC",movement:3,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{level:6,health:"21xC",movement:3,attack:4,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}],immunities:["curse"]},{level:7,health:"27xC",movement:3,attack:5,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}],immunities:["curse"]},{type:"elite",level:0,health:"7xC",movement:4,attack:3},{type:"elite",level:1,health:"8xC",movement:4,attack:3,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:2,small:!0}]}]},{type:"elite",level:2,health:"10xC",movement:5,attack:3,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:2}]}]},{type:"elite",level:3,health:"10xC",movement:5,attack:4,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:2}]},{type:"condition",value:"wound"}]},{type:"elite",level:4,health:"12xC",movement:5,attack:4,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"}]},{type:"elite",level:5,health:"16xC",movement:5,attack:5,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"}]},{type:"elite",level:6,health:"21xC",movement:5,attack:5,actions:[{type:"retaliate",value:4,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"}],immunities:["curse"]},{type:"elite",level:7,health:"27xC",movement:5,attack:6,actions:[{type:"retaliate",value:4,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"}],immunities:["curse"]}]},{name:"large-vermling-scout",edition:"fh",deck:"scout",hidden:!0,count:10,standeeShare:"vermling-scout",baseStat:{type:"normal",actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},stats:[{level:0,health:6,movement:2,attack:3,immunities:["immobilize","stun"]},{level:1,health:8,movement:2,attack:3,immunities:["immobilize","stun"]},{level:2,health:10,movement:2,attack:3,immunities:["immobilize","stun"]},{level:3,health:10,movement:3,attack:3,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{level:4,health:12,movement:3,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{level:5,health:16,movement:3,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{level:6,health:23,movement:4,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{level:7,health:29,movement:4,attack:5,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","disarm","stun"]},{type:"elite",level:0,health:10,movement:2,attack:4,immunities:["immobilize","stun"]},{type:"elite",level:1,health:12,movement:2,attack:4,immunities:["immobilize","stun"]},{type:"elite",level:2,health:14,movement:3,attack:4,immunities:["immobilize","stun"]},{type:"elite",level:3,health:16,movement:3,attack:5,immunities:["immobilize","stun"]},{type:"elite",level:4,health:20,movement:4,attack:5,immunities:["immobilize","stun"]},{type:"elite",level:5,health:24,movement:4,attack:6,immunities:["immobilize","stun"]},{type:"elite",level:6,health:36,movement:4,attack:6,immunities:["immobilize","disarm","stun"]},{type:"elite",level:7,health:44,movement:4,attack:7,immunities:["immobilize","disarm","stun"]}]},{name:"laser-spires",edition:"fh",boss:!0,hidden:!0,count:1,baseStat:{type:"boss",health:0,special:[[{type:"custom",value:"%data.custom.fh.laser-spires.3%"}],[{type:"custom",value:"%data.custom.fh.laser-spires.4%"}]]},stats:[{level:0},{level:1},{level:2},{level:3},{level:4},{level:5},{level:6},{level:7}]},{name:"lightning-eel",edition:"fh",catching:!0,count:10,baseStat:{type:"normal",actions:[{type:"custom",value:"%data.custom.fh.lightning-eel.1%"}]},stats:[{level:0,health:1,movement:2,attack:2},{level:1,health:2,movement:2,attack:2},{level:2,health:3,movement:3,attack:2},{level:3,health:4,movement:3,attack:2},{level:4,health:5,movement:3,attack:3},{level:5,health:6,movement:3,attack:3},{level:6,health:9,movement:4,attack:3},{level:7,health:11,movement:4,attack:4},{type:"elite",level:0,health:3,movement:3,attack:2,actions:[{type:"custom",value:"%data.custom.fh.lightning-eel.1%"}]},{type:"elite",level:1,health:3,movement:3,attack:3,actions:[{type:"custom",value:"%data.custom.fh.lightning-eel.1%"}]},{type:"elite",level:2,health:5,movement:3,attack:3,actions:[{type:"custom",value:"%data.custom.fh.lightning-eel.1%"}]},{type:"elite",level:3,health:6,movement:4,attack:3,actions:[{type:"custom",value:"%data.custom.fh.lightning-eel.1%"}]},{type:"elite",level:4,health:7,movement:4,attack:4,actions:[{type:"custom",value:"%data.custom.fh.lightning-eel.1%"}]},{type:"elite",level:5,health:9,movement:4,attack:4,actions:[{type:"custom",value:"%data.custom.fh.lightning-eel.1%"}]},{type:"elite",level:6,health:13,movement:4,attack:5,actions:[{type:"custom",value:"%data.custom.fh.lightning-eel.1%"}]},{type:"elite",level:7,health:17,movement:4,attack:6,actions:[{type:"custom",value:"%data.custom.fh.lightning-eel.1%"}]}]},{name:"living-bones-scenario-118",edition:"fh",deck:"living-bones",hidden:!0,count:6,standeeShare:"living-bones",baseStat:{type:"normal"},stats:[{level:0,health:5,movement:2,attack:1,actions:[{type:"shield",value:3},{type:"target",value:2}]},{level:1,health:5,movement:3,attack:1,actions:[{type:"shield",value:4},{type:"target",value:2}]},{level:2,health:5,movement:3,attack:2,actions:[{type:"shield",value:4},{type:"target",value:2}]},{level:3,health:7,movement:3,attack:2,actions:[{type:"shield",value:4},{type:"target",value:2}]},{level:4,health:7,movement:3,attack:3,actions:[{type:"shield",value:4},{type:"target",value:2}]},{level:5,health:9,movement:3,attack:3,actions:[{type:"shield",value:4},{type:"target",value:2}]},{level:6,health:12,movement:4,attack:3,actions:[{type:"shield",value:4},{type:"target",value:2}]},{level:7,health:15,movement:4,attack:4,actions:[{type:"shield",value:4},{type:"target",value:2}]},{type:"elite",level:0,health:6,movement:4,attack:2,actions:[{type:"shield",value:3},{type:"target",value:2}]},{type:"elite",level:1,health:6,movement:4,attack:2,actions:[{type:"shield",value:4},{type:"target",value:3}]},{type:"elite",level:2,health:7,movement:4,attack:3,actions:[{type:"shield",value:4},{type:"target",value:3}]},{type:"elite",level:3,health:9,movement:4,attack:3,actions:[{type:"shield",value:4},{type:"target",value:3}]},{type:"elite",level:4,health:10,movement:4,attack:4,actions:[{type:"shield",value:4},{type:"target",value:3}]},{type:"elite",level:5,health:13,movement:4,attack:4,actions:[{type:"shield",value:4},{type:"target",value:3}]},{type:"elite",level:6,health:18,movement:5,attack:4,actions:[{type:"shield",value:4},{type:"target",value:3}]},{type:"elite",level:7,health:21,movement:6,attack:5,actions:[{type:"shield",value:4},{type:"target",value:3}]}]},{name:"living-bones-scenario-65",edition:"fh",deck:"living-bones",hidden:!0,count:6,standeeShare:"living-bones",baseStat:{type:"normal"},stats:[{level:0,health:5,movement:2,attack:1,actions:[{type:"target",value:2},{type:"push",value:1}]},{level:1,health:5,movement:3,attack:1,actions:[{type:"shield",value:1},{type:"target",value:2},{type:"push",value:1}]},{level:2,health:5,movement:3,attack:2,actions:[{type:"shield",value:1},{type:"target",value:2},{type:"push",value:1}]},{level:3,health:7,movement:3,attack:2,actions:[{type:"shield",value:1},{type:"target",value:2},{type:"push",value:1}]},{level:4,health:7,movement:3,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2},{type:"push",value:2}]},{level:5,health:9,movement:3,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2},{type:"push",value:2}]},{level:6,health:12,movement:4,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2},{type:"push",value:2}]},{level:7,health:15,movement:4,attack:4,actions:[{type:"shield",value:1},{type:"target",value:2},{type:"push",value:2}]},{type:"elite",level:0,health:6,movement:4,attack:2,actions:[{type:"target",value:2},{type:"push",value:1}]},{type:"elite",level:1,health:6,movement:4,attack:2,actions:[{type:"shield",value:1},{type:"target",value:3},{type:"push",value:1}]},{type:"elite",level:2,health:7,movement:4,attack:3,actions:[{type:"shield",value:1},{type:"target",value:3},{type:"push",value:1}]},{type:"elite",level:3,health:9,movement:4,attack:3,actions:[{type:"shield",value:1},{type:"target",value:3},{type:"push",value:1}]},{type:"elite",level:4,health:10,movement:4,attack:4,actions:[{type:"shield",value:1},{type:"target",value:3},{type:"push",value:2}]},{type:"elite",level:5,health:13,movement:4,attack:4,actions:[{type:"shield",value:1},{type:"target",value:3},{type:"push",value:2}]},{type:"elite",level:6,health:18,movement:5,attack:4,actions:[{type:"shield",value:1},{type:"target",value:3},{type:"push",value:2}]},{type:"elite",level:7,health:21,movement:6,attack:5,actions:[{type:"shield",value:1},{type:"target",value:3},{type:"push",value:2}]}]},{name:"living-bones",edition:"fh",count:6,baseStat:{type:"normal"},stats:[{level:0,health:5,movement:2,attack:1,actions:[{type:"target",value:2}]},{level:1,health:5,movement:3,attack:1,actions:[{type:"shield",value:1},{type:"target",value:2}]},{level:2,health:5,movement:3,attack:2,actions:[{type:"shield",value:1},{type:"target",value:2}]},{level:3,health:7,movement:3,attack:2,actions:[{type:"shield",value:1},{type:"target",value:2}]},{level:4,health:7,movement:3,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2}]},{level:5,health:9,movement:3,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2}]},{level:6,health:12,movement:4,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2}]},{level:7,health:15,movement:4,attack:4,actions:[{type:"shield",value:1},{type:"target",value:2}]},{type:"elite",level:0,health:6,movement:4,attack:2,actions:[{type:"target",value:2}]},{type:"elite",level:1,health:6,movement:4,attack:2,actions:[{type:"shield",value:1},{type:"target",value:3}]},{type:"elite",level:2,health:7,movement:4,attack:3,actions:[{type:"shield",value:1},{type:"target",value:3}]},{type:"elite",level:3,health:9,movement:4,attack:3,actions:[{type:"shield",value:1},{type:"target",value:3}]},{type:"elite",level:4,health:10,movement:4,attack:4,actions:[{type:"shield",value:1},{type:"target",value:3}]},{type:"elite",level:5,health:13,movement:4,attack:4,actions:[{type:"shield",value:1},{type:"target",value:3}]},{type:"elite",level:6,health:18,movement:5,attack:4,actions:[{type:"shield",value:1},{type:"target",value:3}]},{type:"elite",level:7,health:21,movement:6,attack:5,actions:[{type:"shield",value:1},{type:"target",value:3}]}]},{name:"living-doom",edition:"fh",count:4,baseStat:{type:"normal"},stats:[{level:0,health:8,movement:2,attack:3},{level:1,health:8,movement:2,attack:3,actions:[{type:"shield",value:1}]},{level:2,health:9,movement:2,attack:4,actions:[{type:"shield",value:1}]},{level:3,health:9,movement:2,attack:4,actions:[{type:"shield",value:2}]},{level:4,health:11,movement:3,attack:4,actions:[{type:"shield",value:2}]},{level:5,health:14,movement:3,attack:4,actions:[{type:"shield",value:2}]},{level:6,health:18,movement:3,attack:5,actions:[{type:"shield",value:2}]},{level:7,health:24,movement:4,attack:5,actions:[{type:"shield",value:2}],immunities:["bane"]},{type:"elite",level:0,health:10,movement:2,attack:4,actions:[{type:"shield",value:1}]},{type:"elite",level:1,health:10,movement:3,attack:4,actions:[{type:"shield",value:2}]},{type:"elite",level:2,health:11,movement:3,attack:5,actions:[{type:"shield",value:2}]},{type:"elite",level:3,health:14,movement:4,attack:5,actions:[{type:"shield",value:2}]},{type:"elite",level:4,health:18,movement:4,attack:5,actions:[{type:"shield",value:2}]},{type:"elite",level:5,health:20,movement:4,attack:6,actions:[{type:"shield",value:2}]},{type:"elite",level:6,health:27,movement:4,attack:7,actions:[{type:"shield",value:2}],immunities:["bane"]},{type:"elite",level:7,health:30,movement:4,attack:7,actions:[{type:"shield",value:3}],immunities:["bane"]}]},{name:"living-spirit",edition:"fh",flying:!0,count:10,baseStat:{type:"normal"},stats:[{level:0,health:2,movement:2,attack:2,actions:[{type:"shield",value:1}]},{level:1,health:2,movement:2,attack:2,actions:[{type:"shield",value:2}]},{level:2,health:2,movement:2,attack:3,actions:[{type:"shield",value:2}]},{level:3,health:3,movement:3,attack:3,actions:[{type:"shield",value:2}]},{level:4,health:3,movement:3,attack:3,actions:[{type:"shield",value:3}]},{level:5,health:4,movement:3,attack:3,actions:[{type:"shield",value:3}]},{level:6,health:6,movement:3,attack:4,actions:[{type:"shield",value:3}]},{level:7,health:7,movement:4,attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:0,health:3,movement:3,attack:3,actions:[{type:"shield",value:2}]},{type:"elite",level:1,health:3,movement:3,attack:3,actions:[{type:"shield",value:3}]},{type:"elite",level:2,health:3,movement:3,attack:4,actions:[{type:"shield",value:3}]},{type:"elite",level:3,health:4,movement:4,attack:4,actions:[{type:"shield",value:3}]},{type:"elite",level:4,health:4,movement:4,attack:4,actions:[{type:"shield",value:4}]},{type:"elite",level:5,health:5,movement:4,attack:5,actions:[{type:"shield",value:4}]},{type:"elite",level:6,health:8,movement:4,attack:5,actions:[{type:"shield",value:4}]},{type:"elite",level:7,health:10,movement:4,attack:6,actions:[{type:"shield",value:4}]}]},{name:"lord-of-chaos",edition:"fh",deck:"boss",boss:!0,count:1,baseStat:{type:"boss",health:"7xC",attack:3,immunities:["wound","disarm","stun","curse"],special:[[{type:"spawn",value:"monsterStandee",valueObject:[{monster:{name:"chaos-spark",player4:"boss"},marker:"a"},{monster:{name:"chaos-spark",type:"boss"},marker:"b"}]},{type:"attack",value:2,valueType:"minus",subActions:[{type:"target",value:"[C]",small:!0},{type:"range",value:5,small:!0},{type:"condition",value:"immobilize",small:!0}]}],[{type:"spawn",value:"monsterStandee",valueObject:[{monster:{name:"chaos-spark",type:"boss"},marker:"a"},{monster:{name:"chaos-spark",player3:"boss",player4:"boss"},marker:"b"}]},{type:"custom",value:"%data.custom.fh.lord-of-chaos.1%",small:!0}]]},stats:[{level:0,health:"Cx25",attack:4},{level:1,health:"Cx30",attack:4},{level:2,health:"Cx35",attack:5},{level:3,health:"Cx43",attack:5},{level:4,health:"Cx50",attack:6},{level:5,health:"Cx60",attack:6},{level:6,health:"Cx79",attack:7},{level:7,health:"Cx99",attack:8}]},{name:"lurker-clawcrusher-scenario-60",edition:"fh",deck:"lurker-clawcrusher",hidden:!0,count:2,standeeShare:"lurker-clawcrusher",baseStat:{type:"normal"},stats:[{level:0,health:7,movement:2,attack:3,actions:[{type:"target",value:2}]},{level:1,health:8,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2}]},{level:2,health:10,movement:3,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2}]},{level:3,health:13,movement:3,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2}]},{level:4,health:13,movement:3,attack:3,actions:[{type:"shield",value:2},{type:"target",value:2}]},{level:5,health:15,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"target",value:2}]},{level:6,health:21,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"target",value:2}]},{level:7,health:23,movement:3,attack:6,actions:[{type:"shield",value:2},{type:"target",value:2}],immunities:["stun"]},{type:"elite",level:0,health:10,movement:2,attack:4,actions:[{type:"shield",value:1},{type:"target",value:2}]},{type:"elite",level:1,health:10,movement:2,attack:4,actions:[{type:"shield",value:2},{type:"target",value:2},{type:"condition",value:"impair"}]},{type:"elite",level:2,health:13,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"target",value:2},{type:"condition",value:"impair"}]},{type:"elite",level:3,health:14,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"target",value:2},{type:"condition",value:"impair"}]},{type:"elite",level:4,health:18,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"target",value:2},{type:"condition",value:"impair"}]},{type:"elite",level:5,health:21,movement:3,attack:6,actions:[{type:"shield",value:2},{type:"target",value:2},{type:"condition",value:"impair"}]},{type:"elite",level:6,health:22,movement:3,attack:7,actions:[{type:"shield",value:3},{type:"target",value:2},{type:"condition",value:"impair"}],immunities:["stun"]},{type:"elite",level:7,health:29,movement:3,attack:8,actions:[{type:"shield",value:3},{type:"target",value:2},{type:"condition",value:"impair"}],immunities:["stun"]}]},{name:"lurker-clawcrusher",edition:"fh",count:4,baseStat:{type:"normal"},stats:[{level:0,health:7,movement:2,attack:2,actions:[{type:"target",value:2}]},{level:1,health:8,movement:2,attack:2,actions:[{type:"shield",value:1},{type:"target",value:2}]},{level:2,health:10,movement:3,attack:2,actions:[{type:"shield",value:1},{type:"target",value:2}]},{level:3,health:13,movement:3,attack:2,actions:[{type:"shield",value:1},{type:"target",value:2}]},{level:4,health:13,movement:3,attack:2,actions:[{type:"shield",value:2},{type:"target",value:2}]},{level:5,health:15,movement:3,attack:3,actions:[{type:"shield",value:2},{type:"target",value:2}]},{level:6,health:21,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"target",value:2}]},{level:7,health:23,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"target",value:2}],immunities:["stun"]},{type:"elite",level:0,health:10,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2}]},{type:"elite",level:1,health:10,movement:2,attack:3,actions:[{type:"shield",value:2},{type:"target",value:2},{type:"condition",value:"impair"}]},{type:"elite",level:2,health:13,movement:3,attack:3,actions:[{type:"shield",value:2},{type:"target",value:2},{type:"condition",value:"impair"}]},{type:"elite",level:3,health:14,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"target",value:2},{type:"condition",value:"impair"}]},{type:"elite",level:4,health:18,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"target",value:2},{type:"condition",value:"impair"}]},{type:"elite",level:5,health:21,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"target",value:2},{type:"condition",value:"impair"}]},{type:"elite",level:6,health:22,movement:3,attack:6,actions:[{type:"shield",value:3},{type:"target",value:2},{type:"condition",value:"impair"}],immunities:["stun"]},{type:"elite",level:7,health:29,movement:3,attack:7,actions:[{type:"shield",value:3},{type:"target",value:2},{type:"condition",value:"impair"}],immunities:["stun"]}]},{name:"lurker-conductor",edition:"fh",deck:"lurker-clawcrusher",boss:!0,hidden:!0,count:1,standeeShare:"lurker-clawcrusher",baseStat:{type:"boss",immunities:["disarm","stun"]},stats:[{level:0,health:"10xC/2",movement:2,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2}]},{level:1,health:"10xC/2",movement:2,attack:3,actions:[{type:"shield",value:2},{type:"target",value:2}]},{level:2,health:"13xC/2",movement:3,attack:3,actions:[{type:"shield",value:2},{type:"target",value:2}]},{level:3,health:"14xC/2",movement:3,attack:4,actions:[{type:"shield",value:2},{type:"target",value:2}]},{level:4,health:"18xC/2",movement:3,attack:4,actions:[{type:"shield",value:2},{type:"target",value:2}]},{level:5,health:"21xC/2",movement:3,attack:5,actions:[{type:"shield",value:2},{type:"target",value:2}]},{level:6,health:"21xC/2",movement:3,attack:5,actions:[{type:"shield",value:2},{type:"target",value:2}]},{level:7,health:"21xC/2",movement:3,attack:5,actions:[{type:"shield",value:2},{type:"target",value:2}]}]},{name:"lurker-mindsnipper-scenario-60",edition:"fh",deck:"lurker-mindsnipper",hidden:!0,count:2,standeeShare:"lurker-mindsnipper",baseStat:{type:"normal"},stats:[{level:0,health:5,movement:2,attack:3,actions:[{type:"target",value:2}]},{level:1,health:6,movement:2,attack:3,actions:[{type:"target",value:2},{type:"pierce",value:2}]},{level:2,health:6,movement:2,attack:4,actions:[{type:"target",value:2},{type:"pierce",value:2}]},{level:3,health:7,movement:3,attack:4,actions:[{type:"target",value:2},{type:"pierce",value:3}]},{level:4,health:9,movement:3,attack:4,actions:[{type:"target",value:2},{type:"pierce",value:3}]},{level:5,health:12,movement:3,attack:4,actions:[{type:"target",value:2},{type:"pierce",value:3}]},{level:6,health:15,movement:3,attack:5,actions:[{type:"target",value:2},{type:"pierce",value:3}]},{level:7,health:20,movement:4,attack:5,actions:[{type:"target",value:2},{type:"pierce",value:3}]},{type:"elite",level:0,health:7,movement:2,attack:4,actions:[{type:"target",value:2}]},{type:"elite",level:1,health:7,movement:3,attack:4,actions:[{type:"target",value:2},{type:"pierce",value:3},{type:"condition",value:"muddle"}]},{type:"elite",level:2,health:8,movement:3,attack:5,actions:[{type:"target",value:2},{type:"pierce",value:3},{type:"condition",value:"muddle"}]},{type:"elite",level:3,health:11,movement:3,attack:5,actions:[{type:"target",value:2},{type:"pierce",value:4},{type:"condition",value:"muddle"}]},{type:"elite",level:4,health:13,movement:4,attack:5,actions:[{type:"target",value:2},{type:"pierce",value:4},{type:"condition",value:"muddle"}]},{type:"elite",level:5,health:15,movement:4,attack:6,actions:[{type:"target",value:2},{type:"pierce",value:4},{type:"condition",value:"muddle"}]},{type:"elite",level:6,health:22,movement:5,attack:6,actions:[{type:"target",value:2},{type:"pierce",value:4},{type:"condition",value:"muddle"}]},{type:"elite",level:7,health:27,movement:5,attack:7,actions:[{type:"target",value:2},{type:"pierce",value:4},{type:"condition",value:"muddle"}]}]},{name:"lurker-mindsnipper",edition:"fh",count:6,baseStat:{type:"normal"},stats:[{level:0,health:5,movement:2,attack:2,actions:[{type:"target",value:2}]},{level:1,health:6,movement:2,attack:2,actions:[{type:"target",value:2},{type:"pierce",value:2}]},{level:2,health:6,movement:2,attack:3,actions:[{type:"target",value:2},{type:"pierce",value:2}]},{level:3,health:7,movement:3,attack:3,actions:[{type:"target",value:2},{type:"pierce",value:3}]},{level:4,health:9,movement:3,attack:3,actions:[{type:"target",value:2},{type:"pierce",value:3}]},{level:5,health:12,movement:3,attack:3,actions:[{type:"target",value:2},{type:"pierce",value:3}]},{level:6,health:15,movement:3,attack:4,actions:[{type:"target",value:2},{type:"pierce",value:3}]},{level:7,health:20,movement:4,attack:4,actions:[{type:"target",value:2},{type:"pierce",value:3}]},{type:"elite",level:0,health:7,movement:2,attack:3,actions:[{type:"target",value:2}]},{type:"elite",level:1,health:7,movement:3,attack:3,actions:[{type:"target",value:2},{type:"pierce",value:3},{type:"condition",value:"muddle"}]},{type:"elite",level:2,health:8,movement:3,attack:4,actions:[{type:"target",value:2},{type:"pierce",value:3},{type:"condition",value:"muddle"}]},{type:"elite",level:3,health:11,movement:3,attack:4,actions:[{type:"target",value:2},{type:"pierce",value:4},{type:"condition",value:"muddle"}]},{type:"elite",level:4,health:13,movement:4,attack:4,actions:[{type:"target",value:2},{type:"pierce",value:4},{type:"condition",value:"muddle"}]},{type:"elite",level:5,health:15,movement:4,attack:5,actions:[{type:"target",value:2},{type:"pierce",value:4},{type:"condition",value:"muddle"}]},{type:"elite",level:6,health:22,movement:5,attack:5,actions:[{type:"target",value:2},{type:"pierce",value:4},{type:"condition",value:"muddle"}]},{type:"elite",level:7,health:27,movement:5,attack:6,actions:[{type:"target",value:2},{type:"pierce",value:4},{type:"condition",value:"muddle"}]}]},{name:"lurker-soldier",edition:"fh",count:6,baseStat:{type:"normal"},stats:[{level:0,health:5,movement:2,attack:2,actions:[{type:"target",value:2}]},{level:1,health:7,movement:2,attack:2,actions:[{type:"target",value:2},{type:"pierce",value:1}]},{level:2,health:9,movement:3,attack:2,actions:[{type:"target",value:2},{type:"pierce",value:1}]},{level:3,health:10,movement:3,attack:3,actions:[{type:"target",value:2},{type:"pierce",value:1}]},{level:4,health:10,movement:3,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2},{type:"pierce",value:2}]},{level:5,health:11,movement:3,attack:4,actions:[{type:"shield",value:1},{type:"target",value:2},{type:"pierce",value:2}]},{level:6,health:16,movement:4,attack:4,actions:[{type:"shield",value:1},{type:"target",value:2},{type:"pierce",value:2}]},{level:7,health:20,movement:4,attack:5,actions:[{type:"shield",value:1},{type:"target",value:2},{type:"pierce",value:2}]},{type:"elite",level:0,health:7,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2}]},{type:"elite",level:1,health:9,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2},{type:"pierce",value:1}]},{type:"elite",level:2,health:11,movement:3,attack:3,actions:[{type:"shield",value:1},{type:"target",value:2},{type:"pierce",value:2}]},{type:"elite",level:3,health:13,movement:3,attack:4,actions:[{type:"shield",value:1},{type:"target",value:2},{type:"pierce",value:2}]},{type:"elite",level:4,health:13,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"target",value:2},{type:"pierce",value:3}]},{type:"elite",level:5,health:15,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"target",value:2},{type:"pierce",value:3}]},{type:"elite",level:6,health:19,movement:4,attack:6,actions:[{type:"shield",value:2},{type:"target",value:2},{type:"pierce",value:3}]},{type:"elite",level:7,health:27,movement:4,attack:7,actions:[{type:"shield",value:2},{type:"target",value:2},{type:"pierce",value:3}]}]},{name:"lurker-wavethrower-scenario-128",edition:"fh",hidden:!0,count:6,standeeShare:"lurker-wavethrower",baseStat:{type:"normal"},stats:[{level:0,health:4,movement:1,attack:1},{level:1,health:6,movement:1,attack:1},{level:2,health:8,movement:1,attack:1},{level:3,health:10,movement:2,attack:1},{level:4,health:11,movement:2,attack:2},{level:5,health:14,movement:2,attack:2},{level:6,health:17,movement:3,attack:2},{level:7,health:20,movement:3,attack:3},{type:"elite",level:0,health:6,movement:1,attack:2},{type:"elite",level:1,health:7,movement:1,attack:2,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:2,health:9,movement:2,attack:2,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:3,health:11,movement:2,attack:2,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:4,health:13,movement:2,attack:3,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:5,health:16,movement:3,attack:3,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:6,health:21,movement:3,attack:3,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:7,health:26,movement:3,attack:4,actions:[{type:"condition",value:"immobilize"}]}]},{name:"lurker-wavethrower-scenario-131",edition:"fh",hidden:!0,count:6,standeeShare:"lurker-wavethrower",baseStat:{type:"normal"},stats:[{level:0,health:4,movement:1,attack:2},{level:1,health:6,movement:1,attack:2},{level:2,health:8,movement:1,attack:2},{level:3,health:10,movement:2,attack:2},{level:4,health:11,movement:2,attack:3},{level:5,health:14,movement:2,attack:3},{level:6,health:17,movement:3,attack:3},{level:7,health:20,movement:3,attack:4},{type:"elite",level:0,health:6,movement:1,attack:3},{type:"elite",level:1,health:7,movement:1,attack:3,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:2,health:9,movement:2,attack:3,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:3,health:11,movement:2,attack:3,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:4,health:13,movement:2,attack:4,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:5,health:16,movement:3,attack:4,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:6,health:21,movement:3,attack:4,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:7,health:26,movement:3,attack:5,actions:[{type:"condition",value:"immobilize"}]}]},{name:"lurker-wavethrower-scenario-60",edition:"fh",deck:"lurker-wavethrower",hidden:!0,count:2,standeeShare:"lurker-wavethrower",baseStat:{type:"normal"},stats:[{level:0,health:4,movement:1,attack:2},{level:1,health:6,movement:1,attack:2},{level:2,health:8,movement:1,attack:2},{level:3,health:10,movement:2,attack:2},{level:4,health:11,movement:2,attack:3},{level:5,health:14,movement:2,attack:3},{level:6,health:17,movement:3,attack:3},{level:7,health:20,movement:3,attack:4},{type:"elite",level:0,health:6,movement:1,attack:3},{type:"elite",level:1,health:7,movement:1,attack:3,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:2,health:9,movement:2,attack:3,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:3,health:11,movement:2,attack:3,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:4,health:13,movement:2,attack:4,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:5,health:16,movement:3,attack:4,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:6,health:21,movement:3,attack:4,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:7,health:26,movement:3,attack:5,actions:[{type:"condition",value:"immobilize"}]}]},{name:"lurker-wavethrower",edition:"fh",count:6,baseStat:{type:"normal"},stats:[{level:0,health:4,movement:1,attack:1},{level:1,health:6,movement:1,attack:1},{level:2,health:8,movement:1,attack:1},{level:3,health:10,movement:2,attack:1},{level:4,health:11,movement:2,attack:2},{level:5,health:14,movement:2,attack:2},{level:6,health:17,movement:3,attack:2},{level:7,health:20,movement:3,attack:3},{type:"elite",level:0,health:6,movement:1,attack:2},{type:"elite",level:1,health:7,movement:1,attack:2,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:2,health:9,movement:2,attack:2,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:3,health:11,movement:2,attack:2,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:4,health:13,movement:2,attack:3,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:5,health:16,movement:3,attack:3,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:6,health:21,movement:3,attack:3,actions:[{type:"condition",value:"immobilize"}]},{type:"elite",level:7,health:26,movement:3,attack:4,actions:[{type:"condition",value:"immobilize"}]}]},{name:"night-demon",edition:"fh",count:6,baseStat:{type:"normal",actions:[{type:"custom",value:"%data.custom.fh.night-demon.2%"}]},stats:[{level:0,health:3,movement:3,attack:3},{level:1,health:5,movement:3,attack:3},{level:2,health:6,movement:3,attack:4},{level:3,health:7,movement:4,attack:4},{level:4,health:8,movement:4,attack:5},{level:5,health:11,movement:4,attack:5},{level:6,health:16,movement:4,attack:5},{level:7,health:20,movement:4,attack:6},{type:"elite",level:0,health:5,movement:4,attack:4},{type:"elite",level:1,health:8,movement:4,attack:4},{type:"elite",level:2,health:11,movement:4,attack:4},{type:"elite",level:3,health:13,movement:4,attack:5},{type:"elite",level:4,health:15,movement:5,attack:5},{type:"elite",level:5,health:17,movement:5,attack:6},{type:"elite",level:6,health:23,movement:5,attack:7},{type:"elite",level:7,health:30,movement:5,attack:8}]},{name:"ooze",edition:"fh",catching:!0,count:10,baseStat:{type:"normal"},stats:[{level:0,health:4,movement:1,attack:2},{level:1,health:5,movement:1,attack:2,actions:[{type:"shield",value:1}]},{level:2,health:7,movement:1,attack:2,actions:[{type:"shield",value:1}]},{level:3,health:8,movement:1,attack:3,actions:[{type:"shield",value:1}]},{level:4,health:9,movement:2,attack:3,actions:[{type:"shield",value:1}]},{level:5,health:10,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"condition",value:"poison"}]},{level:6,health:13,movement:2,attack:4,actions:[{type:"shield",value:1},{type:"condition",value:"poison"}]},{level:7,health:17,movement:2,attack:4,actions:[{type:"shield",value:1},{type:"condition",value:"poison"}]},{type:"elite",level:0,health:8,movement:1,attack:2},{type:"elite",level:1,health:9,movement:1,attack:2,actions:[{type:"shield",value:1}]},{type:"elite",level:2,health:11,movement:1,attack:3,actions:[{type:"shield",value:1}]},{type:"elite",level:3,health:11,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"condition",value:"poison"}]},{type:"elite",level:4,health:12,movement:2,attack:4,actions:[{type:"shield",value:1},{type:"condition",value:"poison"}]},{type:"elite",level:5,health:15,movement:3,attack:4,actions:[{type:"shield",value:1},{type:"condition",value:"poison"}]},{type:"elite",level:6,health:21,movement:3,attack:4,actions:[{type:"shield",value:1},{type:"condition",value:"poison"}]},{type:"elite",level:7,health:27,movement:3,attack:5,actions:[{type:"shield",value:1},{type:"condition",value:"poison"}]}]},{name:"orphan",edition:"fh",deck:"boss",boss:!0,count:1,baseStat:{type:"boss",immunities:["wound","brittle","poison","immobilize","disarm","stun"],special:[[{type:"heal",value:"[Cx(3/2+Lx0.5){$math.ceil}]",subActions:[{type:"custom",value:"%data.custom.fh.orphan.1%",small:!0}]}],[{type:"move",value:0,valueType:"plus",subActions:[{type:"jump",value:"",small:!0}]},{type:"attack",value:0,valueType:"plus",subActions:[{type:"range",value:6,small:!0},{type:"condition",value:"brittle",small:!0}]}]]},stats:[{level:0,health:"Cx7",movement:3,attack:"C"},{level:1,health:"Cx9",movement:3,attack:"C+1"},{level:2,health:"Cx12",movement:3,attack:"C+1"},{level:3,health:"Cx15",movement:3,attack:"C+2"},{level:4,health:"Cx20",movement:3,attack:"C+3"},{level:5,health:"Cx24",movement:3,attack:"C+4"},{level:6,health:"Cx36",movement:3,attack:"C+4"},{level:7,health:"Cx45",movement:3,attack:"C+5"}]},{name:"piranha-pig",edition:"fh",catching:!0,count:10,baseStat:{type:"normal"},stats:[{level:0,health:4,movement:2,attack:2},{level:1,health:5,movement:3,attack:2},{level:2,health:6,movement:3,attack:3},{level:3,health:8,movement:3,attack:3},{level:4,health:9,movement:3,attack:3,actions:[{type:"condition",value:"wound"}]},{level:5,health:11,movement:4,attack:3,actions:[{type:"condition",value:"wound"}]},{level:6,health:15,movement:4,attack:4,actions:[{type:"condition",value:"wound"}]},{level:7,health:21,movement:4,attack:4,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:0,health:7,movement:2,attack:3},{type:"elite",level:1,health:7,movement:3,attack:3,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:2,health:9,movement:4,attack:3,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:3,health:11,movement:4,attack:4,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:4,health:15,movement:4,attack:4,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:5,health:19,movement:5,attack:4,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:6,health:25,movement:5,attack:5,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:7,health:33,movement:5,attack:6,actions:[{type:"condition",value:"wound"}]}]},{name:"polar-bear-scenario-117",edition:"fh",deck:"polar-bear",hidden:!0,standeeCount:5,standeeShare:"polar-bear",baseStat:{type:"normal",immunities:["immobilize","stun"]},stats:[{level:0,health:6,movement:2,attack:3,immunities:["immobilize","stun"]},{level:1,health:8,movement:2,attack:3,immunities:["immobilize","stun"]},{level:2,health:10,movement:2,attack:3,immunities:["immobilize","stun"]},{level:3,health:10,movement:3,attack:3,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{level:4,health:12,movement:3,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{level:5,health:16,movement:3,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{level:6,health:23,movement:4,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{level:7,health:29,movement:4,attack:5,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","disarm","stun"]},{type:"elite",level:0,health:10,movement:2,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{type:"elite",level:1,health:12,movement:2,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{type:"elite",level:2,health:14,movement:3,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{type:"elite",level:3,health:16,movement:3,attack:5,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{type:"elite",level:4,health:20,movement:4,attack:5,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{type:"elite",level:5,health:24,movement:4,attack:6,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{type:"elite",level:6,health:36,movement:4,attack:6,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","disarm","stun"]},{type:"elite",level:7,health:44,movement:4,attack:7,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","disarm","stun"]}]},{name:"polar-bear",edition:"fh",count:6,randomCount:4,baseStat:{type:"normal",immunities:["immobilize","stun"]},stats:[{level:0,health:6,movement:2,attack:3,immunities:["immobilize","stun"]},{level:1,health:8,movement:2,attack:3,immunities:["immobilize","stun"]},{level:2,health:10,movement:2,attack:3,immunities:["immobilize","stun"]},{level:3,health:10,movement:3,attack:3,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{level:4,health:12,movement:3,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{level:5,health:16,movement:3,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{level:6,health:23,movement:4,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{level:7,health:29,movement:4,attack:5,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","disarm","stun"]},{type:"elite",level:0,health:10,movement:2,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{type:"elite",level:1,health:12,movement:2,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{type:"elite",level:2,health:14,movement:3,attack:4,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{type:"elite",level:3,health:16,movement:3,attack:5,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{type:"elite",level:4,health:20,movement:4,attack:5,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{type:"elite",level:5,health:24,movement:4,attack:6,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","stun"]},{type:"elite",level:6,health:36,movement:4,attack:6,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","disarm","stun"]},{type:"elite",level:7,health:44,movement:4,attack:7,actions:[{type:"condition",value:"wound"}],immunities:["immobilize","disarm","stun"]}]},{name:"power-core",edition:"fh",deck:"ice-wraith",hidden:!0,count:1,standeeShare:"ice-wraith",baseStat:{type:"normal"},stats:[{level:0,health:"[7xC/2{$math.floor}]",movement:2,attack:2,actions:[{type:"shield",value:1}]},{level:1,health:"[8xC/2{$math.floor}]",movement:2,attack:2,actions:[{type:"shield",value:2}]},{level:2,health:"[10xC/2{$math.floor}]",movement:3,attack:2,actions:[{type:"shield",value:2}]},{level:3,health:"[10xC/2{$math.floor}]",movement:3,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{level:4,health:"[12xC/2{$math.floor}]",movement:3,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{level:5,health:"[16xC/2{$math.floor}]",movement:3,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}]},{level:6,health:"[21xC/2{$math.floor}]",movement:3,attack:4,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}],immunities:["curse"]},{level:7,health:"[27xC/2{$math.floor}]",movement:3,attack:5,actions:[{type:"shield",value:2},{type:"condition",value:"curse"}],immunities:["curse"]},{type:"elite",level:0,health:"[7xC/2{$math.floor}]",movement:4,attack:3},{type:"elite",level:1,health:"[8xC/2{$math.floor}]",movement:4,attack:3,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:2,small:!0}]}]},{type:"elite",level:2,health:"[10xC/2{$math.floor}]",movement:5,attack:3,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:2}]}]},{type:"elite",level:3,health:"[10xC/2{$math.floor}]",movement:5,attack:4,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:2}]},{type:"condition",value:"wound"}]},{type:"elite",level:4,health:"[12xC/2{$math.floor}]",movement:5,attack:4,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"}]},{type:"elite",level:5,health:"[16xC/2{$math.floor}]",movement:5,attack:5,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"}]},{type:"elite",level:6,health:"[21xC/2{$math.floor}]",movement:5,attack:5,actions:[{type:"retaliate",value:4,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"}],immunities:["curse"]},{type:"elite",level:7,health:"[27xC/2{$math.floor}]",movement:5,attack:6,actions:[{type:"retaliate",value:4,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"}],immunities:["curse"]}]},{name:"prince-of-frost",edition:"fh",deck:"boss",boss:!0,count:1,baseStat:{type:"boss",health:"Cx10",movement:2,attack:2,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:3,small:!0}]},{type:"condition",value:"brittle"}],immunities:["immobilize","disarm","stun","curse"],special:[[{type:"custom",value:"%data.custom.fh.prince-of-frost.1%"},{type:"heal",value:"[L/2+2{$math.ceil}]",subActions:[{type:"target",value:"[C]",small:!0},{type:"range",value:5,small:!0}]},{type:"summon",value:"monsterStandee",valueObject:[{monster:{name:"snow-imp",player2:"normal",player3:"elite",player4:"elite"}}]}],[{type:"custom",value:"%data.custom.fh.prince-of-frost.2%"},{type:"push",value:2,subActions:[{type:"target",value:"[C-1]",small:!0},{type:"range",value:1,small:!0},{type:"condition",value:"brittle",small:!0}]},{type:"summon",value:"monsterStandee",valueObject:[{monster:{name:"snow-imp",player2:"normal",player3:"normal",player4:"elite"}}]}]]},stats:[{level:0,health:"Cx10",movement:2,attack:2,actions:[{type:"retaliate",value:1,subActions:[{type:"range",value:2,small:!0}]},{type:"condition",value:"brittle"}]},{level:1,health:"Cx13",movement:2,attack:2,actions:[{type:"retaliate",value:1,subActions:[{type:"range",value:3,small:!0}]},{type:"condition",value:"brittle"}]},{level:2,health:"Cx15",movement:2,attack:2,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:3,small:!0}]},{type:"condition",value:"brittle"}]},{level:3,health:"Cx18",movement:3,attack:3,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:3,small:!0}]},{type:"condition",value:"brittle"}]},{level:4,health:"Cx24",movement:3,attack:3,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:3,small:!0}]},{type:"condition",value:"brittle"}]},{level:5,health:"Cx25",movement:3,attack:4,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:3,small:!0}]},{type:"condition",value:"brittle"}]},{level:6,health:"Cx34",movement:3,attack:5,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:3,small:!0}]},{type:"condition",value:"brittle"}]},{level:7,health:"Cx42",movement:3,attack:5,actions:[{type:"retaliate",value:4,subActions:[{type:"range",value:4,small:!0}]},{type:"condition",value:"brittle"}]}]},{name:"program-director",edition:"fh",deck:"boss",boss:!0,count:1,baseStat:{type:"boss",health:"Cx10",attack:"C",immunities:["wound","poison","stun"],special:[[{type:"specialTarget",value:"focusEnemyFarthest",subActions:[{type:"teleport",subActions:[{type:"custom",value:"%data.custom.fh.program-director.1%",small:!0}]}]},{type:"attack",value:0,valueType:"plus",subActions:[{type:"target",value:2,small:!0}]}],[{type:"custom",value:"%data.custom.fh.program-director.2%"},{type:"custom",value:"%data.custom.fh.program-director.3%",subActions:[{type:"teleport",subActions:[{type:"custom",value:"%data.custom.fh.program-director.4%",small:!0}]}]},{type:"attack",value:2,valueType:"minus",subActions:[{type:"specialTarget",value:"enemiesAdjacent",small:!0}]}]]},stats:[{level:0,health:"Cx10",attack:"C"},{level:1,health:"Cx12",attack:"C+1"},{level:2,health:"Cx15",attack:"C+1"},{level:3,health:"Cx18",attack:"C+2"},{level:4,health:"Cx23",attack:"C+2"},{level:5,health:"Cx27",attack:"C+3"},{level:6,health:"Cx40",attack:"C+3"},{level:7,health:"Cx50",attack:"C+4"}]},{name:"reluctant-ghost-section-149.3",edition:"fh",deck:"living-spirit",boss:!0,hidden:!0,count:1,standeeShare:"living-spirit",baseStat:{type:"boss",movement:3,note:"Focus on moving torward the closest starting hex"},stats:[{level:0,health:"(2xC)/2",attack:2,actions:[{type:"shield",value:1}]},{level:1,health:"(2xC)/2",attack:2,actions:[{type:"shield",value:2}]},{level:2,health:"(2xC)/2",attack:2,actions:[{type:"shield",value:2}]},{level:3,health:"(3xC)/2",attack:3,actions:[{type:"shield",value:2}]},{level:4,health:"(3xC)/2",attack:3,actions:[{type:"shield",value:3}]},{level:5,health:"(4xC)/2",attack:3,actions:[{type:"shield",value:3}]},{level:6,health:"(6xC)/2",attack:4,actions:[{type:"shield",value:3}]},{level:7,health:"(7xC)/2",attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:0,health:"(3xC)/2",attack:3,actions:[{type:"shield",value:2}]},{type:"elite",level:1,health:"(3xC)/2",attack:3,actions:[{type:"shield",value:3}]},{type:"elite",level:2,health:"(3xC)/2",attack:4,actions:[{type:"shield",value:3}]},{type:"elite",level:3,health:"(4xC)/2",attack:4,actions:[{type:"shield",value:3}]},{type:"elite",level:4,health:"(4xC)/2",attack:4,actions:[{type:"shield",value:4}]},{type:"elite",level:5,health:"(5xC)/2",attack:5,actions:[{type:"shield",value:4}]},{type:"elite",level:6,health:"(8xC)/2",attack:5,actions:[{type:"shield",value:4}]},{type:"elite",level:7,health:"(10xC)/2",attack:6,actions:[{type:"shield",value:4}]}]},{name:"reluctant-ghost",edition:"fh",deck:"living-spirit",boss:!0,hidden:!0,count:1,standeeShare:"living-spirit",baseStat:{type:"boss",movement:2,note:"Focus on moving torward the closest starting hex"},stats:[{level:0,health:"(2xC)/2",attack:2,actions:[{type:"shield",value:1}]},{level:1,health:"(2xC)/2",attack:2,actions:[{type:"shield",value:2}]},{level:2,health:"(2xC)/2",attack:2,actions:[{type:"shield",value:2}]},{level:3,health:"(3xC)/2",attack:3,actions:[{type:"shield",value:2}]},{level:4,health:"(3xC)/2",attack:3,actions:[{type:"shield",value:3}]},{level:5,health:"(4xC)/2",attack:3,actions:[{type:"shield",value:3}]},{level:6,health:"(6xC)/2",attack:4,actions:[{type:"shield",value:3}]},{level:7,health:"(7xC)/2",attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:0,health:"(3xC)/2",attack:3,actions:[{type:"shield",value:2}]},{type:"elite",level:1,health:"(3xC)/2",attack:3,actions:[{type:"shield",value:3}]},{type:"elite",level:2,health:"(3xC)/2",attack:4,actions:[{type:"shield",value:3}]},{type:"elite",level:3,health:"(4xC)/2",attack:4,actions:[{type:"shield",value:3}]},{type:"elite",level:4,health:"(4xC)/2",attack:4,actions:[{type:"shield",value:4}]},{type:"elite",level:5,health:"(5xC)/2",attack:5,actions:[{type:"shield",value:4}]},{type:"elite",level:6,health:"(8xC)/2",attack:5,actions:[{type:"shield",value:4}]},{type:"elite",level:7,health:"(10xC)/2",attack:6,actions:[{type:"shield",value:4}]}]},{name:"render",edition:"fh",deck:"boss",boss:!0,count:1,baseStat:{type:"boss",health:"Cx20",movement:4,attack:"C+2",actions:[{type:"condition",value:"wound"}],immunities:["brittle","immobilize","disarm","stun","curse"],special:[[{type:"grid",value:"",subActions:[{type:"teleport",value:""},{type:"custom",value:"%data.custom.fh.render.1%",small:!0}]},{type:"attack",value:2,valueType:"plus",subActions:[{type:"range",value:5,small:!0},{type:"push",value:2,small:!0}]}],[{type:"custom",value:"%data.custom.fh.render.2%",small:!0},{type:"pull",value:2,subActions:[{type:"target",value:"[C]",small:!0},{type:"range",value:5,small:!0}]},{type:"attack",value:1,valueType:"minus",subActions:[{type:"specialTarget",value:"enemiesAdjacent",small:!0}]},{type:"heal",value:"[C]",subActions:[{type:"specialTarget",value:"self",small:!0}]}]]},stats:[{level:0,health:"Cx14",movement:3,attack:"C"},{level:1,health:"Cx16",movement:4,attack:"C+2"},{level:2,health:"Cx20",movement:4,attack:"C+2"},{level:3,health:"Cx25",movement:4,attack:"C+3"},{level:4,health:"Cx32",movement:4,attack:"C+3"},{level:5,health:"Cx39",movement:4,attack:"C+4"},{level:6,health:"Cx54",movement:4,attack:"C+5"},{level:7,health:"Cx70",movement:4,attack:"C+6"}]},{name:"rending-drake",edition:"fh",catching:!0,count:6,baseStat:{type:"normal"},stats:[{level:0,health:5,movement:3,attack:3},{level:1,health:6,movement:3,attack:3,actions:[{type:"condition",value:"wound"}]},{level:2,health:7,movement:4,attack:3,actions:[{type:"condition",value:"wound"}]},{level:3,health:7,movement:4,attack:4,actions:[{type:"condition",value:"wound"}]},{level:4,health:9,movement:4,attack:4,actions:[{type:"condition",value:"wound"}]},{level:5,health:10,movement:4,attack:5,actions:[{type:"condition",value:"wound"}]},{level:6,health:14,movement:5,attack:5,actions:[{type:"condition",value:"wound"}]},{level:7,health:18,movement:5,attack:6,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:0,health:7,movement:4,attack:4},{type:"elite",level:1,health:7,movement:4,attack:5,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:2,health:9,movement:5,attack:5,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:3,health:10,movement:5,attack:6,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:4,health:12,movement:6,attack:6,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:5,health:15,movement:6,attack:6,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:6,health:19,movement:6,attack:7,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:7,health:24,movement:6,attack:8,actions:[{type:"condition",value:"wound"}]}]},{name:"rimeheart",edition:"fh",deck:"ice-wraith",hidden:!0,count:1,standeeShare:"ice-wraith",baseStat:{type:"normal",immunities:["disarm","stun"]},stats:[{level:0,health:"[3+7x(C/2){$math.floor}]",movement:2,attack:2,actions:[{type:"shield",value:1},{type:"push",value:1}],immunities:["disarm","stun"]},{level:1,health:"[3+8x(C/2){$math.floor}]",movement:2,attack:2,actions:[{type:"shield",value:2},{type:"push",value:1}],immunities:["disarm","stun"]},{level:2,health:"[3+10x(C/2){$math.floor}]",movement:3,attack:2,actions:[{type:"shield",value:2},{type:"push",value:1}],immunities:["disarm","stun"]},{level:3,health:"[3+10x(C/2){$math.floor}]",movement:3,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"},{type:"push",value:1}],immunities:["disarm","stun"]},{level:4,health:"[3+12x(C/2){$math.floor}]",movement:3,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"},{type:"push",value:2}],immunities:["disarm","stun"]},{level:5,health:"[3+16x(C/2){$math.floor}]",movement:3,attack:3,actions:[{type:"shield",value:2},{type:"condition",value:"curse"},{type:"push",value:2}],immunities:["disarm","stun"]},{level:6,health:"[3+21x(C/2){$math.floor}]",movement:3,attack:4,actions:[{type:"shield",value:2},{type:"condition",value:"curse"},{type:"push",value:2}],immunities:["disarm","stun","curse"]},{level:7,health:"[3+27x(C/2){$math.floor}]",movement:3,attack:5,actions:[{type:"shield",value:2},{type:"condition",value:"curse"},{type:"push",value:2}],immunities:["disarm","stun","curse"]},{type:"elite",level:0,health:"[3+7x(C/2){$math.floor}]",movement:4,attack:3,actions:[{type:"push",value:1}],immunities:["disarm","stun"]},{type:"elite",level:1,health:"[3+8x(C/2){$math.floor}]",movement:4,attack:3,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:2,small:!0}]},{type:"push",value:1}],immunities:["disarm","stun"]},{type:"elite",level:2,health:"[3+10x(C/2){$math.floor}]",movement:5,attack:3,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:2}]},{type:"push",value:1}],immunities:["disarm","stun"]},{type:"elite",level:3,health:"[3+10x(C/2){$math.floor}]",movement:5,attack:4,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:2}]},{type:"condition",value:"wound"},{type:"push",value:1}],immunities:["disarm","stun"]},{type:"elite",level:4,health:"[3+12x(C/2){$math.floor}]",movement:5,attack:4,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"},{type:"push",value:2}],immunities:["disarm","stun"]},{type:"elite",level:5,health:"[3+16x(C/2){$math.floor}]",movement:5,attack:5,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"},{type:"push",value:2}],immunities:["disarm","stun"]},{type:"elite",level:6,health:"[3+21x(C/2){$math.floor}]",movement:5,attack:5,actions:[{type:"retaliate",value:4,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"},{type:"push",value:2}],immunities:["disarm","stun","curse"]},{type:"elite",level:7,health:"[3+27x(C/2){$math.floor}]",movement:5,attack:6,actions:[{type:"retaliate",value:4,subActions:[{type:"range",value:3}]},{type:"condition",value:"wound"},{type:"push",value:2}],immunities:["disarm","stun","curse"]}]},{name:"robotic-boltshooter",edition:"fh",count:6,baseStat:{type:"normal",immunities:["wound"]},stats:[{level:0,health:4,movement:1,attack:1,actions:[{type:"target",value:2}]},{level:1,health:4,movement:1,attack:2,actions:[{type:"target",value:2}]},{level:2,health:6,movement:1,attack:2,actions:[{type:"target",value:2}]},{level:3,health:6,movement:1,attack:2,actions:[{type:"target",value:3}]},{level:4,health:6,movement:1,attack:3,actions:[{type:"target",value:3}]},{level:5,health:8,movement:2,attack:3,actions:[{type:"target",value:3}]},{level:6,health:10,movement:2,attack:4,actions:[{type:"target",value:3}]},{level:7,health:13,movement:2,attack:4,actions:[{type:"target",value:3}],immunities:["wound","disarm"]},{type:"elite",level:0,health:7,movement:1,attack:1,actions:[{type:"target",value:3}],immunities:["wound"]},{type:"elite",level:1,health:7,movement:1,attack:2,actions:[{type:"target",value:3}],immunities:["wound"]},{type:"elite",level:2,health:9,movement:1,attack:2,actions:[{type:"target",value:3}],immunities:["wound"]},{type:"elite",level:3,health:10,movement:1,attack:2,actions:[{type:"target",value:4}],immunities:["wound"]},{type:"elite",level:4,health:11,movement:1,attack:3,actions:[{type:"target",value:4}],immunities:["wound"]},{type:"elite",level:5,health:14,movement:2,attack:3,actions:[{type:"target",value:4}],immunities:["wound"]},{type:"elite",level:6,health:17,movement:2,attack:4,actions:[{type:"target",value:4}],immunities:["wound","disarm"]},{type:"elite",level:7,health:23,movement:2,attack:4,actions:[{type:"target",value:4}],immunities:["wound","disarm"]}]},{name:"ruined-machine",edition:"fh",catching:!0,count:10,baseStat:{type:"normal",health:5,movement:1,attack:2,immunities:["poison"]},stats:[{level:0,health:3,movement:1,attack:1,immunities:["poison"]},{level:1,health:5,movement:1,attack:1,immunities:["poison"]},{level:2,health:6,movement:2,attack:1,immunities:["poison"]},{level:3,health:6,movement:2,attack:2,immunities:["poison"]},{level:4,health:8,movement:2,attack:2,immunities:["poison"]},{level:5,health:10,movement:2,attack:2,immunities:["poison"]},{level:6,health:12,movement:2,attack:3,immunities:["poison"]},{level:7,health:15,movement:3,attack:3,immunities:["poison","immobilize"]},{type:"elite",level:0,health:5,movement:1,attack:2,immunities:["poison"]},{type:"elite",level:1,health:8,movement:1,attack:2,immunities:["poison"]},{type:"elite",level:2,health:9,movement:2,attack:2,immunities:["poison"]},{type:"elite",level:3,health:10,movement:2,attack:3,immunities:["poison"]},{type:"elite",level:4,health:13,movement:2,attack:3,immunities:["poison"]},{type:"elite",level:5,health:15,movement:3,attack:3,immunities:["poison"]},{type:"elite",level:6,health:18,movement:3,attack:4,immunities:["poison","immobilize"]},{type:"elite",level:7,health:22,movement:4,attack:4,immunities:["poison","immobilize"]}]},{name:"savvas-icestorm",edition:"fh",count:4,baseStat:{type:"normal"},stats:[{level:0,health:7,movement:2,attack:2,actions:[{type:"pierce",value:3}]},{level:1,health:10,movement:2,attack:2,actions:[{type:"pierce",value:3}]},{level:2,health:12,movement:3,attack:2,actions:[{type:"pierce",value:3}]},{level:3,health:12,movement:3,attack:2,actions:[{type:"shield",value:1},{type:"pierce",value:3}]},{level:4,health:13,movement:3,attack:3,actions:[{type:"shield",value:1},{type:"pierce",value:3}]},{level:5,health:15,movement:3,attack:4,actions:[{type:"shield",value:1},{type:"pierce",value:3}]},{level:6,health:16,movement:4,attack:4,actions:[{type:"shield",value:2},{type:"pierce",value:3}]},{level:7,health:20,movement:4,attack:5,actions:[{type:"shield",value:2},{type:"pierce",value:3}]},{type:"elite",level:0,health:12,movement:2,attack:3,actions:[{type:"pierce",value:3}]},{type:"elite",level:1,health:12,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"pierce",value:3}]},{type:"elite",level:2,health:15,movement:3,attack:3,actions:[{type:"shield",value:1},{type:"pierce",value:3}]},{type:"elite",level:3,health:17,movement:3,attack:4,actions:[{type:"shield",value:1},{type:"pierce",value:3}]},{type:"elite",level:4,health:17,movement:4,attack:4,actions:[{type:"shield",value:2},{type:"pierce",value:3}]},{type:"elite",level:5,health:20,movement:4,attack:5,actions:[{type:"shield",value:2},{type:"pierce",value:3}]},{type:"elite",level:6,health:26,movement:4,attack:6,actions:[{type:"shield",value:2},{type:"pierce",value:3}]},{type:"elite",level:7,health:33,movement:4,attack:7,actions:[{type:"shield",value:2},{type:"pierce",value:3}]}]},{name:"savvas-lavaflow",edition:"fh",count:4,baseStat:{type:"normal"},stats:[{level:0,health:8,movement:3,attack:2},{level:1,health:9,movement:3,attack:2,actions:[{type:"condition",value:"poison"}]},{level:2,health:11,movement:3,attack:3,actions:[{type:"condition",value:"poison"}]},{level:3,health:14,movement:3,attack:3,actions:[{type:"condition",value:"poison"}]},{level:4,health:16,movement:3,attack:4,actions:[{type:"condition",value:"poison"}]},{level:5,health:20,movement:3,attack:4,actions:[{type:"condition",value:"poison"}]},{level:6,health:28,movement:4,attack:4,actions:[{type:"condition",value:"poison"}]},{level:7,health:35,movement:4,attack:5,actions:[{type:"condition",value:"poison"}]},{type:"elite",level:0,health:13,movement:3,attack:3},{type:"elite",level:1,health:15,movement:3,attack:3,actions:[{type:"condition",value:"wound"}]},{type:"elite",level:2,health:18,movement:3,attack:3,actions:[{type:"condition",value:"wound"},{type:"condition",value:"poison"}]},{type:"elite",level:3,health:21,movement:3,attack:4,actions:[{type:"condition",value:"wound"},{type:"condition",value:"poison"}]},{type:"elite",level:4,health:25,movement:4,attack:4,actions:[{type:"condition",value:"wound"},{type:"condition",value:"poison"}]},{type:"elite",level:5,health:30,movement:4,attack:5,actions:[{type:"condition",value:"wound"},{type:"condition",value:"poison"}]},{type:"elite",level:6,health:40,movement:4,attack:6,actions:[{type:"condition",value:"wound"},{type:"condition",value:"poison"}]},{type:"elite",level:7,health:50,movement:4,attack:7,actions:[{type:"condition",value:"wound"},{type:"condition",value:"poison"}]}]},{name:"scabwit",edition:"fh",deck:"priest",boss:!0,hidden:!0,count:1,standeeShare:"vermling-priest",baseStat:{type:"boss",movement:2},stats:[{level:0,health:3,attack:2,actions:[{type:"shield",value:2}]},{level:1,health:3,attack:2,actions:[{type:"shield",value:3}]},{level:2,health:4,attack:2,actions:[{type:"shield",value:3}]},{level:3,health:5,attack:3,actions:[{type:"shield",value:3}]},{level:4,health:5,attack:3,actions:[{type:"shield",value:4},{type:"condition",value:"muddle"}]},{level:5,health:6,attack:4,actions:[{type:"shield",value:4},{type:"condition",value:"muddle"}]},{level:6,health:8,attack:5,actions:[{type:"shield",value:5},{type:"condition",value:"muddle"}]},{level:7,health:11,attack:5,actions:[{type:"shield",value:5},{type:"condition",value:"muddle"}]}]},{name:"seeker-of-the-abyss",edition:"fh",deck:"boss",boss:!0,count:1,baseStat:{type:"boss",actions:[{type:"target",value:2}],immunities:["poison","disarm","stun","muddle","curse"],special:[[{type:"move",value:0,valueType:"plus"},{type:"attack",value:2,valueType:"minus",subActions:[{type:"custom",value:"%data.custom.fh.seeker-of-the-abyss.1%",small:!0}]}],[{type:"custom",value:"%data.custom.fh.seeker-of-the-abyss.2%",small:!0},{type:"custom",value:"%data.custom.fh.seeker-of-the-abyss.3%",small:!0}]]},stats:[{level:0,health:"Cx13",movement:2,attack:5},{level:1,health:"Cx16",movement:3,attack:6},{level:2,health:"Cx18",movement:3,attack:7},{level:3,health:"Cx21",movement:3,attack:8},{level:4,health:"Cx24",movement:3,attack:9},{level:5,health:"Cx27",movement:4,attack:10},{level:6,health:"Cx37",movement:4,attack:11},{level:7,health:"Cx48",movement:4,attack:12}]},{name:"shrike-fiend",edition:"fh",count:6,baseStat:{type:"normal",health:5,movement:1,attack:2,immunities:["poison","wound","muddle"]},stats:[{level:0,health:6,movement:1,attack:2,immunities:["poison","wound","muddle"]},{level:1,health:8,movement:1,attack:2,immunities:["poison","wound","muddle"]},{level:2,health:9,movement:1,attack:3,immunities:["poison","wound","muddle"]},{level:3,health:10,movement:2,attack:3,immunities:["poison","wound","muddle"]},{level:4,health:13,movement:2,attack:3,immunities:["poison","wound","muddle"]},{level:5,health:15,movement:2,attack:4,immunities:["poison","wound","muddle"]},{level:6,health:21,movement:3,attack:4,immunities:["poison","wound","muddle"]},{level:7,health:29,movement:3,attack:4,immunities:["poison","wound","muddle","disarm"]},{type:"elite",level:0,health:8,movement:2,attack:3,immunities:["poison","wound","muddle"]},{type:"elite",level:1,health:10,movement:2,attack:3,immunities:["poison","wound","muddle"]},{type:"elite",level:2,health:12,movement:2,attack:4,immunities:["poison","wound","muddle"]},{type:"elite",level:3,health:16,movement:2,attack:4,immunities:["poison","wound","muddle"]},{type:"elite",level:4,health:20,movement:2,attack:5,immunities:["poison","wound","muddle"]},{type:"elite",level:5,health:25,movement:3,attack:5,immunities:["poison","wound","muddle"]},{type:"elite",level:6,health:33,movement:3,attack:6,immunities:["poison","wound","muddle","disarm"]},{type:"elite",level:7,health:45,movement:3,attack:6,immunities:["poison","wound","muddle","disarm"]}]},{name:"snow-imp-scenario-65",edition:"fh",deck:"imp",flying:!0,catching:!0,hidden:!0,count:10,standeeShare:"snow-imp",baseStat:{type:"normal"},stats:[{level:0,health:2,movement:2,attack:1,actions:[{type:"push",value:1}]},{level:1,health:2,movement:2,attack:1,actions:[{type:"condition",value:"brittle"},{type:"push",value:1}]},{level:2,health:3,movement:2,attack:1,actions:[{type:"condition",value:"brittle"},{type:"push",value:1}]},{level:3,health:3,movement:2,attack:2,actions:[{type:"condition",value:"brittle"},{type:"push",value:1}]},{level:4,health:4,movement:2,attack:2,actions:[{type:"condition",value:"brittle"},{type:"push",value:2}]},{level:5,health:5,movement:3,attack:2,actions:[{type:"condition",value:"brittle"},{type:"push",value:2}]},{level:6,health:7,movement:3,attack:3,actions:[{type:"condition",value:"brittle"},{type:"push",value:2}]},{level:7,health:11,movement:3,attack:3,actions:[{type:"condition",value:"brittle"},{type:"push",value:2}]},{type:"elite",level:0,health:4,movement:2,attack:2,actions:[{type:"push",value:1}]},{type:"elite",level:1,health:4,movement:2,attack:2,actions:[{type:"condition",value:"brittle"},{type:"push",value:1}]},{type:"elite",level:2,health:5,movement:3,attack:2,actions:[{type:"condition",value:"brittle"},{type:"push",value:1}]},{type:"elite",level:3,health:7,movement:3,attack:2,actions:[{type:"condition",value:"brittle"},{type:"push",value:1}]},{type:"elite",level:4,health:8,movement:3,attack:3,actions:[{type:"condition",value:"brittle"},{type:"push",value:2}]},{type:"elite",level:5,health:10,movement:4,attack:3,actions:[{type:"condition",value:"brittle"},{type:"push",value:2}]},{type:"elite",level:6,health:13,movement:4,attack:4,actions:[{type:"condition",value:"brittle"},{type:"push",value:2}]},{type:"elite",level:7,health:18,movement:4,attack:4,actions:[{type:"condition",value:"brittle"},{type:"push",value:2}]}]},{name:"snow-imp",edition:"fh",deck:"imp",flying:!0,catching:!0,count:10,baseStat:{type:"normal"},stats:[{level:0,health:2,movement:2,attack:1},{level:1,health:2,movement:2,attack:1,actions:[{type:"condition",value:"brittle"}]},{level:2,health:3,movement:2,attack:1,actions:[{type:"condition",value:"brittle"}]},{level:3,health:3,movement:2,attack:2,actions:[{type:"condition",value:"brittle"}]},{level:4,health:4,movement:2,attack:2,actions:[{type:"condition",value:"brittle"}]},{level:5,health:5,movement:3,attack:2,actions:[{type:"condition",value:"brittle"}]},{level:6,health:7,movement:3,attack:3,actions:[{type:"condition",value:"brittle"}]},{level:7,health:11,movement:3,attack:3,actions:[{type:"condition",value:"brittle"}]},{type:"elite",level:0,health:4,movement:2,attack:2},{type:"elite",level:1,health:4,movement:2,attack:2,actions:[{type:"condition",value:"brittle"}]},{type:"elite",level:2,health:5,movement:3,attack:2,actions:[{type:"condition",value:"brittle"}]},{type:"elite",level:3,health:7,movement:3,attack:2,actions:[{type:"condition",value:"brittle"}]},{type:"elite",level:4,health:8,movement:3,attack:3,actions:[{type:"condition",value:"brittle"}]},{type:"elite",level:5,health:10,movement:4,attack:3,actions:[{type:"condition",value:"brittle"}]},{type:"elite",level:6,health:13,movement:4,attack:4,actions:[{type:"condition",value:"brittle"}]},{type:"elite",level:7,health:18,movement:4,attack:4,actions:[{type:"condition",value:"brittle"}]}]},{name:"snowdancer",edition:"fh",deck:"boss",boss:!0,count:1,baseStat:{type:"boss",movement:3,immunities:["wound","poison","disarm","stun","curse"],special:[[{type:"move",value:1,valueType:"plus"},{type:"attack",value:1,valueType:"minus",subActions:[{type:"area",value:"(0,1,target)|(1,0,target)|(1,1,target)|(2,0,target)|(2,1,target)|(1,2,target)|(2,2,target)"},{type:"range",value:3,small:!0},{type:"condition",value:"muddle",small:!0}]}],[{type:"attack",value:1,valueType:"plus",subActions:[{type:"target",value:2,small:!0},{type:"range",value:4,small:!0},{type:"push",value:2,small:!0},{type:"element",value:"ice",valueType:"minus",subActions:[{type:"condition",value:"immobilize"}]}]}]]},stats:[{level:0,health:"Cx10",attack:"C"},{level:1,health:"Cx12",attack:"C+1"},{level:2,health:"Cx15",attack:"C+1"},{level:3,health:"Cx17",attack:"C+2"},{level:4,health:"Cx22",attack:"C+2"},{level:5,health:"Cx25",attack:"C+3"},{level:6,health:"Cx35",attack:"C+4"},{level:7,health:"Cx45",attack:"C+5"}]},{name:"spitting-drake",edition:"fh",flying:!0,catching:!0,count:6,baseStat:{type:"normal"},stats:[{level:0,health:4,movement:3,attack:3},{level:1,health:5,movement:3,attack:3,actions:[{type:"condition",value:"muddle"}]},{level:2,health:7,movement:3,attack:3,actions:[{type:"condition",value:"muddle"}]},{level:3,health:8,movement:3,attack:4,actions:[{type:"condition",value:"muddle"}]},{level:4,health:9,movement:4,attack:4,actions:[{type:"condition",value:"muddle"}]},{level:5,health:12,movement:4,attack:4,actions:[{type:"condition",value:"muddle"}]},{level:6,health:16,movement:4,attack:5,actions:[{type:"condition",value:"muddle"}]},{level:7,health:22,movement:4,attack:5,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:0,health:7,movement:3,attack:4},{type:"elite",level:1,health:9,movement:3,attack:4,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:2,health:10,movement:3,attack:5,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:3,health:13,movement:3,attack:5,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:4,health:16,movement:4,attack:5,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:5,health:19,movement:4,attack:6,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:6,health:27,movement:4,attack:6,actions:[{type:"condition",value:"muddle"}]},{type:"elite",level:7,health:34,movement:4,attack:7,actions:[{type:"condition",value:"muddle"}]}]},{name:"steel-automaton-scenario-128",edition:"fh",deck:"imp",hidden:!0,count:6,standeeShare:"steel-automaton",baseStat:{type:"normal",immunities:["poison","disarm"]},stats:[{level:0,health:9,movement:1,attack:3,actions:[{type:"shield",value:1}]},{level:1,health:9,movement:2,attack:3,actions:[{type:"shield",value:2}]},{level:2,health:12,movement:2,attack:3,actions:[{type:"shield",value:2}]},{level:3,health:14,movement:2,attack:4,actions:[{type:"shield",value:2}]},{level:4,health:18,movement:2,attack:4,actions:[{type:"shield",value:2}]},{level:5,health:21,movement:3,attack:4,actions:[{type:"shield",value:2}]},{level:6,health:22,movement:3,attack:4,actions:[{type:"shield",value:3}]},{level:7,health:27,movement:4,attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:0,health:10,movement:2,attack:4,actions:[{type:"shield",value:2}]},{type:"elite",level:1,health:12,movement:2,attack:4,actions:[{type:"shield",value:3}]},{type:"elite",level:2,health:14,movement:2,attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:3,health:17,movement:3,attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:4,health:22,movement:3,attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:5,health:25,movement:3,attack:6,actions:[{type:"shield",value:3}]},{type:"elite",level:6,health:26,movement:3,attack:7,actions:[{type:"shield",value:4}]},{type:"elite",level:7,health:36,movement:4,attack:7,actions:[{type:"shield",value:4}]}]},{name:"steel-automaton-scenario-134",edition:"fh",deck:"steel-automaton",hidden:!0,count:6,standeeShare:"steel-automaton",baseStat:{type:"normal",immunities:["poison","disarm"]},stats:[{level:0,health:"9xC/2",movement:1,attack:3,actions:[{type:"shield",value:1}]},{level:1,health:"9xC/2",movement:2,attack:3,actions:[{type:"shield",value:2}]},{level:2,health:"12xC/2",movement:2,attack:3,actions:[{type:"shield",value:2}]},{level:3,health:"14xC/2",movement:2,attack:4,actions:[{type:"shield",value:2}]},{level:4,health:"18xC/2",movement:2,attack:4,actions:[{type:"shield",value:2}]},{level:5,health:"21xC/2",movement:3,attack:4,actions:[{type:"shield",value:2}]},{level:6,health:"22xC/2",movement:3,attack:4,actions:[{type:"shield",value:3}]},{level:7,health:"27xC/2",movement:4,attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:0,health:"10xC/2",movement:2,attack:4,actions:[{type:"shield",value:2}]},{type:"elite",level:1,health:"12xC/2",movement:2,attack:4,actions:[{type:"shield",value:3}]},{type:"elite",level:2,health:"14xC/2",movement:2,attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:3,health:"17xC/2",movement:3,attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:4,health:"22xC/2",movement:3,attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:5,health:"25xC/2",movement:3,attack:6,actions:[{type:"shield",value:3}]},{type:"elite",level:6,health:"26xC/2",movement:3,attack:7,actions:[{type:"shield",value:4}]},{type:"elite",level:7,health:"36xC/2",movement:4,attack:7,actions:[{type:"shield",value:4}]}]},{name:"steel-automaton",edition:"fh",count:6,baseStat:{type:"normal",health:5,movement:1,attack:2,actions:[{type:"shield",value:3}],immunities:["poison","disarm"]},stats:[{level:0,health:9,movement:1,attack:3,actions:[{type:"shield",value:1}]},{level:1,health:9,movement:2,attack:3,actions:[{type:"shield",value:2}]},{level:2,health:12,movement:2,attack:3,actions:[{type:"shield",value:2}]},{level:3,health:14,movement:2,attack:4,actions:[{type:"shield",value:2}]},{level:4,health:18,movement:2,attack:4,actions:[{type:"shield",value:2}]},{level:5,health:21,movement:3,attack:4,actions:[{type:"shield",value:2}]},{level:6,health:22,movement:3,attack:4,actions:[{type:"shield",value:3}]},{level:7,health:27,movement:4,attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:0,health:10,movement:2,attack:4,actions:[{type:"shield",value:2}]},{type:"elite",level:1,health:12,movement:2,attack:4,actions:[{type:"shield",value:3}]},{type:"elite",level:2,health:14,movement:2,attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:3,health:17,movement:3,attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:4,health:22,movement:3,attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:5,health:25,movement:3,attack:6,actions:[{type:"shield",value:3}]},{type:"elite",level:6,health:26,movement:3,attack:7,actions:[{type:"shield",value:4}]},{type:"elite",level:7,health:36,movement:4,attack:7,actions:[{type:"shield",value:4}]}]},{name:"sun-demon",edition:"fh",flying:!0,count:6,baseStat:{type:"normal"},stats:[{level:0,health:5,movement:2,attack:2,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{level:1,health:8,movement:2,attack:2,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{level:2,health:10,movement:2,attack:2,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{level:3,health:11,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{level:4,health:13,movement:3,attack:3,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{level:5,health:13,movement:3,attack:3,actions:[{type:"shield",value:2},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{level:6,health:16,movement:3,attack:4,actions:[{type:"shield",value:2},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{level:7,health:19,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{type:"elite",level:0,health:9,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{type:"elite",level:1,health:12,movement:2,attack:3,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{type:"elite",level:2,health:13,movement:2,attack:4,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{type:"elite",level:3,health:16,movement:3,attack:4,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{type:"elite",level:4,health:18,movement:3,attack:5,actions:[{type:"shield",value:1},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{type:"elite",level:5,health:18,movement:3,attack:5,actions:[{type:"shield",value:2},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{type:"elite",level:6,health:25,movement:4,attack:5,actions:[{type:"shield",value:2},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]},{type:"elite",level:7,health:27,movement:4,attack:6,actions:[{type:"shield",value:3},{type:"custom",value:"%data.custom.fh.sun-demon.1%"}]}]},{name:"the-collector",edition:"fh",deck:"boss",boss:!0,count:1,baseStat:{type:"boss",health:"Cx12",movement:3,attack:3,immunities:["poison","immobilize","disarm","stun","curse"],special:[[{type:"move",value:0,valueType:"plus"},{type:"attack",value:1,valueType:"plus",subActions:[{type:"element",value:"fire",valueType:"minus",subActions:[{type:"condition",value:"wound",small:!0}]},{type:"element",value:"ice",valueType:"minus",subActions:[{type:"condition",value:"disarm",small:!0}]},{type:"element",value:"air",valueType:"minus",subActions:[{type:"target",value:1,valueType:"add",small:!0}]}]},{type:"element",value:"dark",valueType:"minus",subActions:[{type:"condition",value:"curse",subActions:[{type:"target",value:"%game.target.all%",small:!0},{type:"range",value:1,small:!0}]}]},{type:"concatenation",value:"",subActions:[{type:"element",value:"fire"},{type:"element",value:"air"},{type:"element",value:"earth"},{type:"element",value:"light"}]}],[{type:"move",value:1,valueType:"plus"},{type:"attack",value:0,valueType:"plus",subActions:[{type:"element",value:"fire",valueType:"minus",subActions:[{type:"condition",value:"wound",small:!0}]},{type:"element",value:"air",valueType:"minus",subActions:[{type:"target",value:1,valueType:"add",small:!0}]}]},{type:"element",value:"earth",valueType:"minus",subActions:[{type:"heal",value:"[C]",subActions:[{type:"specialTarget",value:"self",small:!0}]}]},{type:"element",value:"light",valueType:"minus",subActions:[{type:"shield",value:"[(1+L)/6{$math.ceil}]"}]},{type:"concatenation",value:"",subActions:[{type:"element",value:"fire"},{type:"element",value:"ice"},{type:"element",value:"air"},{type:"element",value:"dark"}]}]]},stats:[{level:0,health:"Cx12",movement:3,attack:3},{level:1,health:"Cx15",movement:3,attack:4},{level:2,health:"Cx19",movement:4,attack:4},{level:3,health:"Cx25",movement:4,attack:4},{level:4,health:"Cx30",movement:4,attack:5},{level:5,health:"Cx38",movement:5,attack:5},{level:6,health:"Cx54",movement:5,attack:6},{level:7,health:"Cx68",movement:5,attack:7}]},{name:"the-relic",edition:"fh",deck:"boss",boss:!0,count:1,baseStat:{type:"boss",health:"Cx12",movement:3,attack:3,note:"%game.custom.scenarioBook%",actions:[{type:"retaliate",value:1}],immunities:["wound","poison","immobilize","disarm","stun"],special:[[{type:"attack",value:1,valueType:"minus"}],[{type:"move",value:1,valueType:"minus"}]]},stats:[{level:0,health:"Cx12",movement:3,attack:3,actions:[{type:"retaliate",value:1}]},{level:1,health:"Cx13",movement:4,attack:4,actions:[{type:"retaliate",value:1}]},{level:2,health:"Cx15",movement:4,attack:5,actions:[{type:"retaliate",value:1}]},{level:3,health:"Cx18",movement:5,attack:5,actions:[{type:"retaliate",value:2}]},{level:4,health:"Cx21",movement:5,attack:6,actions:[{type:"retaliate",value:2}]},{level:5,health:"Cx25",movement:6,attack:6,actions:[{type:"retaliate",value:2}]},{level:6,health:"Cx33",movement:6,attack:7,actions:[{type:"retaliate",value:3}]},{level:7,health:"Cx43",movement:6,attack:8,actions:[{type:"retaliate",value:3}]}]},{name:"the-shimmer",edition:"fh",deck:"savvas-icestorm",boss:!0,hidden:!0,count:1,standeeShare:"savvas-icestorm",baseStat:{type:"boss"},stats:[{level:0,health:"12xC",movement:2,attack:3,actions:[{type:"pierce",value:3}]},{level:1,health:"12xC",movement:2,attack:3,actions:[{type:"shield",value:1},{type:"pierce",value:3}]},{level:2,health:"15xC",movement:3,attack:3,actions:[{type:"shield",value:1},{type:"pierce",value:3}]},{level:3,health:"17xC",movement:3,attack:4,actions:[{type:"shield",value:1},{type:"pierce",value:3}]},{level:4,health:"17xC",movement:4,attack:4,actions:[{type:"shield",value:2},{type:"pierce",value:3}]},{level:5,health:"20xC",movement:4,attack:5,actions:[{type:"shield",value:2},{type:"pierce",value:3}]},{level:6,health:"26xC",movement:4,attack:6,actions:[{type:"shield",value:2},{type:"pierce",value:3}]},{level:7,health:"33xC",movement:4,attack:7,actions:[{type:"shield",value:2},{type:"pierce",value:3}]}]},{name:"tormentor",edition:"fh",deck:"boss",boss:!0,hidden:!0,count:1,standeeShare:"chaos-demon",baseStat:{type:"boss",actions:[{type:"condition",value:"muddle"}],special:[[{type:"move",value:0,valueType:"plus"},{type:"attack",value:"C-4",valueType:"plus",subActions:[{type:"range",value:4,small:!0},{type:"element",value:"earth",valueType:"minus",small:!0,subActions:[{type:"condition",value:"immobilize",small:!0}]}]},{type:"custom",value:"%data.custom.fh.tormentor.1%",small:!0,subActions:[{type:"damage",value:"C-1"},{type:"element",value:"fire",valueType:"minus",small:!0,subActions:[{type:"damage",value:1,valueType:"add"}]}]},{type:"element",value:"light"}],[{type:"move",value:1,valueType:"minus"},{type:"attack",value:"C-5",valueType:"plus",subActions:[{type:"condition",value:"curse",small:!0},{type:"element",value:"air",valueType:"minus",small:!0,subActions:[{type:"target",value:1,valueType:"add",small:!0}]}]},{type:"custom",value:"%data.custom.fh.tormentor.2%",small:!0},{type:"push",value:1,subActions:[{type:"target",value:"%game.target.all%",small:!0},{type:"range",value:1,small:!0},{type:"element",value:"ice",valueType:"minus",small:!0,subActions:[{type:"push",value:2,valueType:"add",small:!0}]}]},{type:"element",value:"dark"}]]},stats:[{level:0,health:"[10xCx3/2{$math.floor}]",movement:4,attack:3,immunities:["wound","stun"]},{level:1,health:"[12xCx3/2{$math.floor}]",movement:4,attack:4,immunities:["wound","stun"]},{level:2,health:"[14xCx3/2{$math.floor}]",movement:4,attack:5,immunities:["wound","stun"]},{level:3,health:"[18xCx3/2{$math.floor}]",movement:5,attack:5,immunities:["wound","stun"]},{level:4,health:"[21xCx3/2{$math.floor}]",movement:5,attack:6,immunities:["wound","stun"]},{level:5,health:"[26xCx3/2{$math.floor}]",movement:5,attack:6,immunities:["wound","stun"]},{level:6,health:"[33xCx3/2{$math.floor}]",movement:5,attack:8,immunities:["wound","stun","curse"]},{level:7,health:"[39xCx3/2{$math.floor}]",movement:6,attack:9,immunities:["wound","stun","curse"]}]},{name:"vanjal",edition:"fh",deck:"algox-icespeaker",boss:!0,hidden:!0,count:1,standeeShare:"algox-icespeaker",baseStat:{type:"boss",immunities:["bane","disarm","curse","immobilize","muddle","poison","stun","wound"]},stats:[{level:0,health:"8xC",movement:2,attack:4,actions:[{type:"shield",value:2}]},{level:1,health:"8xC",movement:2,attack:4,actions:[{type:"shield",value:2},{type:"condition",value:"brittle"}]},{level:2,health:"10xC",movement:3,attack:4,actions:[{type:"shield",value:2},{type:"condition",value:"brittle"}]},{level:3,health:"12xC",movement:2,attack:5,actions:[{type:"shield",value:2},{type:"condition",value:"brittle"}]},{level:4,health:"15xC",movement:4,attack:5,actions:[{type:"shield",value:2},{type:"condition",value:"brittle"}]},{level:5,health:"18xC",movement:4,attack:6,actions:[{type:"shield",value:2},{type:"condition",value:"brittle"}]},{level:6,health:"26xC",movement:4,attack:6,actions:[{type:"shield",value:2},{type:"condition",value:"brittle"}]},{level:7,health:"35xC",movement:4,attack:6,actions:[{type:"shield",value:2},{type:"condition",value:"brittle"}]}]},{name:"vermling-priest",edition:"fh",deck:"priest",count:6,baseStat:{type:"normal",movement:3},stats:[{level:0,health:2,movement:2,attack:1,actions:[{type:"shield",value:2}]},{level:1,health:2,movement:2,attack:1,actions:[{type:"shield",value:3}]},{level:2,health:3,movement:2,attack:1,actions:[{type:"shield",value:3}]},{level:3,health:3,movement:2,attack:2,actions:[{type:"shield",value:3}]},{level:4,health:3,movement:3,attack:2,actions:[{type:"shield",value:3},{type:"condition",value:"muddle"}]},{level:5,health:4,movement:3,attack:3,actions:[{type:"shield",value:3},{type:"condition",value:"muddle"}]},{level:6,health:5,movement:3,attack:4,actions:[{type:"shield",value:3},{type:"condition",value:"muddle"}]},{level:7,health:8,movement:3,attack:4,actions:[{type:"shield",value:3},{type:"condition",value:"muddle"}]},{type:"elite",level:0,health:3,attack:2,actions:[{type:"shield",value:2}]},{type:"elite",level:1,health:3,attack:2,actions:[{type:"shield",value:3}]},{type:"elite",level:2,health:4,attack:2,actions:[{type:"shield",value:3}]},{type:"elite",level:3,health:5,attack:3,actions:[{type:"shield",value:3}]},{type:"elite",level:4,health:5,attack:3,actions:[{type:"shield",value:4},{type:"condition",value:"muddle"}]},{type:"elite",level:5,health:6,attack:4,actions:[{type:"shield",value:4},{type:"condition",value:"muddle"}]},{type:"elite",level:6,health:8,attack:5,actions:[{type:"shield",value:4},{type:"condition",value:"muddle"}]},{type:"elite",level:7,health:11,attack:5,actions:[{type:"shield",value:4},{type:"condition",value:"muddle"}]}]},{name:"vermling-scout-scenario-94",edition:"fh",hidden:!0,count:8,standeeShare:"vermling-scout",baseStat:{type:"normal",movement:3},stats:[{level:0,health:2},{level:1,health:3},{level:2,health:3},{level:3,health:4},{level:4,health:5},{level:5,health:7},{level:6,health:10},{level:7,health:15},{type:"elite",level:0,health:4},{type:"elite",level:1,health:5},{type:"elite",level:2,health:3},{type:"elite",level:3,health:7},{type:"elite",level:4,health:8},{type:"elite",level:5,health:11},{type:"elite",level:6,health:16},{type:"elite",level:7,health:23}]},{name:"vermling-scout",edition:"fh",deck:"scout",count:10,baseStat:{type:"normal"},stats:[{level:0,health:2,movement:3,attack:1},{level:1,health:3,movement:3,attack:1},{level:2,health:3,movement:3,attack:2},{level:3,health:4,movement:3,attack:2},{level:4,health:5,movement:3,attack:3},{level:5,health:7,movement:3,attack:3},{level:6,health:10,movement:4,attack:3},{level:7,health:15,movement:4,attack:3},{type:"elite",level:0,health:4,movement:3,attack:2},{type:"elite",level:1,health:5,movement:3,attack:2},{type:"elite",level:2,health:5,movement:4,attack:3},{type:"elite",level:3,health:7,movement:4,attack:3},{type:"elite",level:4,health:8,movement:4,attack:4},{type:"elite",level:5,health:11,movement:4,attack:4},{type:"elite",level:6,health:16,movement:5,attack:4},{type:"elite",level:7,health:23,movement:5,attack:4}]},{name:"vestige-of-the-imprisoned-god",edition:"fh",deck:"boss",boss:!0,count:1,baseStat:{type:"boss",health:"Cx16",attack:3,actions:[{type:"retaliate",value:1,subActions:[{type:"range",value:3,small:!0}]}],immunities:["wound","immobilize","disarm","stun","muddle","curse"],special:[[{type:"attack",value:0,valueType:"plus",subActions:[{type:"area",value:"(0,1,target)|(1,0,target)|(1,1,target)|(2,0,target)|(2,1,target)|(1,2,target)|(2,2,target)"}]}],[{type:"shield",value:3},{type:"custom",value:"%data.custom.fh.vestige-of-the-imprisoned-god.1%"},{type:"push",value:2,subActions:[{type:"target",value:"%game.target.all%",small:!0},{type:"range",value:3,small:!0}]},{type:"custom",value:"%data.custom.fh.vestige-of-the-imprisoned-god.2%"}]]},stats:[{level:0,health:"Cx16",attack:3},{level:1,health:"Cx20",attack:4},{level:2,health:"Cx25",attack:4},{level:3,health:"Cx30",attack:5,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:3,small:!0}]}]},{level:4,health:"Cx37",attack:5,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:3,small:!0}]}]},{level:5,health:"Cx44",attack:6,actions:[{type:"retaliate",value:2,subActions:[{type:"range",value:3,small:!0}]}]},{level:6,health:"Cx60",attack:7,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:3,small:!0}]}]},{level:7,health:"Cx80",attack:8,actions:[{type:"retaliate",value:3,subActions:[{type:"range",value:3,small:!0}]}]}]},{name:"wind-demon",edition:"fh",flying:!0,count:6,baseStat:{type:"normal",movement:4},stats:[{level:0,health:3,movement:3,attack:2,actions:[{type:"shield",value:1}]},{level:1,health:3,movement:3,attack:2,actions:[{type:"shield",value:2}]},{level:2,health:4,attack:2,actions:[{type:"shield",value:2}]},{level:3,health:5,attack:3,actions:[{type:"shield",value:2}]},{level:4,health:7,attack:3,actions:[{type:"shield",value:2}]},{level:5,health:10,attack:3,actions:[{type:"shield",value:2}]},{level:6,health:11,attack:3,actions:[{type:"shield",value:3}]},{level:7,health:14,attack:4,actions:[{type:"shield",value:3}]},{type:"elite",level:0,health:5,movement:3,attack:3,actions:[{type:"shield",value:1}]},{type:"elite",level:1,health:5,movement:3,attack:3,actions:[{type:"shield",value:2}]},{type:"elite",level:2,health:7,attack:3,actions:[{type:"shield",value:2}]},{type:"elite",level:3,health:8,attack:4,actions:[{type:"shield",value:2}]},{type:"elite",level:4,health:10,attack:5,actions:[{type:"shield",value:2}]},{type:"elite",level:5,health:14,attack:5,actions:[{type:"shield",value:2}]},{type:"elite",level:6,health:16,attack:5,actions:[{type:"shield",value:3}]},{type:"elite",level:7,health:21,attack:6,actions:[{type:"shield",value:3}]}]},{name:"yoglang",edition:"fh",deck:"algox-snowspeaker",boss:!0,hidden:!0,count:1,standeeShare:"algox-snowspeaker",baseStat:{type:"boss"},stats:[{level:0,health:6,movement:1,attack:2,actions:[{type:"retaliate",value:1},{type:"range",value:"^5"}]},{level:1,health:7,movement:1,attack:3,actions:[{type:"retaliate",value:1},{type:"range",value:"^5"}]},{level:2,health:9,movement:2,attack:3,actions:[{type:"retaliate",value:1},{type:"range",value:"^5"}]},{level:3,health:12,movement:2,attack:3,actions:[{type:"retaliate",value:1},{type:"range",value:"^5"}]},{level:4,health:13,movement:2,attack:4,actions:[{type:"retaliate",value:2},{type:"range",value:"^5"}]},{level:5,health:15,movement:3,attack:4,actions:[{type:"retaliate",value:2},{type:"range",value:"^5"}]},{level:6,health:20,movement:3,attack:5,actions:[{type:"retaliate",value:2},{type:"range",value:"^5"}]},{level:7,health:27,movement:4,attack:5,actions:[{type:"retaliate",value:3},{type:"range",value:"^5"}],immunities:["brittle"]}]}],scenarios:[{index:"0",name:"Howling in the Snow",flowChartGroup:"intro",errata:"section197-1",coordinates:{x:803.5,y:878,width:143,height:117,gridLocation:"N6"},edition:"fh",complexity:1,initial:!0,forcedLinks:["1"],rewards:{custom:"You should now be ready to take on scenario 1 on the following page in the Scenario Book. Do not perform an Outpost Phase until you have completed scenario 1.",ignoredBonus:["inspiration"],calendarIgnore:!0},monsters:["hound"],lootDeckConfig:{money:8,lumber:2,metal:2,hide:2},rules:[{round:"true",always:!0,alwaysApply:!0,statEffects:[{identifier:{type:"monster",edition:"fh",name:"hound"},statEffect:{deck:"hound-scenario-0"},note:"%data.scenario.rules.fh.0%"}]}],rooms:[{roomNumber:1,ref:"13-A",initial:!0,monster:[{name:"hound",type:"normal"},{name:"hound",player2:"normal",player3:"elite",player4:"normal"},{name:"hound",player3:"elite",player4:"normal"},{name:"hound",player4:"normal"}]}]},{index:"1",name:"A Town in Flames",flowChartGroup:"intro",coordinates:{x:961.25,y:1872,width:165,height:95,gridLocation:"FR"},edition:"fh",complexity:1,initial:!0,unlocks:["2","3"],rewards:{custom:"<b>%wip%!</b> manually apply:<br>Gain 2+X morale, where X is the number of City Guards still on the map."},monsters:["algox-archer","algox-guard","algox-priest","city-guard"],allies:["city-guard"],lootDeckConfig:{money:6,lumber:5,metal:3,hide:3,rockroot:1,snowthistle:2},rules:[{round:"true",always:!0,alwaysApply:!0,statEffects:[{identifier:{type:"monster",edition:"fh",name:"city-guard"},statEffect:{actions:[{type:"shield",value:1},{type:"retaliate",value:2}],deck:"city-guard-scenario-1"},note:"%data.scenario.rules.fh.1%"}]}],rooms:[{roomNumber:1,ref:"09-A",initial:!0,monster:[{name:"algox-archer",type:"normal"},{name:"algox-archer",player4:"normal"},{name:"algox-guard",type:"normal"},{name:"algox-priest",player2:"normal",player3:"elite",player4:"elite"},{name:"city-guard",type:"normal"}]}]},{index:"2",name:"Algox Scouting",flowChartGroup:"intro",coordinates:{x:1078.5,y:1073.5,width:142,height:83,gridLocation:"K8"},edition:"fh",complexity:1,unlocks:["4B"],blocks:["3","4A"],forcedLinks:["4B"],rewards:{battleGoals:1,overlaySticker:{name:"W",location:"M7",coordinates:{x:784.5,y:933.5,width:288,height:274}}},monsters:["algox-archer","algox-guard"],allies:["algox-priest"],lootDeckConfig:{money:4,lumber:4,metal:4,hide:4,rockroot:1,arrowvine:2,random_item:1},rooms:[{roomNumber:1,ref:"11-A",initial:!0,monster:[{name:"algox-archer",type:"normal"},{name:"algox-archer",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-guard",type:"elite"},{name:"algox-guard",player3:"normal",player4:"normal"},{name:"algox-guard",player3:"normal",player4:"elite"}]}]},{index:"3",name:"Algox Offensive",flowChartGroup:"intro",coordinates:{x:1049.5,y:989.5,width:136,height:75,gridLocation:"L7"},edition:"fh",complexity:2,unlocks:["4A"],blocks:["2","4B"],forcedLinks:["4A"],rewards:{battleGoals:1,overlaySticker:{name:"W",location:"M7",coordinates:{x:784.5,y:933.5,width:288,height:274}}},monsters:["algox-archer","algox-guard","algox-priest","hound"],allied:["algox-priest","hound"],lootDeckConfig:{money:4,lumber:4,metal:4,hide:4,rockroot:1,arrowvine:2,random_item:1},rooms:[{roomNumber:1,ref:"13-A",initial:!0,treasures:[18],monster:[{name:"algox-archer",type:"elite"},{name:"algox-archer",type:"elite"},{name:"algox-archer",player3:"normal",player4:"normal"},{name:"algox-archer",player3:"normal",player4:"elite"},{name:"algox-guard",type:"normal"},{name:"algox-guard",type:"elite"},{name:"algox-guard",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-priest",type:"normal"},{name:"algox-priest",type:"elite"},{name:"algox-priest",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-priest",player4:"normal"},{name:"hound",type:"normal"},{name:"hound",player2:"normal",player3:"elite",player4:"normal"},{name:"hound",player3:"normal",player4:"normal"}]}]},{index:"4A",name:"Heart of Ice A",flowChartGroup:"intro",coordinates:{x:903.5,y:1083.5,width:111,height:70,gridLocation:"M8"},edition:"fh",complexity:2,rewards:{prosperity:1,morale:1,calendarSection:["156.1-4"]},monsters:["algox-guard","algox-scout"],allied:["algox-scout"],drawExtra:["snowdancer"],lootDeckConfig:{money:6,lumber:3,metal:5,hide:2,rockroot:2,corpsecap:1,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,ref:"16-B",initial:!0,monster:[{name:"algox-guard",type:"elite"},{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-guard",player4:"normal"},{name:"algox-guard",player4:"normal"},{name:"algox-scout",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-scout",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-scout",player3:"normal",player4:"normal"},{name:"algox-scout",player3:"normal",player4:"normal"}]}]},{index:"4B",name:"Heart of Ice B",flowChartGroup:"intro",coordinates:{x:903.5,y:1083.5,width:111,height:70,gridLocation:"M8"},edition:"fh",complexity:2,rewards:{prosperity:1,morale:1,calendarSection:["156.1-4"]},monsters:["algox-archer","algox-guard"],drawExtra:["snowdancer"],lootDeckConfig:{money:6,lumber:3,metal:5,hide:2,rockroot:2,corpsecap:1,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,ref:"16-B",initial:!0,monster:[{name:"algox-archer",type:"elite"},{name:"algox-archer",player3:"normal",player4:"normal"},{name:"algox-archer",player4:"normal"},{name:"algox-guard",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"5",name:"Frozen Crypt",flowChartGroup:"algox-1",coordinates:{x:1293.5,y:961.75,width:127,height:77,gridLocation:"I6"},edition:"fh",complexity:2,unlocks:["9","10"],blocks:["6"],rewards:{collectiveResources:[{type:"lumber",value:2}]},monsters:["ice-wraith"],lootDeckConfig:{money:6,lumber:4,metal:3,hide:1,rockroot:2,corpsecap:2},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"damage",value:"2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,ref:"07-A",initial:!0,monster:[{name:"ice-wraith",type:"normal"},{name:"ice-wraith",type:"elite"},{name:"ice-wraith",player3:"elite",player4:"elite"},{name:"ice-wraith",player4:"normal"}]}]},{index:"6",name:"Avalanche",flowChartGroup:"algox-2",coordinates:{x:989,y:1142.875,width:92,height:64,gridLocation:"L8"},edition:"fh",complexity:2,unlocks:["11","12"],blocks:["5"],rewards:{collectiveResources:[{type:"metal",value:2}]},monsters:["frost-demon","snow-imp"],objectives:[{name:"Snowdrift",health:"L+C",tags:["Snowdrift"]},{name:"Snow Rock",health:"L+C",tags:["Snow Rock"]}],lootDeckConfig:{money:9,lumber:4,metal:1,hide:1,snowthistle:2,arrowvine:2,axenut:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"brittle",scenarioEffect:!0}]}],rooms:[{roomNumber:1,ref:"07-B",initial:!0,monster:[{name:"frost-demon",type:"elite"},{name:"frost-demon",player3:"normal",player4:"normal"},{name:"frost-demon",player4:"normal"},{name:"snow-imp",type:"elite"},{name:"snow-imp",player3:"normal",player4:"normal"},{name:"snow-imp",player4:"normal"}],objectives:[1,1,1,1,1,1]}]},{index:"7",name:"Edge of the World",flowChartGroup:"lurker",coordinates:{x:1154.5,y:578.25,width:104,height:84,gridLocation:"K3"},edition:"fh",complexity:1,unlocks:["13","14"],rewards:{experience:10,campaignSticker:["coral-shard"]},monsters:["lurker-clawcrusher","lurker-soldier"],lootDeckConfig:{money:6,lumber:3,metal:3,hide:3,axenut:1,snowthistle:2},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:1",scenarioEffect:!0}]}],rooms:[{roomNumber:1,ref:"06-A",initial:!0,monster:[{name:"lurker-clawcrusher",type:"elite"},{name:"lurker-clawcrusher",player3:"normal",player4:"normal"},{name:"lurker-clawcrusher",player4:"normal"},{name:"lurker-soldier",type:"normal"},{name:"lurker-soldier",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-soldier",player4:"normal"}]}]},{index:"8",name:"Crystal Trench",flowChartGroup:"unfettered",coordinates:{x:1570.25,y:1158.875,width:146,height:100,gridLocation:"G8"},edition:"fh",complexity:1,unlocks:["15","16"],rewards:{overlaySticker:{name:"X",location:"C7",coordinates:{x:1891,y:866,width:204,height:336}},collectiveResources:[{type:"lumber",value:1},{type:"hide",value:2}]},monsters:["polar-bear","snow-imp"],lootDeckConfig:{money:6,lumber:5,hide:5,axenut:1,arrowvine:1,snowthistle:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:1",scenarioEffect:!0}]}],rooms:[{roomNumber:1,ref:"11-A",initial:!0,monster:[{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"},{name:"snow-imp",type:"normal"},{name:"snow-imp",type:"normal"},{name:"snow-imp",type:"elite"},{name:"snow-imp",player3:"elite",player4:"elite"},{name:"snow-imp",player3:"elite",player4:"elite"}]}]},{index:"9",name:"Glowing Catacombs",flowChartGroup:"algox-1",coordinates:{x:1265.5,y:869,width:122,height:76,gridLocation:"J6"},edition:"fh",complexity:1,rewards:{collectiveResources:[{type:"corpsecap",value:2}]},monsters:["ice-wraith","living-doom","living-spirit","ooze"],lootDeckConfig:{money:8,lumber:5,metal:3,rockroot:2,corpsecap:1,random_item:1},rooms:[{roomNumber:1,ref:"16-C",initial:!0,treasures:[9],monster:[{name:"ice-wraith",type:"normal"},{name:"ice-wraith",player3:"elite",player4:"elite"},{name:"ice-wraith",player4:"normal"},{name:"living-doom",type:"normal"},{name:"living-doom",player2:"normal",player3:"normal",player4:"elite"},{name:"living-spirit",player3:"normal"}]}]},{index:"10",name:"Crystal Enclosure",flowChartGroup:"algox-1",coordinates:{x:1637.5,y:906.75,width:129,height:67,gridLocation:"F6"},edition:"fh",complexity:2,unlocks:["18"],requirements:[{buildings:["sled"]}],rewards:{morale:1,inspiration:1},monsters:["algox-guard","algox-priest"],objectives:[{name:"Ice Pillar",health:"[(2+L)xC/2{$math.floor}]",tags:["scenario-10"],actions:[{type:"shield",value:1,subActions:[{type:"custom",value:"%game.action.target% each monster within %game.action.range:4%"}]}]}],lootDeckConfig:{money:8,lumber:4,hide:3,axenut:2,arrowvine:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"discard",value:"1",scenarioEffect:!0}]}],rooms:[{roomNumber:1,ref:"13-A",initial:!0,monster:[{name:"algox-guard",type:"elite"},{name:"algox-guard",player4:"normal"},{name:"algox-priest",type:"normal"},{name:"algox-priest",player3:"normal",player4:"elite"}],objectives:[1,1,1]}]},{index:"11",name:"Snowscorn Peak",flowChartGroup:"algox-2",coordinates:{x:886,y:956,width:96,height:70,gridLocation:"M6"},edition:"fh",complexity:2,unlocks:["19"],requirements:[{buildings:["climbing-gear"]}],forcedLinks:["19"],rewards:{morale:1,inspiration:1},monsters:["algox-stormcaller","frost-demon","wind-demon"],lootDeckConfig:{money:6,lumber:4,metal:3,hide:3,flamefruit:1,axenut:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"discard",value:"1",scenarioEffect:!0}]}],rooms:[{roomNumber:1,ref:"15-A",initial:!0,treasures:[71],monster:[{name:"algox-stormcaller",type:"boss"},{name:"frost-demon",type:"normal"},{name:"frost-demon",player4:"normal"},{name:"wind-demon",type:"normal"},{name:"wind-demon",player3:"normal",player4:"normal"}]}]},{index:"12",name:"Temple Entrance",flowChartGroup:"algox-2",coordinates:{x:1105.5,y:1157.5,width:104,height:103,gridLocation:"K8"},edition:"fh",complexity:1,unlocks:["20"],rewards:{experience:15},monsters:["ancient-artillery"],lootDeckConfig:{money:8,lumber:4,metal:4,rockroot:2,corpsecap:1,random_item:1},rooms:[{roomNumber:1,ref:"16-C",initial:!0,monster:[{name:"ancient-artillery",type:"elite"},{name:"ancient-artillery",type:"elite"},{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ancient-artillery",player3:"normal",player4:"elite"},{name:"ancient-artillery",player3:"normal",player4:"elite"}]}]},{index:"13",name:"Frozen Fjord",flowChartGroup:"lurker",coordinates:{x:728,y:490.75,width:169,height:98,gridLocation:"O2"},edition:"fh",complexity:2,unlocks:["21","32"],rewards:{items:["233"]},monsters:["shrike-fiend"],objectives:[{name:"Scenario",escort:!0,health:"(2+L)xCx2"}],lootDeckConfig:{money:7,lumber:5,hide:3,flamefruit:1,snowthistle:1,arrowvine:2,random_item:1},rooms:[{roomNumber:1,ref:"07-B",initial:!0,monster:[{name:"shrike-fiend",player2:"elite"},{name:"shrike-fiend",player3:"elite",player4:"elite"},{name:"shrike-fiend",player3:"elite",player4:"elite"}]},{roomNumber:2,ref:"01-C",initial:!0,monster:[{name:"shrike-fiend",type:"elite"},{name:"shrike-fiend",player4:"elite"}],objectives:[1]}]},{index:"14",name:"Jagged Shoals",flowChartGroup:"lurker",coordinates:{x:1006.5,y:455.5,width:120,height:71,gridLocation:"L2"},edition:"fh",complexity:2,unlocks:["22"],requirements:[{buildings:["boat"]}],rewards:{events:["winter-outpost:WO-81"],campaignSticker:["coral-shard","shard-seeker"],chooseUnlockCharacter:["coral","kelp"]},monsters:["abael-herder","lightning-eel","piranha-pig"],lootDeckConfig:{money:7,lumber:4,metal:2,hide:5,snowthistle:2},rules:[{round:"R % 2 == 1",start:!0,spawns:[{monster:{name:"piranha-pig",player2:"normal",player3:"elite",player4:"elite"},marker:"b"},{monster:{name:"lightning-eel",player2:"normal",player3:"normal",player4:"elite"},marker:"c",count:2}]},{round:"R % 2 == 0",start:!0,spawns:[{monster:{name:"piranha-pig",player2:"normal",player3:"normal",player4:"elite"},marker:"d"},{monster:{name:"lightning-eel",player2:"normal",player3:"elite",player4:"elite"},marker:"e",count:2}]}],rooms:[{roomNumber:1,ref:"13-A",initial:!0,treasures:[64],monster:[{name:"abael-herder",type:"normal"},{name:"abael-herder",type:"normal"},{name:"abael-herder",player3:"normal",player4:"normal"},{name:"abael-herder",player4:"normal"},{name:"lightning-eel",type:"elite"},{name:"lightning-eel",type:"elite"},{name:"lightning-eel",player2:"normal",player3:"normal",player4:"elite"},{name:"lightning-eel",player2:"normal",player3:"elite",player4:"elite"},{name:"lightning-eel",player3:"normal",player4:"normal"},{name:"lightning-eel",player3:"normal",player4:"elite"},{name:"lightning-eel",player4:"normal"},{name:"piranha-pig",player2:"normal",player3:"normal",player4:"elite"},{name:"piranha-pig",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"15",name:"Ancient Spire",flowChartGroup:"unfettered",coordinates:{x:1907.5,y:1043,width:126,height:61,gridLocation:"D7"},edition:"fh",complexity:2,unlocks:["23","24"],links:["23","24"],rewards:{collectiveResources:[{type:"lumber",value:1},{type:"metal",value:1},{type:"hide",value:1}]},monsters:["chaos-lieutenant","robotic-boltshooter","ruined-machine"],lootDeckConfig:{money:8,lumber:4,metal:5,hide:2,corpsecap:1,flamefruit:1,random_item:1},rules:[{round:"R % 2 == 0",start:!0,spawns:[{monster:{name:"ruined-machine",type:"normal"},marker:"c",count:"C-1"}]}],rooms:[{roomNumber:1,ref:"15-D",initial:!0,rooms:[2],monster:[{name:"robotic-boltshooter",type:"elite"},{name:"robotic-boltshooter",type:"elite"},{name:"robotic-boltshooter",player3:"normal",player4:"normal"},{name:"robotic-boltshooter",player3:"normal",player4:"elite"},{name:"robotic-boltshooter",player4:"normal"}]},{roomNumber:2,ref:"01-B",initial:!0,marker:"b",treasures:[40],monster:[{name:"chaos-lieutenant",type:"boss"}]}]},{index:"16",name:"Derelict Elevator",flowChartGroup:"unfettered",coordinates:{x:1663.75,y:1311.25,width:93,height:65,gridLocation:"F10"},edition:"fh",complexity:3,unlocks:["25","26"],links:["25","26"],rewards:{experience:5,overlaySticker:{name:"Y",location:"C10",coordinates:{x:1736,y:1200,width:499,height:349}},inspiration:1},monsters:["ancient-artillery","ruined-machine"],lootDeckConfig:{money:8,lumber:4,metal:5,rockroot:2,random_item:1},rules:[{round:"R == 2",start:!0,sections:["90.3"]},{round:"R == 4",start:!0,sections:["27.2"]},{round:"R == 6",start:!0,note:"Remove Tile 1-B.<br>Any characters on it suffer trap damage and is placed in the cloest empty hex on tile 15-D.<br>All other figures are removed."},{round:"R == 7",start:!0,sections:["44.2"]},{round:"R == 9",start:!0,note:"Remove Tile 1-D.<br>Any characters on it suffer trap damage and is placed in the cloest empty hex on tile 15-D.<br>All other figures are removed."},{round:"R == 9",start:!0,sections:["15.3"]},{round:"R == 12",start:!0,note:"Remove Tile 1-B.<br>Any characters on it suffer trap damage and is placed in the cloest empty hex on tile 15-D.<br>All other figures are removed."},{round:"R == 12",start:!0,sections:["39.1"]}],rooms:[{roomNumber:1,ref:"13-A",initial:!0,monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player4:"normal"}]}]},{index:"17",name:"Haunted Vault",flowChartGroup:"algox-1",coordinates:{x:1376,y:910.75,width:113,height:74,gridLocation:"H6"},edition:"fh",complexity:3,unlocks:["27"],requires:[["9"]],rewards:{battleGoals:2},monsters:[],objectives:[{name:"Spectral Helper",escort:!0,health:0,initiative:50,actions:[{type:"move",value:4}]}],lootDeckConfig:{money:10,lumber:5,metal:2,corpsecap:2,random_item:1},rooms:[{roomNumber:1,ref:"09-B",initial:!0,objectives:["1:4-C"]}]},{index:"18",name:"Crystal Fields",flowChartGroup:"algox-1",errata:"scenario18",coordinates:{x:1755.5,y:960.75,width:141,height:99,gridLocation:"E7"},edition:"fh",complexity:1,rewards:{morale:1,randomItemBlueprint:1,calendarSection:["122.3-4"]},monsters:["frozen-corpse"],allies:["algox-guard"],lootDeckConfig:{money:6,lumber:3,metal:2,hide:5,corpsecap:1,arrowvine:2,snowthistle:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"curse:1",scenarioEffect:!0}]}],rooms:[{roomNumber:1,ref:"11-A",initial:!0,monster:[{name:"frozen-corpse",type:"elite"},{name:"frozen-corpse",player2:"normal",player3:"normal",player4:"elite"},{name:"frozen-corpse",player3:"normal",player4:"normal"},{name:"frozen-corpse",player3:"normal",player4:"normal"}]}]},{index:"19",name:"Skyhall",flowChartGroup:"algox-2",coordinates:{x:819.125,y:1013.375,width:90,height:82,gridLocation:"N7"},edition:"fh",complexity:3,rewards:{morale:1,randomItemBlueprint:1,calendarSection:["54.3-4"]},monsters:["earth-demon","flame-demon","ice-wraith"],lootDeckConfig:{money:11,lumber:2,metal:2,hide:2,rockroot:1,corpsecap:1,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"wound",scenarioEffect:!0}]},{round:"R == 1",start:!0,spawns:[{monster:{name:"flame-demon",player2:"normal",player3:"normal",player4:"elite"},marker:"a"}]},{round:"R == 2",start:!0,spawns:[{monster:{name:"earth-demon",player2:"normal",player3:"normal",player4:"elite"},marker:"b"}]},{round:"R == 3",start:!0,spawns:[{monster:{name:"ice-wraith",player2:"elite",player3:"elite",player4:"elite"},marker:"c"},{monster:{name:"ice-wraith",player3:"normal",player4:"normal"},marker:"d"}]},{round:"R == 4 || R == 5 || R == 7 || R == 8",start:!0,spawns:[{monster:{name:"flame-demon",player2:"normal",player3:"normal",player4:"elite"},marker:"c"},{monster:{name:"earth-demon",player2:"normal",player3:"elite",player4:"elite"},marker:"d"}]},{round:"R == 6 || R == 9",start:!0,spawns:[{monster:{name:"ice-wraith",player2:"normal",player3:"normal",player4:"normal"},marker:"a"},{monster:{name:"ice-wraith",player3:"elite",player4:"elite"},marker:"a"},{monster:{name:"earth-demon",player2:"normal",player3:"normal",player4:"elite"},marker:"b"}]},{round:"R == 9",sections:["75.2"]}],rooms:[{roomNumber:1,ref:"16-B",initial:!0}]},{index:"20",name:"Temple of Liberation",flowChartGroup:"algox-2",coordinates:{x:1045.25,y:1249.375,width:118,height:81,gridLocation:"L9"},edition:"fh",complexity:3,rewards:{gold:15},monsters:["flaming-bladespinner","ruined-machine","steel-automaton"],objectives:[{name:"Cabinet",health:"Cx(L+2)",initiative:1,marker:"a"},{name:"Cabinet",health:"Cx(L+2)",initiative:1,marker:"b"}],lootDeckConfig:{money:10,lumber:2,metal:5,rockroot:1,arrowvine:2},rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Cabinet"},type:"dead",value:"3"}],spawns:[{monster:{name:"flaming-bladespinner",player2:"normal",player3:"normal",player4:"elite"}}]},{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Cabinet"},type:"dead",value:"2"}],spawns:[{monster:{name:"flaming-bladespinner",player2:"normal",player3:"normal",player4:"elite"}}]},{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Cabinet"},type:"dead",value:"1"}],spawns:[{monster:{name:"flaming-bladespinner",player2:"normal",player3:"normal",player4:"elite"}}]},{round:"true",always:!0,once:!0,sections:["14.3"],figures:[{identifier:{type:"objective",edition:"objective",name:"Cabinet"},type:"dead",value:"0"}]},{round:"R % 2 == 0",start:!0,figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Cabinet",marker:"a"}}],spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},marker:"a",count:"F"}]},{round:"R % 2 == 0",start:!0,figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Cabinet",marker:"b"}}],spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},marker:"b",count:"F"}]}],rooms:[{roomNumber:1,ref:"15-C",initial:!0,monster:[{name:"steel-automaton",player2:"normal",player3:"normal",player4:"elite"},{name:"steel-automaton",player2:"normal",player3:"elite",player4:"elite"}],objectives:[1,1,2,2]}]},{index:"21",name:"Realm of Endless Frost",flowChartGroup:"lurker",coordinates:{x:788.25,y:372.5,width:112,height:74,gridLocation:"N1"},edition:"fh",complexity:3,requirements:[{buildings:["sled"]}],rewards:{prosperity:2},monsters:["frost-demon","living-spirit","snow-imp"],lootDeckConfig:{money:6,lumber:4,metal:3,hide:3,flamefruit:1,snowthistle:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"muddle",scenarioEffect:!0},{identifier:{type:"character",name:".*"},type:"discard",value:"2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,ref:"14-B",initial:!0,monster:[{name:"frost-demon",type:"normal"},{name:"frost-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"frost-demon",player3:"normal",player4:"normal"},{name:"living-spirit",type:"normal"},{name:"living-spirit",player2:"normal",player3:"elite",player4:"elite"},{name:"living-spirit",player4:"normal"}]}]},{index:"22",name:"Ice Floes",flowChartGroup:"lurker",coordinates:{x:1360.75,y:509.75,width:108,height:78,gridLocation:"I2"},edition:"fh",complexity:2,requirements:[{buildings:["boat"]}],rewards:{experience:15,custom:"Lose 1 collective %game.resource.lumber% for each set of five hexes with water tiles on tile 7-G",calendarSection:["62.2-2"]},monsters:["lurker-clawcrusher","lurker-wavethrower"],lootDeckConfig:{money:10,lumber:5,hide:2,arrowvine:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,ref:"14-A",initial:!0,monster:[{name:"lurker-clawcrusher",player2:"normal",player3:"normal",player4:"elite"},{name:"lurker-clawcrusher",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",type:"elite"},{name:"lurker-wavethrower",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-wavethrower",player3:"normal",player4:"normal"},{name:"lurker-wavethrower",player4:"normal"},{name:"lurker-wavethrower",player4:"normal"}]}]},{index:"23",name:"Spire Basement",flowChartGroup:"unfettered",coordinates:{x:1964.5,y:1088.25,width:112,height:90,gridLocation:"B8"},edition:"fh",complexity:1,unlocks:["34"],links:["34"],rewards:{randomItemBlueprint:1},monsters:["living-bones","living-spirit"],lootDeckConfig:{money:8,lumber:4,metal:4,flamefruit:1,corpsecap:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"poison",scenarioEffect:!0}]}],rooms:[{roomNumber:1,ref:"11-F",initial:!0,monster:[{name:"living-bones",type:"normal"},{name:"living-bones",type:"elite"},{name:"living-bones",player3:"normal",player4:"elite"},{name:"living-bones",player4:"normal"},{name:"living-spirit",type:"elite"},{name:"living-spirit",player2:"normal",player3:"elite",player4:"elite"},{name:"living-spirit",player3:"normal",player4:"normal"},{name:"living-spirit",player4:"normal"}]}]},{index:"24",name:"Upper Spire",flowChartGroup:"unfettered",coordinates:{x:1909.25,y:973.5,width:126,height:67,gridLocation:"D6"},edition:"fh",complexity:2,unlocks:["34"],links:["34"],rewards:{randomItemBlueprint:1},monsters:["chaos-demon","living-bones"],lootDeckConfig:{money:8,lumber:2,metal:4,hide:2,axenut:2,flamefruit:1,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"curse:2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,ref:"15-D",initial:!0,monster:[{name:"chaos-demon",type:"elite"},{name:"chaos-demon",player3:"normal",player4:"normal"},{name:"chaos-demon",player4:"normal"},{name:"living-bones",type:"elite"},{name:"living-bones",player2:"normal",player3:"normal",player4:"elite"},{name:"living-bones",player3:"normal",player4:"normal"},{name:"living-bones",player4:"normal"}]}]},{index:"25",name:"Rusted Tunnels",flowChartGroup:"unfettered",coordinates:{x:1770,y:1233.5,width:176,height:130,gridLocation:"E10"},edition:"fh",complexity:2,blocks:["26"],rewards:{collectiveResources:[{type:"lumber",value:2},{type:"metal",value:2}],calendarSection:["128.2-4"]},monsters:["flaming-bladespinner","robotic-boltshooter"],lootDeckConfig:{money:10,lumber:2,metal:4,rockroot:1,arrowvine:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"flaming-bladespinner",player2:"normal",player3:"normal",player4:"elite"},{name:"flaming-bladespinner",player2:"normal",player3:"elite",player4:"elite"},{name:"robotic-boltshooter",type:"elite"},{name:"robotic-boltshooter",player3:"normal",player4:"normal"},{name:"robotic-boltshooter",player4:"normal"}]}]},{index:"26",name:"Quatryl Library",flowChartGroup:"unfettered",coordinates:{x:1761.5,y:1353,width:153,height:94,gridLocation:"E10"},edition:"fh",complexity:2,blocks:["25"],rewards:{experience:10,calendarSection:["169.3-4"]},monsters:["ancient-artillery","ruined-machine","steel-automaton"],lootDeckConfig:{money:10,lumber:2,metal:4,rockroot:1,arrowvine:1},rules:[{round:"R == 7",start:!0,sections:["131.4"]}],rooms:[{roomNumber:1,initial:!0,treasures:[73],monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player4:"normal"},{name:"ruined-machine",player4:"normal"},{name:"steel-automaton",player2:"normal",player3:"normal",player4:"elite"},{name:"steel-automaton",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"27",name:"Depths of Delirium",flowChartGroup:"algox-1",coordinates:{x:1416.75,y:866.75,width:109,height:71,gridLocation:"H6"},edition:"fh",complexity:2,requirements:[{campaignSticker:["shard-seeker"]}],rewards:{experience:10,battleGoals:1,campaignSticker:["coral-shard"]},monsters:["deep-terror","living-bones","ooze"],objectives:[{name:"Altar",health:"L+2",initiative:99,actions:[{type:"custom",value:"When destroyed, the destroying character may return all their taken cards to their hand"}]}],lootDeckConfig:{money:13,lumber:2,metal:2,hide:2,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"deep-terror",player2:"normal",player3:"normal",player4:"elite"},{name:"deep-terror",player2:"normal",player3:"elite",player4:"elite"},{name:"living-bones",type:"normal"},{name:"living-bones",type:"normal"},{name:"living-bones",player3:"normal",player4:"normal"},{name:"living-bones",player4:"normal"},{name:"ooze",type:"elite"},{name:"ooze",player3:"normal",player4:"normal"},{name:"ooze",player4:"normal"}]}]},{index:"28",name:"Summit Meeting",flowChartGroup:"algox-3",errata:"scenario28",coordinates:{x:1264.75,y:1118.25,width:113,height:74,gridLocation:"J8"},edition:"fh",complexity:3,allyDeck:!0,unlocks:["38"],blocks:["29","30"],rewards:{morale:-1},monsters:["algox-archer","algox-guard","algox-icespeaker","algox-snowspeaker"],allied:["algox-archer","algox-icespeaker"],objectives:[{name:"Emissary",escort:!0,health:"2x(L+2)",initiative:99,marker:"a",actions:[{type:"move",value:4}]}],lootDeckConfig:{money:11,lumber:2,hide:3,rockroot:2,arrowvine:1,axenut:1},rules:[{round:"R % 4 == 1",spawns:[{monster:{name:"algox-archer",player2:"normal",player3:"normal",player4:"elite"},marker:"d"},{monster:{name:"algox-guard",player2:"normal",player3:"normal",player4:"elite"},marker:"e"}]},{round:"R % 4 == 3",spawns:[{monster:{name:"algox-archer",player2:"normal",player3:"elite",player4:"elite"},marker:"d"},{monster:{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"},marker:"e"}]},{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"fh",name:"Emissary"},type:"dead",value:"1"}],finish:"lost"}],rooms:[{roomNumber:1,initial:!0,treasures:[48,60],monster:[{name:"algox-archer",type:"normal"},{name:"algox-archer",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-archer",player4:"normal"},{name:"algox-guard",type:"normal"},{name:"algox-guard",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-guard",player3:"normal",player4:"normal"},{name:"algox-icespeaker",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-icespeaker",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-icespeaker",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-icespeaker",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-snowspeaker",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-snowspeaker",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-snowspeaker",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-snowspeaker",player2:"normal",player3:"elite",player4:"elite"}],objectives:[1,1]}]},{index:"29",name:"War of the Spire A",flowChartGroup:"algox-1",coordinates:{x:1679.75,y:1062,width:109,height:99,gridLocation:"F8"},edition:"fh",complexity:2,blocks:["28"],rewards:{events:["winter-outpost:WO-68"],custom:"Remove all %game.action.custom.fh-algox% events from all outpost event decks",morale:3,campaignSticker:["destroyer-of-the-icespeakers"],calendarSection:["46.3-5"]},monsters:["algox-icespeaker","algox-priest","algox-scout"],allies:["algox-archer","algox-guard"],objectives:[{name:"Ice Pillar",health:"[(L+2)xC/2{$math.floor}]"},{name:"Ice Core",health:"[(L+2)xC/2{$math.floor}]"}],lootDeckConfig:{money:12,lumber:2,hide:2,snowthistle:2,arrowvine:1,axenut:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"brittle",scenarioEffect:!0}]},{round:"R == 1",start:!0,once:!0,spawns:[{monster:{name:"algox-archer",type:"normal"},manual:!0},{monster:{name:"algox-guard",type:"normal"},manual:!0}],noteTop:"Spawn 6-C Algox Guards or Algox Archers at any empty starting hex"}],rooms:[{roomNumber:1,initial:!0,treasures:[45],monster:[{name:"algox-icespeaker",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-icespeaker",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-icespeaker",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-icespeaker",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-priest",type:"normal"},{name:"algox-priest",type:"normal"},{name:"algox-scout",type:"normal"},{name:"algox-scout",type:"normal"},{name:"algox-scout",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-scout",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-scout",player2:"normal",player3:"normal"},{name:"algox-scout",player2:"normal"}],objectives:[1,1,1,1,1,1,1,1,1,2,2,2]}]},{index:"30",name:"War of the Spire B",flowChartGroup:"algox-2",coordinates:{x:1801,y:1067.75,width:101,height:86,gridLocation:"E8"},edition:"fh",complexity:2,blocks:["28"],rewards:{events:["winter-outpost:WO-69"],custom:"Remove all %game.action.custom.fh-algox% events from all outpost event decks",morale:3,campaignSticker:["destroyer-of-the-snowspeakers"],calendarSection:["34.2-5"]},monsters:["algox-archer","algox-guard","algox-icespeaker","algox-scout","algox-snowspeaker"],allies:["algox-icespeaker"],lootDeckConfig:{money:12,lumber:2,hide:2,axenut:1,arrowvine:1,snowthistle:2},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"brittle",scenarioEffect:!0}]},{round:"R == 2 || R == 6",start:!0,spawns:[{monster:{name:"algox-scout",player2:"normal",player3:"elite",player4:"elite"},marker:"a"}]},{round:"R == 3 || R == 7",start:!0,spawns:[{monster:{name:"algox-archer",player2:"normal",player3:"normal",player4:"elite"},marker:"b"}]},{round:"R == 4 || R == 8",start:!0,spawns:[{monster:{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"},marker:"a"}]},{round:"R == 5 || R == 9",start:!0,spawns:[{monster:{name:"algox-snowspeaker",player2:"normal",player3:"normal",player4:"elite"},marker:"b"}]},{round:"R == 12",finish:"won"}],rooms:[{roomNumber:1,initial:!0,treasures:[45],monster:[{name:"algox-archer",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-archer",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-guard",type:"elite"},{name:"algox-guard",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-icespeaker",type:"normal"},{name:"algox-icespeaker",type:"normal"},{name:"algox-scout",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-scout",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-snowspeaker",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-snowspeaker",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"31",name:"Crackling Tunnel",flowChartGroup:"algox-2",coordinates:{x:1478.25,y:1334,width:278,height:128,gridLocation:"F10"},edition:"fh",complexity:2,unlocks:["41"],requires:[["20"]],rewards:{gold:10,experience:5},monsters:["flaming-bladespinner","steel-automaton"],lootDeckConfig:{money:11,lumber:2,metal:3,rockroot:2,arrowvine:1,flamefruit:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"flaming-bladespinner",player3:"normal"},{name:"steel-automaton",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"32",name:"Ravens' Roost",flowChartGroup:"lurker",coordinates:{x:512.75,y:561.75,width:105,height:71,gridLocation:"Q3"},edition:"fh",complexity:2,rewards:{itemBlueprints:["69"],campaignSticker:["into-the-forest"]},monsters:["frozen-corpse-scenario-32"],lootDeckConfig:{money:7,lumber:5,hide:3,axenut:2,flamefruit:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"wound",scenarioEffect:!0}]}],rooms:[{roomNumber:1,ref:"05-B",initial:!0,monster:[{name:"frozen-corpse-scenario-32",type:"normal"},{name:"frozen-corpse-scenario-32",type:"normal"},{name:"frozen-corpse-scenario-32",type:"normal"},{name:"frozen-corpse-scenario-32",player3:"normal",player4:"normal"},{name:"frozen-corpse-scenario-32",player4:"normal"},{name:"frozen-corpse-scenario-32",player4:"normal"}]}]},{index:"33",name:"Thawed Wood",flowChartGroup:"lurker",coordinates:{x:312,y:474.5,width:119,height:87,gridLocation:"R2"},edition:"fh",complexity:3,requirements:[{campaignSticker:["into-the-forest"]}],rewards:{items:["244"],custom:"Gain 5 experience for each unrevealed dowsing rune",calendarSection:["135.1-3"]},monsters:["black-imp","shrike-fiend"],lootDeckConfig:{money:8,lumber:5,hide:3,axenut:2,rockroot:1,flamefruit:1},rooms:[{roomNumber:1,ref:"11-C",initial:!0,monster:[{name:"black-imp",type:"normal"},{name:"black-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"black-imp",player3:"normal",player4:"normal"},{name:"shrike-fiend",type:"normal"},{name:"shrike-fiend",type:"elite"},{name:"shrike-fiend",player4:"normal"}]}]},{index:"34",name:"Top of the Spire",flowChartGroup:"unfettered",coordinates:{x:1918,y:913.25,width:98,height:62,gridLocation:"C6"},edition:"fh",complexity:2,rewards:{campaignSticker:["coral-shard"]},monsters:["chaos-spark","lord-of-chaos"],rooms:[{roomNumber:1,initial:!0,monster:[{name:"lord-of-chaos",type:"boss"}]}]},{index:"35",name:"Scrap Pit",flowChartGroup:"unfettered",coordinates:{x:1876.25,y:1396.25,width:116,height:83,gridLocation:"C10"},edition:"fh",complexity:2,unlocks:["43"],rewards:{collectiveResources:[{type:"lumber",value:2},{type:"metal",value:2},{type:"hide",value:2}]},monsters:["living-bones","ruined-machine","spitting-drake"],objectives:[{name:"Crain",escort:!0,health:"[(Cx(L+3)/2){$math.floor}]",initiative:50,marker:"a",actions:[{type:"move",value:2}]}],lootDeckConfig:{money:7,lumber:5,metal:5,hide:2,rockroot:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"muddle",scenarioEffect:!0}]},{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Crain"},type:"dead"}],finish:"lost"}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"living-bones",type:"normal"},{name:"living-bones",type:"normal"},{name:"living-bones",player3:"elite",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"spitting-drake",type:"normal"},{name:"spitting-drake",player4:"normal"}],objectives:[1]}]},{index:"36",name:"Buried Ducts",flowChartGroup:"unfettered",errata:"scenario36-37",coordinates:{x:1960,y:1267.25,width:110,height:71,gridLocation:"C9"},edition:"fh",complexity:1,unlocks:["44"],blocks:["37"],forcedLinks:["44"],rewards:{itemBlueprints:["67"],collectiveResources:[{type:"lumber",value:3},{type:"metal",value:3}]},monsters:["flaming-bladespinner","robotic-boltshooter","ruined-machine"],objectives:[{name:"Door a",health:"[((C-1)/2)x(L+3){$math.floor}]",marker:"a"},{name:"Door b",health:"[((C-1)/2)x(L+3){$math.floor}]",marker:"b"},{name:"Door c",health:"[((C-1)/2)x(L+3){$math.floor}]",marker:"c"},{name:"Door d",health:"[((C-1)/2)x(L+3){$math.floor}]",marker:"d"}],lootDeckConfig:{money:9,lumber:3,metal:5,arrowvine:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"damage",value:"2",scenarioEffect:!0}]},{round:"R % 3 == 2 && R % 4 == 2",start:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Door a"},type:"present"}],spawns:[{monster:{name:"ruined-machine",type:"elite"},marker:"a"},{monster:{name:"ruined-machine",player3:"normal",player4:"normal"},count:"2",marker:"a"}]},{round:"R % 3 == 0 && R % 4 == 3",start:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Door b"},type:"present"}],spawns:[{monster:{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"},marker:"b"}]},{round:"R % 3 == 1 && R % 4 == 0",start:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Door c"},type:"present"}],spawns:[{monster:{name:"flaming-bladespinner",player2:"normal",player3:"normal"},marker:"c"},{monster:{name:"flaming-bladespinner",player4:"normal"},marker:"c",count:"2"}]},{round:"R % 3 == 2 && R % 4 == 1",start:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Door d"},type:"present"}],spawns:[{monster:{name:"ruined-machine",type:"elite"},marker:"d"},{monster:{name:"ruined-machine",player3:"normal",player4:"normal"},count:"2",marker:"d"}]},{round:"R % 3 == 0 && R % 4 == 2",start:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Door a"},type:"present"}],spawns:[{monster:{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"},marker:"a"}]},{round:"R % 3 == 1 && R % 4 == 3",start:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Door b"},type:"present"}],spawns:[{monster:{name:"flaming-bladespinner",player2:"normal",player3:"normal"},marker:"b"},{monster:{name:"flaming-bladespinner",player4:"normal"},marker:"b",count:"2"}]},{round:"R % 3 == 2 && R % 4 == 0",start:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Door c"},type:"present"}],spawns:[{monster:{name:"ruined-machine",type:"elite"},marker:"c"},{monster:{name:"ruined-machine",player3:"normal",player4:"normal"},count:"2",marker:"c"}]},{round:"R % 3 == 0 && R % 4 == 1",start:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Door d"},type:"present"}],spawns:[{monster:{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"},marker:"d"}]},{round:"R % 3 == 1 && R % 4 == 2",start:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Door a"},type:"present"}],spawns:[{monster:{name:"flaming-bladespinner",player2:"normal",player3:"normal"},marker:"a"},{monster:{name:"flaming-bladespinner",player4:"normal"},marker:"a",count:"2"}]},{round:"R % 3 == 2 && R % 4 == 3",start:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Door b"},type:"present"}],spawns:[{monster:{name:"ruined-machine",type:"elite"},marker:"b"},{monster:{name:"ruined-machine",player3:"normal",player4:"normal"},count:"2",marker:"b"}]},{round:"R % 3 == 0 && R % 4 == 0",start:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Door c"},type:"present"}],spawns:[{monster:{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"},marker:"c"}]},{round:"R > 1 && R % 3 == 1 && R % 4 == 1",start:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Door d"},type:"present"}],spawns:[{monster:{name:"flaming-bladespinner",player2:"normal",player3:"normal"},marker:"d"},{monster:{name:"flaming-bladespinner",player4:"normal"},marker:"d",count:"2"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"flaming-bladespinner",player2:"normal",player3:"normal",player4:"elite"},{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",player3:"elite",player4:"elite"}],objectives:[1,2,3,4]}]},{index:"37",name:"The Dead Mile",flowChartGroup:"unfettered",errata:"scenario36-37|scenario37",coordinates:{x:1955.25,y:1407.75,width:104,height:103,gridLocation:"C11"},edition:"fh",complexity:1,unlocks:["44"],blocks:["36"],forcedLinks:["44"],rewards:{itemBlueprints:["67"],collectiveResources:[{type:"lumber",value:3},{type:"hide",value:3}]},monsters:["living-bones","living-spirit"],lootDeckConfig:{money:10,lumber:3,metal:3,rockroot:1,arrowvine:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"living-bones",player2:"normal",player3:"normal",player4:"elite"},{name:"living-bones",player2:"normal",player3:"elite",player4:"elite"},{name:"living-spirit",type:"normal"},{name:"living-spirit",type:"normal"},{name:"living-spirit",player3:"normal",player4:"elite"}]}]},{index:"38",name:"The Way Forward",flowChartGroup:"algox-3",coordinates:{x:1510.25,y:1075.25,width:111,height:69,gridLocation:"G8"},edition:"fh",complexity:3,unlocks:["45","46"],rewards:{experience:10,battleGoals:1,inspiration:1},monsters:["hound","polar-bear"],objectives:[{name:"Emissary",escort:!0,health:"3x(L+2)",initiative:99,marker:"a",actions:[{type:"move",value:2}]},{name:"Emissary",escort:!0,health:"3x(L+2)",initiative:99,marker:"b",actions:[{type:"move",value:2}]}],lootDeckConfig:{money:8,lumber:5,hide:3,axenut:2,arrowvine:1,random_item:1},rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Emissary"},type:"dead",value:"1"}],finish:"lost"}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"hound",type:"normal"},{name:"hound",type:"normal"},{name:"hound",type:"normal"},{name:"hound",type:"normal"},{name:"hound",player3:"elite",player4:"elite"},{name:"hound",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"}],objectives:[1,2]}]},{index:"39",name:"Corrupted Camp",flowChartGroup:"algox-1",coordinates:{x:456.5,y:681.5,width:129,height:94,gridLocation:"Q4"},edition:"fh",complexity:3,unlocks:["47"],requirements:[{campaignSticker:["into-the-forest"]}],rewards:{custom:"Gain 2 additional loot cards each",inspiration:-1},monsters:["algox-guard","algox-scout","black-imp","frozen-corpse"],allies:["algox-guard","algox-scout"],lootDeckConfig:{money:10,lumber:4,metal:2,hide:3,flamefruit:1,snowthistle:2},rooms:[{roomNumber:1,initial:!0,monster:[{name:"algox-guard",type:"normal"},{name:"algox-guard",type:"normal"},{name:"algox-guard",player3:"normal",player4:"normal"},{name:"algox-guard",player4:"normal"},{name:"algox-scout",type:"normal"},{name:"algox-scout",type:"normal"},{name:"algox-scout",player3:"normal",player4:"normal"},{name:"algox-scout",player3:"normal",player4:"normal"},{name:"black-imp",type:"normal"},{name:"black-imp",type:"normal"},{name:"black-imp",type:"elite"},{name:"black-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"black-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"black-imp",player3:"normal",player4:"normal"},{name:"black-imp",player3:"normal",player4:"elite"},{name:"black-imp",player4:"normal"},{name:"frozen-corpse",type:"elite"},{name:"frozen-corpse",player2:"normal",player3:"normal",player4:"elite"},{name:"frozen-corpse",player2:"normal",player3:"normal",player4:"elite"},{name:"frozen-corpse",player2:"normal",player3:"elite",player4:"elite"},{name:"frozen-corpse",player2:"normal",player3:"elite",player4:"elite"},{name:"frozen-corpse",player3:"normal",player4:"elite"}]}]},{index:"40",name:"Relief Effort",flowChartGroup:"algox-2",coordinates:{x:1378,y:1228.75,width:106,height:82,gridLocation:"H9"},edition:"fh",complexity:2,unlocks:["48"],rewards:{custom:"Gain 2 additional loot cards each",inspiration:-1},monsters:["algox-guard","ruined-machine","steel-automaton"],allies:["algox-archer","algox-guard"],lootDeckConfig:{money:10,lumber:3,metal:4,hide:2,flamefruit:1,arrowvine:2},rooms:[{roomNumber:1,initial:!0,monster:[{name:"algox-guard",type:"normal"},{name:"ruined-machine",player3:"normal"},{name:"ruined-machine",player3:"elite"},{name:"steel-automaton",type:"elite"},{name:"steel-automaton",player4:"normal"}]}]},{index:"41",name:"Unfettered Shard",flowChartGroup:"algox-2",coordinates:{x:1678.25,y:1481.75,width:85,height:67,gridLocation:"E12"},edition:"fh",complexity:2,requirements:[{campaignSticker:["shard-seeker"]}],rewards:{gold:15,custom:"Read %data.section:36.7% now",campaignSticker:["coral-shard"],collectiveResources:[{type:"axenut",value:2}]},monsters:["deep-terror","living-doom","living-spirit"],lootDeckConfig:{money:9,lumber:2,metal:2,hide:2,rockroot:2,corpsecap:2,random_item:1},rules:[{round:"R % 2 == 1",spawns:[{monster:{name:"living-spirit",player2:"normal",player3:"normal",player4:"elite"},marker:"a"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"deep-terror",type:"normal"},{name:"deep-terror",type:"normal"},{name:"deep-terror",type:"elite"},{name:"deep-terror",player3:"elite",player4:"elite"},{name:"deep-terror",player4:"elite"},{name:"living-doom",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"42",name:"Sunless Trench",flowChartGroup:"lurker",coordinates:{x:1211.75,y:373,width:207,height:78,gridLocation:"J1"},edition:"fh",complexity:1,requirements:[{buildings:["boat"]}],rewards:{battleGoals:2,events:["boat:B-16"],campaignSticker:["coral-shard"],calendarSection:["114.2-3"]},monsters:["deep-terror","ooze"],lootDeckConfig:{money:12,lumber:2,metal:3,flamefruit:1,snowthistle:1,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:3",scenarioEffect:!0}]},{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:"(?!.*coral|kelp).*"},type:"amAdd",value:"curse:2"}]}],rooms:[{roomNumber:1,ref:"11-D",initial:!0,monster:[{name:"deep-terror",type:"normal"},{name:"deep-terror",type:"elite"},{name:"deep-terror",player2:"normal",player3:"normal",player4:"elite"},{name:"deep-terror",player3:"normal",player4:"normal"},{name:"deep-terror",player3:"normal",player4:"elite"},{name:"ooze",type:"normal"},{name:"ooze",player2:"normal",player3:"elite",player4:"elite"},{name:"ooze",player4:"normal"}]}]},{index:"43",name:"Overrun Barricade",flowChartGroup:"unfettered",coordinates:{x:1918,y:1238.5,width:117,height:54,gridLocation:"C9"},edition:"fh",complexity:3,unlocks:["51"],forcedLinks:["51"],rewards:{experience:10},monsters:["robotic-boltshooter","ruined-machine","steel-automaton"],lootDeckConfig:{money:8,lumber:2,metal:4,rockroot:1,arrowvine:2,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"robotic-boltshooter",player2:"normal",player3:"normal",player4:"elite"},{name:"robotic-boltshooter",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player3:"normal",player4:"elite"},{name:"steel-automaton",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"44",name:"Nerve Center",flowChartGroup:"unfettered",coordinates:{x:2027.25,y:1335,width:107,height:76,gridLocation:"B10"},edition:"fh",complexity:2,forcedLinks:["58","59"],rewards:{gold:5,chooseLocation:["58","59"],itemBlueprints:["73"]},monsters:["flaming-bladespinner"],objectives:[{name:"Metal Cabinet",health:"[Cx(L+3)/2{$math.ceil}]",actions:[{type:"custom",value:"When destroyed, all monsters within %game.action.range%2 suffer trap damage"}]}],lootDeckConfig:{money:8,lumber:2,metal:4,rockroot:1,arrowvine:2,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"flaming-bladespinner",type:"normal"},{name:"flaming-bladespinner",type:"normal"},{name:"flaming-bladespinner",player3:"normal",player4:"elite"}],objectives:[1]}]},{index:"45",name:"Living Glacier",flowChartGroup:"algox-3",coordinates:{x:2004.25,y:616.75,width:123,height:89,gridLocation:"C3"},edition:"fh",complexity:1,unlocks:["52"],requirements:[{buildings:["climbing-gear"]}],rewards:{battleGoals:1,morale:1},monsters:["abael-herder","abael-scout","lightning-eel","piranha-pig"],lootDeckConfig:{money:10,lumber:3,hide:5,rockroot:1,flamefruit:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"abael-herder",player2:"normal",player3:"normal",player4:"elite"},{name:"abael-scout",player2:"normal",player3:"elite",player4:"elite"},{name:"abael-scout",player4:"normal"},{name:"lightning-eel",type:"elite"},{name:"lightning-eel",player2:"normal",player3:"elite",player4:"elite"},{name:"piranha-pig",type:"elite"},{name:"piranha-pig",player2:"normal",player3:"normal",player4:"elite"},{name:"piranha-pig",player3:"normal",player4:"elite"}]}]},{index:"46",name:"Dead Pass",flowChartGroup:"algox-3",coordinates:{x:2025.5,y:1570.75,width:130,height:92,gridLocation:"B12"},edition:"fh",complexity:2,unlocks:["52"],requirements:[{buildings:["sled"]}],rewards:{experience:10,morale:1},monsters:["burrowing-blade","shrike-fiend"],lootDeckConfig:{money:9,lumber:3,metal:3,hide:3,rockroot:1,corpsecap:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",player3:"elite",player4:"elite"},{name:"shrike-fiend",type:"normal"},{name:"shrike-fiend",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"47",name:"Carrion Ridge",flowChartGroup:"algox-1",coordinates:{x:297.75,y:721.75,width:177,height:94,gridLocation:"Q5"},edition:"fh",complexity:1,unlocks:["56"],links:["56"],rewards:{gold:10,collectiveResources:[{type:"lumber",value:2}]},monsters:["algox-icespeaker","shrike-fiend"],lootDeckConfig:{money:7,lumber:5,metal:2,hide:2,rockroot:2,flamefruit:2},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"curse:2",scenarioEffect:!0}]},{round:"R == 6",start:!0,sections:["45.1"]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"algox-icespeaker",type:"elite"},{name:"shrike-fiend",player2:"normal",player3:"normal",player4:"elite"},{name:"shrike-fiend",player2:"normal",player3:"elite",player4:"elite"},{name:"shrike-fiend",player3:"normal",player4:"normal"},{name:"shrike-fiend",player4:"normal"}]}]},{index:"48",name:"Blizzard Island",flowChartGroup:"algox-2",coordinates:{x:1779.5,y:463.75,width:103,height:74,gridLocation:"D2"},edition:"fh",complexity:2,unlocks:["57"],requirements:[{buildings:["boat"]}],links:["57"],rewards:{experience:10,collectiveResources:[{type:"metal",value:2}]},monsters:["abael-scout","wind-demon"],lootDeckConfig:{money:7,lumber:2,metal:2,hide:5,corpsecap:2,snowthistle:2},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"curse:2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"abael-scout",type:"normal"},{name:"abael-scout",type:"elite"},{name:"abael-scout",player4:"normal"},{name:"abael-scout",player4:"elite"},{name:"wind-demon",type:"elite"},{name:"wind-demon",player3:"normal",player4:"elite"}]}]},{index:"49",name:"Beneath Sea and Stone",flowChartGroup:"lurker",coordinates:{x:1492.5,y:530.5,width:130,height:86,gridLocation:"G3"},edition:"fh",complexity:3,unlocks:["53"],requirements:[{buildings:["boat"]}],forcedLinks:["53"],rewards:{experience:5,inspiration:1},monsters:["deep-terror"],objectives:[{name:"Ice Pillar",health:"[(L+1)xC/2{$math.floor}]"},{name:"Large Cave Rock",health:"[(L+1)xC/2{$math.floor}]"},{name:"Stalagmites",health:"[(L+1)xC/2{$math.floor}]"}],lootDeckConfig:{money:13,metal:3,hide:2,snowthistle:2},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:3",scenarioEffect:!0}]},{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:"(?!.*coral|kelp).*"},type:"amAdd",value:"curse:2"}]}],rooms:[{roomNumber:1,ref:"16-B",initial:!0,treasures:[5],monster:[{name:"deep-terror",type:"normal"},{name:"deep-terror",type:"normal"},{name:"deep-terror",player2:"normal",player3:"normal",player4:"elite"},{name:"deep-terror",player2:"normal",player3:"normal",player4:"elite"},{name:"deep-terror",player2:"normal",player3:"elite",player4:"elite"},{name:"deep-terror",player2:"normal",player3:"elite",player4:"elite"},{name:"deep-terror",player3:"normal",player4:"normal"},{name:"deep-terror",player4:"normal"}],objectives:[]}]},{index:"50",name:"Explosive Descent",flowChartGroup:"lurker",coordinates:{x:1531.75,y:371.75,width:104,height:65,gridLocation:"G1"},edition:"fh",complexity:2,unlocks:["54"],requirements:[{buildings:["boat"]}],forcedLinks:["54"],rewards:{inspiration:-2,collectiveResources:[{type:"lumber",value:4},{type:"metal",value:4}]},monsters:["lightning-eel","lurker-clawcrusher","lurker-mindsnipper","lurker-wavethrower"],objectives:[{name:"Pulse Emitter",escort:!0,health:"6+(3xL)"}],lootDeckConfig:{money:13,lumber:2,hide:3,arrowvine:2},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:3",scenarioEffect:!0}]},{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:"(?!.*coral|kelp).*"},type:"amAdd",value:"curse:2"}]},{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Pulse Emitter"},type:"dead"}],finish:"lost"},{round:"R == 2",start:!0,spawns:[{monster:{name:"lurker-wavethrower",type:"normal"},marker:"a"},{monster:{name:"lurker-wavethrower",player3:"normal",player4:"normal"},marker:"b"}]},{round:"R == 3",start:!0,spawns:[{monster:{name:"lurker-wavethrower",player4:"normal"},marker:"c"},{monster:{name:"lurker-wavethrower",type:"normal"},marker:"g"}]},{round:"R == 4",start:!0,spawns:[{monster:{name:"lurker-mindsnipper",player3:"normal"},marker:"c"},{monster:{name:"lurker-mindsnipper",player2:"normal",player3:"normal"},marker:"d"},{monster:{name:"lurker-mindsnipper",player4:"normal"},marker:"d",count:"2"}]},{round:"R == 5",start:!0,spawns:[{monster:{name:"lightning-eel",player2:"normal",player3:"elite",player4:"elite"},marker:"e"},{monster:{name:"lightning-eel",player2:"normal",player3:"normal",player4:"elite"},marker:"g",count:"2"}]},{round:"R == 6",start:!0,spawns:[{monster:{name:"lurker-wavethrower",player3:"normal"},marker:"b"},{monster:{name:"lurker-clawcrusher",player4:"normal"},marker:"b"},{monster:{name:"lurker-clawcrusher",type:"normal"},marker:"f"}]},{round:"R == 7",start:!0,spawns:[{monster:{name:"lurker-wavethrower",player2:"normal",player3:"normal",player4:"elite"},marker:"a"},{monster:{name:"lurker-wavethrower",player2:"normal",player3:"elite",player4:"elite"},marker:"b"}]},{round:"R == 8",start:!0,spawns:[{monster:{name:"lurker-wavethrower",player2:"normal",player3:"elite",player4:"elite"},marker:"a"},{monster:{name:"lurker-mindsnipper",player2:"normal",player3:"normal",player4:"elite"},marker:"g"}]},{round:"R == 9",start:!0,spawns:[{monster:{name:"lurker-clawcrusher",type:"normal"},marker:"c"},{monster:{name:"lurker-clawcrusher",player4:"normal"},marker:"d"},{monster:{name:"lightning-eel",player2:"normal"},marker:"e"},{monster:{name:"lightning-eel",player3:"normal"},marker:"e",count:"3"},{monster:{name:"lightning-eel",player4:"normal"},marker:"e",count:"2"}]},{round:"R == 10",start:!0,spawns:[{monster:{name:"lurker-mindsnipper",player3:"normal",player4:"elite"},marker:"b"},{monster:{name:"lurker-mindsnipper",type:"elite"},marker:"f"}]},{round:"R == 11",start:!0,spawns:[{monster:{name:"lurker-wavethrower",player2:"normal",player3:"elite",player4:"elite"},marker:"e"},{monster:{name:"lurker-clawcrusher",player2:"normal",player3:"normal",player4:"elite"},marker:"g"}]},{round:"R == 12",finish:"won"}],rooms:[{roomNumber:1,initial:!0,monster:[],objectives:[1]}]},{index:"51",name:"Orphan's Halls",flowChartGroup:"unfettered",coordinates:{x:2056.5,y:1223,width:112,height:79,gridLocation:"B9"},edition:"fh",complexity:3,forcedLinks:["58","59"],rewards:{experience:10,chooseLocation:["58","59"],itemBlueprints:["74"]},monsters:["ancient-artillery","steel-automaton"],lootDeckConfig:{money:12,lumber:2,metal:4,flamefruit:1,arrowvine:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"steel-automaton",player2:"normal",player3:"normal",player4:"elite"},{name:"steel-automaton",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"52",name:"Fleeting Permanence",flowChartGroup:"algox-3",coordinates:{x:1501.5,y:999.375,width:131,height:58,gridLocation:"G7"},edition:"fh",complexity:2,unlocks:["55"],requires:[["45","46"]],rewards:{morale:1,inspiration:1},monsters:["frost-demon","snow-imp"],lootDeckConfig:{money:6,lumber:2,metal:2,hide:5,corpsecap:2,snowthistle:2,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"frost-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"frost-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"frost-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"53",name:"Underwater Throne",flowChartGroup:"lurker",coordinates:{x:1671.25,y:476.25,width:97,height:75,gridLocation:"E2"},edition:"fh",complexity:2,unlocks:["60"],requirements:[{buildings:["boat"]}],rewards:{battleGoals:2,campaignSticker:["coral-shard"]},monsters:["lurker-clawcrusher","lurker-mindsnipper","lurker-soldier","seeker-of-the-abyss"],lootDeckConfig:{money:8,lumber:2,metal:2,hide:3,arrowvine:2,axenut:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:3",scenarioEffect:!0}]},{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:"(?!.*coral|kelp).*"},type:"amAdd",value:"curse:2"}]},{round:"R % 2 == 0",start:!0,spawns:[{monster:{name:"lurker-soldier",player2:"normal",player3:"normal",player4:"elite"},marker:"a"},{monster:{name:"lurker-mindsnipper",player2:"normal",player3:"elite",player4:"elite"},marker:"b"}]}],rooms:[{roomNumber:1,ref:"16-B",initial:!0,monster:[{name:"lurker-clawcrusher",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-mindsnipper",player2:"normal",player3:"normal",player4:"elite"},{name:"seeker-of-the-abyss",type:"boss"}]},{roomNumber:2,ref:"07-A",initial:!0,treasures:[63],monster:[{name:"lurker-soldier",player2:"normal",player3:"normal",player4:"elite"},{name:"lurker-soldier",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"54",name:"Among the Wreckage",flowChartGroup:"lurker",coordinates:{x:1666.5,y:377.75,width:132,height:83,gridLocation:"F1"},edition:"fh",complexity:2,unlocks:["60"],requirements:[{buildings:["boat"]}],rewards:{battleGoals:2,campaignSticker:["coral-shard"]},monsters:["lightning-eel","lurker-clawcrusher","lurker-mindsnipper","lurker-soldier","lurker-wavethrower"],objectives:[{name:"Ice Pillar",health:"[(L+1)xC/2{$math.floor}]",tags:["objective"],actions:[{type:"custom",value:"When destroyed, reveal one numbered token and spawn the indicated monster",small:!0}]},{name:"Large Cave Rock",health:"[(L+1)xC/2{$math.floor}]",tags:["objective"],actions:[{type:"custom",value:"When destroyed, reveal one numbered token and spawn the indicated monster",small:!0}]}],lootDeckConfig:{money:8,lumber:2,metal:2,hide:3,axenut:2,arrowvine:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:3",scenarioEffect:!0}]},{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:"(?!.*coral|kelp).*"},type:"amAdd",value:"curse:2"}]},{round:"true",always:!0,once:!0,sections:["167.1"],figures:[{identifier:{type:"objective",edition:"objective",name:".*",tags:["objective"]},type:"killed",value:"5"}]},{round:"true",always:!0,once:!0,sections:["13.3"],figures:[{identifier:{type:"objective",edition:"objective",name:".*",tags:["objective"]},type:"killed",value:"10"}]}],rooms:[{roomNumber:1,initial:!0,monster:[],objectives:[1,1,1,1,2,2,2]}]},{index:"55",name:"Change of Heart",flowChartGroup:"algox-3",coordinates:{x:1004,y:1009.5,width:124,height:97,gridLocation:"M8"},edition:"fh",complexity:2,rewards:{prosperity:2,events:["winter-outpost:WO-66","winter-outpost:WO-67"],custom:"Remove all %game.action.custom.fh-algox% events from all outpost event decks",morale:2,campaignSticker:["friend-of-the-frostspeakers"],chooseUnlockCharacter:["fist","snowflake"],townGuardAm:["fh-tg-add-plus50-algox"]},monsters:["algox-archer","algox-guard","algox-priest"],lootDeckConfig:{money:3,lumber:2,metal:4,hide:2,rockroot:2,corpsecap:1,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"algox-archer",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-guard",type:"normal"},{name:"algox-guard",type:"normal"},{name:"algox-guard",player3:"normal",player4:"elite"},{name:"algox-priest",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"56",name:"Call of the Harbinger",flowChartGroup:"algox-1",coordinates:{x:321.25,y:639.75,width:125,height:67,gridLocation:"R4"},edition:"fh",complexity:3,rewards:{events:["summer-outpost:SO-51"],morale:1,inspiration:1,campaignSticker:["friend-of-the-icespeakers"],unlockCharacter:"fist",townGuardAm:["fh-tg-add-plus50"]},monsters:["black-imp","harbinger-of-shadow-2","harrower-infester"],objectives:[{name:"Altar 1",health:"(L+1)xC"}],lootDeckConfig:{money:6,lumber:5,metal:2,hide:2,rockroot:2,flamefruit:2},rules:[{round:"true",always:!0,once:!0,sections:["3.2"],figures:[{identifier:{type:"objective",edition:"objective",name:"Altar 1"},type:"dead"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"black-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"black-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"harbinger-of-shadow-2",type:"boss",marker:"2"},{name:"harrower-infester",player2:"normal",player3:"normal",player4:"elite"}],objectives:[1]}]},{index:"57",name:"Sanctuary of Snow",flowChartGroup:"algox-2",coordinates:{x:1816,y:377.75,width:101,height:74,gridLocation:"D1"},edition:"fh",complexity:3,requirements:[{buildings:["boat"]}],rewards:{events:["winter-outpost:WO-68"],morale:1,inspiration:1,campaignSticker:["friend-of-the-snowspeakers"],unlockCharacter:"snowflake",townGuardAm:["fh-tg-add-plus50"]},monsters:["render","wind-demon"],objectives:[{name:"Denpang",escort:!0,initiative:40,marker:"a",actions:[{type:"move",value:4}]}],rules:[{round:"R == 2",start:!0,spawns:[{monster:{name:"wind-demon",player2:"normal",player3:"elite",player4:"elite"},marker:"b"},{monster:{name:"wind-demon",player2:"normal",player3:"normal",player4:"elite"},marker:"c"}]},{round:"R == 4",start:!0,spawns:[{monster:{name:"wind-demon",player2:"normal",player3:"elite",player4:"elite"},marker:"b"},{monster:{name:"wind-demon",player2:"normal",player3:"normal",player4:"elite"},marker:"c"}]},{round:"R == 10",start:!0,spawns:[{monster:{name:"wind-demon",player2:"normal",player3:"elite",player4:"elite"},marker:"b"},{monster:{name:"wind-demon",player2:"normal",player3:"normal",player4:"elite"},marker:"c"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[53],monster:[{name:"render",type:"boss"}],objectives:["1:C < 3 ? 1 : 0"]}]},{index:"58",name:"Orphan's Core",flowChartGroup:"unfettered",coordinates:{x:2128.25,y:1297.25,width:88,height:64,gridLocation:"A10"},edition:"fh",complexity:3,blocks:["59"],rewards:{items:["246"],events:["winter-outpost:WO-64","winter-outpost:WO-65"],custom:"Remove all %game.action.custom.fh-unfettered% events from all outpost event decks",morale:1,collectiveResources:[{type:"lumber",value:3},{type:"metal",value:3},{type:"hide",value:3}],campaignSticker:["unfettered-deactivated"],unlockCharacter:"prism",townGuardAm:["fh-tg-add-plus50-unfettered"]},monsters:["flaming-bladespinner","orphan","steel-automaton"],objectives:[{name:"Glowing Orb",health:"(L+3)x2xC"}],lootDeckConfig:{money:6,lumber:2,metal:4,corpsecap:1,flamefruit:1,random_item:1},rules:[{round:"true",always:!0,once:!0,sections:["61.1"],figures:[{identifier:{type:"objective",edition:"objective",name:"Glowing Orb"},type:"dead"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"flaming-bladespinner",player2:"normal",player3:"elite",player4:"elite"},{name:"flaming-bladespinner",player2:"normal",player3:"elite",player4:"elite"},{name:"orphan",type:"boss"},{name:"steel-automaton",type:"normal"},{name:"steel-automaton",player4:"normal"}],objectives:[1]}]},{index:"59",name:"Automaton Uprising",flowChartGroup:"unfettered",coordinates:{x:2048.75,y:1400.75,width:125,height:104,gridLocation:"A11"},edition:"fh",complexity:2,blocks:["58"],rewards:{prosperity:2,items:["246"],events:["summer-outpost:SO-49","winter-outpost:WO-63"],custom:"Remove all %game.action.custom.fh-unfettered% events from all outpost event decks",morale:2,campaignSticker:["unfettered-allies"],unlockCharacter:"prism",townGuardAm:["fh-tg-add-plus50-unfettered"]},monsters:["flaming-bladespinner","robotic-boltshooter","ruined-machine"],objectives:[{name:"Orphan",escort:!0,health:"(L+C)x2",initiative:1,marker:"a",actions:[{type:"move",value:3}]}],lootDeckConfig:{money:11,metal:4,rockroot:1,snowthistle:2,axenut:1,random_item:1},rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Orphan"},type:"dead"}],finish:"lost"},{round:"R == 3",start:!0,spawns:[{monster:{name:"flaming-bladespinner",player2:"normal",player3:"normal",player4:"elite"},marker:"b"},{monster:{name:"flaming-bladespinner",player2:"normal",player3:"elite",player4:"elite"},marker:"d"}]},{round:"R == 4",start:!0,spawns:[{monster:{name:"robotic-boltshooter",player2:"normal",player3:"normal",player4:"elite"},marker:"c"},{monster:{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"},marker:"e"}]},{round:"R == 5",start:!0,note:"at any starting hex",spawns:[{monster:{name:"ruined-machine",player2:"normal",player4:"elite"},count:"2"},{monster:{name:"ruined-machine",player3:"normal"}},{monster:{name:"ruined-machine",player3:"elite"}}]},{round:"R == 7",start:!0,note:"at any starting hex",spawns:[{monster:{name:"ruined-machine",player2:"normal",player4:"elite"},count:"2"},{monster:{name:"ruined-machine",player3:"normal"}},{monster:{name:"ruined-machine",player3:"elite"}}]},{round:"R == 9",start:!0,spawns:[{monster:{name:"flaming-bladespinner",player2:"normal",player3:"normal",player4:"elite"},marker:"b"},{monster:{name:"flaming-bladespinner",player2:"normal",player3:"elite",player4:"elite"},marker:"d"}]},{round:"R == 10",start:!0,spawns:[{monster:{name:"robotic-boltshooter",player2:"normal",player3:"normal",player4:"elite"},marker:"c"},{monster:{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"},marker:"e"}]},{round:"R == 11",start:!0,note:"at any starting hex",spawns:[{monster:{name:"flaming-bladespinner",player2:"normal",player4:"elite"},count:"2"},{monster:{name:"flaming-bladespinner",player3:"normal"}},{monster:{name:"flaming-bladespinner",player3:"elite"}}]},{round:"R > 11",start:!0,spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},marker:"b"},{monster:{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},marker:"c"},{monster:{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},marker:"d"},{monster:{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},marker:"e"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"robotic-boltshooter",player2:"normal",player3:"normal",player4:"elite"},{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"}],objectives:[1]}]},{index:"60",name:"Uniting the Crown",flowChartGroup:"lurker",errata:"scenario60",coordinates:{x:1559,y:428.5,width:127,height:95,gridLocation:"G2"},edition:"fh",complexity:2,requirements:[{buildings:["boat"],campaignSticker:["coral-shard:6"]}],rewards:{experience:30,prosperity:1,items:["224"],events:["summer-outpost:SO-48","boat:B-17"],custom:"Remove all %game.action.custom.fh-lurkers% events from all outpost event decks",morale:2,campaignSticker:["crown-united"],chooseUnlockCharacter:["coral","kelp"],townGuardAm:["fh-tg-add-plus50-lurkers"]},monsters:["fracture-of-the-deep","lightning-eel","lurker-clawcrusher","lurker-mindsnipper","lurker-wavethrower"],lootDeckConfig:{money:8,arrowvine:1,axenut:1,corpsecap:1,rockroot:1,flamefruit:1,snowthistle:1,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:3",scenarioEffect:!0}]},{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:"(?!.*coral|kelp).*"},type:"amAdd",value:"curse:2"}]},{round:"true",always:!0,figures:[{identifier:{type:"monster",name:".*",marker:"element:fire"},type:"killed",value:1}],elements:[{type:"fire",state:"always"}]},{round:"true",always:!0,figures:[{identifier:{type:"monster",name:".*",marker:"element:ice"},type:"killed",value:1}],elements:[{type:"ice",state:"always"}]},{round:"true",always:!0,figures:[{identifier:{type:"monster",name:".*",marker:"element:air"},type:"killed",value:1}],elements:[{type:"air",state:"always"}]},{round:"true",always:!0,figures:[{identifier:{type:"monster",name:".*",marker:"element:earth"},type:"killed",value:1}],elements:[{type:"earth",state:"always"}]},{round:"true",always:!0,figures:[{identifier:{type:"monster",name:".*",marker:"element:light"},type:"killed",value:1}],elements:[{type:"light",state:"always"}]},{round:"true",always:!0,figures:[{identifier:{type:"monster",name:".*",marker:"element:dark"},type:"killed",value:1}],elements:[{type:"dark",state:"always"}]},{round:"true",always:!0,alwaysApply:!0,statEffects:[{identifier:{type:"monster",edition:"fh",name:".*lurker.*"},statEffect:{attack:1,name:"fractured-lieutenant"},note:"%data.scenario.rules.fh.60%"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"fracture-of-the-deep",type:"boss"},{name:"lightning-eel",player2:"normal",player3:"normal",player4:"elite"},{name:"lightning-eel",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-clawcrusher",player2:"normal",player3:"normal",player4:"elite",marker:"element:dark"},{name:"lurker-clawcrusher",player2:"normal",player3:"elite",player4:"elite",marker:"element:light"},{name:"lurker-mindsnipper",player2:"normal",player3:"normal",player4:"elite",marker:"element:ice"},{name:"lurker-mindsnipper",player2:"normal",player3:"elite",player4:"elite",marker:"element:earth"},{name:"lurker-wavethrower",player2:"normal",player3:"normal",player4:"elite",marker:"element:air"},{name:"lurker-wavethrower",player2:"normal",player3:"elite",player4:"elite",marker:"element:fire"}]}]},{index:"61",name:"Life and Death",flowChartGroup:"puzzle-book",coordinates:{x:1363,y:1451.25,width:107,height:78,gridLocation:"I11"},edition:"fh",complexity:2,rewards:{unlockCharacter:"shards",calendarSection:["140.3-1"]},monsters:["deep-terror","harrower-infester"],objectives:[{name:"Moonshard",escort:!0,allyDeck:!0,health:"(L+(2xC))x2",initiative:50,marker:"a",actions:[{type:"move",value:3},{type:"attack",value:"L+1",subActions:[{type:"custom",small:!0,value:"Attacks are unaffected by %game.action.retaliate%"}]}]}],lootDeckConfig:{money:5,lumber:4,metal:4,hide:4,rockroot:2,corpsecap:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0},{identifier:{type:"character",name:".*"},type:"gainCondition",value:"muddle",scenarioEffect:!0}]},{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Moonshard"},type:"dead"}],finish:"lost"}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"deep-terror",player2:"normal",player3:"normal",player4:"elite"},{name:"deep-terror",player2:"normal",player3:"elite",player4:"elite"},{name:"harrower-infester",type:"elite"},{name:"harrower-infester",player3:"normal",player4:"normal"},{name:"harrower-infester",player4:"normal"}],objectives:[1]}]},{index:"62",name:"The Unfettered Seal",flowChartGroup:"puzzle-book",coordinates:{x:2108.5,y:1174.5,width:117,height:109,gridLocation:"B8"},edition:"fh",complexity:3,unlocks:["63"],rewards:{prosperity:1},monsters:["black-imp","chaos-demon","harrower-infester"],objectives:[{name:"Crain",escort:!0,health:"(L+C)x2+2",initiative:99,marker:"a",actions:[{type:"move",value:3,subActions:[{type:"jump",small:!0}]}]}],lootDeckConfig:{money:5,lumber:4,metal:4,hide:4,snowthistle:2,arrowvine:2,random_item:1},rooms:[{roomNumber:1,initial:!0,treasures:[21],monster:[{name:"chaos-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"harrower-infester",player2:"normal",player3:"elite",player4:"elite"}],objectives:[1]}]},{index:"63",name:"The Savvas Seal",flowChartGroup:"puzzle-book",coordinates:{x:1496.5,y:1536,width:112,height:81,gridLocation:"G12"},edition:"fh",complexity:3,unlocks:["64"],forcedLinks:["64"],rewards:{prosperity:2},monsters:["earth-demon","flame-demon","frost-demon","savvas-icestorm","savvas-lavaflow","wind-demon"],objectives:[{name:"Crain",escort:!0,health:"(L+C)x2+2",initiative:99,marker:"a"}],lootDeckConfig:{money:5,lumber:4,metal:4,hide:4,rockroot:2,corpsecap:2,random_item:1},rules:[{round:"R == 1 || R == 3",start:!0,spawns:[{monster:{name:"savvas-icestorm",player2:"normal",player3:"elite",player4:"elite"},marker:"b"}]},{round:"R == 2 || R == 4",start:!0,spawns:[{monster:{name:"savvas-lavaflow",player2:"normal",player3:"normal",player4:"elite"},marker:"c"}]},{round:"R == 4",sections:["7.1"]},{round:"R == 12",finish:"won"},{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Crain"},type:"dead"}],finish:"lost"}],rooms:[{roomNumber:1,initial:!0,treasures:[72],monster:[],objectives:[1]}]},{index:"64",name:"The Frosthaven Seal",flowChartGroup:"puzzle-book",coordinates:{x:872,y:2356.25,width:193,height:179,gridLocation:"FR"},edition:"fh",complexity:3,rewards:{prosperity:3,battleGoals:3,overlayCampaignSticker:{name:"42-temple",location:"%game.scenarioNumber:64%",coordinates:{x:860.75,y:2334.75,width:225,height:212}},hints:{overlayCampaignSticker:"Open the scenario flowchart window to the right of The Frozen Seal (%data.scenarioNumber:64%) and apply the sticker over the completed scenario"},morale:3},monsters:["burrowing-blade","guard-captain","living-doom","living-spirit","shrike-fiend"],allies:["guard-captain"],objectives:[{name:"Tree",escort:!0,health:"(L+C)x3",initiative:1},{name:"Militia",escort:!0,allyDeck:!0,health:"[(L/2)+2{$math.ceil}]",initiative:51,actions:[{type:"move",value:3},{type:"attack",value:"[(L/4)+1{$math.floor}]"}],tags:["militia"]}],lootDeckConfig:{money:5,lumber:4,metal:4,hide:4,axenut:2,flamefruit:2,random_item:1},rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Tree"},type:"dead"}],finish:"lost"},{round:"true",objectiveSpawns:[{objective:{index:2,name:"Militia"},count:"2",manual:!0,manualMin:0,manualMax:2}],noteTop:"Place up to 2 new Militia members in any empty %game.mapMarker.a%, %game.mapMarker.b%, %game.mapMarker.c% or %game.mapMarker.d%"},{round:"true",figures:[{identifier:{type:"objective",edition:"escort",name:"Militia"},type:"present",value:"1"}],objectiveSpawns:[{objective:{index:2,name:"Militia"},manual:!0,manualMin:0,manualMax:1}],noteTop:"Place up to 1 new Militia member in any empty %game.mapMarker.a%, %game.mapMarker.b%, %game.mapMarker.c% or %game.mapMarker.d%"},{round:"true",always:"true",figures:[{identifier:{type:"objective",edition:"escort",name:"Militia"},type:"present",value:"11"}],disableRules:[{edition:"fh",scenario:"64",index:1,section:!1}]},{round:"true",always:"true",figures:[{identifier:{type:"objective",edition:"escort",name:"Militia"},type:"present",value:"12"}],disableRules:[{edition:"fh",scenario:"64",index:1,section:!1},{edition:"fh",scenario:"64",index:2,section:!1}]},{round:"R == 1",start:!0,spawns:[{monster:{name:"living-doom",player4:"normal"},marker:"2"},{monster:{name:"living-doom",player3:"normal",player4:"normal"},marker:"7"},{monster:{name:"living-doom",player2:"normal",player3:"normal",player4:"normal"},marker:"11"},{monster:{name:"living-doom",player2:"normal",player3:"normal",player4:"normal"},marker:"13"}]},{round:"R == 2",start:!0,spawns:[{monster:{name:"shrike-fiend",player2:"normal",player3:"elite",player4:"elite"},marker:"2"},{monster:{name:"shrike-fiend",player2:"normal",player3:"normal",player4:"elite"},marker:"7"}]},{round:"R == 3",start:!0,spawns:[{monster:{name:"burrowing-blade",player2:"normal",player4:"elite"},marker:"13",count:"2"},{monster:{name:"burrowing-blade",player3:"normal"},marker:"13"},{monster:{name:"burrowing-blade",player3:"elite"},marker:"13"}]},{round:"R == 4",start:!0,spawns:[{monster:{name:"living-spirit",player2:"normal"},marker:"11",count:"3"},{monster:{name:"living-spirit",player3:"normal"},marker:"11",count:"4"},{monster:{name:"living-spirit",player4:"normal"},marker:"11",count:"5"}]},{round:"R == 5",start:!0,spawns:[{monster:{name:"shrike-fiend",type:"normal"},marker:"2"},{monster:{name:"shrike-fiend",type:"normal"},marker:"7"},{monster:{name:"shrike-fiend",player4:"normal"},marker:"11"},{monster:{name:"shrike-fiend",player3:"normal",player4:"normal"},marker:"13"}]},{round:"R == 6",start:!0,spawns:[{monster:{name:"living-doom",player2:"normal"},marker:"2"},{monster:{name:"living-doom",type:"elite"},marker:"11"},{monster:{name:"living-doom",player3:"normal",player4:"elite"},marker:"13"}]},{round:"R == 7",start:!0,spawns:[{monster:{name:"burrowing-blade",type:"normal"},marker:"2"},{monster:{name:"burrowing-blade",type:"normal"},marker:"7"},{monster:{name:"burrowing-blade",player4:"normal"},marker:"11"},{monster:{name:"burrowing-blade",player3:"normal",player4:"normal"},marker:"13"}]},{round:"R == 8",start:!0,spawns:[{monster:{name:"shrike-fiend",type:"normal"},marker:"7"},{monster:{name:"shrike-fiend",player2:"normal",player3:"normal",player4:"elite"},marker:"11"},{monster:{name:"shrike-fiend",player2:"normal",player3:"elite",player4:"elite"},marker:"13"}]},{round:"R == 9",start:!0,spawns:[{monster:{name:"living-spirit",player2:"normal",player3:"elite",player4:"elite"},marker:"2"},{monster:{name:"living-spirit",player2:"normal",player3:"normal",player4:"elite"},marker:"7"},{monster:{name:"living-spirit",player2:"normal",player3:"elite",player4:"elite"},marker:"11"},{monster:{name:"living-spirit",type:"elite"},marker:"13"}]},{round:"R == 10",start:!0,spawns:[{monster:{name:"shrike-fiend",type:"elite"},marker:"2"},{monster:{name:"shrike-fiend",player2:"normal",player3:"elite",player4:"elite"},marker:"7"},{monster:{name:"shrike-fiend",player2:"normal",player3:"elite",player4:"elite"},marker:"11"},{monster:{name:"shrike-fiend",player2:"normal",player3:"normal",player4:"elite"},marker:"13"}]},{round:"R == 10",sections:["72.1"]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"guard-captain",type:"elite"},{name:"guard-captain",type:"elite"},{name:"guard-captain",type:"elite"},{name:"guard-captain",type:"elite"}],objectives:[1,2,2,2,2,"2:C>2","2:C>2","2:C>3","2:C>3"]}]},{index:"65",name:"A Strong Foundation",flowChartGroup:"personal-quests",coordinates:{x:996.5,y:730,width:91,height:57,gridLocation:"L4"},edition:"fh",complexity:1,rewards:{collectiveResources:[{type:"lumber",value:2},{type:"metal",value:2}],calendarSection:["95.4-6"]},monsters:["frozen-corpse","living-bones","snow-imp"],lootDeckConfig:{money:8,lumber:2,metal:2,hide:4,snowthistle:2,arrowvine:2},rules:[{round:"true",always:!0,alwaysApply:!0,statEffects:[{identifier:{type:"monster",edition:"fh",name:".*"},statEffect:{actions:[{type:"push",value:"[(L+1)/4{$math.ceil}]"}]},note:"%data.scenario.rules.fh.65%"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"frozen-corpse",type:"elite"},{name:"frozen-corpse",player3:"normal",player4:"normal"},{name:"frozen-corpse",player4:"normal"},{name:"living-bones",type:"normal"},{name:"living-bones",player3:"normal",player4:"normal"},{name:"snow-imp",type:"normal"},{name:"snow-imp",type:"normal"},{name:"snow-imp",player4:"elite"}]}]},{index:"66",name:"Elemental Cores",flowChartGroup:"personal-quests",coordinates:{x:915,y:668.25,width:120,height:105,gridLocation:"L4"},edition:"fh",complexity:2,rewards:{items:["212"],custom:"Note the corresponding elements of the four doors that were opened",calendarSection:["29.3-6"]},monsters:[],lootDeckConfig:{money:12,lumber:2,metal:2,hide:2,rockroot:1,arrowvine:1,axenut:1,flamefruit:1,snowthistle:1,corpsecap:1},rooms:[{roomNumber:1,initial:!0,monster:[]}]},{index:"67",name:"Core Attunement",flowChartGroup:"personal-quests",coordinates:{x:1046,y:676,width:124,height:116,gridLocation:"K4"},edition:"fh",complexity:2,unlocks:["68"],forcedLinks:["68"],rewards:{prosperity:1,morale:1},monsters:["chaos-demon","earth-demon","flame-demon","frost-demon","night-demon","sun-demon","wind-demon"],objectives:[{name:"Elemental Core",escort:!0,health:"4x(L+1)",initiative:1,marker:"a"}],lootDeckConfig:{money:8,lumber:3,metal:3,hide:3,random_item:1},rules:[{round:"C < 3 && (R == 2 || R == 7)",start:!0,note:"Spawn one normal demon at %game.mapMarker.b%"},{round:"C > 2 && (R == 2 || R == 7)",start:!0,note:"Spawn one elite demon at %game.mapMarker.b%"},{round:"C < 4 && (R == 3 || R == 8)",start:!0,note:"Spawn one normal demon at %game.mapMarker.c%"},{round:"C > 3 && (R == 3 || R == 8)",start:!0,note:"Spawn one elite demon at %game.mapMarker.c%"},{round:"C < 3 && (R == 4 || R == 9)",start:!0,note:"Spawn one normal demon at %game.mapMarker.d%"},{round:"C > 2 && (R == 4 || R == 9)",start:!0,note:"Spawn one elite demon at %game.mapMarker.d%"},{round:"C < 4 && (R == 5 || R == 10)",start:!0,note:"Spawn one normal demon at %game.mapMarker.e%"},{round:"C > 3 && (R == 5 || R == 10)",start:!0,note:"Spawn one elite demon at %game.mapMarker.e%"},{round:"R == 6 || R == 11",start:!0,spawns:[{monster:{name:"chaos-demon",player2:"normal",player3:"elite",player4:"normal"},marker:"f",count:2},{monster:{name:"chaos-demon",player4:"elite"},marker:"f",count:2}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"chaos-demon",type:"normal"},{name:"chaos-demon",type:"elite"},{name:"chaos-demon",player3:"normal",player4:"normal"},{name:"chaos-demon",player3:"normal",player4:"normal"},{name:"chaos-demon",player4:"elite"}],objectives:[1,1,1,1]}]},{index:"68",name:"The Face of Torment",flowChartGroup:"personal-quests",coordinates:{x:1042,y:538,width:106,height:124,gridLocation:"L3"},edition:"fh",complexity:2,rewards:{custom:'"Aesther Outpost" quest complete',calendarSection:["133.1-2"]},monsters:["chaos-demon","earth-demon","flame-demon","frost-demon","night-demon","sun-demon","tormentor","wind-demon"],lootDeckConfig:{lumber:5,metal:5,hide:5,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0},{identifier:{type:"character",name:".*"},type:"gainCondition",value:"muddle",scenarioEffect:!0}]},{round:"C < 3 && R > 2 && R % 6 == 3",start:!0,note:"Spawn one normal demon at %game.mapMarker.a%"},{round:"C > 2 && R > 2 && R % 6 == 3",start:!0,note:"Spawn one elite demon at %game.mapMarker.a%"},{round:"C < 4 && R > 2 && R % 6 == 4",start:!0,note:"Spawn one normal demon at %game.mapMarker.b%"},{round:"C > 3 && R > 2 && R % 6 == 4",start:!0,note:"Spawn one elite demon at %game.mapMarker.b%"},{round:"R > 2 && R % 6 == 5",start:!0,spawns:[{monster:{name:"chaos-demon",player2:"normal",player3:"elite",player4:"elite"},marker:"c"}]},{round:"C < 4 && R > 2 && R % 6 == 0",start:!0,note:"Spawn one normal demon at %game.mapMarker.a%"},{round:"C > 3 && R > 2 && R % 6 == 0",start:!0,note:"Spawn one elite demon at %game.mapMarker.a%"},{round:"C < 3 && R > 2 && R % 6 == 1",start:!0,note:"Spawn one normal demon at %game.mapMarker.b%"},{round:"C > 2 && R > 2 && R % 6 == 1",start:!0,note:"Spawn one elite demon at %game.mapMarker.b%"},{round:"R > 2 && R % 6 == 2",start:!0,spawns:[{monster:{name:"chaos-demon",player2:"normal",player3:"normal",player4:"elite"},marker:"c"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[59],monster:[{name:"chaos-demon",type:"normal"},{name:"chaos-demon",player3:"normal",player4:"normal"},{name:"chaos-demon",player4:"normal"},{name:"tormentor",type:"boss"}]}]},{index:"69",name:"Sacred Soil",flowChartGroup:"personal-quests",coordinates:{x:558.25,y:476.75,width:140,height:97,gridLocation:"P2"},edition:"fh",complexity:2,requirements:[{campaignSticker:["into-the-forest"]}],rewards:{collectiveResources:[{type:"arrowvine",value:1},{type:"axenut",value:1},{type:"flamefruit",value:1}],calendarSection:["15.4-3"]},monsters:["earth-demon","forest-imp","rending-drake"],lootDeckConfig:{money:8,lumber:5,hide:4,axenut:2,flamefruit:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"earth-demon",type:"elite"},{name:"forest-imp",type:"normal"},{name:"forest-imp",type:"elite"},{name:"forest-imp",player3:"normal",player4:"elite"},{name:"forest-imp",player3:"normal",player4:"elite"},{name:"forest-imp",player3:"normal",player4:"elite"},{name:"rending-drake",player2:"normal",player3:"elite",player4:"elite"},{name:"rending-drake",player4:"normal"}]}]},{index:"70",name:"The True Oak",flowChartGroup:"personal-quests",errata:"scenario70",coordinates:{x:446.75,y:445,width:106,height:88,gridLocation:"Q2"},edition:"fh",complexity:1,rewards:{prosperity:1,custom:'"The True Oak" quest complete'},monsters:["city-guard","hound"],objectives:[{name:"The Great Oak",escort:!0,health:"2xCx(L+3)",initiative:1}],lootDeckConfig:{money:7,lumber:5,hide:3,axenut:2,flamefruit:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:1",scenarioEffect:!0}]},{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"The Great Oak"},type:"dead"}],finish:"lost"}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"city-guard",type:"elite"},{name:"city-guard",player3:"normal",player4:"elite"},{name:"hound",player2:"normal",player3:"normal",player4:"elite"},{name:"hound",player2:"normal",player3:"elite",player4:"elite"},{name:"hound",player2:"normal",player3:"elite",player4:"elite"}],objectives:[1]}]},{index:"71",name:"Invasion of the Dock",flowChartGroup:"personal-quests",coordinates:{x:1958.5,y:2431,width:132,height:116,gridLocation:"FR"},edition:"fh",complexity:3,allyDeck:!0,rewards:{experience:10,custom:"Damage any one even building between 71 and 89",calendarSection:["149.5-5"]},monsters:["abael-scout","piranha-pig"],allied:["abael-scout","piranha-pig"],lootDeckConfig:{money:8,lumber:4,metal:4,hide:4},rooms:[{roomNumber:1,ref:"09-D",initial:!0,monster:[{name:"abael-scout",player2:"normal",player3:"normal",player4:"elite"},{name:"abael-scout",player3:"normal",player4:"normal"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",type:"elite"},{name:"piranha-pig",player3:"normal",player4:"normal"},{name:"piranha-pig",player3:"normal",player4:"elite"}]}]},{index:"72",name:"A Giant Block of Ice",flowChartGroup:"personal-quests",coordinates:{x:2147.25,y:813.25,width:89,height:74,gridLocation:"A5"},edition:"fh",complexity:2,unlocks:["73"],forcedLinks:["73"],rewards:{battleGoals:1},monsters:["ice-wraith"],lootDeckConfig:{money:9,lumber:3,metal:5,corpsecap:2,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"ice-wraith",type:"elite"},{name:"ice-wraith",player3:"normal",player4:"normal"}]}]},{index:"73",name:"Flotsam",flowChartGroup:"personal-quests",coordinates:{x:1892.5,y:559.25,width:91,height:71,gridLocation:"D3"},edition:"fh",complexity:2,monsters:["lightning-eel"],lootDeckConfig:{money:9,lumber:5,hide:3,flamefruit:1,arrowvine:2},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"damage",value:"2",scenarioEffect:!0},{identifier:{type:"character",name:".*"},type:"gainCondition",value:"wound",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"lightning-eel",type:"normal"},{name:"lightning-eel",type:"normal"},{name:"lightning-eel",type:"normal"},{name:"lightning-eel",type:"normal"},{name:"lightning-eel",player3:"elite",player4:"elite"},{name:"lightning-eel",player4:"elite"}]}]},{index:"74A",name:"Gaps in the Road A",flowChartGroup:"personal-quests",coordinates:{x:1533.5,y:921.75,width:86,height:57,gridLocation:"G6"},edition:"fh",complexity:2,unlocks:["76"],requirements:[{campaignSticker:["friend-of-the-fish-king"]}],rewards:{randomItemBlueprint:1},monsters:["algox-archer","piranha-pig"],allies:["piranha-pig"],objectives:[{name:"Small Tree",health:"[CxL/2{$math.ceil}]"}],lootDeckConfig:{money:7,lumber:5,metal:2,hide:3,arrowvine:2,flamefruit:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"algox-archer",type:"normal"},{name:"algox-archer",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-archer",player4:"normal"},{name:"piranha-pig",type:"elite"},{name:"piranha-pig",type:"elite"}],objectives:[1]}]},{index:"74B",name:"Gaps in the Road B",flowChartGroup:"personal-quests",coordinates:{x:1533.5,y:921.75,width:86,height:57,gridLocation:"G6"},edition:"fh",complexity:2,unlocks:["75"],rewards:{randomItemBlueprint:1},monsters:["algox-archer"],objectives:[{name:"Small Tree",health:"[CxL/2{$math.ceil}]"}],lootDeckConfig:{money:7,lumber:5,metal:2,hide:3,arrowvine:2,flamefruit:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"algox-archer",type:"normal"},{name:"algox-archer",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-archer",player4:"normal"}],objectives:[1]}]},{index:"75",name:"Infiltrating the Lair",flowChartGroup:"personal-quests",coordinates:{x:1937,y:436.5,width:101,height:88,gridLocation:"C2"},edition:"fh",complexity:2,unlocks:["77"],requirements:[{buildings:["boat"]}],forcedLinks:["77"],rewards:{gold:10},monsters:["abael-herder","lightning-eel","piranha-pig"],lootDeckConfig:{money:8,metal:2,hide:5,axenut:1,snowthistle:2,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"abael-herder",type:"normal"},{name:"lightning-eel",player2:"normal",player3:"normal",player4:"elite"},{name:"lightning-eel",player2:"normal",player3:"elite",player4:"elite"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",player3:"normal",player4:"elite"},{name:"piranha-pig",player4:"elite"}]}]},{index:"76",name:"Apotheosis",flowChartGroup:"personal-quests",coordinates:{x:2045.75,y:474.5,width:96,height:86,gridLocation:"B2"},edition:"fh",complexity:3,requirements:[{buildings:["boat"]}],monsters:["algox-archer","algox-guard","fish-king","lurker-mindsnipper","piranha-pig"],allies:["fish-king","piranha-pig"],lootDeckConfig:{money:9,metal:2,hide:5,axenut:1,snowthistle:2,random_item:1},rules:[{round:"R == 1",start:!0,once:!0,note:"adjacent to each character",spawns:[{monster:{name:"piranha-pig",type:"normal"},count:"C"}]},{round:"R == 3 || R == 6 || R == 9",start:!0,spawns:[{monster:{name:"algox-guard",player2:"normal",player3:"normal"},marker:"a"},{monster:{name:"algox-guard",player4:"normal"},marker:"a",count:"2"},{monster:{name:"algox-archer",player2:"normal",player3:"normal",player4:"elite"},marker:"a"},{monster:{name:"lurker-mindsnipper",player2:"normal"},marker:"b"},{monster:{name:"lurker-mindsnipper",player3:"normal",player4:"normal"},marker:"b",count:"2"}]},{round:"R == 7",start:!0,sections:["105.4"]},{round:"R == 12",sections:["56.2"]},{round:"true",always:!0,alwaysApply:!0,statEffects:[{identifier:{type:"monster",edition:"fh",name:"fish-king"},statEffect:{health:"H/2",actions:[],special:[],immunities:["bane","brittle","poison","wound","curse","regenerate","ward","invisible"],deck:"fish-king-scenario-76",absolute:!0},note:"%data.scenario.rules.fh.76%"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[2],monster:[{name:"algox-archer",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-guard",type:"normal"},{name:"algox-guard",player4:"normal"},{name:"fish-king",type:"boss"},{name:"lurker-mindsnipper",type:"elite"},{name:"lurker-mindsnipper",player3:"elite",player4:"elite"}]}]},{index:"77",name:"Fish King's Ascension",flowChartGroup:"personal-quests",coordinates:{x:2033,y:375.75,width:112,height:86,gridLocation:"B1"},edition:"fh",complexity:3,requirements:[{buildings:["boat"]}],rewards:{items:["201"],events:["boat:B-19"],custom:'"Threat from the Deep" quest complete'},monsters:["fish-king","piranha-pig"],lootDeckConfig:{money:4,lumber:2,metal:2,hide:2,corpsecap:2,flamefruit:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"bane",scenarioEffect:!0}]},{round:"true",always:!0,once:!0,sections:["131.2"],figures:[{identifier:{type:"monster",name:"fish-king",health:"[Hx3/4{$math.ceil}]"},type:"present"},{identifier:{type:"monster",name:"fish-king"},type:"setHp",value:"[Hx3/4{$math.ceil}]"}]},{round:"true",always:!0,alwaysApply:!0,statEffects:[{identifier:{type:"monster",edition:"fh",name:"fish-king"},statEffect:{movement:"0",actions:[{type:"custom",value:"%data.scenario.rules.fh.77.2%"}],special:[[{type:"move",value:0,valueType:"plus"},{type:"attack",value:1,valueType:"minus",subActions:[{type:"specialTarget",value:"enemiesAdjacent",small:!0},{type:"push",value:2,small:!0}]},{type:"summon",value:"monsterStandee",valueObject:[{monster:{name:"piranha-pig",player2:"normal",player3:"elite",player4:"elite"}}]}],[{type:"move",value:0,valueType:"plus"},{type:"specialTarget",value:"focusEnemyFarthest",small:!0,subActions:[{type:"attack",value:0,valueType:"plus",subActions:[{type:"range",value:5,small:!0},{type:"pull",value:4,small:!0},{type:"condition",value:"poison",small:!0}]}]},{type:"custom",value:"%data.custom.fh.fish-king-scenario-77.1%",small:!0}]],immunities:["poison","immobilize","disarm","stun","muddle"],absolute:!0},note:"%data.scenario.rules.fh.77.1%"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"fish-king",type:"boss"},{name:"piranha-pig",player2:"normal",player3:"normal",player4:"elite"},{name:"piranha-pig",player3:"elite",player4:"elite"}]}]},{index:"78",name:"The Lurker Problem",flowChartGroup:"job-postings",errata:"scenario78",coordinates:{x:1410,y:777.75,width:111,height:71,gridLocation:"H5"},edition:"fh",complexity:2,requirements:[{buildings:["climbing-gear"]}],rewards:{experience:10},monsters:["lurker-soldier","lurker-wavethrower","piranha-pig"],lootDeckConfig:{money:6,lumber:3,metal:3,hide:4,rockroot:2,arrowvine:2},rooms:[{roomNumber:1,initial:!0,monster:[{name:"lurker-soldier",type:"elite"},{name:"lurker-soldier",player3:"normal",player4:"elite"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",player3:"normal",player4:"normal"}]}]},{index:"79",name:"Relic",flowChartGroup:"job-postings",coordinates:{x:2036.5,y:835.5,width:99,height:60,gridLocation:"B5"},edition:"fh",complexity:3,requirements:[{buildings:["sled"]}],rewards:{morale:3,calendarSection:["45.2-3"]},monsters:["ice-wraith","snow-imp"],lootDeckConfig:{money:8,lumber:3,metal:5,hide:2,corpsecap:2},rooms:[{roomNumber:1,initial:!0,monster:[{name:"ice-wraith",type:"normal"},{name:"ice-wraith",player4:"normal"},{name:"snow-imp",type:"normal"},{name:"snow-imp",type:"elite"},{name:"snow-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"snow-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"snow-imp",player3:"elite",player4:"elite"},{name:"snow-imp",player3:"elite",player4:"elite"},{name:"snow-imp",player4:"elite"}]}]},{index:"80",name:"Relic Renewed",flowChartGroup:"job-postings",coordinates:{x:493.5,y:1869.5,width:132,height:71,gridLocation:"FR"},edition:"fh",complexity:2,rewards:{morale:2,collectiveResources:[{type:"lumber",value:2},{type:"metal",value:2},{type:"hide",value:2}]},monsters:["robotic-boltshooter","ruined-machine","steel-automaton","the-relic"],objectives:[{name:"Metal Cabinet",health:"[(2+L)xC/2{$math.ceil}]",marker:"a",actions:[{type:"custom",value:"The Relic gains:",small:!0,subActions:[{type:"custom",value:"Add %game.condition.immobilize% to all attacks targeting the primary focus",small:!0}]}]},{name:"Metal Cabinet",health:"[(2+L)xC/2{$math.ceil}]",marker:"b",actions:[{type:"custom",value:"The Relic gains:",small:!0,subActions:[{type:"shield",value:"[1+(L/2){$math.ceil}]",small:!0}]}]},{name:"Metal Cabinet",health:"[(2+L)xC/2{$math.ceil}]",marker:"c",actions:[{type:"custom",value:"Change The Relic's Special 1 to:",small:!0,subActions:[{type:"custom",value:"Focus on the farthest attackable enemy and perform:",small:!0,subActions:[{type:"custom",value:"%game.action.move%+2, %game.action.jump%",small:!0},{type:"custom",value:"%game.action.attack%+0, %game.action.target% focus (if adjacent) and all enemies in or adjacent to hexes entered during the movement",small:!0}]}]}]},{name:"Metal Cabinet",health:"[(2+L)xC/2{$math.ceil}]",marker:"d",actions:[{type:"custom",value:"Change The Relic's Special 2 to:",small:!0,subActions:[{type:"summon",value:"monsterStandee",valueObject:[{monster:{name:"ruined-machine",player2:"normal",player4:"elite"},count:"2"},{monster:{name:"ruined-machine",player3:"normal"}},{monster:{name:"ruined-machine",player3:"elite"}}]}]}]}],lootDeckConfig:{money:8,lumber:2,metal:3,hide:2,rockroot:1,axenut:1,random_item:1},rooms:[{roomNumber:1,initial:!0,treasures:[62,69],monster:[{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"},{name:"steel-automaton",type:"normal"},{name:"steel-automaton",player3:"normal",player4:"normal"},{name:"steel-automaton",player4:"normal"},{name:"the-relic",type:"boss"}],objectives:[1,2,3,4]}]},{index:"81",name:"Ruinous Research Lab",flowChartGroup:"other",coordinates:{x:2122.75,y:1497.5,width:102,height:77,gridLocation:"A12"},edition:"fh",complexity:3,allyDeck:!0,rewards:{prosperity:1,itemBlueprints:["70"]},monsters:["aesther-ashblade","aesther-scout","ancient-artillery","ruined-machine","steel-automaton"],allied:["aesther-ashblade","aesther-scout"],objectives:[{name:"Door 1",health:"(1+L)x2",marker:"1",initiative:20},{name:"Door 2",health:"(1+L)x2",marker:"2",initiative:20}],lootDeckConfig:{money:9,lumber:2,metal:5,hide:2,rockroot:1,random_item:1},rules:[{round:"true",always:!0,once:!0,sections:["174.3"],figures:[{identifier:{type:"objective",edition:"objective",name:"Door 1"},type:"dead"}]},{round:"true",always:!0,once:!0,sections:["133.2"],figures:[{identifier:{type:"objective",edition:"objective",name:"Door 2"},type:"dead"}]},{round:"R == 6 || R == 12",start:!0,note:"at any empty starting hex",spawns:[{monster:{name:"aesther-scout",player2:"normal",player3:"normal",player4:"elite"}}]},{round:"R == 9",start:!0,note:"at any empty starting hex",spawns:[{monster:{name:"aesther-scout",player2:"normal",player3:"elite",player4:"elite"}}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"aesther-ashblade",player2:"normal",player3:"normal",player4:"elite"},{name:"aesther-ashblade",player2:"normal",player3:"elite",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"normal"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player4:"normal"},{name:"steel-automaton",player2:"normal",player3:"normal",player4:"elite"}],objectives:[1,2]}]},{index:"82",name:"Expedition North",flowChartGroup:"other",coordinates:{x:553.5,y:1110,width:113,height:83,gridLocation:"P8"},edition:"fh",complexity:2,rewards:{prosperity:2,itemDesigns:["153:fc","159:fc","161:fc"],custom:"Add the following Forgotten Circles items to the Frosthaven supply: 153, 159, and 161"},monsters:["frost-demon","wind-demon"],objectives:[{name:"Location",health:"L+1",marker:"2"},{name:"Location",health:"L+1",marker:"3"},{name:"Location",health:"L+1",marker:"4"}],lootDeckConfig:{money:12,rockroot:1,arrowvine:1,snowthistle:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0}]},{round:"R > 1 && R % 6 != 1",start:!0,note:"Relocate corridor %game.mapMarker.c% to the next %game.mapMarker.a% position in clockwise order"},{round:"R > 1 && R % 4 != 1",start:!0,note:"Relocate corridor %game.mapMarker.d% to the next %game.mapMarker.b% position in clockwise order"},{round:"R > 1 && R % 6 == 1",start:!0,note:"Return corridor %game.mapMarker.c% to starting %game.mapMarker.c% position"},{round:"R > 1 && R % 4 == 1",start:!0,note:"Return corridor %game.mapMarker.d% to starting %game.mapMarker.d% position"},{round:"R > 2 && R % 4 == 3",start:!0,spawns:[{monster:{name:"frost-demon",player2:"normal",player3:"elite",player4:"elite"},marker:"e"}]},{round:"R > 3 && R % 4 == 0",start:!0,spawns:[{monster:{name:"wind-demon",player2:"normal",player3:"normal",player4:"elite"},marker:"f"}]},{round:"R > 4 && R % 4 == 1",start:!0,spawns:[{monster:{name:"frost-demon",player2:"normal",player3:"elite",player4:"elite"},marker:"g"}]},{round:"R > 5 && R % 4 == 2",start:!0,spawns:[{monster:{name:"wind-demon",player2:"normal",player3:"normal",player4:"elite"},marker:"h"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"frost-demon",type:"normal"},{name:"frost-demon",type:"normal"},{name:"frost-demon",player4:"elite"},{name:"frost-demon",player4:"elite"},{name:"wind-demon",type:"elite"},{name:"wind-demon",player3:"elite"}],objectives:["1:6","2:C < 3 ? 0 : 3","3:C < 4 ? 0 : 3"]}]},{index:"83",name:"Rising Brine",flowChartGroup:"job-postings",coordinates:{x:1721.25,y:680.25,width:79,height:62,gridLocation:"E3"},edition:"fh",complexity:2,requirements:[{buildings:["boat"]}],rewards:{items:["202"]},monsters:["ancient-artillery","giant-piranha-pig","giant-piranha-pig-boss","lurker-mindsnipper","piranha-pig"],lootDeckConfig:{money:7,lumber:3,metal:3,hide:3,flamefruit:1,arrowvine:2,snowthistle:1},rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"monster",edition:"fh",name:"giant-piranha-pig"},type:"killed",value:"1"},{identifier:{type:"monster",edition:"fh",name:"giant-piranha-pig-boss"},type:"remove"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"ancient-artillery",type:"normal"},{name:"ancient-artillery",type:"elite"},{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ancient-artillery",player4:"elite"},{name:"giant-piranha-pig",type:"elite"},{name:"giant-piranha-pig-boss",type:"boss"},{name:"lurker-mindsnipper",type:"normal"},{name:"lurker-mindsnipper",type:"elite"},{name:"lurker-mindsnipper",player3:"elite",player4:"elite"},{name:"lurker-mindsnipper",player4:"normal"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",player2:"normal",player3:"normal",player4:"elite"},{name:"piranha-pig",player2:"normal",player3:"normal",player4:"elite"},{name:"piranha-pig",player2:"normal",player3:"elite",player4:"elite"},{name:"piranha-pig",player4:"elite"}]}]},{index:"84",name:"Here There Be Oozes",flowChartGroup:"job-postings",coordinates:{x:325.25,y:809,width:99,height:73,gridLocation:"R5"},edition:"fh",complexity:3,rewards:{items:["234"],campaignSticker:["brummix"]},monsters:["elder-ooze","ooze"],lootDeckConfig:{money:15,lumber:3,metal:3,corpsecap:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"elder-ooze",type:"boss"},{name:"ooze",type:"elite"},{name:"ooze",type:"elite"},{name:"ooze",player3:"elite",player4:"elite"},{name:"ooze",player4:"elite"}]}]},{index:"85",name:"Deadly Pastimes",flowChartGroup:"job-postings",coordinates:{x:642.75,y:842.25,width:125,height:75,gridLocation:"O5"},edition:"fh",complexity:3,requirements:[{buildings:["climbing-gear"]}],rewards:{experience:15,battleGoals:1},monsters:["burrowing-blade","polar-bear"],lootDeckConfig:{money:7,lumber:2,metal:3,hide:4,rockroot:2,snowthistle:1,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"wound",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"burrowing-blade",type:"elite"},{name:"burrowing-blade",player3:"normal",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"86",name:"The Lady in White",flowChartGroup:"job-postings",coordinates:{x:1816,y:1934.5,width:123,height:69,gridLocation:"FR"},edition:"fh",complexity:2,rewards:{morale:2},monsters:["black-imp","earth-demon","ice-wraith"],objectives:[{name:"Tree",health:"(2+L)xC",actions:[{type:"custom",value:"When suffering damage but not destroyed:",subActions:[{type:"summon",value:"monsterStandee",valueObject:[{monster:{name:"black-imp",type:"normal"}}]}]}]}],lootDeckConfig:{money:10,lumber:4,hide:2,axenut:1,arrowvine:2,flamefruit:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"black-imp",type:"elite"},{name:"black-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"black-imp",player3:"elite",player4:"elite"},{name:"earth-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"earth-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"earth-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"ice-wraith",type:"normal"},{name:"ice-wraith",player3:"elite",player4:"elite"}],objectives:[1]}]},{index:"87",name:"The Collection",flowChartGroup:"job-postings",coordinates:{x:1203.25,y:1009,width:93,height:69,gridLocation:"J7"},edition:"fh",complexity:1,unlocks:["88"],links:["88"],rewards:{custom:"Or 2 inspiration if both brothers survived",inspiration:1},monsters:["algox-archer","algox-guard"],lootDeckConfig:{money:8,lumber:2,metal:4,hide:3,rockroot:1,arrowvine:1,corpsecap:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"algox-archer",type:"elite"},{name:"algox-archer",player4:"normal"},{name:"algox-guard",type:"normal"},{name:"algox-guard",player3:"elite",player4:"elite"}]}]},{index:"88",name:"Collection's Capstone",flowChartGroup:"job-postings",coordinates:{x:1333.5,y:1040.25,width:92,height:71,gridLocation:"I7"},edition:"fh",complexity:2,rewards:{morale:2},monsters:["earth-demon","flame-demon","frost-demon","savvas-icestorm","savvas-lavaflow","wind-demon"],lootDeckConfig:{money:8,lumber:3,metal:4,hide:2,rockroot:1,corpsecap:1,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"wound",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"savvas-icestorm",player2:"normal",player3:"elite",player4:"elite"},{name:"savvas-lavaflow",type:"normal"},{name:"savvas-lavaflow",player4:"normal"}]}]},{index:"89",name:"A Contained Fire",flowChartGroup:"job-postings",coordinates:{x:1568.5,y:1260,width:79,height:106,gridLocation:"G10"},edition:"fh",complexity:2,rewards:{collectiveResources:[{type:"rockroot",value:2},{type:"lumber",value:2}]},monsters:["algox-guard"],lootDeckConfig:{money:10,lumber:2,metal:2,hide:2,flamefruit:1,arrowvine:2,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"algox-guard",type:"normal"},{name:"algox-guard",type:"normal"},{name:"algox-guard",player3:"normal",player4:"elite"}]}]},{index:"90",name:"Frozen Treasure",flowChartGroup:"job-postings",coordinates:{x:1272,y:579.5,width:86,height:61,gridLocation:"I3"},edition:"fh",complexity:2,monsters:["frozen-corpse","ice-wraith","polar-bear","snow-imp"],lootDeckConfig:{money:5,lumber:4,hide:4,snowthistle:2},rooms:[{roomNumber:1,initial:!0,monster:[{name:"frozen-corpse",type:"elite"},{name:"frozen-corpse",type:"elite"},{name:"frozen-corpse",type:"elite"},{name:"frozen-corpse",type:"elite"},{name:"ice-wraith",type:"normal"},{name:"ice-wraith",type:"normal"},{name:"ice-wraith",player3:"normal",player4:"normal"},{name:"ice-wraith",player3:"normal",player4:"elite"},{name:"ice-wraith",player4:"elite"},{name:"ice-wraith",player4:"elite"},{name:"polar-bear",type:"normal"},{name:"polar-bear",player3:"normal",player4:"elite"},{name:"snow-imp",type:"elite"},{name:"snow-imp",type:"elite"},{name:"snow-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",player4:"elite"}]}]},{index:"91",name:"Shoreline Scramble",flowChartGroup:"job-postings",coordinates:{x:1169,y:716.75,width:114,height:92,gridLocation:"J4"},edition:"fh",complexity:2,rewards:{morale:1,collectiveResources:[{type:"lumber",value:2}]},monsters:["lightning-eel","lurker-clawcrusher","lurker-mindsnipper","lurker-wavethrower"],lootDeckConfig:{money:10,lumber:4,hide:4,flamefruit:1,snowthistle:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"damage",value:"3",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[]}]},{index:"92",name:"Sinking Ship",flowChartGroup:"job-postings",coordinates:{x:1307,y:638.75,width:111,height:80,gridLocation:"I4"},edition:"fh",complexity:3,requirements:[{buildings:["boat"]}],rewards:{custom:"Collectively lose 5xC/2 loot tokens (rounded down), first taken from HE-RO-IC-S' pile, then taken as evenly as possible from the characters' collected loot tokens. If any loot tokens remain in the HE-RO-IC-S pile, distribute them as evenly as possible to all characters. Loot tokens are then traded in for loot cards",calendarSection:["181.2-1"]},monsters:["lurker-clawcrusher","lurker-mindsnipper","lurker-soldier","lurker-wavethrower"],lootDeckConfig:{money:7,lumber:4,metal:3,hide:2,flamefruit:1,axenut:2,random_item:1},rules:[{round:"R == 2 || R == 4",start:!0,spawns:[{monster:{name:"lurker-wavethrower",player2:"normal"},marker:"f"},{monster:{name:"lurker-wavethrower",player3:"normal",player4:"normal"},marker:"f",count:"2"},{monster:{name:"lurker-soldier",player2:"normal",player3:"normal",player4:"elite"},marker:"f"}]},{round:"R == 3 || R == 5",start:!0,spawns:[{monster:{name:"lurker-soldier",player2:"normal",player3:"elite",player4:"elite"},marker:"b"},{monster:{name:"lurker-wavethrower",player2:"normal"},marker:"g"},{monster:{name:"lurker-wavethrower",player3:"normal",player4:"normal"},marker:"g",count:"2"},{monster:{name:"lurker-soldier",player2:"normal",player3:"normal",player4:"elite"},marker:"g"}]},{round:"R == 6 || R == 8",start:!0,spawns:[{monster:{name:"lurker-soldier",player2:"normal",player3:"normal",player4:"elite"},marker:"c"},{monster:{name:"lurker-mindsnipper",player2:"normal",player3:"elite",player4:"elite"},marker:"d"}]},{round:"R == 7 || R == 9",start:!0,spawns:[{monster:{name:"lurker-clawcrusher",player2:"normal",player3:"normal",player4:"elite"},marker:"b"},{monster:{name:"lurker-wavethrower",player2:"normal"},marker:"e"},{monster:{name:"lurker-wavethrower",player3:"normal",player4:"normal"},marker:"e",count:"2"},{monster:{name:"lurker-soldier",player2:"normal",player3:"elite",player4:"elite"},marker:"e"}]},{round:"R > 9",start:!0,spawns:[{monster:{name:"lurker-clawcrusher",player3:"normal",player4:"elite"},marker:"b"},{monster:{name:"lurker-clawcrusher",type:"elite"},marker:"c"}]},{round:"R == 6",note:"Tile 7-G is submerged"},{round:"R == 10",note:"Tiles 2-B and 2-D are submerged"},{round:"R == 12",note:"Tile 14-A is submerged"}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"lurker-clawcrusher",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-soldier",player2:"normal",player3:"normal",player4:"elite"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",player4:"elite"}]}]},{index:"93A",name:"Midwinter Brawl A",flowChartGroup:"job-postings",coordinates:{x:1415.75,y:1039.5,width:79,height:49,gridLocation:"H7"},edition:"fh",complexity:2,rewards:{items:["235"]},monsters:["algox-archer","algox-guard","algox-scout","scabwit","yoglang"],allies:["scabwit"],lootDeckConfig:{money:9,lumber:4,metal:2,hide:2,axenut:1,flamefruit:1,random_item:1},rules:[{round:"R == 2 || R == 4 || R == 6",start:!0,spawns:[{monster:{name:"algox-scout",player2:"normal",player3:"normal",player4:"elite"},marker:"a"}]},{round:"R == 3 || R == 5 || R == 7",start:!0,spawns:[{monster:{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"},marker:"b"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"algox-archer",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-archer",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-guard",type:"normal"},{name:"algox-guard",player3:"normal",player4:"normal"},{name:"algox-scout",player2:"normal",player3:"elite",player4:"elite"},{name:"scabwit",type:"boss"},{name:"yoglang",type:"boss"}]}]},{index:"93B",name:"Midwinter Brawl B",flowChartGroup:"job-postings",coordinates:{x:1415.75,y:1039.5,width:79,height:49,gridLocation:"H7"},edition:"fh",complexity:2,rewards:{itemBlueprints:["79"]},monsters:["hound","polar-bear","scabwit","vermling-scout","yoglang"],allies:["yoglang"],lootDeckConfig:{money:9,lumber:4,metal:2,hide:2,axenut:1,flamefruit:1,random_item:1},rules:[{round:"R == 2 || R == 4 || R == 6",start:!0,spawns:[{monster:{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"},marker:"c"}]},{round:"R == 3 || R == 5 || R == 7",start:!0,spawns:[{monster:{name:"vermling-scout",player2:"normal",player3:"normal",player4:"elite"},marker:"d",count:"2"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"hound",player2:"normal",player3:"normal",player4:"elite"},{name:"hound",player2:"normal",player3:"elite",player4:"elite"},{name:"polar-bear",type:"normal"},{name:"polar-bear",player3:"normal",player4:"normal"},{name:"scabwit",type:"boss"},{name:"vermling-scout",type:"elite"},{name:"vermling-scout",type:"elite"},{name:"vermling-scout",player4:"elite"},{name:"vermling-scout",player4:"elite"},{name:"yoglang",type:"boss"}]}]},{index:"94",name:"A Grand View",flowChartGroup:"job-postings",coordinates:{x:2057.5,y:910.5,width:101,height:89,gridLocation:"B6"},edition:"fh",complexity:3,requirements:[{buildings:["sled"]}],rewards:{experience:10},monsters:["ancient-artillery","ruined-machine"],objectives:[{name:"Flaming Bladespinner",initiative:"1",actions:[{type:"custom",value:"%game.action.fly% Move 1 hex clockwise around adjacent obstacle %game.mapMarker.a%"}]}],lootDeckConfig:{money:9,lumber:3,metal:5,rockroot:1,arrowvine:1,random_item:1},rules:[{round:"true",note:"one for each character adjacent to a Flaming Bladespinner in any empty starting hex.",spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},count:"0",manual:!0}]},{round:"R % 6 == 3",start:!0,note:"at any starting empty hex",spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"}}]},{round:"R % 6 == 0",start:!0,note:"at any starting empty hex",spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"}}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"}],objectives:["1:4"]}]},{index:"95",name:"To Bury the Dead",flowChartGroup:"job-postings",coordinates:{x:624,y:1967.125,width:83,height:58,gridLocation:"FR"},edition:"fh",complexity:2,rewards:{gold:10,morale:1},monsters:["ice-wraith"],lootDeckConfig:{money:8,lumber:4,metal:2,corpsecap:2,snowthistle:2},rules:[{round:"R == 8",start:!0,sections:["43.1"]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"ice-wraith",type:"normal"},{name:"ice-wraith",type:"elite"},{name:"ice-wraith",player3:"normal",player4:"normal"},{name:"ice-wraith",player4:"normal"}]}]},{index:"96",name:"Underground Station",flowChartGroup:"job-postings",coordinates:{x:1792.5,y:1446,width:116,height:89,gridLocation:"E11"},edition:"fh",complexity:2,unlocks:["97"],requirements:[{buildings:["climbing-gear"]}],forcedLinks:["97"],rewards:{experience:5,morale:1},monsters:["ancient-artillery","rending-drake"],objectives:[{name:"Debris",health:"L+10"}],lootDeckConfig:{money:14,lumber:1,metal:3,axenut:1,rockroot:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"rending-drake",player2:"normal",player3:"normal",player4:"elite"}],objectives:[1,1]}]},{index:"97",name:"Program Control Nexus",flowChartGroup:"job-postings",coordinates:{x:1811.75,y:1545.25,width:110,height:83,gridLocation:"D12"},edition:"fh",complexity:3,unlocks:["98"],forcedLinks:["98"],rewards:{morale:1,collectiveResources:[{type:"metal",value:5}]},monsters:["flaming-bladespinner","program-director","robotic-boltshooter","ruined-machine","steel-automaton"],lootDeckConfig:{money:10,lumber:2,metal:4,random_item:1},rules:[{round:"1",start:!0,note:"%data.scenario.rules.fh.97%"}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"flaming-bladespinner",player3:"normal",player4:"normal",marker:"d"},{name:"flaming-bladespinner",player3:"normal",player4:"normal",marker:"d"},{name:"flaming-bladespinner",player3:"normal",player4:"elite",marker:"d"},{name:"program-director",type:"boss"},{name:"robotic-boltshooter",type:"normal",marker:"a"},{name:"robotic-boltshooter",player2:"normal",player3:"normal",player4:"elite",marker:"a"},{name:"ruined-machine",type:"normal",marker:"c"},{name:"ruined-machine",type:"elite",marker:"c"},{name:"ruined-machine",player4:"normal",marker:"c"},{name:"ruined-machine",player4:"normal",marker:"c"},{name:"ruined-machine",player4:"normal",marker:"c"},{name:"steel-automaton",type:"normal",marker:"b"},{name:"steel-automaton",type:"elite",marker:"b"}]}]},{index:"98",name:"Collapsing Vent",flowChartGroup:"job-postings",coordinates:{x:1707.5,y:1562,width:107,height:72,gridLocation:"E12"},edition:"fh",complexity:1,rewards:{prosperity:1},monsters:["ancient-artillery","black-imp","spitting-drake"],lootDeckConfig:{money:10,lumber:1,metal:4,hide:3,rockroot:2},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"damage",value:"3",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"black-imp",type:"normal"},{name:"black-imp",type:"elite"},{name:"black-imp",player3:"normal",player4:"elite"},{name:"black-imp",player4:"normal"},{name:"spitting-drake",type:"normal"},{name:"spitting-drake",player3:"normal",player4:"normal"}]}]},{index:"99",name:"Prison Break",flowChartGroup:"job-postings",coordinates:{x:2125.75,y:700.75,width:70,height:72,gridLocation:"A4"},edition:"fh",complexity:1,unlocks:["100"],rewards:{gold:10},monsters:["frozen-corpse","robotic-boltshooter"],lootDeckConfig:{money:10,lumber:2,metal:4,hide:2,arrowvine:2},rooms:[{roomNumber:1,initial:!0,monster:[{name:"frozen-corpse",type:"normal"},{name:"frozen-corpse",type:"normal"},{name:"frozen-corpse",player2:"normal",player3:"elite",player4:"elite"},{name:"frozen-corpse",player2:"normal",player3:"elite",player4:"elite"},{name:"frozen-corpse",player4:"normal"},{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",player2:"normal",player3:"normal",player4:"elite"},{name:"robotic-boltshooter",player3:"elite",player4:"elite"},{name:"robotic-boltshooter",player4:"elite"}]}]},{index:"100",name:"Inside the Swarm",flowChartGroup:"job-postings",coordinates:{x:2140.25,y:606,width:89,height:82,gridLocation:"A3"},edition:"fh",complexity:3,unlocks:["101"],rewards:{gold:5,experience:10},monsters:["lurker-mindsnipper","shrike-fiend"],lootDeckConfig:{money:15},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"lurker-mindsnipper",type:"normal"},{name:"lurker-mindsnipper",player3:"normal",player4:"normal"},{name:"shrike-fiend",player2:"normal",player3:"elite",player4:"elite"},{name:"shrike-fiend",player4:"normal"}]}]},{index:"101",name:"Harrower Library",flowChartGroup:"job-postings",coordinates:{x:651.25,y:606.25,width:102,height:73,gridLocation:"O3"},edition:"fh",complexity:1,unlocks:["102"],requirements:[{campaignSticker:["into-the-forest"]}],rewards:{experience:10,battleGoals:1},monsters:["algox-archer","algox-guard"],lootDeckConfig:{money:8,lumber:3,metal:3,hide:3,rockroot:1,arrowvine:1,snowthistle:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"algox-archer",type:"normal"},{name:"algox-archer",player3:"elite",player4:"elite"},{name:"algox-guard",player2:"elite",player3:"normal",player4:"normal"},{name:"algox-guard",player3:"normal",player4:"elite"}]}]},{index:"102",name:"Into the Black",flowChartGroup:"job-postings",coordinates:{x:422.75,y:996.25,width:91,height:92,gridLocation:"R7"},edition:"fh",complexity:3,rewards:{experience:20},monsters:["chaos-demon","frost-demon","living-spirit","night-demon","savvas-icestorm","wind-demon"],lootDeckConfig:{money:15},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:1",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,treasures:[57,85],monster:[]}]},{index:"103",name:"The Lead Door",flowChartGroup:"job-postings",coordinates:{x:370.75,y:1091.25,width:104,height:96,gridLocation:"R8"},edition:"fh",complexity:2,rewards:{gold:10,experience:30,battleGoals:1},monsters:["living-doom","living-spirit","lurker-clawcrusher","shrike-fiend"],objectives:[{name:"Ice Pillar",health:"(2xL)+4"}],lootDeckConfig:{money:15,random_item:1},rules:[{round:"true",note:"If any ice pillars suffered damage this round, spawn the following monsters at each character's location based on number of tokens on their mat.<br>0 - 5: One normal Living Spirit<br>6 - 8: One normal Shrike Fiend <br>9 - 11: One normal Living Doom <br>12+: One elite Living Spirit and one normal Lurker Clawcrusher"}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"living-spirit",type:"normal"},{name:"living-spirit",player2:"normal",player3:"normal",player4:"elite"},{name:"living-spirit",player3:"elite",player4:"elite"}],objectives:[1,1,1,1]}]},{index:"104",name:"Ruins of the Solstice",flowChartGroup:"random-scenarios",errata:"scenario104",coordinates:{x:1789.5,y:774.25,width:115,height:83,gridLocation:"E5"},edition:"fh",complexity:2,random:!0,requirements:[{buildings:["sled"]}],rewards:{events:["winter-road:WR-49"],collectiveResources:[{type:"snowthistle",value:2}]},monsters:["earth-demon","frost-demon","wind-demon"],lootDeckConfig:{money:10,lumber:3,metal:3,hide:2,axenut:1,snowthistle:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"brittle",scenarioEffect:!0}]},{round:"true",note:"Each Earth Demon or Forest Imp in winter and each Frost Demon or Savvas Icestorm in spring suffers%game.damage:1%"}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"earth-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"earth-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"frost-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"frost-demon",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"105",name:"Ruins of the Equinox",flowChartGroup:"random-scenarios",coordinates:{x:1484.25,y:1437.5,width:116,height:79,gridLocation:"H11"},edition:"fh",complexity:2,requirements:[{buildings:["climbing-gear"]}],rewards:{collectiveResources:[{type:"flamefruit",value:2}],calendarSection:["159.4-4"]},monsters:["earth-demon","flame-demon","savvas-lavaflow","wind-demon"],lootDeckConfig:{money:10,lumber:3,metal:3,hide:2,corpsecap:1,flamefruit:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"wound",scenarioEffect:!0}],elements:[{type:"air",state:"always"}]},{round:"R % 3 == 1",note:"All characters and character summons in row %game.element.air%, in right-to-left order, move one hex to the right.<br>Move the %game.element.air% token to %game.mapMarker.b%"},{round:"R % 3 == 2",note:"All characters and character summons in row %game.element.air%, in right-to-left order, move one hex to the right.<br>Move the %game.element.air% token to %game.mapMarker.c%"},{round:"R % 3 == 0",note:"All characters and character summons in row %game.element.air%, in right-to-left order, move one hex to the right.<br>Move the %game.element.air% token to %game.mapMarker.a%"}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"savvas-lavaflow",type:"elite"},{name:"savvas-lavaflow",player3:"normal",player4:"normal"},{name:"savvas-lavaflow",player4:"normal"},{name:"wind-demon",type:"normal"},{name:"wind-demon",type:"normal"},{name:"wind-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"wind-demon",player3:"normal",player4:"elite"}]}]},{index:"106",name:"The Tempus Forge",flowChartGroup:"random-scenarios",coordinates:{x:951.5,y:808.75,width:103,height:68,gridLocation:"M5"},edition:"fh",complexity:2,rewards:{items:["213"]},monsters:[],lootDeckConfig:{money:7,lumber:2,metal:4,hide:2,rockroot:2,arrowvine:2,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[]}]},{index:"107",name:"My Private Empire",flowChartGroup:"random-scenarios",coordinates:{x:1179.5,y:1276.75,width:102,height:70,gridLocation:"J10"},edition:"fh",complexity:2,random:!0,requirements:[{buildings:["climbing-gear"]}],monsters:[],lootDeckConfig:{money:10,lumber:3,metal:3,flamefruit:1,axenut:1,arrowvine:1,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[]}]},{index:"108",name:"Lustrous Pit",flowChartGroup:"random-scenarios",coordinates:{x:1931.5,y:1549.75,width:90,height:68,gridLocation:"C12"},edition:"fh",complexity:2,random:!0,rewards:{morale:2,inspiration:2},monsters:["ice-wraith","snow-imp"],lootDeckConfig:{money:15,lumber:2,metal:2,hide:2,rockroot:1,arrowvine:1,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"ice-wraith",type:"normal"},{name:"ice-wraith",player3:"normal",player4:"normal"},{name:"snow-imp",type:"normal"},{name:"snow-imp",type:"normal"},{name:"snow-imp",type:"elite"},{name:"snow-imp",player4:"normal"},{name:"snow-imp",player4:"normal"},{name:"snow-imp",player4:"elite"}]}]},{index:"109",name:"Furious Factory",flowChartGroup:"random-scenarios",coordinates:{x:1837,y:1153.25,width:155,height:88,gridLocation:"C8"},edition:"fh",complexity:3,random:!0,requirements:[{buildings:["sled"]}],rewards:{collectiveResources:[{type:"metal",value:5}]},monsters:["ancient-artillery"],objectives:[{name:"Metal Cabinet",health:"(2+L)xC/2",marker:"b"}],lootDeckConfig:{money:11,lumber:2,metal:4,rockroot:2,flamefruit:1},rules:[{round:"true",always:!0,once:!0,sections:["72.3"],figures:[{identifier:{type:"objective",edition:"objective",name:"Metal Cabinet",marker:"b"},type:"killed",value:"4"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"ancient-artillery",type:"elite"},{name:"ancient-artillery",type:"elite"},{name:"ancient-artillery",player3:"elite",player4:"elite"},{name:"ancient-artillery",player4:"elite"}]}]},{index:"110",name:"Guardian's Temple",flowChartGroup:"random-scenarios",errata:"scenario110",coordinates:{x:364.25,y:913,width:103,height:82,gridLocation:"R6"},edition:"fh",complexity:2,random:!0,requirements:[{buildings:["climbing-gear"]}],rewards:{itemBlueprints:["75"]},monsters:["living-spirit","ruined-machine","shrike-fiend"],objectives:[{name:"Ice Pillar",marker:"a",actions:[{type:"custom",value:"Can only be destoyed when a Ruined Machine dies in an adjacent hex"}]},{name:"Ice Pillar",marker:"b",actions:[{type:"custom",value:"Can only be destoyed when a Ruined Machine dies in an adjacent hex"}]},{name:"Ice Pillar",marker:"c",actions:[{type:"custom",value:"Can only be destoyed when a Ruined Machine dies in an adjacent hex"}]}],lootDeckConfig:{money:6,lumber:2,metal:3,hide:2,rockroot:1,corpsecap:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"curse:2",scenarioEffect:!0}]},{round:"R % 3 == 1",start:!0,note:"Ice Pillars %game.mapMarker.a% active",figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Ice Pillar",marker:"a"}}]},{round:"R % 3 == 2",start:!0,note:"Ice Pillars %game.mapMarker.b% active",figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Ice Pillar",marker:"b"}}]},{round:"R % 3 == 0",start:!0,note:"Ice Pillars %game.mapMarker.c% active",figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Ice Pillar",marker:"c"}}]},{round:"R % 2 == 0",start:!0,spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},marker:"d"}]},{round:"R > 1 && R % 2 == 1",start:!0,spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},marker:"d"}]},{round:"true",always:!0,once:!0,sections:["186.3"],figures:[{identifier:{type:"objective",edition:"objective",name:"Ice Pillar"},type:"dead",value:"2"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"living-spirit",type:"normal"},{name:"living-spirit",player3:"elite",player4:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"shrike-fiend",type:"normal"},{name:"shrike-fiend",player4:"normal"}],objectives:[1,1,2,2,3,3]}]},{index:"111",name:"Ice Cave",flowChartGroup:"random-scenarios",errata:"scenario111",coordinates:{x:655,y:384.5,width:103,height:70,gridLocation:"O1"},edition:"fh",complexity:3,random:!0,requirements:[{buildings:["sled"]}],rewards:{items:["236"]},monsters:["frost-demon","hound"],lootDeckConfig:{money:10,lumber:1,metal:3,hide:3,corpsecap:1,arrowvine:2},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"muddle",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"frost-demon",type:"normal"},{name:"frost-demon",type:"normal"},{name:"frost-demon",player3:"normal",player4:"normal"},{name:"frost-demon",player4:"normal"},{name:"hound",type:"elite"},{name:"hound",type:"elite"},{name:"hound",player3:"elite",player4:"elite"},{name:"hound",player4:"elite"}]}]},{index:"112",name:"Raised by Wolves",flowChartGroup:"random-scenarios",coordinates:{x:1696,y:1866.25,width:144,height:93,gridLocation:"FR"},edition:"fh",complexity:1,random:!0,rewards:{experience:15},monsters:["burrowing-blade","earth-demon","hound"],allies:["hound"],lootDeckConfig:{money:8,lumber:1,metal:3,hide:5,rockroot:2,axenut:1},rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"monster",edition:"fh",name:"hound"},type:"killed",value:"1"}],finish:"lost"},{round:"true",always:!0,alwaysApply:!0,statEffects:[{identifier:{type:"monster",edition:"fh",name:"hound"},statEffect:{health:"Hx2",absolute:!0},note:"%data.scenario.rules.fh.112%"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"burrowing-blade",type:"elite"},{name:"burrowing-blade",player3:"normal",player4:"normal"},{name:"burrowing-blade",player4:"normal"},{name:"earth-demon",type:"normal"},{name:"earth-demon",type:"elite"},{name:"earth-demon",player3:"normal",player4:"elite"},{name:"hound",type:"normal"},{name:"hound",type:"elite"}]}]},{index:"113",name:"Lush Grotto",flowChartGroup:"other",coordinates:{x:1496.75,y:1241.75,width:89,height:71,gridLocation:"G9"},edition:"fh",complexity:1,rewards:{custom:"Gain any 4 collective herb resources"},monsters:["chaos-demon","forest-imp"],lootDeckConfig:{money:8,lumber:4,rockroot:2,arrowvine:2,flamefruit:1,snowthistle:2,axenut:1,corpsecap:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"chaos-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"chaos-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"forest-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"forest-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"forest-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"forest-imp",player3:"normal",player4:"normal"}]}]},{index:"114",name:"Work Freeze",flowChartGroup:"other",coordinates:{x:660.75,y:983.5,width:95,height:77,gridLocation:"O7"},edition:"fh",complexity:2,rewards:{collectiveResources:[{type:"hide",value:5}],calendarSection:["86.1-4"]},monsters:["hound","polar-bear","snow-imp"],objectives:[{name:"Ice Pillar",health:"(2xL)+2",marker:"b",tags:["ice-pillar-b"],actions:[{type:"shield",value:"[L/2{$math.ceil}]"}]},{name:"Ice Pillar",health:"(2xL)+2",actions:[{type:"shield",value:"[L/2{$math.ceil}]"}]}],lootDeckConfig:{money:10,metal:3,hide:4,axenut:1,snowthistle:2},rules:[{round:"R % 2 == 1",spawns:[{monster:{name:"hound",player2:"normal",player3:"elite"},marker:"c"},{monster:{name:"polar-bear",player4:"normal"},marker:"c"}]},{round:"R % 2 == 0",spawns:[{monster:{name:"snow-imp",player2:"normal",player3:"elite",player4:"normal"},marker:"d"},{monster:{name:"snow-imp",player4:"elite"},marker:"d"}]},{round:"true",always:!0,once:!0,sections:["159.1"],figures:[{identifier:{type:"objective",edition:"objective",name:"Ice Pillar",tags:["ice-pillar-b"]},type:"dead"}]}],rooms:[{roomNumber:1,ref:"13-A",initial:!0,monster:[{name:"hound",player2:"normal",player3:"normal",player4:"elite"},{name:"hound",player3:"normal",player4:"normal"},{name:"hound",player4:"normal"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",type:"normal"},{name:"snow-imp",type:"elite"},{name:"snow-imp",player3:"normal",player4:"elite"}],objectives:[1,1,2,2]}]},{index:"115",name:"Pylon Problems",flowChartGroup:"other",coordinates:{x:708.25,y:1071.5,width:85,height:71,gridLocation:"O8"},edition:"fh",complexity:2,rewards:{experience:15,calendarSectionManual:[{section:"66.2",hint:"Add %data.section:66.2% to the calendar in X+1 weeks, where X is the number of pylons destroyed."}]},monsters:["algox-guard","algox-snowspeaker","snow-imp"],objectives:[{name:"Ice Pillar",health:"L+3",actions:[{type:"custom",value:"When destroyed, replace with rubble and all figures in adjacent hexes suffer trap damage",small:!0}]}],lootDeckConfig:{money:8,lumber:3,metal:3,hide:3,arrowvine:1,rockroot:1,snowthistle:1},rules:[{round:"R == 5",start:!0,spawns:[{monster:{name:"algox-guard",player2:"normal",player3:"normal",player4:"elite"},marker:"a"},{monster:{name:"algox-guard",player2:"normal",player3:"normal",player4:"elite"},marker:"a"},{monster:{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"},marker:"b"},{monster:{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"},marker:"b"}]},{round:"R == 8",start:!0,spawns:[{monster:{name:"algox-snowspeaker",player2:"normal",player3:"elite",player4:"elite"},marker:"a"},{monster:{name:"algox-snowspeaker",player2:"normal",player3:"elite",player4:"elite"},marker:"a"},{monster:{name:"snow-imp",player2:"normal",player3:"normal",player4:"elite"},marker:"b",count:"2"},{monster:{name:"snow-imp",player2:"normal",player3:"normal",player4:"elite"},marker:"b",count:"2"}]},{round:"R == 10",finish:"won"}],rooms:[{roomNumber:1,ref:"13-A",initial:!0,monster:[{name:"algox-guard",type:"normal"},{name:"algox-guard",type:"normal"},{name:"algox-guard",player4:"normal"},{name:"algox-snowspeaker",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-snowspeaker",player3:"elite",player4:"elite"}],objectives:[1,1,1]},{roomNumber:2,ref:"11-C",initial:!0,monster:[{name:"snow-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"snow-imp",player4:"normal"}],objectives:[1,1,1]},{roomNumber:3,ref:"02-G",initial:!0,monster:[{name:"snow-imp",type:"elite"}],objectives:[1]}]},{index:"116",name:"Caravan Guards",flowChartGroup:"other",coordinates:{x:648.25,y:1144.5,width:143,height:64,gridLocation:"O8"},edition:"fh",complexity:2,monsters:["algox-archer","algox-guard","algox-icespeaker","algox-scout"],objectives:[{name:"Caravan Wagon",health:"Cx2+L",escort:!0,initiative:50,tags:["caravan-wagon"],actions:[{type:"move",value:"3",subActions:[{type:"custom",value:"Focus on moving towards %game.mapMarker.b%"}]}]}],lootDeckConfig:{money:5,lumber:4,metal:4,hide:4,rockroot:1,arrowvine:1,axenut:1},rules:[{round:"R > 1 && R < 6",start:!0,objectiveSpawns:[{objective:{index:1,name:"Caravan Wagon",tags:["caravan-wagon"],escort:!0},marker:"a"}]},{round:"R == 3",start:!0,spawns:[{monster:{name:"algox-icespeaker",player2:"normal",player3:"normal",player4:"elite"},marker:"c"},{monster:{name:"algox-icespeaker",player2:"normal",player3:"normal",player4:"elite"},marker:"c"},{monster:{name:"algox-archer",player3:"elite",player4:"normal"},marker:"d"},{monster:{name:"algox-archer",player3:"elite",player4:"normal"},marker:"d"}]},{round:"R == 6",start:!0,spawns:[{monster:{name:"algox-archer",player2:"normal",player3:"normal",player4:"elite"},marker:"c"},{monster:{name:"algox-archer",player2:"normal",player3:"normal",player4:"elite"},marker:"c"},{monster:{name:"algox-icespeaker",type:"normal"},marker:"d"},{monster:{name:"algox-icespeaker",type:"normal"},marker:"d"},{monster:{name:"algox-guard",player3:"normal",player4:"normal"},marker:"d"},{monster:{name:"algox-guard",player3:"normal",player4:"normal"},marker:"d"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"algox-archer",type:"normal"},{name:"algox-archer",player4:"elite"},{name:"algox-guard",type:"normal"},{name:"algox-scout",type:"normal"},{name:"algox-scout",player3:"elite",player4:"elite"}],objectives:[1]}]},{index:"117",name:"A Waiting Game",flowChartGroup:"other",errata:"scenario117",coordinates:{x:1646,y:983.75,width:98,height:75,gridLocation:"F7"},edition:"fh",complexity:2,rewards:{gold:10,collectiveResources:[{type:"hide",value:4}]},monsters:["hound","polar-bear","vermling-priest","vermling-scout"],lootDeckConfig:{money:6,lumber:4,hide:6,axenut:1,arrowvine:2,flamefruit:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0}]},{round:"true",always:!0,once:!0,figures:[{identifier:{type:"monster",edition:"fh",name:"polar-bear"},type:"killed",value:"3"}],finish:"lost"}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"hound",type:"normal"},{name:"hound",type:"normal"},{name:"hound",type:"elite"},{name:"hound",type:"elite"},{name:"hound",player4:"normal"},{name:"hound",player4:"normal"},{name:"polar-bear",type:"elite"},{name:"polar-bear",type:"elite"},{name:"polar-bear",type:"elite"},{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"},{name:"vermling-priest",type:"normal"},{name:"vermling-priest",type:"elite"},{name:"vermling-priest",player3:"normal",player4:"normal"},{name:"vermling-priest",player4:"elite"},{name:"vermling-scout",type:"normal"},{name:"vermling-scout",type:"normal"},{name:"vermling-scout",player2:"normal",player3:"elite",player4:"elite"},{name:"vermling-scout",player2:"normal",player3:"elite",player4:"elite"},{name:"vermling-scout",player3:"normal",player4:"normal"},{name:"vermling-scout",player4:"normal"}]}]},{index:"118",name:"Lurker Necromancy",flowChartGroup:"other",coordinates:{x:1620,y:747.5,width:101,height:73,gridLocation:"F4"},edition:"fh",complexity:1,requirements:[{buildings:["sled"]}],rewards:{custom:"Trade all numbered and lettered tokens in for loot cards",itemBlueprints:["66"]},monsters:["frozen-corpse","frozen-corpse-scenario-118","living-bones","living-bones-scenario-118"],lootDeckConfig:{money:8,lumber:3,metal:3,hide:3,rockroot:1,snowthistle:2},rules:[{round:"true",always:!0,figures:[{identifier:{type:"monster",name:"frozen-corpse",number:"N % 2 == 1"},type:"transferEntities",value:"frozen-corpse-scenario-118"},{identifier:{type:"monster",name:"living-bones",number:"N % 2 == 1"},type:"transferEntities",value:"living-bones-scenario-118"},{identifier:{type:"monster",name:"frozen-corpse-scenario-118",number:"N % 2 == 0"},type:"transferEntities",value:"frozen-corpse"},{identifier:{type:"monster",name:"living-bones-scenario-118",number:"N % 2 == 0"},type:"transferEntities",value:"living-bones"}],alwaysApply:!0}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"frozen-corpse",type:"elite"},{name:"frozen-corpse",player3:"normal",player4:"elite"},{name:"living-bones",type:"normal"},{name:"living-bones",player4:"normal"}]}]},{index:"119",name:"Radiant Dust",flowChartGroup:"other",coordinates:{x:428.5,y:365.5,width:104,height:70,gridLocation:"Q1"},edition:"fh",complexity:2,requirements:[{campaignSticker:["into-the-forest"]}],rewards:{custom:"Spend any remaining dust to gain the following: <br><br> Spend seven (once only): Scepter of Control Item #203 <br>Spend one: Any 1 material resource <br>Spend two: Any 1 herb resource"},monsters:["burrowing-blade","rending-drake","spitting-drake"],objectives:[{name:"Infuser",escort:!0,health:"3xL+5",initiative:99,marker:"a",actions:[{type:"move",value:2,small:!0},{type:"custom",value:"At end of turn, spend dust to:",small:!0,subActions:[{type:"custom",value:"Spend 1: %game.action.move%2",small:!0},{type:"custom",value:"Spend 2:",small:!0,subActions:[{type:"heal",value:"L+2",small:!0,subActions:[{type:"specialTarget",value:"self",small:!0}]}]},{type:"custom",value:"Spend 5: Convert monster within %game.action.range%2",small:!0}]}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"burrowing-blade",player2:"normal",player3:"elite",player4:"elite"},{name:"rending-drake",type:"normal"},{name:"spitting-drake",player2:"normal",player3:"normal",player4:"elite"}],objectives:[1]}]},{index:"120",name:"Under the Influence",flowChartGroup:"other",coordinates:{x:308.25,y:2493.5,width:119,height:95,gridLocation:"FR"},edition:"fh",complexity:1,rewards:{morale:1,collectiveResources:[{type:"lumber",value:2}],calendarSection:["76.3-10"]},monsters:["city-guard","hound"],lootDeckConfig:{money:8,lumber:4,metal:4,hide:4},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"muddle",scenarioEffect:!0},{identifier:{type:"character",name:".*"},type:"amAdd",value:"curse:1",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"city-guard",type:"elite"},{name:"city-guard",player2:"normal",player3:"normal",player4:"elite"},{name:"city-guard",player2:"normal",player3:"normal",player4:"elite"},{name:"city-guard",player2:"normal",player3:"elite",player4:"elite"},{name:"hound",player2:"normal",player3:"elite",player4:"elite"},{name:"hound",player3:"normal",player4:"elite"}]}]},{index:"121",name:"Black Memories",flowChartGroup:"other",coordinates:{x:1930.75,y:1640.5,width:100,height:97,gridLocation:"C13"},edition:"fh",complexity:3,monsters:["vermling-priest","vermling-scout"],lootDeckConfig:{money:9,lumber:3,metal:3,hide:2,rockroot:1,axenut:1,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"vermling-priest",player2:"normal",player3:"normal",player4:"elite"},{name:"vermling-priest",player2:"normal",player3:"elite",player4:"elite"},{name:"vermling-scout",type:"elite"},{name:"vermling-scout",player3:"normal",player4:"normal"},{name:"vermling-scout",player4:"normal"}]}]},{index:"122",name:"The Eternal Crave",flowChartGroup:"other",coordinates:{x:1348.25,y:1335.75,width:87,height:83,gridLocation:"H10"},edition:"fh",complexity:2,lootDeckConfig:{money:6,lumber:3,metal:3,hide:4,rockroot:2,axenut:1,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[]}]},{index:"123",name:"The Titan",flowChartGroup:"other",coordinates:{x:1116.25,y:791,width:76,height:88,gridLocation:"K5"},edition:"fh",complexity:3,rewards:{morale:1,inspiration:1},monsters:["ancient-artillery"],lootDeckConfig:{money:9,lumber:2,metal:6,flamefruit:1,snowthistle:1,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"disarm",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"124",name:"A Growing Problem",flowChartGroup:"other",coordinates:{x:1894.5,y:2011.25,width:105,height:110,gridLocation:"FR"},edition:"fh",complexity:2,unlocks:["125"],rewards:{experience:15},monsters:["living-bones","living-spirit"],lootDeckConfig:{money:10,lumber:4,metal:2,hide:2,snowthistle:1,arrowvine:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"curse:2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"living-bones",player2:"normal",player3:"normal",player4:"elite"},{name:"living-bones",player2:"normal",player3:"elite",player4:"elite"},{name:"living-spirit",type:"elite"},{name:"living-spirit",player3:"normal",player4:"elite"}]}]},{index:"125",name:"The Longest Second",flowChartGroup:"other",coordinates:{x:1998.5,y:1974.75,width:100,height:111,gridLocation:"FR"},edition:"fh",complexity:2,rewards:{items:["194"]},monsters:["robotic-boltshooter","ruined-machine"],lootDeckConfig:{money:9,lumber:2,metal:4,hide:2,rockroot:1,corpsecap:1,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"poison",scenarioEffect:!0},{identifier:{type:"character",name:".*"},type:"gainCondition",value:"muddle",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",player3:"normal",player4:"elite"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player4:"elite"}]}]},{index:"126",name:"Joseph the Lion",flowChartGroup:"other",coordinates:{x:2042.75,y:1898.5,width:105,height:64,gridLocation:"FR"},edition:"fh",complexity:2,rewards:{gold:10},monsters:["ice-wraith","living-spirit","snow-imp"],objectives:[{name:"Helper",escort:!0,health:"2xL+3",initiative:50,marker:"f"},{name:"Helper",escort:!0,health:"2xL+3",initiative:50,marker:"g"},{name:"Helper",escort:!0,health:"2xL+3",initiative:50,marker:"h"},{name:"Crate",health:"L+1"},{name:"Barrel",health:"L+1"}],lootDeckConfig:{money:5,lumber:3,metal:3,hide:2,flamefruit:1,snowthistle:2},rules:[{round:"R == 2 || R == 4",start:!0,spawns:[{monster:{name:"living-spirit",player3:"normal",player4:"normal"},marker:"b"},{monster:{name:"living-spirit",player4:"normal"},marker:"d"},{monster:{name:"snow-imp",player3:"normal"},marker:"d"},{monster:{name:"living-spirit",player2:"normal"},marker:"e"}]},{round:"R == 3",start:!0,spawns:[{monster:{name:"snow-imp",type:"normal"},marker:"a"},{monster:{name:"snow-imp",type:"normal"},marker:"c"},{monster:{name:"snow-imp",player3:"normal",player4:"elite"},marker:"e"}]},{round:"R == 5 || R == 7",start:!0,spawns:[{monster:{name:"ice-wraith",type:"elite"},marker:"a"},{monster:{name:"ice-wraith",player4:"elite"},marker:"c"},{monster:{name:"snow-imp",player3:"elite"},marker:"c"}]},{round:"R == 6 || R == 8 || R == 10 || R == 12",start:!0,spawns:[{monster:{name:"snow-imp",player2:"normal",player3:"normal",player4:"elite"},marker:"b"},{monster:{name:"snow-imp",player2:"normal",player3:"normal",player4:"elite"},marker:"d"},{monster:{name:"snow-imp",player2:"normal",player3:"elite",player4:"elite"},marker:"e"}]},{round:"R == 9 || R == 11",start:!0,spawns:[{monster:{name:"ice-wraith",type:"elite"},marker:"a"},{monster:{name:"ice-wraith",player3:"elite",player4:"elite"},marker:"c"},{monster:{name:"living-spirit",player2:"normal"},marker:"c"},{monster:{name:"ice-wraith",player4:"elite"},marker:"e"}]},{round:"R > 12",start:!0,spawns:[{monster:{name:"ice-wraith",type:"elite"},marker:"a"},{monster:{name:"ice-wraith",player4:"elite"},marker:"b"},{monster:{name:"ice-wraith",type:"elite"},marker:"c"},{monster:{name:"ice-wraith",player4:"elite"},marker:"d"},{monster:{name:"ice-wraith",player3:"elite"},marker:"e"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"snow-imp",type:"normal"},{name:"snow-imp",type:"normal"},{name:"snow-imp",player3:"normal",player4:"elite"}],objectives:[1,1,1,1,1,"2:C>2","3:C>3",4,4,5,5,5]}]},{index:"127",name:"Derelict Freighter",flowChartGroup:"other",coordinates:{x:1557.25,y:2626.75,width:176,height:134,gridLocation:"FR"},edition:"fh",complexity:1,monsters:["ancient-artillery","ice-wraith"],lootDeckConfig:{money:5,lumber:6,metal:4,hide:4,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"ancient-artillery",type:"normal"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ancient-artillery",player4:"normal"},{name:"ice-wraith",type:"normal"},{name:"ice-wraith",type:"elite"},{name:"ice-wraith",player3:"elite",player4:"elite"},{name:"ice-wraith",player4:"normal"}]}]},{index:"128",name:"A Tall Drunken Tale",flowChartGroup:"other",coordinates:{x:1416,y:2373,width:113,height:99,gridLocation:"FR"},edition:"fh",complexity:3,monsters:["abael-scout","lurker-wavethrower","steel-automaton"],lootDeckConfig:{money:2,lumber:3,metal:1,hide:8,snowthistle:1,arrowvine:1,flamefruit:2},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"curse:2",scenarioEffect:!0},{identifier:{type:"character",name:".*"},type:"gainCondition",value:"muddle",scenarioEffect:!0}]},{round:"R == 2",start:!0,sections:["170.1"]},{round:"R == 3",start:!0,sections:["152.2"]},{round:"R == 4",start:!0,sections:["176.3"]},{round:"R == 5",start:!0,sections:["124.3"]},{round:"R == 6",start:!0,sections:["139.1"]},{round:"R == 7",start:!0,sections:["166.2"]},{round:"R == 8",start:!0,sections:["132.4"]},{round:"R == 9",start:!0,sections:["186.4"]},{round:"R == 9",finish:"won"},{round:"true",always:!0,alwaysApply:!0,statEffects:[{identifier:{type:"monster",edition:"fh",name:"steel-automaton"},statEffect:{deck:"imp",absolute:!0},note:"%data.scenario.rules.fh.128.1%"}]},{round:"true",always:!0,alwaysApply:!0,statEffects:[{identifier:{type:"monster",edition:"fh",name:"lurker-wavethrower"},statEffect:{deck:"lurker-wavethrower-scenario-128",absolute:!0},note:"%data.scenario.rules.fh.128.2%"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"abael-scout",type:"normal"},{name:"abael-scout",type:"normal"},{name:"abael-scout",player3:"elite",player4:"normal"},{name:"abael-scout",player4:"normal"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",player3:"normal",player4:"normal"},{name:"steel-automaton",type:"normal"},{name:"steel-automaton",player4:"normal"}]}]},{index:"129",name:"How to Lay an Ambush",flowChartGroup:"other",coordinates:{x:1267.5,y:1217.75,width:103,height:65,gridLocation:"J9"},edition:"fh",complexity:3,unlocks:["130"],forcedLinks:["130"],rewards:{battleGoals:1,custom:"Note the amount of remaining sun agates"},monsters:["city-guard"],allies:["city-guard"],lootDeckConfig:{money:10,lumber:4,metal:2,hide:2,axenut:1,snowthistle:1},rules:[{round:"R == 4",start:!0,sections:["148.5"]},{round:"true",always:!0,alwaysApply:!0,statEffects:[{identifier:{type:"monster",edition:"fh",name:"city-guard"},statEffect:{deck:"archer"},note:"%data.scenario.rules.fh.129%"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"city-guard",type:"elite"},{name:"city-guard",type:"elite"},{name:"city-guard",player2:"elite",player3:"elite"},{name:"city-guard",player2:"elite"}]}]},{index:"130",name:"And Then, a Stream",flowChartGroup:"other",errata:"scenario130",coordinates:{x:1393.5,y:1151.25,width:110,height:65,gridLocation:"H8"},edition:"fh",complexity:3,monsters:["frozen-corpse","lightning-eel","shrike-fiend"],lootDeckConfig:{money:6,lumber:5,metal:2,hide:3,flamefruit:1,arrowvine:2,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"wound",scenarioEffect:!0}]},{round:"R == 5",start:!0,sections:["173.2"]},{round:"R == 8",start:!0,sections:["87.1"]}],rooms:[{roomNumber:1,initial:!0,treasures:[11],monster:[{name:"frozen-corpse",type:"normal"},{name:"frozen-corpse",type:"normal"},{name:"frozen-corpse",player3:"elite",player4:"elite"},{name:"lightning-eel",type:"elite"},{name:"lightning-eel",type:"elite"},{name:"lightning-eel",player3:"elite",player4:"elite"},{name:"lightning-eel",player4:"elite"},{name:"shrike-fiend",type:"normal"},{name:"shrike-fiend",type:"normal"},{name:"shrike-fiend",player4:"elite"}]}]},{index:"131",name:"The Dancing Iceberg",flowChartGroup:"other",coordinates:{x:1138.5,y:453.5,width:98,height:53,gridLocation:"K2"},edition:"fh",complexity:3,rewards:{experience:10,items:["237"]},monsters:["lurker-mindsnipper","lurker-soldier"],rules:[{round:"R == 3",start:!0,sections:["120.2"]},{round:"R == 5",start:!0,sections:["181.5"]},{round:"R == 7",start:!0,sections:["185.1"]},{round:"R == 9",start:!0,sections:["194.2"]},{round:"true",always:!0,alwaysApply:!0,statEffects:[{identifier:{type:"monster",edition:"fh",name:"lurker-wavethrower"},statEffect:{attack:1,deck:"lurker-wavethrower-scenario-131"},note:"%data.scenario.rules.fh.131%"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"lurker-mindsnipper",player2:"elite",player3:"normal",player4:"elite"},{name:"lurker-soldier",type:"normal"},{name:"lurker-soldier",player3:"elite",player4:"elite"}]}]},{index:"132",name:"Temple of Feline Power",flowChartGroup:"job-postings",coordinates:{x:524.5,y:951.5,width:114,height:82,gridLocation:"Q6"},edition:"fh",complexity:2,unlocks:["133"],requirements:[{buildings:["climbing-gear"]}],forcedLinks:["133"],rewards:{inspiration:1},monsters:["ice-wraith","snow-imp"],lootDeckConfig:{money:12,lumber:2,metal:2,hide:2,corpsecap:1,arrowvine:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"damage",value:"2",scenarioEffect:!0},{identifier:{type:"character",name:".*"},type:"gainCondition",value:"wound",scenarioEffect:!0}]},{round:"true",always:!0,once:!0,sections:["171.1"],figures:[{identifier:{type:"monster",edition:"fh",name:".*"},type:"dead"}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"ice-wraith",type:"normal"},{name:"ice-wraith",type:"elite"},{name:"ice-wraith",player3:"normal",player4:"normal"},{name:"ice-wraith",player4:"elite"},{name:"snow-imp",type:"normal"},{name:"snow-imp",type:"elite"},{name:"snow-imp",player3:"normal",player4:"normal"},{name:"snow-imp",player4:"elite"}]}]},{index:"133",name:"Bolt",flowChartGroup:"job-postings",coordinates:{x:551.25,y:880.25,width:90,height:61,gridLocation:"P6"},edition:"fh",complexity:2,rewards:{items:["238"]},monsters:["forest-imp","rending-drake","spitting-drake"],lootDeckConfig:{money:7,lumber:3,metal:3,hide:3,rockroot:2,corpsecap:1,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"forest-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"forest-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"forest-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"rending-drake",type:"normal"},{name:"rending-drake",player3:"normal",player4:"normal"},{name:"rending-drake",player4:"normal"},{name:"spitting-drake",type:"elite"},{name:"spitting-drake",player3:"normal",player4:"normal"}]}]},{index:"134",name:"Tower of Knowledge",flowChartGroup:"other",coordinates:{x:333.5,y:368,width:97,height:92,gridLocation:"R1"},edition:"fh",complexity:3,requirements:[{campaignSticker:["into-the-forest"]}],rewards:{items:["219"]},monsters:["flaming-bladespinner","robotic-boltshooter","ruined-machine"],lootDeckConfig:{money:10,lumber:2,metal:4,hide:2,arrowvine:1,random_item:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"flaming-bladespinner",player2:"normal",player3:"elite",player4:"elite"},{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"135",name:"Belara's Keep",flowChartGroup:"other",coordinates:{x:641.75,y:700.75,width:118,height:63,gridLocation:"O4"},edition:"fh",complexity:3,rewards:{prosperity:2,items:["220"],morale:2,inspiration:1},monsters:["earth-demon","flame-demon","rending-drake","sun-demon"],lootDeckConfig:{money:7,lumber:4,metal:4,hide:2,corpsecap:1,flamefruit:1,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"earth-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"flame-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"rending-drake",type:"normal"},{name:"rending-drake",player3:"normal",player4:"normal"},{name:"sun-demon",type:"normal"},{name:"sun-demon",player3:"normal",player4:"normal"}]}]},{index:"136",name:"Abandoned Hideout",flowChartGroup:"other",coordinates:{x:1206,y:494.5,width:108,height:49,gridLocation:"I2"},edition:"fh",complexity:2,requirements:[{buildings:["boat"]}],rewards:{gold:20,items:["245"]},monsters:["lightning-eel","lurker-wavethrower"],lootDeckConfig:{money:8,lumber:4,hide:4,snowthistle:1,arrowvine:1},rooms:[{roomNumber:1,initial:!0,monster:[{name:"lightning-eel",player2:"normal",player3:"normal",player4:"elite"},{name:"lightning-eel",player2:"normal",player3:"normal",player4:"elite"},{name:"lightning-eel",player2:"normal",player3:"elite",player4:"elite"},{name:"lightning-eel",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",player3:"normal",player4:"normal"},{name:"lurker-wavethrower",player4:"normal"}]}]},{index:"137",name:"Pirate Queen's Haul",flowChartGroup:"other",coordinates:{x:1829.25,y:648.25,width:101,height:67,gridLocation:"D3"},edition:"fh",complexity:1,requirements:[{buildings:["boat"]}],rewards:{gold:30,prosperity:2,custom:"Add one +1 sticker to a money loot card (the card gives one extra money token when resolved)",morale:3},monsters:["forest-imp","piranha-pig","polar-bear"],lootDeckConfig:{money:12,lumber:4,metal:4,hide:4,random_item:1},rules:[{round:"R == 1",start:!0,figures:[{identifier:{type:"character",name:".*"},type:"amAdd",value:"minus1:2",scenarioEffect:!0}]}],rooms:[{roomNumber:1,initial:!0,monster:[{name:"forest-imp",type:"normal"},{name:"forest-imp",type:"normal"},{name:"forest-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"forest-imp",player3:"elite",player4:"elite"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",player3:"elite",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"rnd",group:"randomDungeon",name:"Random Dungeon",edition:"fh",hideIndex:!0,initial:!0,lootDeckConfig:{money:12,lumber:2,metal:2,hide:2,snowthistle:1,arrowvine:1,axenut:1,flamefruit:1,corpsecap:1,rockroot:1},rules:[{round:"R == 1",start:!0,randomDungeon:{monsterCount:3,dungeonCount:3,initial:!0}}]}],sections:[{index:"2.1",name:"Howling in the Snow",edition:"fh",parent:"0",marker:"1",monsters:["hound"],rooms:[{roomNumber:1,ref:"16-A",initial:!0,treasures:[47],monster:[{name:"hound",type:"normal"},{name:"hound",type:"normal"},{name:"hound",player2:"elite",player3:"normal",player4:"elite"},{name:"hound",player3:"elite",player4:"normal"},{name:"hound",player4:"elite"},{name:"hound",player4:"elite"}]}]},{index:"2.3",name:"Overrun Barricade",edition:"fh",parent:"43",parentSections:[["117.2"]],marker:"2",resetRound:"hidden",monsters:["ruined-machine","steel-automaton"],rules:[{round:"R % 2 == 0",start:!0,spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},marker:"a"}]},{round:"R % 2 == 1",start:!0,spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},marker:"a"}]}],rooms:[{roomNumber:2,initial:!0,monster:[{name:"ruined-machine",type:"normal"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player3:"elite",player4:"elite"},{name:"ruined-machine",player4:"elite"},{name:"steel-automaton",type:"elite"},{name:"steel-automaton",player3:"normal",player4:"elite"}]}]},{index:"3.1",name:"Stables Built",edition:"fh",conclusion:!0,named:!0,rewards:{items:["247"],events:["winter-road:WR-42","summer-road:SR-42"]}},{index:"3.2",name:"Call of the Harbinger",edition:"fh",parent:"56",monsters:["harbinger-of-shadow-1"],rules:[{round:"true",always:!0,once:!0,note:"Read %data.section:21.2%",figures:[{identifier:{type:"monster",name:"harbinger-of-shadow-1",marker:"1",health:"[Hx2/3{$math.floor}]"},type:"present"},{identifier:{type:"monster",name:"harbinger-of-shadow-1"},type:"setHp",value:"[Hx2/3{$math.floor}]"}]},{round:"true",always:!0,once:!0,note:"Read %data.section:100.2%",figures:[{identifier:{type:"monster",name:"harbinger-of-shadow-1",health:"[H/3{$math.floor}]"},type:"present"},{identifier:{type:"monster",name:"harbinger-of-shadow-1"},type:"setHp",value:"[H/3{$math.floor}]"}]}],rooms:[{roomNumber:4,ref:"15-B",initial:!0,treasures:[4],monster:[{name:"harbinger-of-shadow-1",type:"boss",marker:"1"}]}]},{index:"4.2",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["64.2"],["82.3"],["177.6"]],marker:"3",monsters:["black-imp","burrowing-blade","polar-bear"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"black-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",player3:"normal",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"5.3",name:"A Town in Flames",edition:"fh",parent:"1",marker:"1",monsters:["algox-archer","algox-guard","algox-priest","city-guard"],rooms:[{roomNumber:1,ref:"13-A",initial:!0,monster:[{name:"algox-archer",type:"elite"},{name:"algox-archer",player3:"normal",player4:"normal"},{name:"algox-archer",player3:"normal",player4:"normal"},{name:"algox-guard",type:"normal"},{name:"algox-guard",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-guard",player4:"normal"},{name:"algox-priest",type:"normal"},{name:"algox-priest",player4:"normal"},{name:"city-guard",type:"normal"},{name:"city-guard",type:"normal"},{name:"city-guard",player3:"normal",player4:"normal"},{name:"city-guard",player4:"normal"}]}]},{index:"6.1",name:"Algox Scouting",edition:"fh",parent:"2",parentSections:[["27.1"]],marker:"2",monsters:["algox-guard","algox-scout"],objectives:[{name:"Ice Sheet",health:"(L+2)xC",marker:"a"}],rooms:[{roomNumber:1,ref:"14-B",initial:!0,treasures:[32],monster:[{name:"algox-guard",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-scout",type:"elite"},{name:"algox-scout",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-scout",player3:"normal",player4:"normal"},{name:"algox-scout",player3:"normal",player4:"normal"}],objectives:[1]}]},{index:"6.2",name:"Coin Solution",edition:"fh",conclusion:!0,unlocks:["137"]},{index:"6.3",name:"Algox Scouting",edition:"fh",parent:"86",marker:"1",monsters:["earth-demon","ice-wraith"],rules:[{round:"true",always:!0,once:!0,sections:["181.4"],figures:[{identifier:{type:"objective",edition:"objective",name:"Tree"},type:"dead"}]}],rooms:[{roomNumber:1,ref:"16-A",initial:!0,treasures:[17],monster:[{name:"earth-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"earth-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"ice-wraith",type:"normal"},{name:"ice-wraith",player4:"elite"}],objectives:[1,1]}]},{index:"7.1",name:"The Savvas Seal",edition:"fh",parent:"63",monsters:["savvas-icestorm","savvas-lavaflow"],rules:[{round:"true",always:!0,figures:[{identifier:{type:"monster",name:".*"},type:"permanentCondition",value:"wound"}]},{round:"R == 5",start:!0,always:!0,once:!0,spawns:[{monster:{name:"savvas-icestorm",player2:"normal",player3:"normal",player4:"elite"},marker:"e"}]},{round:"R == 6 || R == 8",start:!0,spawns:[{monster:{name:"savvas-lavaflow",player2:"normal",player3:"elite",player4:"elite"},marker:"d"}]},{round:"R == 7",start:!0,spawns:[{monster:{name:"savvas-icestorm",player2:"normal",player3:"normal",player4:"elite"},marker:"e"}]},{round:"R == 8",sections:["148.1"]}]},{index:"7.2",name:"Frozen Crypt",edition:"fh",parent:"5",marker:"1",resetRound:"visible",monsters:["frozen-corpse"],objectives:[{name:"Altar",health:"(L+3)xC",marker:"a"}],rules:[{round:"R == 3",start:!0,spawns:[{marker:"b",monster:{name:"frozen-corpse",player2:"normal",player3:"elite",player4:"elite"}}]},{round:"R == 5",start:!0,spawns:[{marker:"c",monster:{name:"frozen-corpse",player2:"normal",player3:"normal",player4:"elite"}}]}],rooms:[{roomNumber:1,ref:"13-E",initial:!0,treasures:[46],monster:[{name:"frozen-corpse",type:"elite"},{name:"frozen-corpse",player2:"normal",player3:"normal",player4:"elite"},{name:"frozen-corpse",player2:"normal",player3:"normal",player4:"elite"},{name:"frozen-corpse",player3:"elite",player4:"elite"}],objectives:[1]}]},{index:"7.3",name:"Carpenter Built",edition:"fh",conclusion:!0,named:!0,rewards:{events:["summer-outpost:SO-53","summer-outpost:SO-60"]}},{index:"8.1",name:"The Tempus Forge",edition:"fh",parent:"106",marker:"1",monsters:["flame-demon"],objectives:[{name:"Altar 1",health:"[(L+2)xC/2{$math.floor}]"}],rules:[{round:"true",figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Altar 1"}},{identifier:{type:"character",name:".*"},type:"damage",value:"1"}]}],rooms:[{roomNumber:2,initial:!0,monster:[{name:"flame-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"flame-demon",player2:"normal",player3:"elite",player4:"elite"}],objectives:[1]}]},{index:"8.4",name:"The Eternal Crave",edition:"fh",parent:"122",parentSections:[["172.1"]],marker:"6",monsters:["ice-wraith","snow-imp"],rooms:[{roomNumber:1,ref:"11-B",initial:!0,treasures:[31],monster:[{name:"ice-wraith",type:"elite"},{name:"ice-wraith",player3:"normal",player4:"normal"},{name:"snow-imp",player2:"elite",player3:"normal",player4:"elite"},{name:"snow-imp",player4:"elite"}]}]},{index:"9.2",name:"Destroy the automaton and keep the vermling technology",edition:"fh",parent:"121",conclusion:!0,rewards:{items:["193"]}},{index:"9.3",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"11.1",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"11.2",name:"Hungry Maw is dead",edition:"fh",parent:"122",conclusion:!0,rewards:{gold:10}},{index:"11.6",name:"Tower of Knowledge",edition:"fh",parent:"134",parentSections:[["44.3"],["128.1"]],marker:"a",monsters:["shrike-fiend"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"shrike-fiend",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"11.7",name:"The Lead Door",edition:"fh",parent:"103",marker:"2",monsters:["living-spirit"],objectives:[{name:"Ice Pillar",health:"(2xL)+4"}],rooms:[{roomNumber:2,initial:!0,monster:[{name:"living-spirit",player3:"normal",player4:"elite"}],objectives:[1]}]},{index:"12.1",name:"Crystal Trench",edition:"fh",parent:"8",parentSections:[["21.1"]],marker:"2",monsters:["polar-bear"],rooms:[{roomNumber:3,ref:"02-E",initial:!0,monster:[{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"12.2",name:"Avalanche",edition:"fh",parent:"6",marker:"1",monsters:["frost-demon","snow-imp"],rules:[{round:"true",always:!0,once:!0,note:"Remove all snowdrift tiles from tile 7-B",figures:[{identifier:{type:"objective",edition:"objective",name:"Snowdrift"},type:"remove"}]},{round:"true",always:!0,once:!0,objectiveSpawns:[{objective:{index:1,name:"Snowdrift"},count:"6"},{objective:{index:2,name:"Snow Rock"},count:"2"}]}],rooms:[{roomNumber:1,ref:"02-G",initial:!0,monster:[{name:"frost-demon",player3:"normal",player4:"normal"},{name:"frost-demon",player3:"normal",player4:"normal"},{name:"frost-demon",player4:"normal"},{name:"frost-demon",player4:"normal"},{name:"snow-imp",type:"elite"},{name:"snow-imp",type:"elite"},{name:"snow-imp",type:"elite"}],objectives:[]}]},{index:"12.4",name:"Trading Post Upgraded",edition:"fh",conclusion:!0,named:!0,rewards:{itemBlueprints:["129-137"]}},{index:"12.6",name:"Frozen Fjord",edition:"fh",parent:"13",parentSections:[["44.1"]],marker:"3",monsters:["shrike-fiend","snow-imp"],rooms:[{roomNumber:1,ref:"01-E",initial:!0,monster:[{name:"shrike-fiend",player2:"normal",player3:"elite",player4:"elite"}]},{roomNumber:2,ref:"01-G",initial:!0,monster:[{name:"snow-imp",type:"elite"},{name:"snow-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"snow-imp",player4:"normal"},{name:"snow-imp",player4:"normal"}]}]},{index:"13.2",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"13.3",name:"Among the Wreckage",edition:"fh",parent:"54",parentSections:[["167.1"]],marker:"2",objectives:[{name:"Large Cave Rock 4-A",health:"[(L+1)xC/2{$math.floor}]"}],rules:[{round:"true",always:!0,once:!0,sections:["50.1"],figures:[{identifier:{type:"objective",edition:"objective",name:"Large Cave Rock 4-A"},type:"dead"}]}],rooms:[{roomNumber:2,initial:!0,monster:[],objectives:[1]}]},{index:"14.2",name:"Ruins of the Solstice",errata:"section14-2",edition:"fh",parent:"104",parentSections:[["164.3"]],marker:"2",monsters:["earth-demon","forest-imp","frost-demon","savvas-icestorm","wind-demon"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"earth-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"forest-imp",type:"normal"},{name:"forest-imp",type:"normal"},{name:"forest-imp",type:"elite"},{name:"forest-imp",player3:"normal",player4:"elite"},{name:"forest-imp",player4:"elite"},{name:"frost-demon",type:"normal"},{name:"frost-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"savvas-icestorm",player4:"normal"}]}]},{index:"14.3",name:"Temple of Liberation",edition:"fh",parent:"20",monsters:["steel-automaton"],objectives:[{name:"Glowing Orb",health:"(L+2)xC"}],rules:[{round:"true",always:!0,once:!0,spawns:[{monster:{name:"steel-automaton",player2:"normal",player3:"elite",player4:"elite"},count:"2"}]}],rooms:[{roomNumber:2,initial:!0,objectives:[1]}]},{index:"15.1",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["93.1"]],marker:"6",rooms:[{roomNumber:3,initial:!0,monster:[]}]},{index:"15.2A",name:"Snowdancer is dead",edition:"fh",parent:"4A",parentSections:[["75.1A"]],conclusion:!0,unlocks:["6","7","8"],rewards:{unlockCharacter:"fist"}},{index:"15.2B",name:"Snowdancer is dead",edition:"fh",parent:"4B",parentSections:[["75.1B"]],conclusion:!0,unlocks:["6","7","8"],rewards:{unlockCharacter:"fist"}},{index:"15.3",name:"Derelict Elevator",edition:"fh",parent:"16",parentSections:[["44.2"]],monsters:[],rules:[{round:"true",always:!0,once:!0,note:"Place one debris in each %game.mapMarker.c%. Any figure occupying %game.mapMarker.c% suffers trap damage and is placed in the closest empty hex."},{round:"true",always:!0,once:!0,note:"Pebbles rain down at %game.mapMarker.d%,%game.mapMarker.e% and %game.mapMarker.f%. This has no effect yet."}]},{index:"15.4",name:"The True Oak Triangulated",edition:"fh",conclusion:!0,unlocks:["70"]},{index:"16.2",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"16.3",name:"Beneath Sea and Stone",edition:"fh",parent:"49",parentSections:[["94.2"]],marker:"2",monsters:["deep-terror","frost-demon"],objectives:[{name:"Ice Pillar",health:"[(L+1)xC/2{$math.floor}]",marker:"b"}],rooms:[{roomNumber:1,ref:"04-A",initial:!0,monster:[{name:"deep-terror",type:"elite"},{name:"deep-terror",type:"elite"},{name:"deep-terror",player2:"normal",player3:"normal",player4:"elite"},{name:"deep-terror",player2:"normal",player3:"normal",player4:"elite"},{name:"deep-terror",player4:"normal"},{name:"frost-demon",player3:"normal",player4:"normal"}],objectives:[1]}]},{index:"17.1",name:"Unfettered Shard",edition:"fh",parent:"41",parentSections:[["65.2"]],monsters:["deep-terror","living-doom","night-demon"],rules:[{round:"R % 2 == 1",spawns:[{monster:{name:"deep-terror",player2:"normal",player3:"normal",player4:"elite"},marker:"c"}]},{round:"true",always:!0,disableRules:[{edition:"fh",scenario:"65.2",index:0,section:!0}]}],rooms:[{roomNumber:2,initial:!0,monster:[{name:"deep-terror",type:"elite"},{name:"living-doom",player2:"normal",player3:"normal",player4:"elite"},{name:"night-demon",type:"normal"},{name:"night-demon",player3:"normal",player4:"normal"},{name:"night-demon",player3:"normal",player4:"normal"}]}]},{index:"17.3",name:"Haunted Vault",edition:"fh",parent:"17",parentSections:[["19.3"]],marker:"5",monsters:["living-doom","living-spirit"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"living-doom",type:"elite"},{name:"living-spirit",player3:"normal",player4:"normal"},{name:"living-spirit",player4:"normal"}]}]},{index:"17.4",name:"Puzzle Solution",edition:"fh",parent:"122",conclusion:!0,named:!0,rewards:{experience:15,battleGoals:1}},{index:"17.2",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["96"]},{index:"18.1",name:"Underground Station",edition:"fh",parent:"96",marker:"1",monsters:["ancient-artillery","black-imp","rending-drake"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"ancient-artillery",type:"normal"},{name:"ancient-artillery",type:"normal"},{name:"ancient-artillery",type:"normal"},{name:"ancient-artillery",player4:"normal"},{name:"black-imp",type:"normal"},{name:"black-imp",type:"normal"},{name:"black-imp",type:"elite"},{name:"black-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"black-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"black-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"black-imp",player4:"elite"},{name:"rending-drake",type:"normal"},{name:"rending-drake",player3:"elite",player4:"elite"},{name:"rending-drake",player4:"normal"}],objectives:[1,1,1]}]},{index:"19.1",name:"The Lurker Problem",edition:"fh",parent:"78",blockedSections:["59.2"],marker:"1",monsters:["lightning-eel","lurker-soldier","lurker-wavethrower"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"lightning-eel",type:"normal"},{name:"lightning-eel",player3:"normal",player4:"normal"},{name:"lurker-soldier",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",player4:"elite"}]}]},{index:"19.3",name:"Haunted Vault",edition:"fh",parent:"17",parentSections:[["62.3"]],marker:"4",resetRound:"hidden",rules:[{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 09-B",spawns:[{monster:{name:"living-spirit",type:"elite"},count:0,manual:!0}]},{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 02-K",spawns:[{monster:{name:"ice-wraith",type:"elite"},count:0,manual:!0}]},{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 02-I",spawns:[{monster:{name:"living-doom",type:"normal"},count:0,manual:!0}]},{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 02-A",spawns:[{monster:{name:"ice-wraith",type:"normal"},count:0,manual:!0}]}]},{index:"19.2",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["83"]},{index:"20.1",name:"Thawed Wood",edition:"fh",parent:"33",marker:"1",resetRound:"hidden",monsters:["earth-demon","flame-demon"],rules:[{round:"R % 2 == 0",start:!0,spawns:[{monster:{name:"black-imp",player2:"normal"},marker:"b"}]},{round:"R > 1",start:!0,spawns:[{monster:{name:"black-imp",player3:"normal",player4:"elite"},marker:"b"}]}],rooms:[{roomNumber:1,ref:"16-B",initial:!0}]},{index:"20.3",name:"A Grand View",edition:"fh",parent:"94",parentSections:[["150.2"]],marker:"2",monsters:["ancient-artillery","ruined-machine"],rooms:[{roomNumber:2,initial:!0,treasures:[12],monster:[{name:"ancient-artillery",type:"normal"},{name:"ruined-machine",player4:"elite"}]}]},{index:"21.1",name:"Crystal Trench",edition:"fh",parent:"8",marker:"1",resetRound:"hidden",monsters:["hound","polar-bear","snow-imp"],rules:[{round:"R % 2 == 0",start:!0,note:"%data.section.rules.fh.21-1.1%",spawns:[{monster:{name:"hound",player2:"normal",player3:"normal",player4:"elite"}}]},{round:"R % 2 == 1",start:!0,note:"%data.section.rules.fh.21-1.1%",spawns:[{monster:{name:"hound",player2:"normal",player3:"elite",player4:"elite"}}]}],rooms:[{roomNumber:2,ref:"07-B",initial:!0,monster:[{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",type:"elite"},{name:"snow-imp",player3:"normal",player4:"normal"},{name:"snow-imp",player4:"normal"}]}]},{index:"22.1A",name:"Frozen Fist is dead",edition:"fh",parent:"4A",parentSections:[["75.1A"]],conclusion:!0,unlocks:["5","7","8"],rewards:{unlockCharacter:"snowflake"}},{index:"22.1B",name:"Frozen Fist is dead",edition:"fh",parent:"4B",parentSections:[["75.1B"]],conclusion:!0,unlocks:["5","7","8"],rewards:{unlockCharacter:"snowflake"}},{index:"22.2",name:"Avalanche",edition:"fh",parent:"6",parentSections:[["12.2"]],marker:"2",monsters:["frost-demon","snow-imp"],rules:[{round:"true",always:!0,once:!0,note:"Remove all snowdrift and snow rock from tiles 2-E and 2-G",figures:[{identifier:{type:"objective",edition:"objective",name:"Snowdrift|Snow Rock"},type:"remove"}]},{round:"true",always:!0,once:!0,objectiveSpawns:[{objective:{index:1,name:"Snowdrift"},count:"6"},{objective:{index:2,name:"Snow Rock"},count:"2"}]}],rooms:[{roomNumber:1,ref:"13-A",initial:!0,monster:[{name:"frost-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"frost-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",type:"elite"},{name:"snow-imp",type:"elite"},{name:"snow-imp",player3:"normal",player4:"elite"},{name:"snow-imp",player3:"normal",player4:"elite"}],objectives:[]}]},{index:"22.4",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["93.1"]],marker:"4",monsters:["burrowing-blade"],rooms:[{roomNumber:19,initial:!0,monster:[{name:"burrowing-blade",type:"normal"}]}]},{index:"23.1",name:"The Way Forward",edition:"fh",parent:"38",resetRound:"visible",monsters:["sun-demon"],rules:[{round:"R % 3 == 0 || R % 3 == 2",start:!0,spawns:[{monster:{name:"hound",player2:"normal",player3:"normal",player4:"elite"},marker:"d"},{monster:{name:"hound",player2:"normal",player3:"normal",player4:"elite"},marker:"e"}]},{round:"R % 3 == 1",start:!0,spawns:[{monster:{name:"polar-bear",player3:"normal",player4:"normal"},marker:"d"},{monster:{name:"polar-bear",player2:"normal",player3:"normal",player4:"normal"},marker:"e"}]}],rooms:[{roomNumber:2,initial:!0,monster:[{name:"sun-demon",type:"elite"},{name:"sun-demon",player3:"normal",player4:"normal"},{name:"sun-demon",player4:"normal"}]}]},{index:"24.2",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["15.1"]],marker:"c",monsters:["black-imp","burrowing-blade","polar-bear"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"black-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",player3:"normal",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"25.1",name:"Collection's Capstone",edition:"fh",parent:"88",parentSections:[["79.3"]],marker:"2",resetRound:"hidden",monsters:["frost-demon","savvas-icestorm","the-collector","wind-demon"],rules:[{round:"R % 4 == 0",start:!0,spawns:[{monster:{name:"savvas-lavaflow",player2:"normal",player3:"normal",player4:"elite"},marker:"a"}]},{round:"R % 4 == 2",start:!0,spawns:[{monster:{name:"savvas-lavaflow",player2:"normal",player3:"elite",player4:"elite"},marker:"a"}]}],rooms:[{roomNumber:2,initial:!0,treasures:[6],monster:[{name:"savvas-icestorm",player2:"normal",player3:"elite",player4:"elite"},{name:"the-collector",type:"boss"}]}]},{index:"25.2",name:"Trading Post Built",edition:"fh",conclusion:!0,named:!0,rewards:{events:["winter-outpost:WO-80","summer-outpost:SO-61","winter-road:WR-41"]}},{index:"25.3",name:"Haunted Vault",errata:"section25-3",edition:"fh",parent:"17",parentSections:[["42.3"]],marker:"2",resetRound:"hidden",rules:[{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 09-B",spawns:[{monster:{name:"living-spirit",type:"elite"},count:0,manual:!0}]},{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 02-K",spawns:[{monster:{name:"ice-wraith",type:"elite"},count:0,manual:!0}]},{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 02-I",spawns:[{monster:{name:"living-doom",type:"normal"},count:0,manual:!0}]}]},{index:"26.1",name:"Glowing Catacombs",edition:"fh",parent:"9",parentSections:[["78.2"]],marker:"2",monsters:["ooze"],objectives:[{name:"Switch",health:1,marker:"a"}],rules:[{round:"true",start:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Switch",marker:"a"},type:"present"}],spawns:[{monster:{name:"ooze",player2:"normal",player3:"elite",player4:"elite"},count:"F"}]}],rooms:[{roomNumber:3,ref:"08-B",initial:!0,monster:[{name:"ooze",player2:"normal",player3:"normal",player4:"elite"},{name:"ooze",player2:"normal",player3:"normal",player4:"elite"}],objectives:[1,1]}]},{index:"26.4",name:"Random Scenario",edition:"fh",conclusion:!0,named:!0,random:!0,unlocks:["111"]},{index:"27.1",name:"Algox Scouting",edition:"fh",parent:"2",marker:"1",monsters:["algox-archer","algox-priest","algox-scout"],allies:["algox-priest"],rooms:[{roomNumber:1,ref:"11-C",initial:!0,monster:[{name:"algox-archer",type:"elite"},{name:"algox-archer",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-archer",player4:"normal"},{name:"algox-priest",type:"normal"},{name:"algox-scout",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"27.2",name:"Derelict Elevator",edition:"fh",parent:"16",parentSections:[["90.3"]],monsters:["ancient-artillery"],rules:[{round:"true",always:!0,once:!0,note:"Place one debris in each %game.mapMarker.a%. Any figure occupying %game.mapMarker.a% suffers trap damage and is placed in the closest empty hex."},{round:"true",always:!0,once:!0,spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},marker:"h",count:"2"},{monster:{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},marker:"h",count:"2"},{monster:{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},marker:"g"},{monster:{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},marker:"g"}]},{round:"true",always:!0,once:!0,note:"Pebbles rain down at %game.mapMarker.b%. This has no effect yet."}],rooms:[{roomNumber:1,ref:"01-D",initial:!0,monster:[{name:"ancient-artillery",type:"elite"},{name:"ancient-artillery",player3:"normal",player4:"elite"}]}]},{index:"28.2",name:"Algox Offensive",edition:"fh",parent:"3",parentSections:[["30.2"]],marker:"2",monsters:["algox-guard"],rooms:[{roomNumber:1,ref:"02-J",initial:!0,monster:[{name:"algox-guard",type:"normal"},{name:"algox-guard",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-guard",player3:"normal",player4:"normal"}]}]},{index:"28.3",name:"Flotsam",edition:"fh",parent:"73",marker:"1",monsters:["abael-herder","abael-scout","lightning-eel","piranha-pig"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"abael-herder",player2:"normal",player3:"normal",player4:"elite"},{name:"abael-scout",player2:"normal",player3:"normal",player4:"elite"},{name:"abael-scout",player3:"elite",player4:"elite"},{name:"lightning-eel",type:"normal"},{name:"lightning-eel",type:"normal"},{name:"lightning-eel",player3:"normal",player4:"normal"},{name:"lightning-eel",player4:"normal"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",player3:"elite",player4:"elite"},{name:"piranha-pig",player4:"elite"}]}]},{index:"29.1",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"29.2",name:"The Tempus Forge",edition:"fh",parent:"106",parentSections:[["8.1","183.1","184.4","189.2"]],marker:"5",monsters:["blacksmith"],rules:[{round:"true",figures:[{type:"present",identifier:{type:"monster",edition:"fh",name:"blacksmith"}},{identifier:{type:"character",name:".*"},type:"damage",value:"1"},{identifier:{type:"monster",edition:"fh",name:"blacksmith"},type:"heal",value:"2"}],noteTop:"The Blacksmith performs %game.action.push%1, %game.action.target% all characters, %game.action.range%5, %game.condition.muddle%"}],rooms:[{roomNumber:3,initial:!0,treasures:[68],monster:[{name:"blacksmith",type:"boss"}]}]},{index:"29.3",name:"Aesther Outpost",edition:"fh",conclusion:!0,unlocks:["67"]},{index:"29.4",name:"Fleeting Permanence",edition:"fh",parent:"52",marker:"4",monsters:["frost-demon"],rooms:[{roomNumber:2,initial:!0,treasures:[28],monster:[{name:"frost-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"frost-demon",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"30.2",name:"Algox Offensive",edition:"fh",parent:"3",marker:"1",monsters:["algox-archer","algox-guard"],rooms:[{roomNumber:1,ref:"04-A",initial:!0,monster:[{name:"algox-archer",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-archer",player3:"normal",player4:"normal"},{name:"algox-guard",type:"elite"},{name:"algox-guard",player4:"normal"}]}]},{index:"30.4",name:"The Lead Door",edition:"fh",parent:"103",marker:"1",monsters:["living-spirit"],objectives:[{name:"Ice Pillar",health:"(2xL)+4"}],rooms:[{roomNumber:3,initial:!0,monster:[{name:"living-spirit",player3:"normal",player4:"elite"}],objectives:[1]}]},{index:"30.5",name:"Tower of Knowledge",edition:"fh",parent:"134",parentSections:[["33.3"],["147.4"]],marker:"b",monsters:["shrike-fiend"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"shrike-fiend",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"31.1",name:"Blizzard Island",edition:"fh",parent:"48",parentSections:[["130.5"]],marker:"2",monsters:["abael-scout","frost-demon","wind-demon"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"abael-scout",player2:"normal",player3:"elite",player4:"elite"},{name:"frost-demon",type:"elite"},{name:"frost-demon",player3:"normal",player4:"normal"},{name:"frost-demon",player4:"normal"},{name:"wind-demon",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"31.2",name:"The Collection",edition:"fh",parent:"87",marker:"1",monsters:["algox-archer","steel-automaton"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"algox-archer",type:"normal"},{name:"algox-archer",player3:"normal",player4:"normal"},{name:"steel-automaton",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"31.3",name:"Jeweler Built",edition:"fh",conclusion:!0,named:!0,rewards:{events:["winter-outpost:WO-77","summer-road:SR-37"],itemBlueprints:["156-159"]}},{index:"32.1",name:"Orphan's Halls",edition:"fh",parent:"51",marker:"1",monsters:["ancient-artillery","ruined-machine","steel-automaton"],rules:[{round:"true",start:!0,spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},marker:"a"},{monster:{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},marker:"a"},{monster:{name:"steel-automaton",player2:"normal",player3:"elite",player4:"elite"},marker:"b"}]}],rooms:[{roomNumber:2,initial:!0,treasures:[56],monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},{name:"steel-automaton",player2:"normal",player3:"normal",player4:"elite"},{name:"steel-automaton",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"32.2",name:"Crackling Tunnel",edition:"fh",parent:"31",parentSections:[["37.2"]],monsters:["flaming-bladespinner","robotic-boltshooter"],rules:[{round:"true",always:!0,once:!0,note:"All characters must lose one card from their hand or discard pile."}],rooms:[{roomNumber:2,initial:!0,monster:[{name:"flaming-bladespinner",type:"elite"},{name:"flaming-bladespinner",player3:"normal",player4:"elite"},{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"33.3",name:"Tower of Knowledge",edition:"fh",parent:"134",marker:"1",rules:[{round:"true",always:!0,once:!0,sections:["147.4"]}],rooms:[{roomNumber:4,initial:!0,monster:[]}]},{index:"34.1",name:"Temple Entrance",edition:"fh",parent:"12",marker:"1",monsters:["ancient-artillery","night-demon","steel-automaton"],rooms:[{roomNumber:3,ref:"11-E",initial:!0,treasures:[9],monster:[{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"night-demon",type:"normal"},{name:"night-demon",type:"normal"},{name:"night-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"night-demon",player3:"normal",player4:"normal"},{name:"night-demon",player4:"normal"},{name:"steel-automaton",player2:"elite",player3:"elite"},{name:"steel-automaton",player4:"elite"},{name:"steel-automaton",player4:"elite"}]}]},{index:"34.2",name:"Snowspeakers in Trouble",edition:"fh",conclusion:!0,unlocks:["40"]},{index:"35.3",name:"Tavern Upgaded",edition:"fh",conclusion:!0,unlocks:["136"],rewards:{hints:{lootDeckCards:["When drawn, read any one section number depicted."]},morale:1,lootDeckCards:[1419]}},{index:"36.1",name:"A Contained Fire",edition:"fh",parent:"89",parentSections:[["83.1"]],marker:"c",objectives:[{name:"Altar",health:"[(L+1)xC/2{$math.floor}]",marker:"a"},{name:"Altar",health:"[(L+1)xC/2{$math.floor}]",marker:"b"}],rules:[{round:"true",always:!0,once:!0,sections:["119.2"],figures:[{identifier:{type:"objective",edition:"objective",name:"Altar",marker:"a"},type:"dead"},{identifier:{type:"objective",edition:"objective",name:"Altar",marker:"b"},type:"dead"}]}]},{index:"36.2",name:"Tome Solution",edition:"fh",conclusion:!0,unlocks:["135"]},{index:"36.3",name:"A Waiting Game",edition:"fh",parent:"117",marker:"2",monsters:["hound","vermling-priest","vermling-scout"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"hound",player2:"normal",player3:"elite",player4:"elite"},{name:"vermling-priest",player2:"normal",player3:"normal",player4:"elite"},{name:"vermling-scout",type:"elite"},{name:"vermling-scout",player3:"normal",player4:"elite"}]}]},{index:"36.4",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"36.5",name:"Fleeting Permanence",edition:"fh",parent:"52",marker:"3",monsters:["frost-demon","snow-imp"],rooms:[{roomNumber:3,initial:!0,treasures:[43],monster:[{name:"frost-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"37.2",name:"Crackling Tunnel",edition:"fh",parent:"31",monsters:["robotic-boltshooter","steel-automaton"],rules:[{round:"true",always:!0,once:!0,note:"All characters must lose one card from their hand or discard pile."}],rooms:[{roomNumber:3,initial:!0,treasures:[26],monster:[{name:"robotic-boltshooter",player2:"normal",player3:"normal",player4:"elite"},{name:"robotic-boltshooter",player2:"normal",player3:"normal",player4:"elite"},{name:"steel-automaton",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"38.2",name:"Frozen Fjord",edition:"fh",parent:"13",parentSections:[["44.1"]],marker:"2",monsters:["shrike-fiend","snow-imp"],rooms:[{roomNumber:1,ref:"07-D",initial:!0,monster:[{name:"shrike-fiend",player2:"normal",player3:"normal",player4:"elite"},{name:"snow-imp",type:"elite"},{name:"snow-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",player3:"normal",player4:"normal"},{name:"snow-imp",player3:"normal",player4:"normal"}]}]},{index:"38.3",name:"Trading Post Upgraded",edition:"fh",conclusion:!0,named:!0,rewards:{itemBlueprints:["138-146"]}},{index:"38.4",name:"Spire Basement",edition:"fh",parent:"23",marker:"1",monsters:["living-bones","living-spirit"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"living-bones",type:"elite"},{name:"living-bones",player3:"normal",player4:"elite"},{name:"living-spirit",type:"normal"},{name:"living-spirit",type:"normal"},{name:"living-spirit",player2:"normal",player3:"elite",player4:"elite"},{name:"living-spirit",player4:"elite"}]}]},{index:"39.1",name:"Derelict Elevator",edition:"fh",parent:"16",parentSections:[["15.3"]],monsters:["flaming-bladespinner"],rules:[{round:"true",always:!0,once:!0,note:"Place one debris in %game.mapMarker.d%. Any figure occupying %game.mapMarker.d% suffers trap damage and is placed in the closest empty hex."},{round:"true",always:!0,once:!0,spawns:[{monster:{name:"flaming-bladespinner",player2:"normal",player3:"normal",player4:"elite"},marker:"e"},{monster:{name:"flaming-bladespinner",player2:"normal",player3:"elite",player4:"elite"},marker:"f"}],noteTop:"Any figure occupying %game.mapMarker.e% or %game.mapMarker.f% suffers trap damage and is placed in the closest empty hex."}]},{index:"39.2",name:"Living Glacier",edition:"fh",parent:"45",parentSections:[["85.2"]],monsters:["abael-scout","lightning-eel","piranha-pig"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"abael-scout",type:"normal"},{name:"abael-scout",player3:"normal",player4:"elite"},{name:"lightning-eel",type:"elite"},{name:"lightning-eel",type:"elite"},{name:"lightning-eel",type:"elite"},{name:"lightning-eel",type:"elite"},{name:"lightning-eel",player3:"normal",player4:"elite"},{name:"lightning-eel",player3:"normal",player4:"elite"},{name:"lightning-eel",player4:"elite"},{name:"lightning-eel",player4:"elite"},{name:"piranha-pig",type:"elite"},{name:"piranha-pig",player3:"normal",player4:"normal"}]}]},{index:"40.2",name:"Dead Pass",edition:"fh",parent:"46",marker:"1",resetRound:"visible",monsters:["burrowing-blade","frozen-corpse","shrike-fiend"],rules:[{round:"R == 2",start:!0,spawns:[{monster:{name:"burrowing-blade",player2:"normal",player3:"normal",player4:"normal"},marker:"b"},{monster:{name:"burrowing-blade",player4:"normal"},marker:"c"}]},{round:"R == 4",start:!0,spawns:[{monster:{name:"burrowing-blade",player3:"normal",player4:"normal"},marker:"b"},{monster:{name:"burrowing-blade",player2:"normal",player3:"normal",player4:"normal"},marker:"c"},{monster:{name:"burrowing-blade",player2:"normal",player3:"normal",player4:"normal"},marker:"d"}]},{round:"R == 6",start:!0,spawns:[{monster:{name:"frozen-corpse",player2:"normal",player3:"normal",player4:"elite"},marker:"b"},{monster:{name:"frozen-corpse",player2:"normal",player3:"elite",player4:"elite"},marker:"c"}]},{round:"R == 8",start:!0,spawns:[{monster:{name:"shrike-fiend",player3:"normal",player4:"elite"},marker:"b"},{monster:{name:"shrike-fiend",player2:"normal",player3:"elite",player4:"elite"},marker:"c"},{monster:{name:"shrike-fiend",player2:"normal",player3:"normal",player4:"elite"},marker:"d"}]},{round:"R > 9 && R % 2 == 0",start:!0,spawns:[{monster:{name:"frozen-corpse",player2:"normal"},marker:"b"},{monster:{name:"frozen-corpse",player3:"normal",player4:"normal"},marker:"b",count:"2"},{monster:{name:"burrowing-blade",player2:"elite",player3:"elite"},marker:"c"},{monster:{name:"burrowing-blade",player4:"elite"},marker:"c",count:"2"}]}],rooms:[{roomNumber:2,initial:!0,monster:[{name:"frozen-corpse",player2:"normal",player3:"normal",player4:"elite"},{name:"frozen-corpse",player2:"normal",player3:"elite",player4:"elite"},{name:"shrike-fiend",type:"elite"},{name:"shrike-fiend",player3:"normal",player4:"normal"},{name:"shrike-fiend",player4:"normal"}]}]},{index:"41.2",name:"Ice Floes",edition:"fh",parent:"22",monsters:["lightning-eel","lurker-clawcrusher","lurker-wavethrower"],rooms:[{roomNumber:1,ref:"07-G",initial:!0,monster:[{name:"lightning-eel",player2:"normal",player3:"normal",player4:"elite"},{name:"lightning-eel",player2:"normal",player3:"normal",player4:"elite"},{name:"lightning-eel",player2:"normal",player3:"elite",player4:"elite"},{name:"lightning-eel",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-clawcrusher",type:"elite"},{name:"lurker-clawcrusher",player3:"normal",player4:"normal"},{name:"lurker-clawcrusher",player4:"normal"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-wavethrower",player4:"normal"}]}]},{index:"41.4",name:"Flotsam",edition:"fh",parent:"73",parentSections:[["134.3"]]},{index:"41.1",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["87"]},{index:"42.1",name:"Edge of the World",edition:"fh",parent:"7",marker:"1",monsters:["lurker-mindsnipper","lurker-soldier"],rooms:[{roomNumber:2,ref:"11-B",initial:!0,monster:[{name:"lurker-mindsnipper",type:"elite"},{name:"lurker-mindsnipper",player3:"normal",player4:"normal"},{name:"lurker-mindsnipper",player4:"normal"},{name:"lurker-soldier",type:"normal"},{name:"lurker-soldier",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-soldier",player4:"normal"}]}]},{index:"42.2",name:"Request from %game.characterIconColored.astral%",edition:"fh",conclusion:!0,unlocks:["119"]},{index:"42.3",name:"Haunted Vault",edition:"fh",parent:"17",marker:"3",resetRound:"hidden",rules:[{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 09-B",spawns:[{monster:{name:"living-spirit",type:"elite"},count:0,manual:!0}]},{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 02-K",spawns:[{monster:{name:"ice-wraith",type:"elite"},count:0,manual:!0}]},{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 02-I",spawns:[{monster:{name:"living-doom",type:"normal"},count:0,manual:!0}]},{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 02-A",spawns:[{monster:{name:"ice-wraith",type:"normal"},count:0,manual:!0}]}],rooms:[{roomNumber:5,initial:!0,monster:[]}]},{index:"43.1",name:"To Bury the Dead",edition:"fh",parent:"95",monsters:["living-bones"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"living-bones",player2:"normal",player3:"normal",player4:"elite"},{name:"living-bones",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"43.2",name:"Reject the Fish King's Ascension",edition:"fh",parent:"76",parentSections:[["56.2"]],conclusion:!0,unlocks:["77"],forcedLinks:["77"]},{index:"43.4",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"44.1",name:"Frozen Fjord",edition:"fh",parent:"13",marker:"1",monsters:["shrike-fiend","wind-demon"],rooms:[{roomNumber:1,ref:"06-A",initial:!0,monster:[{name:"shrike-fiend",type:"elite"},{name:"shrike-fiend",player3:"normal",player4:"elite"}]},{roomNumber:2,ref:"02-E",initial:!0,treasures:[49],monster:[{name:"wind-demon",type:"normal"},{name:"wind-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"wind-demon",player3:"normal",player4:"normal"}]}]},{index:"44.2",name:"Derelict Elevator",edition:"fh",parent:"16",parentSections:[["27.2"]],monsters:["ancient-artillery","flaming-bladespinner","ruined-machine"],rules:[{round:"true",always:!0,once:!0,spawns:[{monster:{name:"flaming-bladespinner",player2:"normal",player3:"elite",player4:"elite"},marker:"b"}],noteTop:"Any figure occupying %game.mapMarker.b% suffers trap damage and is placed in the closest empty hex."},{round:"true",always:!0,once:!0,spawns:[{monster:{name:"ruined-machine",type:"elite"},marker:"g"},{monster:{name:"ruined-machine",type:"elite"},marker:"g"},{monster:{name:"ruined-machine",player3:"normal",player4:"elite"},marker:"h"},{monster:{name:"ruined-machine",player3:"normal",player4:"elite"},marker:"h"}]},{round:"true",always:!0,once:!0,note:"Pebbles rain down at each %game.mapMarker.c%. This has no effect yet."}],rooms:[{roomNumber:1,ref:"01-B",initial:!0,treasures:[77],monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"44.3",name:"Tower of Knowledge",edition:"fh",parent:"134",marker:"4",rules:[{round:"true",always:!0,once:!0,sections:["128.1"]}],rooms:[{roomNumber:5,initial:!0,monster:[]}]},{index:"45.1",name:"Carrion Ridge",edition:"fh",parent:"47",monsters:["algox-icespeaker","harrower-infester"],rooms:[{roomNumber:2,initial:!0,treasures:[15],monster:[{name:"algox-icespeaker",type:"normal"},{name:"algox-icespeaker",player4:"normal"},{name:"harrower-infester",type:"normal"},{name:"harrower-infester",type:"elite"},{name:"harrower-infester",player3:"normal",player4:"normal"},{name:"harrower-infester",player3:"normal",player4:"elite"}]}]},{index:"45.2",name:"Relic Abandonment",edition:"fh",conclusion:!0,unlocks:["80"],rewards:{morale:-4}},{index:"46.1",name:"The True Oak",edition:"fh",parent:"70",marker:"1",monsters:["city-guard","hound","sun-demon"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"city-guard",player2:"normal",player3:"normal",player4:"elite"},{name:"city-guard",player2:"normal",player3:"elite",player4:"elite"},{name:"hound",player2:"normal",player3:"normal",player4:"elite"},{name:"sun-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"sun-demon",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"46.3",name:"Icespeakers in Trouble",edition:"fh",conclusion:!0,unlocks:["39"]},{index:"47.3",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["4.2"],["141.4"]],marker:"11",monsters:["black-imp","burrowing-blade"],rooms:[{roomNumber:5,initial:!0,monster:[{name:"black-imp",type:"normal"},{name:"black-imp",player4:"normal"},{name:"burrowing-blade",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"47.5",name:"Elemental Cores",edition:"fh",parent:"66",marker:"element:ice",monsters:["earth-demon","frost-demon","night-demon"],rooms:[{roomNumber:2,initial:!0,treasures:["G"],monster:[{name:"earth-demon",type:"normal"},{name:"frost-demon",type:"normal"},{name:"frost-demon",type:"normal"},{name:"frost-demon",player4:"elite"},{name:"night-demon",player3:"normal",player4:"normal"}]}]},{index:"48.1",name:"Realm of Endless Frost",edition:"fh",parent:"21",parentSections:[["51.1"]],marker:"2",monsters:["living-bones","living-spirit"],objectives:[{name:"Crate",health:"L+2"},{name:"Bookshelf",health:"L+2"}],rooms:[{roomNumber:1,ref:"07-E",initial:!0,treasures:[84],monster:[{name:"living-bones",player2:"normal",player3:"elite",player4:"elite"},{name:"living-spirit",type:"normal"},{name:"living-spirit",player3:"normal",player4:"elite"},{name:"living-spirit",player4:"normal"}],objectives:[1,1,1,2,2,2]}]},{index:"48.3",name:"%game.characterIconColored.drifter% Retires",edition:"fh",conclusion:!0,rewards:{calendarSection:["138.1-4"]},retirement:"drifter"},{index:"48.4",name:"Edge of the World",edition:"fh",parent:"7",parentSections:[["42.1"]],marker:"2",monsters:["coral-corpse"],rooms:[{roomNumber:3,ref:"04-A",initial:!0,treasures:[44],monster:[{name:"coral-corpse",type:"boss"}]}]},{index:"49.2",name:"Mining Camp Upgraded",edition:"fh",conclusion:!0,named:!0,rewards:{unlockCharacter:"meteor"}},{index:"50.1",name:"Among the Wreckage",edition:"fh",parent:"54",parentSections:[["13.3"]],monsters:["seeker-of-the-abyss"],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"monster",name:"seeker-of-the-abyss"},type:"setHp",value:"[HP/2{$math.ceil}]"}]}],rooms:[{roomNumber:3,initial:!0,monster:[{name:"seeker-of-the-abyss",type:"boss"}]}]},{index:"50.2",name:"%game.characterIconColored.banner-spear% Retires",edition:"fh",conclusion:!0,rewards:{townGuardAm:["fh-tg-add-plus20"]},retirement:"banner-spear"},{index:"51.1",name:"Realm of Endless Frost",edition:"fh",parent:"21",marker:"1",monsters:["living-bones"],objectives:[{name:"Glowing Orb",health:"(L+2)xC",actions:[{type:"custom",value:"Whenever it suffers damage, all characters and monsters suffer %game.damage:2%"}]}],rules:[{round:"true",figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Glowing Orb"}}],spawns:[{monster:{name:"living-bones",player2:"normal",player3:"normal",player4:"elite"},marker:"a"},{monster:{name:"living-bones",player2:"normal",player3:"elite",player4:"elite"},marker:"b"}]}],rooms:[{roomNumber:1,ref:"15-C",initial:!0,monster:[{name:"living-bones",type:"elite"},{name:"living-bones",player3:"normal",player4:"normal"},{name:"living-bones",player4:"normal"}],objectives:[1]}]},{index:"51.2",name:"The Lurker Problem",edition:"fh",parent:"78",parentSections:[["19.1"]],blockedSections:["91.1"],marker:"3",monsters:["abael-scout","lurker-wavethrower"],rooms:[{roomNumber:3,initial:!0,treasures:[61],monster:[{name:"abael-scout",type:"normal"},{name:"abael-scout",type:"normal"},{name:"abael-scout",player3:"normal",player4:"normal"},{name:"abael-scout",player4:"normal"},{name:"lurker-wavethrower",type:"elite"},{name:"lurker-wavethrower",type:"elite"},{name:"lurker-wavethrower",player3:"elite",player4:"elite"},{name:"lurker-wavethrower",player4:"elite"}]}]},{index:"51.3",name:"%game.characterIconColored.meteor% Retires",edition:"fh",conclusion:!0,rewards:{calendarSection:["174.2-summer:5"]},retirement:"meteor"},{index:"52.1",name:"Nerve Center",edition:"fh",parent:"44",marker:"1",monsters:["ancient-artillery","ruined-machine","steel-automaton"],rules:[{round:"true",figures:[{identifier:{type:"monster",edition:"fh",name:"ancient-artillery",tags:["ancient-artillery-normal-1"]},type:"present"}],spawns:[{monster:{name:"ruined-machine",type:"normal"},summon:!0}]},{round:"true",figures:[{identifier:{type:"monster",edition:"fh",name:"ancient-artillery",tags:["ancient-artillery-normal-2"]},type:"present"}],spawns:[{monster:{name:"ruined-machine",type:"normal"},summon:!0}]},{round:"true",figures:[{identifier:{type:"monster",edition:"fh",name:"ancient-artillery",tags:["ancient-artillery-elite-1"]},type:"present"}],spawns:[{monster:{name:"ruined-machine",type:"elite"},summon:!0}]},{round:"true",figures:[{identifier:{type:"monster",edition:"fh",name:"ancient-artillery",tags:["ancient-artillery-elite-2"]},type:"present"}],spawns:[{monster:{name:"ruined-machine",type:"elite"},summon:!0}]}],rooms:[{roomNumber:2,initial:!0,treasures:[61],monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",tags:["ancient-artillery-normal-1"]},{name:"ancient-artillery",player2:"normal",tags:["ancient-artillery-normal-2"]},{name:"ancient-artillery",player3:"elite",player4:"elite",tags:["ancient-artillery-elite-1"]},{name:"ancient-artillery",player4:"elite",tags:["ancient-artillery-elite-2"]},{name:"ruined-machine",player3:"normal"},{name:"ruined-machine",player3:"normal"},{name:"ruined-machine",player3:"normal"},{name:"steel-automaton",player2:"normal",player3:"normal",player4:"elite"}],objectives:["1:4"]}]},{index:"52.2A",name:"Gaps in the Road A",edition:"fh",parent:"74A",parentSections:[["55.2A"]],marker:"2",monsters:["algox-archer","algox-guard","algox-priest","forest-imp"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"algox-archer",type:"normal"},{name:"algox-archer",player4:"normal"},{name:"algox-guard",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-priest",player2:"normal",player3:"elite",player4:"elite"},{name:"forest-imp",type:"normal"},{name:"forest-imp",type:"normal"},{name:"forest-imp",player3:"normal",player4:"normal"},{name:"forest-imp",player4:"normal"}]}]},{index:"52.2B",name:"Gaps in the Road B",edition:"fh",parent:"74B",parentSections:[["55.2B"]],marker:"2",monsters:["algox-archer","algox-guard","algox-priest","forest-imp"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"algox-archer",type:"normal"},{name:"algox-archer",player4:"normal"},{name:"algox-guard",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-priest",player2:"normal",player3:"elite",player4:"elite"},{name:"forest-imp",type:"normal"},{name:"forest-imp",type:"normal"},{name:"forest-imp",player3:"normal",player4:"normal"},{name:"forest-imp",player4:"normal"}]}]},{index:"53.1",name:"Realm of Endless Frost",edition:"fh",parent:"21",parentSections:[["48.1"]],marker:"3",monsters:["frost-demon","prince-of-frost","snow-imp"],rooms:[{roomNumber:1,ref:"13-E",initial:!0,monster:[{name:"frost-demon",player2:"normal",player3:"normal",player4:"normal"},{name:"frost-demon",player3:"normal",player4:"normal"},{name:"frost-demon",player4:"normal"},{name:"prince-of-frost",type:"boss"}]}]},{index:"53.3",name:"%game.characterIconColored.deathwalker% Retires",edition:"fh",conclusion:!0,rewards:{calendarSection:["176.4-summer:2"]},retirement:"deathwalker"},{index:"54.1",name:"Crystal Fields",edition:"fh",parent:"18",parentSections:[["91.2"]],marker:"2",monsters:["algox-guard","burrowing-blade"],allies:["algox-guard"],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"monster",edition:"fh",name:"algox-guard"},type:"killed",value:"1"}],finish:"lost"}],rooms:[{roomNumber:3,ref:"11-A",initial:!0,monster:[{name:"algox-guard",type:"elite"},{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",type:"elite"},{name:"burrowing-blade",player2:"normal",player3:"elite",player4:"elite"},{name:"burrowing-blade",player3:"normal",player4:"normal"},{name:"burrowing-blade",player4:"normal"},{name:"burrowing-blade",player4:"normal"}]}]},{index:"54.2",name:"%game.characterIconColored.coral% Retires",edition:"fh",conclusion:!0,rewards:{events:["boat:B-15"]},retirement:"coral"},{index:"54.3",name:"Decisive Action",edition:"fh",conclusion:!0,unlocks:["28","30"]},{index:"55.2A",name:"Gaps in the Road A",edition:"fh",parent:"74A",marker:"1",monsters:["algox-archer","algox-guard"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"algox-archer",type:"normal"},{name:"algox-archer",player3:"normal",player4:"elite"},{name:"algox-guard",type:"normal"},{name:"algox-guard",player3:"normal",player4:"elite"}],objectives:[1]}]},{index:"55.2B",name:"Gaps in the Road B",edition:"fh",parent:"74B",marker:"1",monsters:["algox-archer","algox-guard"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"algox-archer",type:"normal"},{name:"algox-archer",player3:"normal",player4:"elite"},{name:"algox-guard",type:"normal"},{name:"algox-guard",player3:"normal",player4:"elite"}],objectives:[1]}]},{index:"55.3",name:"Spire Basement",edition:"fh",parent:"23",parentSections:[["38.4"]],marker:"2",monsters:["hateful-corpse","living-bones"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"hateful-corpse",type:"boss"},{name:"living-bones",type:"normal"},{name:"living-bones",type:"normal"},{name:"living-bones",player3:"normal",player4:"normal"},{name:"living-bones",player4:"normal"}]}]},{index:"56.1",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["64.2"],["141.4"]],marker:"3",monsters:["burrowing-blade","polar-bear"],rooms:[{roomNumber:6,initial:!0,monster:[{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",player4:"normal"},{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"56.2",name:"Apotheosis",edition:"fh",parent:"76",parentSections:[["105.4"]]},{index:"56.3",name:"Enhancer Upgraded",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"Manual (%wip%):Add any of the following items you have unlocked from <i>Forgotten Circles</i> to the available item supply:<br>154, 155, 157, and 163."}},{index:"56.5",name:"%game.characterIconColored.trap% Retires",edition:"fh",conclusion:!0,rewards:{calendarSection:["169.1-6"]},retirement:"trap"},{index:"58.2",name:"Rusted Tunnels",edition:"fh",parent:"25",marker:"1",resetRound:"hidden",monsters:["flaming-bladespinner","robotic-boltshooter"],objectives:[{name:"Large Debris 1",health:"(L+2)xC"}],rules:[{round:"R % 2 == 1",start:!0,figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Large Debris 1"}}],spawns:[{monster:{name:"flaming-bladespinner",player2:"normal",player3:"normal",player4:"elite"},marker:"a"}]},{round:"R % 2 == 0",start:!0,figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Large Debris 1"}}],spawns:[{monster:{name:"flaming-bladespinner",player2:"normal",player3:"elite",player4:"elite"},marker:"a"}]}],rooms:[{roomNumber:2,initial:!0,monster:[{name:"flaming-bladespinner",type:"normal"},{name:"flaming-bladespinner",player2:"normal",player3:"elite",player4:"elite"},{name:"flaming-bladespinner",player4:"normal"},{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"},{name:"robotic-boltshooter",player4:"normal"}],objectives:[1]}]},{index:"59.2",name:"The Lurker Problem",edition:"fh",parent:"78",blockedSections:["19.1"],marker:"2",monsters:["abael-herder","piranha-pig"],rooms:[{roomNumber:4,initial:!0,treasures:[58],monster:[{name:"abael-herder",type:"elite"},{name:"abael-herder",player3:"normal",player4:"elite"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",player3:"normal",player4:"normal"},{name:"piranha-pig",player4:"normal"}]}]},{index:"60.2",name:"%game.characterIconColored.blinkblade% Retires",edition:"fh",conclusion:!0,rewards:{events:["summer-outpost:SO-64"]},retirement:"blinkblade"},{index:"61.1",name:"Orphan's Core",edition:"fh",parent:"58",monsters:["ruined-machine"],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"monster",name:"orphan"},type:"damage",value:"(L+3)xC"}]}],rooms:[{roomNumber:2,initial:!0,treasures:[81],monster:[{name:"ruined-machine",type:"normal"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player4:"normal"},{name:"ruined-machine",player4:"normal"}]}]},{index:"61.2",name:"Rusted Tunnels",edition:"fh",parent:"25",marker:"2",monsters:["robotic-boltshooter","ruined-machine"],objectives:[{name:"Large Debris 2",health:"(L+2)xC"}],rules:[{round:"true",start:!0,figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Large Debris 2"}}],spawns:[{monster:{name:"ruined-machine",player2:"normal",player4:"elite"},marker:"c",count:2},{monster:{name:"ruined-machine",player3:"normal"},marker:"c"},{monster:{name:"ruined-machine",player3:"elite"},marker:"c"}]}],rooms:[{roomNumber:3,initial:!0,treasures:[74],monster:[{name:"robotic-boltshooter",type:"elite"},{name:"robotic-boltshooter",player3:"elite",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player4:"normal"}],objectives:[1]}]},{index:"62.2",name:"Bathysphere Plans",edition:"fh",conclusion:!0,unlocks:["33"]},{index:"62.3",name:"Haunted Vault",edition:"fh",parent:"17",parentSections:[["25.3"]],marker:"1",resetRound:"hidden",rules:[{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 09-B",spawns:[{monster:{name:"living-spirit",type:"elite"},count:0,manual:!0}]},{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 02-K",spawns:[{monster:{name:"ice-wraith",type:"elite"},count:0,manual:!0}]},{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 02-I",spawns:[{monster:{name:"living-doom",type:"normal"},count:0,manual:!0}]},{round:"R == 2",start:!0,once:!0,note:"adjacent to each character on tile 02-A",spawns:[{monster:{name:"ice-wraith",type:"normal"},count:0,manual:!0}]}]},{index:"63.3",name:"Sunless Trench",edition:"fh",parent:"42",marker:"1",monsters:["deep-terror","night-demon"],rooms:[{roomNumber:1,ref:"11-B",initial:!0,monster:[{name:"deep-terror",player2:"normal",player3:"normal",player4:"elite"},{name:"deep-terror",player2:"normal",player3:"elite",player4:"elite"},{name:"deep-terror",player3:"normal",player4:"normal"},{name:"deep-terror",player4:"normal"},{name:"night-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"night-demon",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"64.2",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["110.4"],["177.6"]],marker:"11",monsters:["black-imp","burrowing-blade","polar-bear"],rooms:[{roomNumber:7,initial:!0,monster:[{name:"black-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",player3:"normal",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"64.3",name:"Puzzle Solution",edition:"fh",conclusion:!0,named:!0,unlocks:["62"]},{index:"65.2",name:"Unfettered Shard",edition:"fh",parent:"41",monsters:["deep-terror","night-demon"],rules:[{round:"R % 2 == 1",spawns:[{monster:{name:"night-demon",player2:"normal",player3:"elite",player4:"elite"},marker:"b"}]},{round:"true",always:!0,disableRules:[{edition:"fh",scenario:"41",index:0,section:!1}]}],rooms:[{roomNumber:3,initial:!0,monster:[{name:"deep-terror",type:"elite"},{name:"deep-terror",player2:"normal",player3:"normal",player4:"elite"},{name:"deep-terror",player2:"normal",player3:"normal",player4:"elite"},{name:"deep-terror",player3:"elite",player4:"elite"},{name:"night-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"night-demon",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"65.3",name:"Crystal Enclosure",edition:"fh",parent:"10",marker:"1",monsters:["algox-guard","algox-icespeaker","algox-priest"],objectives:[{name:"Ice Pillar",health:"[4+(LxC)/2{$math.floor}]",actions:[{type:"shield",value:1,subActions:[{type:"custom",value:"%game.action.target% each monster within %game.action.range:4%"}]}]},{name:"Ice Pillar",health:"[4+(LxC)/2{$math.floor}]",marker:"a",actions:[{type:"shield",value:1,subActions:[{type:"custom",value:"%game.action.target% each monster within %game.action.range:4%"}]}]},{name:"Ice Pillar",health:"[4+(LxC)/2{$math.floor}]",marker:"b",actions:[{type:"shield",value:1,subActions:[{type:"custom",value:"%game.action.target% each monster within %game.action.range:4%"}]}]}],rules:[{round:"true",always:!0,once:!0,note:"%data.section.rules.fh.65-3.1%",figures:[{identifier:{type:"objective",edition:"objective",name:"Ice Pillar",tags:["scenario-10"]},type:"remove"}]}],rooms:[{roomNumber:2,ref:"16-A",initial:!0,treasures:[71],monster:[{name:"algox-guard",type:"normal"},{name:"algox-guard",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-guard",player3:"normal",player4:"normal"},{name:"algox-icespeaker",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-priest",type:"normal"},{name:"algox-priest",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-priest",player4:"normal"}],objectives:[1,1,1,"2:C>2","3:C>3"]}]},{index:"66.1",name:"Ravens' Roost",edition:"fh",parent:"32",marker:"1",resetRound:"hidden",monsters:["harrower-infester","shrike-fiend"],objectives:[{name:"Raven Nest",health:"(L+2)xCx3",marker:"a",actions:[{type:"retaliate",value:"[(L+1)/3{$math.ceil}]",subActions:[{type:"range",value:10}]}]}],rules:[{round:"R % 4 == 2",start:!0,figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Raven Nest"}}],spawns:[{monster:{name:"shrike-fiend",player2:"normal",player3:"normal",player4:"elite"},marker:"a"}]},{round:"R % 4 == 0",start:!0,figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Raven Nest"}}],spawns:[{monster:{name:"shrike-fiend",player2:"normal",player3:"elite",player4:"elite"},marker:"a"}]}],rooms:[{roomNumber:1,ref:"13-A",initial:!0,monster:[{name:"harrower-infester",player2:"normal",player3:"elite",player4:"elite"},{name:"harrower-infester",player2:"normal",player3:"elite",player4:"elite"}]},{roomNumber:2,ref:"15-A",initial:"true",treasures:[67],monster:[{name:"harrower-infester",player2:"normal",player3:"normal",player4:"elite"}],objectives:[1]}]},{index:"66.2",name:"The Pass is Ready",edition:"fh",conclusion:!0,unlocks:["116"]},{index:"68.2",name:"Elemental Cores",edition:"fh",parent:"66",marker:"element:earth",monsters:["earth-demon","frost-demon","sun-demon"],rooms:[{roomNumber:3,initial:!0,treasures:["G"],monster:[{name:"earth-demon",type:"normal"},{name:"earth-demon",type:"normal"},{name:"earth-demon",player4:"elite"},{name:"frost-demon",player3:"normal",player4:"normal"},{name:"sun-demon",type:"normal"}]}]},{index:"68.3",name:"Depths of Delirium",edition:"fh",parent:"27",marker:"2",monsters:["deep-terror","living-bones"],rules:[{round:"true",always:!0,once:!0,note:"All characters must move one card from their hand or discard pile to their taken pile."}],rooms:[{roomNumber:2,initial:!0,monster:[{name:"deep-terror",player2:"normal",player3:"elite",player4:"elite"},{name:"living-bones",player2:"normal",player3:"elite",player4:"elite"}],objectives:[1,"1:C>2?1:0"]}]},{index:"69.2",name:"Depths of Delirium",edition:"fh",parent:"27",marker:"3",monsters:["deep-terror","ooze"],rules:[{round:"true",always:!0,once:!0,note:"All characters must move one card from their hand or discard pile to their taken pile."}],rooms:[{roomNumber:3,initial:!0,monster:[{name:"deep-terror",player2:"normal",player3:"normal",player4:"elite"},{name:"deep-terror",player2:"normal",player3:"elite",player4:"elite"},{name:"ooze",player2:"normal",player3:"normal",player4:"elite"},{name:"ooze",player2:"normal",player3:"elite",player4:"elite"}],objectives:[1]}]},{index:"70.1",name:"The Dead Mile",edition:"fh",parent:"37",marker:"1",resetRound:"hidden",monsters:["living-spirit","ruined-machine"],rules:[{round:"R % 2 == 0",start:!0,note:"at any empty starting hex",spawns:[{monster:{name:"living-spirit",player2:"normal",player3:"normal",player4:"elite"}}]},{round:"R % 2 == 1",start:!0,note:"at any empty starting hex",spawns:[{monster:{name:"living-spirit",player2:"normal",player3:"elite",player4:"elite"}}]}],rooms:[{roomNumber:2,ref:"07-H",initial:!0,treasures:[56],monster:[{name:"ruined-machine",type:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player3:"normal",player4:"elite"},{name:"ruined-machine",player3:"normal",player4:"elite"}]}]},{index:"70.2",name:"%game.characterIconColored.boneshaper% Retires",edition:"fh",conclusion:!0,rewards:{calendarSection:["89.3-6"]},retirement:"boneshaper"},{index:"71.4",name:"Disagree with the Fish King",edition:"fh",parent:"73",parentSections:[["41.4"]],conclusion:!0,rewards:{collectiveResources:[{type:"lumber",value:3}],calendarSection:["146.1B-5"]}},{index:"71.5",name:"Depths of Delirium",edition:"fh",parent:"27",parentSections:[["69.2"]],marker:"5",monsters:["deep-terror","living-bones"],rules:[{round:"true",always:!0,once:!0,note:"All characters must move one card from their hand or discard pile to their taken pile."}],rooms:[{roomNumber:4,initial:!0,treasures:[36],monster:[{name:"deep-terror",type:"normal"},{name:"deep-terror",player3:"normal",player4:"normal"},{name:"living-bones",type:"normal"},{name:"living-bones",player3:"normal",player4:"normal"}],objectives:[1,1]}]},{index:"72.1",name:"The Frosthaven Seal",edition:"fh",parent:"64",monsters:["vestige-of-the-imprisoned-god"],rules:[{round:"true",always:!0,disableRules:[{edition:"fh",scenario:"64",index:0,section:!1},{edition:"fh",scenario:"64",index:1,section:!1}]},{round:"true",always:!0,once:!0,note:"Relocate all characters, character summons and Guard Captains from any outer tiles to the cloest lettered hexes on tile 15-A",figures:[{identifier:{type:"objective",edition:"objective",name:"Tree|Militia"},type:"remove"}]},{round:"true",always:!0,once:!0,spawns:[{monster:{name:"burrowing-blade",player2:"normal",player3:"normal",player4:"elite"},marker:"g"}]},{round:"R % 2 == 0",start:!0,spawns:[{monster:{name:"burrowing-blade",player2:"normal",player3:"elite",player4:"elite"},marker:"g"}]},{round:"R % 2 == 1",start:!0,spawns:[{monster:{name:"burrowing-blade",player2:"normal",player3:"normal",player4:"elite"},marker:"g"}]}],rooms:[{roomNumber:2,initial:!0,monster:[{name:"vestige-of-the-imprisoned-god",type:"boss"}]}]},{index:"72.3",name:"Furious Factory",edition:"fh",parent:"109",monsters:["steel-automaton"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"steel-automaton",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"73.1",name:"The Collection",edition:"fh",parent:"87",parentSections:[["77.2","184.6"]],marker:"4",monsters:["algox-archer","algox-guard","brother","flaming-bladespinner"],allies:["brother"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"algox-archer",type:"elite"},{name:"algox-archer",player3:"normal",player4:"elite"},{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-guard",player4:"normal"},{name:"brother",type:"boss"},{name:"brother",type:"boss"},{name:"flaming-bladespinner",type:"elite"}]}]},{index:"74.2",name:"Upper Spire",edition:"fh",parent:"24",parentSections:[["83.2"]],monsters:["chaos-demon","living-bones","wind-demon"],rooms:[{roomNumber:1,ref:"04-B",initial:!0,monster:[{name:"chaos-demon",type:"elite"},{name:"chaos-demon",player3:"normal",player4:"elite"},{name:"living-bones",type:"elite"},{name:"living-bones",player3:"normal",player4:"normal"},{name:"living-bones",player4:"normal"},{name:"wind-demon",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"75.1A",name:"Heart of Ice A",edition:"fh",parent:"4A",marker:"1",monsters:["frozen-fist","snowdancer"],drawExtra:["snowdancer"],rules:[{round:"true",always:!0,once:!0,sections:["15.2A"],figures:[{identifier:{type:"monster",edition:"fh",name:"snowdancer"},type:"killed",value:"1"}]},{round:"true",always:!0,once:!0,sections:["22.1A"],figures:[{identifier:{type:"monster",edition:"fh",name:"frozen-fist"},type:"killed",value:"1"}]}],rooms:[{roomNumber:1,ref:"15-A",initial:!0,treasures:[70],monster:[{name:"frozen-fist",type:"boss"},{name:"snowdancer",type:"boss"}]}]},{index:"75.1B",name:"Heart of Ice B",edition:"fh",parent:"4B",marker:"1",monsters:["frozen-fist","snowdancer"],drawExtra:["snowdancer"],rules:[{round:"true",always:!0,once:!0,sections:["15.2B"],figures:[{identifier:{type:"monster",edition:"fh",name:"snowdancer"},type:"killed",value:"1"}]},{round:"true",always:!0,once:!0,sections:["22.1B"],figures:[{identifier:{type:"monster",edition:"fh",name:"frozen-fist"},type:"killed",value:"1"}]}],rooms:[{roomNumber:1,ref:"15-A",initial:!0,treasures:[70],monster:[{name:"frozen-fist",type:"boss"},{name:"snowdancer",type:"boss"}]}]},{index:"75.2",name:"Skyhall",edition:"fh",parent:"19",monsters:[],objectives:[{name:"Altar 1",health:"Cx(L+2)"},{name:"Altar 2",health:"Cx(L+2)"},{name:"Altar 3",health:"Cx(L+2)"},{name:"Altar 4",health:"Cx(L+2)"},{name:"Altar 5",health:"Cx(L+2)"},{name:"Dark Fog",health:"Cx(L+2)",initiative:1,escort:!0,tags:["Dark Fog"]}],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Altar 1"},type:"dead"}],objectiveSpawns:[{objective:{index:6,name:"Dark Fog"}}]},{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Altar 2"},type:"dead"}],objectiveSpawns:[{objective:{index:6,name:"Dark Fog"}}]},{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Altar 3"},type:"dead"}],objectiveSpawns:[{objective:{index:6,name:"Dark Fog"}}]},{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Altar 4"},type:"dead"}],objectiveSpawns:[{objective:{index:6,name:"Dark Fog"}}]},{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Altar 5"},type:"dead"}],objectiveSpawns:[{objective:{index:6,name:"Dark Fog"}}]}],rooms:[{roomNumber:1,ref:"16-B",initial:!0,monster:[],objectives:[1,2,3,4,5,6]}]},{index:"75.3",name:"The Way Forward",edition:"fh",parent:"38",parentSections:[["23.1"]],marker:"2",monsters:["sun-demon"],rooms:[{roomNumber:3,initial:!0,treasures:[16],monster:[{name:"sun-demon",type:"normal"},{name:"sun-demon",type:"normal"},{name:"sun-demon",player3:"normal",player4:"normal"},{name:"sun-demon",player4:"normal"}]}]},{index:"76.1",name:"Relic",edition:"fh",parent:"79",marker:"1",monsters:["frozen-corpse","ice-wraith","snow-imp"],rooms:[{roomNumber:2,initial:!0,treasures:[8],monster:[{name:"frozen-corpse",type:"normal"},{name:"frozen-corpse",player2:"normal",player3:"elite",player4:"elite"},{name:"frozen-corpse",player4:"elite"},{name:"ice-wraith",type:"elite"},{name:"ice-wraith",player3:"elite",player4:"elite"},{name:"snow-imp",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"76.2",name:"Black Memories",edition:"fh",parent:"121",parentSections:[["115.2"]],marker:"2",rooms:[{roomNumber:2,initial:!0,monster:[]}]},{index:"76.3",name:"Mindthief Found",edition:"fh",conclusion:!0,unlocks:["121"]},{index:"77.2",name:"The Collection",edition:"fh",parent:"87",parentSections:[["31.2"]],marker:"3",monsters:["lurker-clawcrusher"],rooms:[{roomNumber:4,initial:!0,treasures:[27],monster:[{name:"lurker-clawcrusher",player2:"normal",player3:"normal",player4:"elite"},{name:"lurker-clawcrusher",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"78.2",name:"Glowing Catacombs",edition:"fh",parent:"9",marker:"1",monsters:["ice-wraith","living-spirit","ooze"],rooms:[{roomNumber:3,ref:"11-B",initial:!0,monster:[{name:"ice-wraith",type:"elite"},{name:"ice-wraith",player3:"elite",player4:"elite"},{name:"living-spirit",type:"normal"},{name:"living-spirit",player2:"normal",player3:"normal",player4:"elite"},{name:"living-spirit",player2:"normal",player3:"normal",player4:"elite"},{name:"living-spirit",player4:"normal"},{name:"ooze",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"78.3",name:"Corrupted Camp",edition:"fh",parent:"39",marker:"3",monsters:["algox-guard","deep-terror"],allies:["algox-guard"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"algox-guard",type:"normal"},{name:"deep-terror",type:"normal"},{name:"deep-terror",type:"elite"},{name:"deep-terror",player3:"normal",player4:"elite"}]}]},{index:"78.4",name:"Garden Built",edition:"fh",conclusion:!0,named:!0,rewards:{events:["summer-outpost:SO-57","summer-road:SR-46"]}},{index:"79.3",name:"Collection's Capstone",edition:"fh",parent:"88",marker:"1",monsters:["lurker-clawcrusher"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"lurker-clawcrusher",type:"normal"},{name:"lurker-clawcrusher",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-clawcrusher",player4:"normal"}]}]},{index:"79.4",name:"Puzzle Solution",edition:"fh",conclusion:!0,named:!0,unlocks:["61"]},{index:"80.1",name:"Fleeting Permanence",edition:"fh",parent:"52",marker:"1",monsters:["frost-demon","snow-imp"],rooms:[{roomNumber:4,initial:!0,treasures:[66],monster:[{name:"frost-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"snow-imp",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"80.2",name:"Change of Heart",edition:"fh",parent:"55",marker:"1"},{index:"80.2A",name:"Frozen Fist unlocked",edition:"fh",parent:"55",parentSections:[["80.2"]],named:!0,blockedSections:["80.2B"],monsters:["snowdancer"],objectives:[{name:"Large Ice Crystal",health:"(L+2)xCx4"}],rooms:[{roomNumber:2,initial:!0,treasures:[41],monster:[{name:"snowdancer",type:"boss"}],objectives:[1]}]},{index:"80.2B",name:"Frozen Fist not unlocked",edition:"fh",parent:"55",parentSections:[["80.2"]],named:!0,blockedSections:["80.2A"],monsters:["frozen-fist"],objectives:[{name:"Large Ice Crystal",health:"(L+2)xCx4"}],rooms:[{roomNumber:2,initial:!0,treasures:[41],monster:[{name:"frozen-fist",type:"boss"}],objectives:[1]}]},{index:"81.1",name:"Random Scenario",edition:"fh",conclusion:!0,named:!0,random:!0,unlocks:["110"]},{index:"81.2",name:"Infiltrating the Lair",edition:"fh",parent:"75",parentSections:[["99.2"]],marker:"2",monsters:["abael-herder","abael-scout","frost-demon","piranha-pig"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"abael-herder",player2:"normal",player3:"elite",player4:"elite"},{name:"abael-scout",player3:"normal",player4:"normal"},{name:"frost-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",player3:"normal",player4:"elite"}]}]},{index:"81.5",name:"The Dead Mile",edition:"fh",parent:"37",parentSections:[["70.1"]],marker:"2",resetRound:"hidden",monsters:["living-bones","living-spirit","ruined-machine"],rules:[{round:"R % 2 == 0",start:!0,spawns:[{monster:{name:"living-bones",player2:"normal",player3:"normal",player4:"elite"},marker:"1"}]},{round:"R % 2 == 1",start:!0,spawns:[{monster:{name:"living-bones",player2:"normal",player3:"elite",player4:"elite"},marker:"1"}]},{round:"true",always:!0,disableRules:[{edition:"fh",scenario:"70.1",index:0,section:!0},{edition:"fh",scenario:"70.1",index:1,section:!0}]}],rooms:[{roomNumber:3,ref:"07-F",initial:!0,monster:[{name:"living-spirit",type:"elite"},{name:"living-spirit",player3:"normal",player4:"normal"},{name:"living-spirit",player4:"normal"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player4:"normal"}]}]},{index:"82.2",name:"Life and Death",edition:"fh",parent:"61",parentSections:[["105.1"]],marker:"2",monsters:["deep-terror","earth-demon","harrower-infester"],objectives:[{name:"Moonshard",escort:!0,allyDeck:!0,health:"(L+(2xC))x2",initiative:50,marker:"a",actions:[{type:"move",value:3},{type:"attack",value:"L+3",subActions:[{type:"custom",small:!0,value:"Attacks are unaffected by %game.action.retaliate%"}]}]}],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",marker:"a",edition:"escort",name:"Moonshard"},type:"transfer",value:"1"}]},{round:"true",always:!0,once:!0,note:"All monsters add +1 %game.action.attack% to all their attacks targeting characters or character summons"}],rooms:[{roomNumber:2,initial:!0,treasures:[76],monster:[{name:"deep-terror",type:"normal"},{name:"deep-terror",player3:"normal",player4:"normal"},{name:"earth-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"harrower-infester",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"82.3",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["56.1"],["130.1"]],marker:"9",monsters:["burrowing-blade","polar-bear"],rooms:[{roomNumber:8,initial:!0,monster:[{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",player4:"normal"},{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"82.4",name:"The Lurker Problem",edition:"fh",parent:"78",parentSections:[["91.1"]],marker:"6",resetRound:"hidden",monsters:["lightning-eel","lurker-soldier","lurker-wavethrower"],rules:[{round:"R % 2 == 0",start:!0,figures:[{identifier:{type:"monster",edition:"fh",name:"lurker-soldier",tags:["lurker-soldier-elite"]},type:"present",value:"1"}],spawns:[{monster:{name:"lightning-eel",player2:"normal",player3:"normal",player4:"elite"},marker:"b"}]},{round:"R % 2 == 1",start:!0,figures:[{identifier:{type:"monster",edition:"fh",name:"lurker-soldier",tags:["lurker-soldier-elite"]},type:"present",value:"1"}],spawns:[{monster:{name:"lightning-eel",player2:"normal",player3:"elite",player4:"elite"},marker:"b"}]}],rooms:[{roomNumber:5,initial:!0,monster:[{name:"lurker-soldier",type:"elite",tags:["lurker-soldier-elite"]},{name:"lurker-soldier",player3:"normal",player4:"normal"},{name:"lurker-soldier",player4:"normal"},{name:"lurker-wavethrower",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"83.1",name:"A Contained Fire",edition:"fh",parent:"89",marker:"1",monsters:["algox-archer","algox-guard"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"algox-archer",type:"normal"},{name:"algox-archer",type:"elite"},{name:"algox-archer",player4:"elite"},{name:"algox-guard",type:"normal"},{name:"algox-guard",player3:"normal",player4:"normal"}]}]},{index:"83.2",name:"Upper Spire",edition:"fh",parent:"24",monsters:["chaos-demon","living-bones","wind-demon"],rooms:[{roomNumber:1,ref:"08-A",initial:!0,monster:[{name:"chaos-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"living-bones",type:"normal"},{name:"living-bones",player3:"normal",player4:"normal"},{name:"wind-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"wind-demon",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"84.1",name:"To Bury the Dead",edition:"fh",parent:"95",marker:"1",monsters:["ice-wraith","living-bones","living-doom","living-spirit","reluctant-ghost"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"ice-wraith",type:"normal"},{name:"ice-wraith",player3:"normal",player4:"normal"},{name:"living-bones",player2:"normal",player3:"normal",player4:"elite"},{name:"living-bones",player2:"normal",player3:"elite",player4:"elite"},{name:"living-doom",type:"normal"},{name:"living-doom",player4:"normal"},{name:"reluctant-ghost",type:"boss"}]}]},{index:"85.1",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"85.2",name:"Living Glacier",edition:"fh",parent:"45",marker:"1",monsters:["abael-herder","abael-scout","lightning-eel","piranha-pig"],objectives:[{name:"Ice Pillar",health:"(L+2)xCx2"}],rules:[{round:"true",always:!0,once:!0,sections:["39.2"],figures:[{identifier:{type:"objective",edition:"objective",name:"Ice Pillar"},type:"dead"}]}],rooms:[{roomNumber:3,initial:!0,treasures:[15],monster:[{name:"abael-herder",player2:"normal",player3:"elite",player4:"elite"},{name:"abael-scout",type:"elite"},{name:"abael-scout",player4:"normal"},{name:"lightning-eel",type:"elite"},{name:"lightning-eel",player3:"normal",player4:"elite"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",player2:"normal",player3:"normal",player4:"elite"},{name:"piranha-pig",player3:"elite",player4:"elite"}],objectives:[1]}]},{index:"85.3",name:"Relic",edition:"fh",parent:"79",parentSections:[["76.1"]],marker:"d",monsters:["polar-bear"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"polar-bear",type:"elite"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"},{name:"polar-bear",player4:"normal"}]}]},{index:"86.1",name:"Protect the Pass",edition:"fh",conclusion:!0,unlocks:["115"]},{index:"87.1",name:"And Then, a Stream",edition:"fh",parent:"130",parentSections:[["173.2"]],monsters:["frozen-corpse","lightning-eel","shrike-fiend"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"frozen-corpse",type:"normal"},{name:"frozen-corpse",type:"normal"},{name:"frozen-corpse",player3:"normal",player4:"normal"},{name:"frozen-corpse",player4:"normal"},{name:"lightning-eel",type:"normal"},{name:"lightning-eel",type:"normal"},{name:"lightning-eel",player3:"normal",player4:"normal"},{name:"lightning-eel",player4:"normal"},{name:"shrike-fiend",type:"normal"},{name:"shrike-fiend",type:"normal"},{name:"shrike-fiend",player3:"normal",player4:"normal"},{name:"shrike-fiend",player4:"normal"}]}]},{index:"87.2",name:"Belara's Keep",edition:"fh",parent:"135",marker:"c",monsters:["earth-demon","flame-demon","rending-drake","sun-demon"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"earth-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"flame-demon",type:"normal"},{name:"flame-demon",player3:"normal",player4:"normal"},{name:"rending-drake",player2:"normal",player3:"normal",player4:"elite"},{name:"sun-demon",type:"normal"},{name:"sun-demon",player4:"normal"}]}]},{index:"87.3",name:"A Grand View",edition:"fh",parent:"94",parentSections:[["150.2"]],marker:"3",monsters:["ancient-artillery","ruined-machine"],rooms:[{roomNumber:3,initial:!0,treasures:[29],monster:[{name:"ancient-artillery",type:"normal"},{name:"ruined-machine",player3:"normal",player4:"elite"}]}]},{index:"89.1",name:"A Strong Foundation",edition:"fh",parent:"65",parentSections:[["142.2"]],marker:"2",monsters:["frozen-corpse","living-bones","rimeheart","snow-imp"],objectives:[{name:"Elemental Anchor",escort:!0,health:"2xCx(L+1)"}],rooms:[{roomNumber:2,initial:!0,treasures:[39],monster:[{name:"frozen-corpse",player3:"normal",player4:"normal"},{name:"frozen-corpse",player4:"normal"},{name:"living-bones",type:"normal"},{name:"living-bones",player3:"normal",player4:"normal"},{name:"living-bones",player4:"normal"},{name:"rimeheart",type:"elite"},{name:"snow-imp",type:"elite"},{name:"snow-imp",type:"elite"}],objectives:[1]}]},{index:"89.2",name:"Library Upgraded",edition:"fh",conclusion:!0,named:!0,rewards:{events:["winter-road:WR-47","summer-road:SR-49"]}},{index:"89.3",name:"%game.characterIconColored.boneshaper% Returns",edition:"fh",conclusion:!0,unlocks:["118"]},{index:"90.1",name:"Agree with the Fish King",edition:"fh",parent:"73",parentSections:[["41.4"]],conclusion:!0,rewards:{collectiveResources:[{type:"lumber",value:3}],campaignSticker:["friend-of-the-fish-king"],calendarSection:["146.1A-5"]}},{index:"90.3",name:"Derelict Elevator",edition:"fh",parent:"16",rules:[{round:"true",always:!0,once:!0,note:"Pebbles rain down at each %game.mapMarker.a%. This has no effect yet."}]},{index:"90.4",name:"Call of the Harbinger",edition:"fh",parent:"56",parentSections:[["99.4"]],marker:"2",monsters:["harrower-infester","shrike-fiend"],objectives:[{name:"Altar 3",health:"(L+1)xC"}],rules:[{round:"true",always:!0,once:!0,note:"Read %data.section:69.3%",figures:[{identifier:{type:"objective",edition:"objective",name:"Altar 3"},type:"dead"},{identifier:{type:"monster",name:"harbinger-of-shadow-2"},type:"setHp",value:"[10x(C-1)/2{$math.floor}]"}]}],rooms:[{roomNumber:2,initial:!0,monster:[{name:"harrower-infester",type:"normal"},{name:"harrower-infester",player3:"normal",player4:"elite"},{name:"shrike-fiend",player2:"normal",player3:"elite",player4:"elite"},{name:"shrike-fiend",player4:"normal"}],objectives:[1]}]},{index:"91.1",name:"The Lurker Problem",edition:"fh",parent:"78",parentSections:[["19.1"]],blockedSections:["51.2"],marker:"a",rooms:[{roomNumber:6,initial:!0,treasures:[13],monster:[]}]},{index:"91.2",name:"Crystal Fields",edition:"fh",parent:"18",marker:"1",monsters:["burrowing-blade","frozen-corpse"],rules:[{round:"true",always:!0,once:!0,spawns:[{monster:{name:"burrowing-blade",player2:"normal",player3:"normal",player4:"elite"},count:2,marker:"a"}]}],rooms:[{roomNumber:2,ref:"15-A",initial:!0,monster:[{name:"burrowing-blade",player2:"normal",player3:"elite",player4:"elite"},{name:"burrowing-blade",player2:"normal",player3:"elite",player4:"elite"},{name:"frozen-corpse",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"91.3",name:"Corrupted Camp",edition:"fh",parent:"39",marker:"4",monsters:["algox-scout","deep-terror"],allies:["algox-scout"],rooms:[{roomNumber:3,initial:!0,treasures:[41],monster:[{name:"algox-scout",type:"normal"},{name:"deep-terror",type:"elite"},{name:"deep-terror",player2:"normal",player3:"elite",player4:"elite"},{name:"deep-terror",player4:"normal"}]}]},{index:"91-1",name:"Shoreline Scramble",edition:"fh",parent:"91",marker:"1",monsters:["lightning-eel","lurker-clawcrusher"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"lightning-eel",type:"elite"},{name:"lightning-eel",player3:"normal",player4:"elite"},{name:"lurker-clawcrusher",player2:"normal",player3:"normal",player4:"elite"},{name:"lurker-clawcrusher",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"91-2",name:"Shoreline Scramble",edition:"fh",parent:"91",marker:"2",monsters:["lightning-eel","lurker-clawcrusher","lurker-mindsnipper","lurker-wavethrower"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"lightning-eel",player2:"normal",player3:"normal",player4:"elite"},{name:"lurker-clawcrusher",player3:"normal",player4:"elite"},{name:"lurker-mindsnipper",type:"elite"},{name:"lurker-wavethrower",type:"elite"}]}]},{index:"91-3",name:"Shoreline Scramble",edition:"fh",parent:"91",marker:"3",monsters:["lightning-eel","lurker-clawcrusher","lurker-mindsnipper","lurker-wavethrower"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"lightning-eel",type:"normal"},{name:"lurker-clawcrusher",player2:"normal",player3:"normal",player4:"elite"},{name:"lurker-mindsnipper",type:"elite"},{name:"lurker-wavethrower",player3:"elite",player4:"elite"}]}]},{index:"91-4",name:"Shoreline Scramble",edition:"fh",parent:"91",marker:"4",monsters:["lightning-eel","lurker-clawcrusher","lurker-mindsnipper","lurker-wavethrower"],rooms:[{roomNumber:5,initial:!0,monster:[{name:"lightning-eel",player2:"normal",player3:"normal",player4:"elite"},{name:"lurker-clawcrusher",player2:"normal",player3:"normal",player4:"elite"},{name:"lurker-mindsnipper",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-wavethrower",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"91.4",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["86"]},{index:"92.2",name:"%game.characterIconColored.astral% Retires",edition:"fh",conclusion:!0,rewards:{calendarSection:["42.2-6"]},retirement:"astral"},{index:"92.3",name:"The Lurker Problem",edition:"fh",parent:"78",parentSections:[["59.2"]],marker:"4",monsters:["abael-scout","lurker-wavethrower"],rooms:[{roomNumber:7,initial:!0,monster:[{name:"abael-scout",type:"elite"},{name:"abael-scout",type:"elite"},{name:"abael-scout",player3:"elite",player4:"elite"},{name:"abael-scout",player4:"elite"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",player3:"normal",player4:"normal"},{name:"lurker-wavethrower",player4:"normal"}]}]},{index:"93.1",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["110.4"]],marker:"5",monsters:["black-imp"],rooms:[{roomNumber:9,initial:!0,monster:[{name:"black-imp",type:"normal"},{name:"black-imp",player3:"elite",player4:"elite"}]}]},{index:"94.2",name:"Beneath Sea and Stone",edition:"fh",parent:"49",marker:"1",monsters:["black-imp","frost-demon"],objectives:[{name:"Ice Pillar",health:"[(L+1)xC/2{$math.floor}]"}],rooms:[{roomNumber:1,ref:"11-D",initial:!0,monster:[{name:"black-imp",type:"elite"},{name:"black-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"black-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"black-imp",player3:"normal",player4:"normal"},{name:"black-imp",player4:"normal"},{name:"frost-demon",type:"elite"},{name:"frost-demon",player3:"normal",player4:"normal"},{name:"frost-demon",player4:"normal"}],objectives:[1,1]}]},{index:"94.4",name:"Sneak Past the Lurkers",edition:"fh",parentSections:[["114.2"]],conclusion:!0,unlocks:["49"],rewards:{overlaySticker:{name:"Z",location:"F2",coordinates:{x:1444,y:350,width:366,height:288}},custom:"Do not resolve an outpost event this week."}},{index:"95.1",name:"Depths of Delirium",edition:"fh",parent:"27",marker:"1",monsters:["deep-terror","living-bones"],rules:[{round:"true",always:!0,once:!0,note:"All characters must move one card from their hand or discard pile to their taken pile."}],rooms:[{roomNumber:5,initial:!0,monster:[{name:"deep-terror",player2:"normal",player3:"normal",player4:"elite"},{name:"living-bones",player2:"normal",player3:"normal",player4:"elite"}],objectives:[1,"1:C>3?1:0"]}]},{index:"95.2",name:"My Private Empire",edition:"fh",parent:"107",parentSections:[["150.3"]],marker:"b",monsters:["ruined-machine"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"ruined-machine",type:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player3:"elite",player4:"elite"},{name:"ruined-machine",player3:"elite",player4:"elite"},{name:"ruined-machine",player4:"elite"},{name:"ruined-machine",player4:"elite"},{name:"ruined-machine",player4:"elite"}]}]},{index:"95.3",name:"Invasion of the Dock",edition:"fh",parent:"71",parentSections:[["111.2"]],objectives:[{name:"Artificer",escort:!0,health:"(LxC)+2",initiative:99,marker:"c",actions:[{type:"move",value:2},{type:"heal",value:1,subActions:[{type:"specialTarget",value:"self",small:!0}]}]}],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",marker:"c",edition:"escort",name:"Artificer"},type:"transfer",value:"1"}]}],rooms:[{roomNumber:1,initial:!0}]},{index:"95.4",name:"Aesther Outpost",edition:"fh",conclusion:!0,unlocks:["66"]},{index:"96.2",name:"Radiant Dust",edition:"fh",parent:"119",marker:"1",monsters:["burrowing-blade","rending-drake","shrike-fiend","spitting-drake"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"burrowing-blade",player2:"normal",player3:"elite",player4:"elite"},{name:"rending-drake",type:"elite"},{name:"rending-drake",player3:"normal",player4:"normal"},{name:"rending-drake",player4:"normal"},{name:"shrike-fiend",type:"normal"},{name:"shrike-fiend",type:"normal"},{name:"spitting-drake",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"96.3",name:"Accept the Fish King's Ascension",edition:"fh",parent:"76",parentSections:[["56.2"]],conclusion:!0,rewards:{items:["201"],events:["boat:B-18"],custom:'"Threat from the Deep" quest complete'}},{index:"97.1",name:"Raised by Wolves",edition:"fh",parent:"112",marker:"1",monsters:["chaos-demon","earth-demon"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"chaos-demon",type:"elite"},{name:"chaos-demon",player3:"normal",player4:"elite"},{name:"earth-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"earth-demon",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"97.3",name:"Life and Death",edition:"fh",parent:"61",parentSections:[["82.2"]],marker:"3",monsters:["deep-terror","earth-demon","harrower-infester"],objectives:[{name:"Moonshard",escort:!0,allyDeck:!0,health:"(L+(2xC))x2",initiative:50,marker:"a",actions:[{type:"move",value:3},{type:"attack",value:"L+4",subActions:[{type:"custom",small:!0,value:"Attacks are unaffected by %game.action.retaliate%"}]}]}],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",marker:"a",edition:"escort",name:"Moonshard"},type:"transfer",value:"1"}]},{round:"true",always:!0,once:!0,note:"All characters and character summons add -1 %game.action.attack% to all their attacks and -1 %game.action.move% to all their move abilities"},{round:"true",always:!0,once:!0,note:"All monsters add +1 %game.action.attack% to all their attacks targeting characters or character summons"}],rooms:[{roomNumber:3,initial:!0,monster:[{name:"deep-terror",player2:"normal",player3:"elite",player4:"normal"},{name:"deep-terror",player2:"normal",player3:"elite",player4:"elite"},{name:"deep-terror",player2:"normal",player3:"elite",player4:"elite"},{name:"earth-demon",type:"elite"},{name:"harrower-infester",player4:"normal"}]}]},{index:"98.1",name:"The Eternal Crave",edition:"fh",parent:"122",blockedSections:["152.1"],marker:"1",monsters:["hungry-maw","snow-imp"],rules:[{round:"true",always:!0,once:!0,sections:["151.1"],figures:[{identifier:{type:"monster",name:"hungry-maw",health:"[H/2{$math.floor}]"},type:"present"},{identifier:{type:"monster",name:"hungry-maw"},type:"setHp",value:"H/2"}]}],rooms:[{roomNumber:1,ref:"15-C",initial:!0,monster:[{name:"hungry-maw",type:"boss"},{name:"snow-imp",type:"normal"},{name:"snow-imp",type:"normal"},{name:"snow-imp",player2:"elite",player4:"elite"},{name:"snow-imp",player3:"elite",player4:"elite"},{name:"snow-imp",player3:"elite",player4:"elite"}]}]},{index:"99.2",name:"Infiltrating the Lair",edition:"fh",parent:"75",marker:"1",monsters:["abael-scout","piranha-pig"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"abael-scout",player2:"normal",player3:"normal",player4:"elite"},{name:"abael-scout",player2:"normal",player3:"elite",player4:"elite"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",player3:"normal",player4:"elite"}]}]},{index:"99.3",name:"%game.characterIconColored.kelp% Retires",edition:"fh",conclusion:!0,rewards:{events:["summer-outpost:SO-65"]},retirement:"kelp"},{index:"99.4",name:"Call of the Harbinger",edition:"fh",parent:"56",parentSections:[["3.2"]],marker:"1",monsters:["black-imp","shrike-fiend"],objectives:[{name:"Altar 2",health:"(L+1)xC"}],rules:[{round:"true",always:!0,once:!0,note:"Read %data.section:66.3%",figures:[{identifier:{type:"objective",edition:"objective",name:"Altar 2"},type:"dead"}]}],rooms:[{roomNumber:3,initial:!0,monster:[{name:"black-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"black-imp",player3:"normal",player4:"elite"},{name:"shrike-fiend",type:"normal"},{name:"shrike-fiend",player3:"normal",player4:"elite"}],objectives:[1]}]},{index:"100.3",name:"Business Proposal",edition:"fh",conclusion:!0,unlocks:["129"]},{index:"101.1",name:"Under the Influence",edition:"fh",parent:"120",marker:"1",monsters:["vermling-priest","vermling-scout"],objectives:[{name:"Door 2",health:"(L+1)xC",marker:"2"}],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"muddle",scenarioEffect:!0},{identifier:{type:"character",name:".*"},type:"amAdd",value:"curse:1",scenarioEffect:!0}]},{round:"true",always:!0,once:!0,sections:["157.1"],figures:[{identifier:{type:"objective",edition:"objective",name:"Door 2"},type:"dead"}]}],rooms:[{roomNumber:2,initial:!0,treasures:[50],monster:[{name:"vermling-priest",type:"elite"},{name:"vermling-priest",player2:"normal",player3:"normal",player4:"elite"},{name:"vermling-priest",player3:"normal",player4:"elite"},{name:"vermling-scout",type:"normal"},{name:"vermling-scout",type:"normal"},{name:"vermling-scout",player2:"normal",player3:"normal",player4:"elite"},{name:"vermling-scout",player2:"normal",player3:"normal",player4:"elite"},{name:"vermling-scout",player2:"normal",player3:"elite",player4:"elite"},{name:"vermling-scout",player2:"normal",player3:"elite",player4:"elite"},{name:"vermling-scout",player3:"normal",player4:"normal"},{name:"vermling-scout",player3:"normal",player4:"normal"}],objectives:[1]}]},{index:"102.1",name:"Inside the Swarm",edition:"fh",parent:"100",parentSections:[["141.3"]],marker:"2",monsters:["burrowing-blade","earth-demon","lurker-mindsnipper","shrike-fiend"],rules:[{round:"true",always:!0,once:!0,note:"All characters return one card from their hand or discard pile to their set-aside deck."}],rooms:[{roomNumber:2,initial:!0,treasures:[79],monster:[{name:"burrowing-blade",player2:"elite",player3:"normal",player4:"normal"},{name:"burrowing-blade",player3:"normal",player4:"normal"},{name:"burrowing-blade",player4:"normal"},{name:"earth-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"earth-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-mindsnipper",type:"normal"},{name:"lurker-mindsnipper",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-mindsnipper",player4:"normal"},{name:"shrike-fiend",type:"normal"},{name:"shrike-fiend",player3:"normal",player4:"elite"}]}]},{index:"102.2",name:"Fish King's Ascension",edition:"fh",parent:"77",parentSections:[["131.2"]],monsters:["night-demon"],rules:[{round:"true",always:!0,once:!0,note:"Read %data.section:184.5%",figures:[{identifier:{type:"monster",edition:"fh",name:"night-demon"},type:"dead"}]},{round:"true",always:!0,once:!0,sections:["165.2"],figures:[{identifier:{type:"monster",name:"fish-king",health:"[H/4{$math.ceil}]"},type:"present"},{identifier:{type:"monster",name:"fish-king"},type:"setHp",value:"[H/4{$math.ceil}]"}]}],rooms:[{roomNumber:2,initial:!0,monster:[{name:"night-demon",type:"normal"},{name:"night-demon",type:"normal"},{name:"night-demon",player3:"normal",player4:"elite"}]}]},{index:"103.1",name:"My Private Empire",edition:"fh",parent:"107",parentSections:[["188.1"]],marker:"c",monsters:["steel-automaton"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"steel-automaton",type:"elite"},{name:"steel-automaton",player3:"normal",player4:"elite"}]}]},{index:"103.3",name:"Sunless Trench",edition:"fh",parent:"42",marker:"2",monsters:["night-demon"],rooms:[{roomNumber:1,ref:"03-A",initial:!0,monster:[{name:"night-demon",type:"normal"},{name:"night-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"night-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"night-demon",player3:"normal",player4:"normal"},{name:"night-demon",player4:"normal"}]}]},{index:"103.4",name:"%game.characterIconColored.drill% Retires",edition:"fh",conclusion:!0,rewards:{calendarSection:["165.4-10"]},retirement:"drill"},{index:"104.1",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["92"]},{index:"104.2",name:"The Titan",edition:"fh",parent:"123",marker:"1",monsters:["algox-snowspeaker"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"algox-snowspeaker",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-snowspeaker",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"104.4",name:"Scrap Pit",edition:"fh",parent:"35",marker:"1",monsters:["living-bones","ruined-machine"],rooms:[{roomNumber:2,initial:!0,treasures:[61],monster:[{name:"living-bones",type:"normal"},{name:"living-bones",type:"elite"},{name:"living-bones",player2:"normal",player3:"elite",player4:"elite"},{name:"living-bones",player4:"normal"},{name:"living-bones",player4:"elite"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player4:"normal"},{name:"ruined-machine",player4:"normal"}]}]},{index:"105.1",name:"Life and Death",edition:"fh",parent:"61",marker:"1",monsters:["deep-terror","earth-demon"],objectives:[{name:"Moonshard",escort:!0,allyDeck:!0,health:"(L+(2xC))x2",initiative:50,marker:"a",actions:[{type:"move",value:3},{type:"attack",value:"L+2",subActions:[{type:"custom",small:!0,value:"Attacks are unaffected by %game.action.retaliate%"}]}]}],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",marker:"a",edition:"escort",name:"Moonshard"},type:"transfer",value:"1"}]},{round:"true",always:!0,figures:[{identifier:{type:"character",name:".*"},type:"permanentCondition",value:"muddle"}]}],rooms:[{roomNumber:4,initial:!0,monster:[{name:"deep-terror",type:"elite"},{name:"deep-terror",player2:"normal",player3:"elite",player4:"normal"},{name:"earth-demon",type:"normal"},{name:"earth-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"earth-demon",player4:"elite"}]}]},{index:"105.3",name:"A Giant Block of Ice",edition:"fh",parent:"72",parentSections:[["141.1"]],marker:"2",monsters:["frozen-corpse","living-bones"],rules:[{round:"true",always:!0,once:!0,spawns:[{monster:{name:"living-bones",type:"normal"},marker:"c"},{monster:{name:"living-bones",player3:"normal",player4:"normal"},marker:"d"}]}],rooms:[{roomNumber:2,initial:!0,monster:[{name:"frozen-corpse",type:"elite"},{name:"frozen-corpse",player3:"normal",player4:"elite"}]}]},{index:"105.4",name:"Apotheosis",edition:"fh",parent:"76",monsters:["flaming-bladespinner"],rooms:[{roomNumber:2,initial:!0,treasures:[55],monster:[{name:"flaming-bladespinner",type:"normal"},{name:"flaming-bladespinner",type:"elite"},{name:"flaming-bladespinner",player3:"normal",player4:"normal"},{name:"flaming-bladespinner",player4:"elite"}]}]},{index:"106.1",name:"Corrupted Camp",edition:"fh",parent:"39",marker:"2",monsters:["algox-scout","deep-terror"],allies:["algox-scout"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"algox-scout",type:"normal"},{name:"deep-terror",type:"normal"},{name:"deep-terror",type:"elite"},{name:"deep-terror",player3:"normal",player4:"elite"}]}]},{index:"106.2",name:"The True Oak",edition:"fh",parent:"70",parentSections:[["46.1"]],marker:"2",resetRound:"hidden",monsters:["city-guard","flaming-sword-of-justice","sun-demon"],rules:[{round:"R % 4 == 2",start:!0,figures:[{identifier:{type:"monster",edition:"fh",name:"flaming-sword-of-justice"},type:"present",value:"1"}],spawns:[{monster:{name:"hound",player2:"normal",player3:"normal",player4:"elite"},marker:"b"}]},{round:"R % 4 == 0",start:!0,figures:[{identifier:{type:"monster",edition:"fh",name:"flaming-sword-of-justice"},type:"present",value:"1"}],spawns:[{monster:{name:"hound",player2:"normal",player3:"elite",player4:"elite"},marker:"b"}]}],rooms:[{roomNumber:3,initial:!0,treasures:[82],monster:[{name:"city-guard",player3:"normal",player4:"normal"},{name:"city-guard",player4:"normal"},{name:"flaming-sword-of-justice",type:"boss"},{name:"sun-demon",type:"normal"},{name:"sun-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"sun-demon",player4:"normal"}]}]},{index:"106.3",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"107.3",name:"%game.characterIconColored.snowflake% Retires",edition:"fh",conclusion:!0,rewards:{calendarSection:["177.4-summer:9"]},retirement:"snowflake"},{index:"108.1",name:"The Longest Second",edition:"fh",parent:"125",parentSections:[["158.4"]],marker:"2",monsters:["robotic-boltshooter","ruined-machine"],rooms:[{roomNumber:2,initial:!0,treasures:[14],monster:[{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player3:"elite",player4:"elite"},{name:"ruined-machine",player4:"elite"}]}]},{index:"108.3",name:"Black Memories",edition:"fh",parent:"121",parentSections:[["123.1"]]},{index:"109.2",name:"Derelict Freighter",edition:"fh",parent:"127",parentSections:[["153.1"]],marker:"c",monsters:["frozen-corpse"],rooms:[{roomNumber:2,initial:!0,treasures:[30],monster:[{name:"frozen-corpse",type:"elite"},{name:"frozen-corpse",player2:"normal",player3:"normal",player4:"elite"},{name:"frozen-corpse",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"109.3",name:"The Eternal Crave",edition:"fh",parent:"122",parentSections:[["8.4"],["145.1"]],monsters:["ice-wraith","snow-imp"],rooms:[{roomNumber:1,ref:"15-B",initial:!0,monster:[{name:"ice-wraith",player2:"elite",player3:"elite",player4:"normal"},{name:"ice-wraith",player4:"normal"},{name:"ice-wraith",player4:"normal"},{name:"snow-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",player2:"normal",player3:"elite"},{name:"snow-imp",player2:"normal",player3:"elite"}]}]},{index:"110.2",name:"Temple of Feline Power",edition:"fh",parent:"132",parentSections:[["171.1"]],marker:"b",monsters:["frozen-corpse","ice-wraith"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"frozen-corpse",player2:"normal",player3:"elite",player4:"elite"},{name:"frozen-corpse",player2:"normal",player3:"elite",player4:"elite"},{name:"ice-wraith",type:"normal"},{name:"ice-wraith",player4:"elite"}]}]},{index:"110.4",name:"Deadly Pastimes",edition:"fh",parent:"85",marker:"2",monsters:["black-imp","burrowing-blade"],rooms:[{roomNumber:10,initial:!0,monster:[{name:"black-imp",type:"normal"},{name:"black-imp",player4:"normal"},{name:"burrowing-blade",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"111.2",name:"Invasion of the Dock",errata:"section111-2",edition:"fh",parent:"71",parentSections:[["129.2"]],marker:"a",monsters:["abael-scout","lurker-clawcrusher","lurker-mindsnipper","lurker-wavethrower","piranha-pig"],objectives:[{name:"Artificer",escort:!0,health:"(LxC)+2",marker:"c",initiative:99}],rules:[{round:"R % 2 == 1",start:!0,spawns:[{monster:{name:"lurker-clawcrusher",player2:"normal",player3:"elite",player4:"elite"},marker:"d"},{monster:{name:"lurker-wavethrower",player2:"normal",player3:"normal",player4:"elite"},marker:"e"},{monster:{name:"piranha-pig",player2:"normal",player3:"normal",player4:"elite"},marker:"f",count:2}]},{round:"R % 2 == 0",start:!0,spawns:[{monster:{name:"piranha-pig",player2:"normal",player3:"elite",player4:"elite"},marker:"f",count:2}]}],rooms:[{roomNumber:1,ref:"02-D",initial:!0},{roomNumber:2,ref:"10-B",initial:!0,treasures:[22],monster:[{name:"abael-scout",player2:"normal",player3:"normal",player4:"elite"},{name:"lurker-clawcrusher",player2:"normal",player3:"normal",player4:"elite"},{name:"lurker-mindsnipper",type:"normal"},{name:"lurker-wavethrower",player3:"normal",player4:"normal"},{name:"piranha-pig",type:"elite"},{name:"piranha-pig",player3:"normal",player4:"elite"}],objectives:[1]},{roomNumber:3,ref:"01-H",initial:!0}]},{index:"112.1",name:"Lush Grotto",edition:"fh",parent:"113",monsters:["chaos-demon","polar-bear"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"chaos-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"112.2",name:"Pirate Queen's Haul",edition:"fh",parent:"137",parentSections:[["191.2"]],marker:"2",monsters:["ancient-artillery","flaming-bladespinner","piranha-pig","robotic-boltshooter"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"ancient-artillery",type:"normal"},{name:"ancient-artillery",type:"normal"},{name:"ancient-artillery",player3:"normal",player4:"normal"},{name:"flaming-bladespinner",type:"normal"},{name:"flaming-bladespinner",player3:"normal",player4:"elite"},{name:"piranha-pig",player2:"normal",player3:"elite",player4:"elite"},{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"},{name:"robotic-boltshooter",player4:"normal"},{name:"robotic-boltshooter",player4:"normal"}]}]},{index:"113.1",name:"Tavern Upgaded",edition:"fh",conclusion:!0,rewards:{items:["245"],removeEvents:["winter-outpost:WO-79","summer-road:SR-50"]}},{index:"114.2",name:"Attacking the Lurkers",edition:"fh",conclusion:!0},{index:"115.2",name:"Black Memories",edition:"fh",parent:"121",marker:"1",monsters:["large-vermling-scout","vermling-priest"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"large-vermling-scout",type:"normal"},{name:"large-vermling-scout",player3:"normal",player4:"normal"},{name:"large-vermling-scout",player4:"normal"},{name:"vermling-priest",type:"normal"},{name:"vermling-priest",type:"normal"},{name:"vermling-priest",player3:"normal",player4:"elite"}]}]},{index:"115.3",name:"Relief Effort",edition:"fh",parent:"40",marker:"1",monsters:["algox-archer","algox-guard","ruined-machine","steel-automaton"],allies:["algox-archer","algox-guard"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"algox-archer",type:"normal"},{name:"algox-guard",type:"normal"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player3:"normal",player4:"elite"},{name:"ruined-machine",player3:"normal",player4:"elite"},{name:"ruined-machine",player3:"normal",player4:"elite"},{name:"ruined-machine",player3:"elite",player4:"elite"},{name:"ruined-machine",player4:"elite"},{name:"steel-automaton",type:"normal"}]}]},{index:"116.1",name:"My Private Empire",edition:"fh",parent:"107",parentSections:[["149.4"]],marker:"d",monsters:["living-bones","living-doom"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"living-bones",player3:"normal",player4:"normal"},{name:"living-bones",player3:"normal",player4:"normal"},{name:"living-bones",player4:"normal"},{name:"living-bones",player4:"normal"},{name:"living-doom",type:"elite"}]}]},{index:"116.2",name:"Underground Station",edition:"fh",parent:"96",parentSections:[["18.1"]],marker:"2",monsters:["ancient-artillery","black-imp","rending-drake"],rooms:[{roomNumber:3,initial:!0,treasures:[10],monster:[{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"normal"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"black-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"black-imp",player3:"normal",player4:"elite"},{name:"rending-drake",player2:"elite",player3:"normal",player4:"elite"},{name:"rending-drake",player3:"normal",player4:"elite"}],objectives:[1,1,1,1]}]},{index:"116.3",name:"Library Upgraded",edition:"fh",conclusion:!0,named:!0,unlocks:["134"],rewards:{events:["winter-road:WR-46","summer-road:SR-48"],unlockCharacter:"astral"}},{index:"117.2",name:"Overrun Barricade",edition:"fh",parent:"43",marker:"1",monsters:["robotic-boltshooter","steel-automaton"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",player3:"normal",player4:"normal"},{name:"robotic-boltshooter",player4:"normal"},{name:"steel-automaton",player2:"normal",player3:"normal",player4:"elite"},{name:"steel-automaton",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"117.3",name:"Scrap Pit",edition:"fh",parent:"35",parentSections:[["104.4"]],monsters:["ruined-machine"],rules:[{round:"true",start:!0,spawns:[{monster:{name:"ruined-machine",player2:"elite"},marker:"f"},{monster:{name:"ruined-machine",player3:"elite",player4:"elite"},marker:"f",count:"2"}]}]},{index:"118.2",name:"Lurker Necromancy",edition:"fh",parent:"118",parentSections:[["125.2"]],marker:"2",monsters:["frozen-corpse","living-bones","lurker-mindsnipper"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"frozen-corpse",type:"normal"},{name:"frozen-corpse",type:"normal"},{name:"frozen-corpse",player3:"normal",player4:"elite"},{name:"living-bones",type:"elite"},{name:"living-bones",player3:"normal",player4:"elite"},{name:"lurker-mindsnipper",player2:"normal",player3:"normal",player4:"elite"},{name:"lurker-mindsnipper",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"118.3",name:"A Call for Help",edition:"fh",conclusion:!0,unlocks:["82"]},{index:"119.2",name:"A Contained Fire",edition:"fh",parent:"89",parentSections:[["36.1"]],objectives:[{name:"Faye",escort:!0,allyDeck:!0,health:"(Lx3)+8",initiative:11,actions:[{type:"move",value:"2"},{type:"attack",value:"L"}]}],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"objective",name:"Faye"},type:"setHp",value:"3+L"}]}]},{index:"119.3",name:"Random Scenario",edition:"fh",conclusion:!0,named:!0,random:!0,unlocks:["109"]},{index:"119.4",name:"A Growing Problem",edition:"fh",parent:"124",marker:"1",monsters:["living-bones","living-spirit"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"living-bones",type:"elite"},{name:"living-bones",player3:"normal",player4:"elite"},{name:"living-spirit",type:"normal"},{name:"living-spirit",type:"normal"},{name:"living-spirit",player2:"normal",player3:"normal",player4:"elite"},{name:"living-spirit",player3:"normal",player4:"elite"}]}]},{index:"120.1",name:"Corrupted Camp",edition:"fh",parent:"39",marker:"1",monsters:["algox-guard","deep-terror"],allies:["algox-guard"],rooms:[{roomNumber:5,initial:!0,monster:[{name:"algox-guard",type:"normal"},{name:"deep-terror",type:"normal"},{name:"deep-terror",type:"elite"},{name:"deep-terror",player3:"normal",player4:"elite"}]}]},{index:"120.2",name:"The Dancing Iceberg",edition:"fh",parent:"131",monsters:["lurker-wavethrower"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",player3:"normal",player4:"normal"},{name:"lurker-wavethrower",player4:"normal"}]}]},{index:"120.3",name:"%game.characterIconColored.fist% Retires",edition:"fh",conclusion:!0,rewards:{calendarSection:["185.4-10"]},retirement:"fist"},{index:"121.1",name:"Automaton Uprising",edition:"fh",parent:"59",monsters:["steel-automaton"],rooms:[{roomNumber:2,initial:!0,treasures:[7],monster:[{name:"steel-automaton",player2:"normal",player3:"normal",player4:"elite"},{name:"steel-automaton",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"122.1",name:"Sacred Soil",edition:"fh",parent:"69",monsters:["earth-demon","forest-imp","rending-drake"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"earth-demon",type:"elite"},{name:"forest-imp",type:"normal"},{name:"forest-imp",type:"normal"},{name:"forest-imp",type:"normal"},{name:"forest-imp",type:"normal"},{name:"forest-imp",player3:"elite",player4:"elite"},{name:"forest-imp",player4:"elite"},{name:"rending-drake",player3:"normal",player4:"elite"}]}]},{index:"122.3",name:"Decisive Action",edition:"fh",conclusion:!0,unlocks:["28","29"]},{index:"122.5",name:"The Savvas Seal",edition:"fh",parent:"63",parentSections:[["148.1"]],monsters:["savvas-icestorm","savvas-lavaflow"],rules:[{round:"true",always:!0,once:!0,note:"All monsters add -1 %game.action.attack% to all their attacks.<br>All characters and character summons add +1 %game.action.attack% to all their attacks"},{round:"R == 11",start:!0,always:!0,once:!0,spawns:[{monster:{name:"savvas-lavaflow",player2:"elite",player3:"elite",player4:"elite"},marker:"b"},{monster:{name:"earth-demon",player3:"normal",player4:"elite"},marker:"e"}]},{round:"R == 12",start:!0,spawns:[{monster:{name:"savvas-icestorm",player2:"elite",player3:"elite",player4:"elite"},marker:"b"},{monster:{name:"frost-demon",player3:"normal",player4:"elite"},marker:"e"}]}]},{index:"123.1",name:"Black Memories",edition:"fh",parent:"121",parentSections:[["76.2"]],monsters:["augmented-mindthief","large-vermling-scout"],rules:[{round:"true",always:!0,once:!0,sections:["108.3"],figures:[{identifier:{type:"monster",name:"augmented-mindthief",health:"[H/2{$math.floor}]"},type:"present"},{identifier:{type:"monster",name:"augmented-mindthief"},type:"setHp",value:"H/2"}]}],rooms:[{roomNumber:4,initial:!0,monster:[{name:"augmented-mindthief",type:"boss"},{name:"large-vermling-scout",player3:"normal",player4:"normal"},{name:"large-vermling-scout",player4:"normal"}]}]},{index:"123.3",name:"Relief Effort",edition:"fh",parent:"40",parentSections:[["115.3"]],marker:"2",monsters:["algox-archer","algox-guard","flaming-bladespinner","ruined-machine"],allies:["algox-archer","algox-guard"],rooms:[{roomNumber:3,initial:!0,treasures:[41],monster:[{name:"algox-archer",type:"normal"},{name:"algox-guard",type:"normal"},{name:"flaming-bladespinner",type:"elite"},{name:"flaming-bladespinner",type:"elite"},{name:"flaming-bladespinner",type:"elite"},{name:"flaming-bladespinner",player3:"normal",player4:"elite"},{name:"flaming-bladespinner",player3:"normal",player4:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player3:"normal",player4:"elite"},{name:"ruined-machine",player3:"normal",player4:"elite"}]}]},{index:"124.1",name:"Puzzle Solution",edition:"fh",conclusion:!0,named:!0,unlocks:["17"]},{index:"124.2",name:"Bolt",edition:"fh",parent:"133",parentSections:[["173.3","186.1"]],marker:"3",monsters:["polar-bear"],rooms:[{roomNumber:2,initial:!0,treasures:[34],monster:[{name:"polar-bear",type:"normal"},{name:"polar-bear",type:"elite"},{name:"polar-bear",player3:"normal",player4:"elite"}]}]},{index:"124.3",name:"A Tall Drunken Tale",edition:"fh",parent:"128",parentSections:[["172.2"]]},{index:"125.2",name:"Lurker Necromancy",edition:"fh",parent:"118",marker:"1",monsters:["living-bones","lurker-soldier"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"living-bones",type:"normal"},{name:"living-bones",player2:"normal",player3:"elite",player4:"elite"},{name:"living-bones",player4:"normal"},{name:"lurker-soldier",type:"elite"},{name:"lurker-soldier",player3:"normal",player4:"elite"}]}]},{index:"125.4",name:"Disable the mind control device",edition:"fh",parent:"121",parentSections:[["108.3"]],conclusion:!0,rewards:{morale:2}},{index:"126.1",name:"Low Morale",edition:"fh",conclusion:!0,named:!0,rewards:{prosperity:-1,custom:"<b>%wip%!</b> manually apply:<br>Collectively gain any 6 material resources.",morale:5}},{index:"126.2",name:"Harrower Library",edition:"fh",parent:"101",marker:"1",monsters:["algox-archer","algox-guard","algox-priest"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"algox-archer",type:"normal"},{name:"algox-archer",player2:"elite",player3:"normal",player4:"normal"},{name:"algox-archer",player3:"normal"},{name:"algox-guard",player2:"normal",player3:"elite",player4:"normal"},{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-guard",player4:"normal"},{name:"algox-priest",type:"normal"},{name:"algox-priest",type:"elite"},{name:"algox-priest",player3:"normal",player4:"normal"}]}]},{index:"126.3",name:"Scrap Pit",edition:"fh",parent:"35",parentSections:[["117.3"]],monsters:["spitting-drake"],rules:[{round:"true",start:!0,spawns:[{monster:{name:"spitting-drake",player2:"normal",player3:"normal",player4:"elite"},marker:"g"}],disableRules:[{edition:"fh",scenario:"117.3",index:0,section:!0}]}]},{index:"127.1",name:"Puzzle Solution",edition:"fh",conclusion:!0,named:!0,unlocks:["31"]},{index:"127.2",name:"Elemental Cores",edition:"fh",parent:"66",marker:"element:light",monsters:["earth-demon","flame-demon","sun-demon"],rooms:[{roomNumber:4,initial:!0,treasures:["G"],monster:[{name:"earth-demon",player3:"normal",player4:"normal"},{name:"flame-demon",type:"normal"},{name:"sun-demon",type:"normal"},{name:"sun-demon",type:"normal"},{name:"sun-demon",player4:"elite"}]}]},{index:"127.3",name:"Prison Break",edition:"fh",parent:"99",marker:"1",monsters:["frozen-corpse","robotic-boltshooter","steel-automaton"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"frozen-corpse",player2:"normal",player3:"normal",player4:"elite"},{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",player3:"normal",player4:"normal"},{name:"steel-automaton",player2:"normal",player3:"normal",player4:"elite"},{name:"steel-automaton",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"128.1",name:"Tower of Knowledge",edition:"fh",parent:"134",marker:"3",rules:[{round:"true",always:!0,once:!0,sections:["44.3"]}],rooms:[{roomNumber:6,initial:!0,monster:[]}]},{index:"128.2",name:"Crain's Recovery",edition:"fh",conclusion:!0,unlocks:["35"],rewards:{custom:"Open the Puzzle Book to the first page"}},{index:"128.4",name:"The Titan",edition:"fh",parent:"123",parentSections:[["104.2","158.1","193.3"]],marker:"4",monsters:["power-core"],rooms:[{roomNumber:3,initial:!0,treasures:[52],monster:[{name:"power-core",type:"elite"}]}]},{index:"128.5",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{items:["245"],calendarSection:["185.2-1"],removeLootDeckCards:[1419]}},{index:"129.2",name:"Invasion of the Dock",edition:"fh",parent:"71",marker:"1",monsters:["abael-scout","lurker-clawcrusher","lurker-mindsnipper","lurker-wavethrower","piranha-pig"],rooms:[{roomNumber:1,ref:"14-A",initial:!0,treasures:[23],monster:[{name:"abael-scout",type:"normal"},{name:"lurker-clawcrusher",type:"normal"},{name:"lurker-clawcrusher",player3:"normal",player4:"normal"},{name:"lurker-mindsnipper",type:"normal"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",player4:"normal"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",player2:"normal",player3:"normal",player4:"elite"},{name:"piranha-pig",player3:"normal",player4:"normal"}]}]},{index:"129.4",name:"Temple of Feline Power",edition:"fh",parent:"132",parentSections:[["110.2"]],marker:"1",monsters:["frost-demon","ice-wraith","snow-imp"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"frost-demon",type:"normal"},{name:"frost-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"frost-demon",player4:"elite"},{name:"ice-wraith",type:"normal"},{name:"ice-wraith",type:"normal"},{name:"ice-wraith",player3:"normal",player4:"normal"},{name:"snow-imp",type:"elite"},{name:"snow-imp",player3:"normal",player4:"normal"},{name:"snow-imp",player4:"elite"}]}]},{index:"130.1",name:"Deadly Pastimes",edition:"fh",parent:"85",marker:"1",monsters:["black-imp","polar-bear"],rooms:[{roomNumber:11,initial:!0,monster:[{name:"black-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"black-imp",player3:"elite",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"130.3",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["90"]},{index:"130.4",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"130.5",name:"Blizzard Island",edition:"fh",parent:"48",marker:"1",monsters:["frost-demon","wind-demon"],rooms:[{roomNumber:3,initial:!0,treasures:[15],monster:[{name:"frost-demon",type:"normal"},{name:"frost-demon",type:"normal"},{name:"frost-demon",player3:"normal",player4:"elite"},{name:"wind-demon",type:"elite"},{name:"wind-demon",player3:"normal",player4:"normal"},{name:"wind-demon",player4:"normal"}]}]},{index:"131.2",name:"Fish King's Ascension",edition:"fh",parent:"77",monsters:["wind-demon"],rules:[{round:"true",always:!0,once:!0,note:"Read %data.section:184.5%",figures:[{identifier:{type:"monster",edition:"fh",name:"wind-demon"},type:"dead"}]},{round:"true",always:!0,once:!0,sections:["102.2"],figures:[{identifier:{type:"monster",name:"fish-king",health:"[H/2{$math.ceil}]"},type:"present"},{identifier:{type:"monster",name:"fish-king"},type:"setHp",value:"[H/2{$math.ceil}]"}]}],rooms:[{roomNumber:3,initial:!0,monster:[{name:"wind-demon",type:"normal"},{name:"wind-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"wind-demon",player4:"normal"}]}]},{index:"131.3",name:"Collapsing Vent",edition:"fh",parent:"98",parentSections:[["145.3"]],marker:"3",rooms:[{roomNumber:2,initial:!0,monster:[]}]},{index:"131.4",name:"Quatryl Library",edition:"fh",parent:"26",monsters:["ruined-machine"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"ruined-machine",type:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player4:"normal"},{name:"ruined-machine",player4:"normal"}]}]},{index:"131.5",name:"A Contained Fire",edition:"fh",parent:"89",parentSections:[["119.2"]],marker:"2",monsters:["algox-guard","algox-priest"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"algox-guard",type:"normal"},{name:"algox-priest",type:"elite"},{name:"algox-priest",player3:"normal",player4:"elite"}]}]},{index:"132.1",name:"%game.characterIconColored.shards% Retires",edition:"fh",conclusion:!0,rewards:{inspiration:4},retirement:"shards"},{index:"132.2",name:"A Giant Block of Ice",edition:"fh",parent:"72",parentSections:[["105.3"]],marker:"3",resetRound:"visible",monsters:["frozen-corpse","steel-automaton"],rules:[{round:"R == 2",spawns:[{monster:{name:"steel-automaton",type:"normal"}}],noteTop:"Replace any one metal cabinet"},{round:"R == 4",spawns:[{monster:{name:"steel-automaton",player3:"normal",player4:"normal"}}]},{round:"R == 6",spawns:[{monster:{name:"steel-automaton",player4:"normal"}}]}],rooms:[{roomNumber:3,initial:!0,treasures:[37],monster:[{name:"frozen-corpse",type:"normal"},{name:"frozen-corpse",player3:"normal",player4:"elite"},{name:"steel-automaton",type:"elite"}]}]},{index:"132.3",name:"Give Rattusca her share",edition:"fh",parent:"90",conclusion:!0,unlocks:["91"],forcedLinks:["91"],rewards:{collectiveGold:-10,battleGoals:1,custom:"Each character gains 10 gold for each numbered token they looted"}},{index:"132.4",name:"A Tall Drunken Tale",edition:"fh",parent:"128",parentSections:[["166.2"]],monsters:["vermling-scout"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"vermling-scout",type:"elite"},{name:"vermling-scout",type:"elite"},{name:"vermling-scout",player3:"elite",player4:"elite"},{name:"vermling-scout",player4:"elite"}]}]},{index:"133.1",name:"Aesther Enhancements",edition:"fh",conclusion:!0,rewards:{gold:50,hints:{gold:"This gold must immediately be spent on enhancements"}}},{index:"133.2",name:"Ruinous Research Lab",edition:"fh",parent:"81",marker:"2",monsters:["ancient-artillery","ruined-machine","steel-automaton"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"steel-automaton",type:"normal"}]}]},{index:"133.3",name:"Fleeting Permanence",edition:"fh",parent:"52",marker:"2",monsters:["snow-imp"],rooms:[{roomNumber:5,initial:!0,treasures:[1],monster:[{name:"snow-imp",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"133.4",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{items:["245"],calendarSection:["80.4-1"],removeLootDeckCards:[1418]}},{index:"133.5",name:"The Lurker Problem",edition:"fh",parent:"78",parentSections:[["51.2"],["92.3"]],marker:"5",monsters:["lurker-soldier","lurker-wavethrower"],rooms:[{roomNumber:8,initial:!0,monster:[{name:"lurker-soldier",type:"elite"},{name:"lurker-soldier",player3:"normal",player4:"normal"},{name:"lurker-soldier",player4:"normal"},{name:"lurker-wavethrower",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"134.2",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["159.3"]],marker:"8",rooms:[{roomNumber:12,initial:!0,monster:[]}]},{index:"134.3",name:"Flotsam",edition:"fh",parent:"73",parentSections:[["143.1"]],marker:"a",monsters:["abael-herder","fish-king","piranha-pig"],rules:[{round:"true",always:!0,once:!0,sections:["41.4"],figures:[{identifier:{type:"monster",name:"fish-king",health:"[H/2{$math.floor}]"},type:"present"},{identifier:{type:"monster",name:"fish-king"},type:"setHp",value:"[H/2{$math.floor}]"}]}],rooms:[{roomNumber:3,initial:!0,monster:[{name:"abael-herder",player2:"normal",player3:"elite",player4:"elite"},{name:"fish-king",type:"boss"},{name:"piranha-pig",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"135.1",name:"Bathysphere Ready",edition:"fh",conclusion:!0,unlocks:["42"]},{index:"135.2",name:"Sunless Trench",edition:"fh",parent:"42",marker:"3",monsters:["ooze"],rooms:[{roomNumber:1,ref:"12-D",initial:!0,monster:[{name:"ooze",type:"elite"},{name:"ooze",player2:"normal",player3:"normal",player4:"elite"},{name:"ooze",player2:"normal",player3:"elite",player4:"elite"},{name:"ooze",player3:"normal",player4:"normal"},{name:"ooze",player4:"normal"}]}]},{index:"136.5",name:"The Longest Second",edition:"fh",parent:"125",parentSections:[["108.1"]],marker:"a",monsters:["robotic-boltshooter","ruined-machine"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"robotic-boltshooter",player2:"normal",player3:"normal",player4:"elite"},{name:"robotic-boltshooter",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player3:"elite",player4:"elite"},{name:"ruined-machine",player4:"elite"}]}]},{index:"137.1",name:"Orphan's Halls",edition:"fh",parent:"51",parentSections:[["32.1"]],marker:"2",monsters:["ancient-artillery","flaming-bladespinner"],objectives:[{name:"Door 2",health:"(L+2)xC"}],rooms:[{roomNumber:3,initial:!0,monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"flaming-bladespinner",type:"normal"},{name:"flaming-bladespinner",type:"normal"},{name:"flaming-bladespinner",player3:"normal",player4:"elite"}],objectives:[1]}]},{index:"138.1",name:"%game.characterIconColored.drifter% Returns",edition:"fh",conclusion:!0,rewards:{randomItemBlueprint:1}},{index:"138.2",name:"Ice Cave",edition:"fh",parent:"111",parentSections:[["182.2"]],marker:"2",monsters:["frost-demon","hound"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"frost-demon",type:"normal"},{name:"frost-demon",type:"normal"},{name:"frost-demon",player3:"normal",player4:"normal"},{name:"frost-demon",player4:"normal"},{name:"hound",type:"normal"},{name:"hound",type:"elite"},{name:"hound",player3:"normal",player4:"elite"},{name:"hound",player4:"normal"}]}]},{index:"139.1",name:"A Tall Drunken Tale",edition:"fh",parent:"128",parentSections:[["124.3"]],monsters:["abael-scout","lurker-wavethrower","steel-automaton"],rooms:[{roomNumber:3,initial:!0,treasures:[54],monster:[{name:"abael-scout",type:"normal"},{name:"abael-scout",type:"elite"},{name:"abael-scout",type:"elite"},{name:"abael-scout",player2:"normal",player3:"elite",player4:"elite"},{name:"abael-scout",player3:"elite",player4:"normal"},{name:"abael-scout",player3:"elite",player4:"elite"},{name:"abael-scout",player4:"normal"},{name:"abael-scout",player4:"normal"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",player3:"normal",player4:"normal"},{name:"lurker-wavethrower",player4:"normal"},{name:"lurker-wavethrower",player4:"normal"},{name:"steel-automaton",type:"normal"},{name:"steel-automaton",player4:"normal"}]}]},{index:"139.2",name:"Boat Build",edition:"fh",conclusion:!0,rewards:{envelopes:["B"],prosperity:1,overlayCampaignSticker:{name:"boat",location:"A",coordinates:{x:1696.125,y:2563.875,width:234,height:160}},custom:"You may now play scenarios with the %game.fhIcon:boat% requirement. Name your boat, then write it on the sticker and the front of B-01 and B-02 in the blanks.<br>Shuffle events B-01 to 13 together and use them to create the boat event deck. Store this deck in envelope B when not in use and use the card divider to separate the boat event deck from the other boat event cards."}},{index:"140.1",name:"Lustrous Pit",edition:"fh",parent:"108",marker:"1",monsters:["ice-wraith","snow-imp"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"ice-wraith",type:"normal"},{name:"ice-wraith",player3:"normal",player4:"normal"},{name:"snow-imp",type:"normal"},{name:"snow-imp",type:"normal"},{name:"snow-imp",type:"elite"},{name:"snow-imp",player4:"elite"},{name:"snow-imp",player4:"elite"}]}]},{index:"140.3",name:"The Work Continues",edition:"fh",conclusion:!0,rewards:{custom:"Do not turn to the next page in the puzzle book. Instead write the solution to the next puzzle on the same page"}},{index:"141.1",name:"A Giant Block of Ice",edition:"fh",parent:"72",marker:"1",monsters:["ice-wraith","living-bones"],rules:[{round:"true",always:!0,once:!0,spawns:[{monster:{name:"ice-wraith",type:"normal"},marker:"a"},{monster:{name:"ice-wraith",player4:"elite"},marker:"b"}]}],rooms:[{roomNumber:4,initial:!0,monster:[{name:"living-bones",type:"normal"},{name:"living-bones",player3:"normal",player4:"normal"}]}]},{index:"141.2-1",name:"1 wagon escaped",edition:"fh",parent:"116",conclusion:!0,rewards:{morale:1}},{index:"141.2-2",name:"2 wagons escaped",edition:"fh",parent:"116",conclusion:!0,rewards:{morale:1,collectiveResources:[{type:"lumber",value:1},{type:"metal",value:1},{type:"hide",value:1}]}},{index:"141.2-3",name:"3 wagons escaped",edition:"fh",parent:"116",conclusion:!0,rewards:{experience:10,custom:"Gain any 2 material resources each",morale:1,collectiveResources:[{type:"lumber",value:1},{type:"metal",value:1},{type:"hide",value:1}]}},{index:"141.2-4",name:"4 wagons escaped",edition:"fh",parent:"116",conclusion:!0,rewards:{experience:10,custom:"Gain any 2 material resources each",morale:1,collectiveResources:[{type:"lumber",value:1},{type:"metal",value:1},{type:"hide",value:1}],randomItemBlueprint:1}},{index:"141.2-5",name:"5 wagons escaped",edition:"fh",parent:"116",conclusion:!0,rewards:{experience:10,prosperity:1,custom:"Gain any 2 material resources each",morale:3,collectiveResources:[{type:"lumber",value:1},{type:"metal",value:1},{type:"hide",value:1}],randomItemBlueprint:1}},{index:"141.3",name:"Inside the Swarm",edition:"fh",parent:"100",marker:"1",monsters:["burrowing-blade","lurker-mindsnipper"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",player3:"normal",player4:"elite"},{name:"lurker-mindsnipper",type:"elite"},{name:"lurker-mindsnipper",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"141.4",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["181.3"],["178.4"]],marker:"12",monsters:["black-imp","burrowing-blade","polar-bear"],rooms:[{roomNumber:13,initial:!0,monster:[{name:"black-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",player3:"normal",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"142.2",name:"A Strong Foundation",edition:"fh",parent:"65",marker:"1",monsters:["frozen-corpse","living-bones","snow-imp"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"frozen-corpse",player2:"normal",player3:"normal",player4:"elite"},{name:"living-bones",type:"elite"},{name:"living-bones",player4:"normal"},{name:"snow-imp",type:"normal"},{name:"snow-imp",type:"elite"},{name:"snow-imp",player3:"normal",player4:"normal"},{name:"snow-imp",player3:"normal",player4:"elite"}]}]},{index:"142.4",name:"Random Scenario",edition:"fh",conclusion:!0,named:!0,random:!0,unlocks:["107"]},{index:"143.1",name:"Flotsam",edition:"fh",parent:"73",parentSections:[["28.3"]],marker:"2",monsters:["abael-herder","abael-scout","piranha-pig"],rooms:[{roomNumber:4,initial:!0,treasures:[33],monster:[{name:"abael-herder",type:"elite"},{name:"abael-herder",player3:"normal",player4:"elite"},{name:"abael-scout",player2:"normal",player3:"elite",player4:"elite"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"143.2",name:"Library Built: Otherwise",edition:"fh",parentSections:[["190.3"]],conclusion:!0,named:!0,rewards:{events:["winter-road:WR-45","summer-road:SR-47"],calendarSection:["152.3-2"]}},{index:"143.3",name:"Sacred Soil",edition:"fh",parent:"69",monsters:["earth-demon","forest-imp","rending-drake"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"earth-demon",type:"elite"},{name:"forest-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"forest-imp",player3:"normal",player4:"elite"},{name:"forest-imp",player3:"normal",player4:"elite"},{name:"rending-drake",player2:"normal",player3:"elite",player4:"elite"},{name:"rending-drake",player4:"normal"}]}]},{index:"144.1",name:"The Dead Mile",edition:"fh",parent:"37",parentSections:[["81.5"]],marker:"3",resetRound:"hidden",monsters:["living-bones","living-spirit","ruined-machine"],rules:[{round:"R % 2 == 0",start:!0,spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},marker:"1"}]},{round:"R % 2 == 1",start:!0,spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},marker:"1"}]},{round:"true",always:!0,disableRules:[{edition:"fh",scenario:"81.5",index:1,section:!0},{edition:"fh",scenario:"81.5",index:2,section:!0}]}],rooms:[{roomNumber:4,ref:"07-H",initial:!0,monster:[{name:"living-bones",player2:"normal",player3:"normal",player4:"elite"},{name:"living-bones",player2:"normal",player3:"elite",player4:"elite"},{name:"living-bones",player2:"elite",player3:"elite",player4:"elite"},{name:"living-bones",player3:"normal",player4:"normal"},{name:"living-bones",player4:"normal"}]}]},{index:"144.3",name:"Lumber Depot Built",edition:"fh",conclusion:!0,named:!0,rewards:{events:["summer-road:SR-39","summer-road:SR-44"]}},{index:"144.4",name:"Elemental Cores",edition:"fh",parent:"66",marker:"element:air",monsters:["flame-demon","night-demon","wind-demon"],rooms:[{roomNumber:5,initial:!0,treasures:["G"],monster:[{name:"flame-demon",player3:"normal",player4:"normal"},{name:"night-demon",type:"normal"},{name:"wind-demon",type:"normal"},{name:"wind-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"wind-demon",player4:"normal"}]}]},{index:"145.1",name:"The Eternal Crave",edition:"fh",parent:"122",parentSections:[["179.2"]],marker:"5",monsters:["ice-wraith","polar-bear","snow-imp"],rooms:[{roomNumber:1,ref:"11-B",initial:!0,treasures:[31],monster:[{name:"ice-wraith",type:"elite"},{name:"ice-wraith",player3:"normal",player4:"normal"},{name:"polar-bear",player2:"normal",player3:"normal",player4:"normal"},{name:"polar-bear",player4:"normal"},{name:"polar-bear",player4:"normal"},{name:"snow-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",player2:"normal",player3:"elite"},{name:"snow-imp",player2:"normal",player3:"elite"},{name:"snow-imp",player4:"elite"}]}]},{index:"145.2",name:"Hall of Revelry Built: Otherwise",edition:"fh",parentSections:[["196.1"],["153.2"]],conclusion:!0,named:!0,rewards:{events:["summer-road:SR-51","winter-road:WR-40"],custom:"Open the trials deck now. Do not shuffle it. Each player draws one trial and reads it secretly.<br>Once read by a player, a trial cannot be returned to the deck and must be completed by that player. Some trials may take several scenarios to complete, and should be kept secret by the player until completed. If and when a trial is completed by a player, that player may reveal the trial to other players for the first time, then remove it from the game and draw a new trial off the top of the trials deck."}},{index:"145.3",name:"Collapsing Vent",edition:"fh",parent:"98",parentSections:[["160.1"]],marker:"2",monsters:["ancient-artillery","burrowing-blade","spitting-drake"],rooms:[{roomNumber:3,initial:!0,treasures:[35],monster:[{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",player3:"normal",player4:"elite"},{name:"spitting-drake",type:"normal"},{name:"spitting-drake",player4:"normal"}]}]},{index:"146.1A",name:"Artificer Recovered",edition:"fh",conclusion:!0,unlocks:["74A"],blocks:["74B"]},{index:"146.1B",name:"Artificer Recovered",edition:"fh",conclusion:!0,unlocks:["74B"],blocks:["74A"]},{index:"146.2",name:"Keep Rattusca's share",edition:"fh",parent:"90",conclusion:!0,unlocks:["91"],forcedLinks:["91"],rewards:{collectiveGold:-5,battleGoals:1,custom:"Each character gains 10 gold for each numbered token they looted <br>All characters start the next scenario with %game.condition.muddle% and %game.condition.curse%"}},{index:"146.3",name:"A Contained Fire",edition:"fh",parent:"89",parentSections:[["131.5"]],marker:"3",monsters:["algox-archer","algox-guard","algox-priest","vanjal"],objectives:[{name:"Faye",escort:!0,allyDeck:!0,health:"(Lx3)+8",initiative:11,actions:[{type:"move",value:"3"},{type:"attack",value:"3+L",subActions:[{type:"condition",value:"brittle",small:!0},{type:"custom",value:"When this attack is performed, on the next round at initiative 99 instead perform:",small:!0,subActions:[{type:"heal",value:2,subActions:[{type:"specialTarget",value:"self",small:!0}]}]}]}]}],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"objective",edition:"escort",name:"Faye"},type:"transfer",value:"1"}]}],rooms:[{roomNumber:4,initial:!0,treasures:[42],monster:[{name:"algox-archer",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-guard",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-priest",player3:"normal",player4:"normal"},{name:"vanjal",type:"boss"}]}]},{index:"146.4",name:"Random Scenario",edition:"fh",conclusion:!0,named:!0,random:!0,unlocks:["112"]},{index:"146.5",name:"Lush Grotto",edition:"fh",parent:"113",parentSections:[["112.1"],["183.2"]],monsters:["forest-imp","polar-bear"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"forest-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"forest-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"147.4",name:"Tower of Knowledge",edition:"fh",parent:"134",marker:"2",rules:[{round:"true",always:!0,once:!0,sections:["33.3"]}],rooms:[{roomNumber:7,initial:!0,monster:[]}]},{index:"148.1",name:"The Savvas Seal",edition:"fh",parent:"63",parentSections:[["7.1"]],monsters:["savvas-icestorm","savvas-lavaflow"],rules:[{round:"true",always:!0,figures:[{identifier:{type:"monster",name:".*"},type:"permanentCondition",value:"wound"},{identifier:{type:"monster",name:".*"},type:"permanentCondition",value:"muddle"}],disableRules:[{edition:"fh",scenario:"7.1",index:0,section:!0}]},{round:"R == 9",start:!0,always:!0,once:!0,spawns:[{monster:{name:"earth-demon",player2:"normal",player3:"normal",player4:"elite"},marker:"d"},{monster:{name:"flame-demon",player2:"normal",player3:"elite",player4:"elite"},marker:"e"}]},{round:"R == 10",start:!0,spawns:[{monster:{name:"wind-demon",player2:"normal",player3:"elite",player4:"elite"},marker:"d"},{monster:{name:"frost-demon",player2:"normal",player3:"normal",player4:"elite"},marker:"e"}]},{round:"R == 10",sections:["122.5"]}]},{index:"148.2",name:"%game.characterIconColored.prism% Retires",edition:"fh",conclusion:!0,rewards:{events:["winter-road:WR-48"]},retirement:"prism"},{index:"148.4",name:"Depths of Delirium",edition:"fh",parent:"27",parentSections:[["69.2"]],marker:"4",monsters:["deep-terror","living-bones"],rules:[{round:"true",always:!0,once:!0,note:"All characters must move one card from their hand or discard pile to their taken pile."}],rooms:[{roomNumber:6,initial:!0,treasures:[24],monster:[{name:"deep-terror",type:"normal"},{name:"deep-terror",player4:"normal"},{name:"living-bones",type:"normal"},{name:"living-bones",player4:"normal"}],objectives:[1,1]}]},{index:"148.5",name:"How to Lay an Ambush",edition:"fh",parent:"129",parentSections:[["154.2"]],marker:"3",monsters:["algox-guard","algox-priest","algox-scout"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"algox-guard",player3:"normal",player4:"normal"},{name:"algox-priest",type:"normal"},{name:"algox-scout",type:"normal"},{name:"algox-scout",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-scout",player2:"normal",player4:"normal"}]}]},{index:"149.1",name:"Nerve Center",edition:"fh",parent:"44",parentSections:[["52.1"]],marker:"2",monsters:["ancient-artillery","flaming-bladespinner"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"flaming-bladespinner",type:"elite"},{name:"flaming-bladespinner",player3:"normal",player4:"normal"},{name:"flaming-bladespinner",player4:"normal"}],objectives:[1]}]},{index:"149.3",name:"To Bury the Dead",edition:"fh",parent:"95",parentSections:[["84.1"]],marker:"2",monsters:["ice-wraith","living-bones","living-doom","reluctant-ghost-section-149.3"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"ice-wraith",type:"elite"},{name:"living-bones",player3:"normal",player4:"normal"},{name:"living-bones",player3:"normal",player4:"normal"},{name:"living-doom",player2:"normal",player3:"normal",player4:"elite"},{name:"reluctant-ghost-section-149.3",type:"boss"}]}]},{index:"149.4",name:"My Private Empire",edition:"fh",parent:"107",parentSections:[["155.1"]],marker:"3",rooms:[{roomNumber:5,initial:!0,monster:[]}]},{index:"149.5",name:"Artificer Recovered",edition:"fh",conclusion:!0,unlocks:["72"]},{index:"150.2",name:"A Grand View",edition:"fh",parent:"94",monsters:["ruined-machine","steel-automaton","vermling-scout-scenario-94"],allies:["vermling-scout-scenario-94"],rules:[{round:"true",note:"one for each character or Vermling Scout adjacent to a Flaming Bladespinner in any empty starting hex.",spawns:[{monster:{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},count:"0",manual:!0}]},{round:"true",always:!0,disableRules:[{edition:"fh",scenario:"94",index:0,section:!1}]}],rooms:[{roomNumber:4,initial:!0,monster:[{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal"},{name:"steel-automaton",player2:"normal",player3:"elite",player4:"normal"},{name:"steel-automaton",player4:"normal"},{name:"steel-automaton",player4:"normal"},{name:"vermling-scout-scenario-94",type:"elite"},{name:"vermling-scout-scenario-94",type:"elite"},{name:"vermling-scout-scenario-94",type:"elite"},{name:"vermling-scout-scenario-94",type:"elite"},{name:"vermling-scout-scenario-94",player3:"elite",player4:"elite"},{name:"vermling-scout-scenario-94",player3:"elite",player4:"elite"},{name:"vermling-scout-scenario-94",player4:"elite"},{name:"vermling-scout-scenario-94",player4:"elite"}]}]},{index:"150.3",name:"My Private Empire",edition:"fh",parent:"107",parentSections:[["168.4"]],marker:"1",rooms:[{roomNumber:6,initial:!0,monster:[]}]},{index:"151.1",name:"The Eternal Crave",edition:"fh",parent:"122",parentSections:[["98.1"]],marker:"2",monsters:["polar-bear","snow-imp"],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"monster",name:"hungry-maw"},type:"loseCondition",value:"bane"},{identifier:{type:"monster",name:"hungry-maw"},type:"loseCondition",value:"brittle"},{identifier:{type:"monster",name:"hungry-maw"},type:"loseCondition",value:"muddle"},{identifier:{type:"monster",name:"hungry-maw"},type:"heal",value:"LxC"}]}],rooms:[{roomNumber:1,ref:"12-B",initial:!0,treasures:[31],monster:[{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",type:"normal"},{name:"snow-imp",player2:"normal",player3:"elite",player4:"normal"},{name:"snow-imp",player4:"elite"}]}]},{index:"151.2",name:"Inn Built",edition:"fh",conclusion:!0,named:!0,rewards:{events:["winter-outpost:WO-71","summer-outpost:SO-55"]}},{index:"151.3",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["99"]},{index:"151.4",name:"Gaps in the Road B",edition:"fh",parent:"74B",parentSections:[["52.2B"]],marker:"3",monsters:["piranha-pig"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"piranha-pig",type:"normal"},{name:"piranha-pig",player2:"normal",player3:"normal",player4:"elite"},{name:"piranha-pig",player2:"normal",player3:"elite",player4:"elite"},{name:"piranha-pig",player3:"normal",player4:"normal"}]}]},{index:"152.1",name:"The Eternal Crave",edition:"fh",parent:"122",blockedSections:["98.1"],marker:"2",monsters:["polar-bear","snow-imp"],rooms:[{roomNumber:1,ref:"12-B",initial:!0,monster:[{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"},{name:"snow-imp",type:"normal"},{name:"snow-imp",player2:"normal",player3:"elite",player4:"normal"},{name:"snow-imp",player4:"normal"}]}]},{index:"152.2",name:"A Tall Drunken Tale",edition:"fh",parent:"128",parentSections:[["170.1"]],monsters:[],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"ward"}]}],rooms:[]},{index:"152.3",name:"Library Lesson",edition:"fh",conclusion:!0,rewards:{events:["summer-outpost:SO-58"]}},{index:"153.1",name:"Derelict Freighter",edition:"fh",parent:"127",marker:"a",monsters:["frozen-corpse","ice-wraith"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"frozen-corpse",player2:"normal",player3:"elite",player4:"elite"},{name:"frozen-corpse",player3:"normal",player4:"elite"},{name:"ice-wraith",type:"normal"},{name:"ice-wraith",type:"normal"}]}]},{index:"153.2",name:"Hall of Revelry Built: If %game.trait:aesther%",edition:"fh",parentSections:[["178.2"]],conclusion:!0,named:!0},{index:"153.4",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"154.1",name:"Lush Grotto",errata:"section154-1",edition:"fh",parent:"113",monsters:["forest-imp","polar-bear"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"forest-imp",type:"normal"},{name:"forest-imp",type:"normal"},{name:"forest-imp",player3:"normal",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"154.2",name:"How to Lay an Ambush",edition:"fh",parent:"129",parentSections:[["156.4"]],marker:"2",monsters:["algox-guard","algox-priest"],rooms:[{roomNumber:3,initial:!0,treasures:[78],monster:[{name:"algox-guard",type:"normal"},{name:"algox-guard",type:"normal"},{name:"algox-guard",type:"normal"},{name:"algox-guard",player3:"normal",player4:"elite"},{name:"algox-priest",type:"normal"},{name:"algox-priest",type:"normal"},{name:"algox-priest",type:"elite",marker:"b"},{name:"algox-priest",player4:"normal"}]}]},{index:"154.4",name:"Tower of Knowledge",edition:"fh",parent:"134",parentSections:[["11.6","30.5"]],monsters:["steel-automaton"],rules:[{round:"true",always:!0,alwaysApply:!0,statEffects:[{identifier:{type:"monster",edition:"fh",name:"steel-automaton"},statEffect:{health:"[HxC/2{$math.ceil}]",absolute:!0},note:"%data.scenario.rules.fh.134%"}]}],rooms:[{roomNumber:8,initial:!0,monster:[{name:"steel-automaton",type:"elite"}]}]},{index:"155.1",name:"My Private Empire",edition:"fh",parent:"107",parentSections:[["103.1"]],marker:"c",monsters:["flaming-bladespinner","robotic-boltshooter"],rooms:[{roomNumber:7,initial:!0,monster:[{name:"flaming-bladespinner",type:"normal"},{name:"flaming-bladespinner",type:"normal"},{name:"flaming-bladespinner",player3:"normal",player4:"normal"},{name:"flaming-bladespinner",player4:"normal"},{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",player3:"normal",player4:"normal"},{name:"robotic-boltshooter",player4:"normal"}]}]},{index:"155.3",name:"Low Morale",edition:"fh",conclusion:!0,named:!0,rewards:{prosperity:-2,custom:"<b>%wip%!</b> manually apply:<br>Collectively gain any 6 material resources.",morale:5}},{index:"155.4",name:"Hall of Revelry Built: Playing Frosthaven Solo",edition:"fh",parentSections:[["196.1"],["153.2"]],conclusion:!0,named:!0,rewards:{events:["winter-road:WR-40"],custom:"Unlock Personal Quest 23. Any character may abandon all progress on their current personal quest to take it now, otherwise add it to the personal quest deck."}},{index:"156.1",name:"Opening the Pass",edition:"fh",conclusion:!0,unlocks:["114"]},{index:"156.2",name:"Raised by Wolves",edition:"fh",parent:"112",parentSections:[["97.1"]],marker:"2",monsters:["burrowing-blade","chaos-demon"],rooms:[{roomNumber:3,initial:!0,treasures:[25],monster:[{name:"burrowing-blade",player2:"normal",player3:"normal",player4:"elite"},{name:"burrowing-blade",player2:"normal",player3:"elite",player4:"elite"},{name:"chaos-demon",type:"elite"},{name:"chaos-demon",type:"elite"},{name:"chaos-demon",player3:"normal",player4:"normal"},{name:"chaos-demon",player4:"normal"}]}]},{index:"156.4",name:"How to Lay an Ambush",edition:"fh",parent:"129",marker:"1",monsters:["algox-guard","algox-scout"],rules:[{round:"true",always:!0,once:!0,note:"All Algox Scouts, then Algox Guards, immediately perform %game.action.move%9 focusing on moving toward %game.mapMarker.a%"},{round:"true",always:!0,once:!0,sections:["154.2"]}],rooms:[{roomNumber:4,initial:!0,monster:[{name:"algox-guard",type:"elite"},{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-scout",type:"elite"},{name:"algox-scout",player3:"normal",player4:"elite"}]}]},{index:"157.1",name:"Under the Influence",edition:"fh",parent:"120",parentSections:[["101.1"]],marker:"2",monsters:["robotic-boltshooter","steel-automaton"],objectives:[{name:"Glowing Orb",health:"((Lx2)+3)xC"}],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"muddle",scenarioEffect:!0},{identifier:{type:"character",name:".*"},type:"amAdd",value:"curse:1",scenarioEffect:!0}]}],rooms:[{roomNumber:3,initial:!0,monster:[{name:"robotic-boltshooter",player2:"normal",player3:"normal",player4:"elite"},{name:"robotic-boltshooter",player2:"normal",player3:"normal",player4:"elite"},{name:"steel-automaton",player2:"normal",player3:"elite",player4:"elite"}],objectives:[1]}]},{index:"157.2",name:"Enhancer Upgraded",edition:"fh",conclusion:!0,named:!0,rewards:{unlockCharacter:"shackles"}},{index:"157.3",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["93A","93B"]},{index:"158.1",name:"The Titan",edition:"fh",parent:"123",parentSections:[["104.2"]],marker:"2",monsters:["algox-snowspeaker","ancient-artillery"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"algox-snowspeaker",type:"elite"},{name:"algox-snowspeaker",player3:"normal",player4:"elite"},{name:"ancient-artillery",type:"elite"},{name:"ancient-artillery",player3:"normal",player4:"elite"}]}]},{index:"158.4",name:"The Longest Second",edition:"fh",parent:"125",marker:"1",monsters:["robotic-boltshooter","ruined-machine"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"robotic-boltshooter",type:"elite"},{name:"robotic-boltshooter",player3:"normal",player4:"normal"},{name:"robotic-boltshooter",player4:"normal"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player3:"normal",player4:"elite"}]}]},{index:"159.1",name:"Work Freeze",edition:"fh",parent:"114",marker:"1",monsters:["hound","polar-bear","snow-imp"],objectives:[{name:"Ice Pillar",health:"(2xL)+2",actions:[{type:"shield",value:"[L/2{$math.ceil}]"}]}],rules:[{round:"R % 2 == 0",start:!0,spawns:[{monster:{name:"hound",player2:"normal",player3:"elite"},marker:"e"},{monster:{name:"polar-bear",player4:"normal"},marker:"e"}]},{round:"R % 2 == 1",start:!0,spawns:[{monster:{name:"snow-imp",player2:"normal",player3:"elite",player4:"normal"},marker:"f"},{monster:{name:"snow-imp",player4:"elite"},marker:"f"}]},{round:"true",always:!0,disableRules:[{edition:"fh",scenario:"114",index:0,section:!1},{edition:"fh",scenario:"114",index:1,section:!1}]}],rooms:[{roomNumber:1,ref:"13-C",initial:!0,monster:[{name:"hound",player3:"normal",player4:"normal"},{name:"hound",player4:"normal"},{name:"polar-bear",type:"normal"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",type:"normal"},{name:"snow-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"snow-imp",player4:"elite"}],objectives:[1,1,1,1]}]},{index:"159.3",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["56.1"],["82.3"]],marker:"7",monsters:["lightning-eel"],rooms:[{roomNumber:14,initial:!0,monster:[{name:"lightning-eel",player2:"normal",player3:"normal",player4:"elite"},{name:"lightning-eel",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"159.4",name:"The Forge",edition:"fh",conclusion:!0,unlocks:["106"]},{index:"160.1",name:"Collapsing Vent",edition:"fh",parent:"98",marker:"1",monsters:["ancient-artillery","black-imp","burrowing-blade"],rooms:[{roomNumber:4,initial:!0,treasures:[65],monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"black-imp",type:"normal"},{name:"black-imp",player2:"elite",player3:"normal",player4:"normal"},{name:"black-imp",player4:"normal"},{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",player3:"normal",player4:"elite"}]}]},{index:"160.2",name:"Tavern Built",edition:"fh",conclusion:!0,named:!0,rewards:{events:["winter-outpost:WO-79","summer-road:SR-50"],hints:{lootDeckCards:["When drawn, read any one section number depicted."]},lootDeckCards:[1418]}},{index:"160.3",name:"%game.characterIconColored.geminate% Retires",edition:"fh",conclusion:!0,rewards:{calendarSection:["193.2-4"]},retirement:"geminate"},{index:"161.1",name:"Climbing Gear Build",edition:"fh",conclusion:!0,rewards:{prosperity:1,overlayCampaignSticker:{name:"climbing-gear",location:"C",coordinates:{x:1454.875,y:2623.375,width:102,height:89}},custom:"You may now play scenarios with the %game.fhIcon:climbing-gear% requirement."}},{index:"161.2",name:"Radiant Dust",edition:"fh",parent:"119",parentSections:[["96.2"]],marker:"2",monsters:["burrowing-blade","polar-bear","shrike-fiend","spitting-drake"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",player4:"elite"},{name:"polar-bear",type:"normal"},{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"},{name:"shrike-fiend",type:"normal"},{name:"shrike-fiend",type:"normal"},{name:"shrike-fiend",player3:"elite",player4:"elite"},{name:"spitting-drake",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"161.3",name:"High Morale",edition:"fh",conclusion:!0,named:!0,rewards:{prosperity:2,overlayCampaignSticker:{name:"statue",location:"F",coordinates:{x:791.625,y:2334.875,width:78,height:92}}}},{index:"162.1",name:"Furious Factory",edition:"fh",parent:"109",marker:"3",monsters:["ancient-artillery","flaming-bladespinner","ruined-machine"],rules:[{round:"true",always:!0,once:!0,sections:["195.2"]}],rooms:[{roomNumber:3,initial:!0,monster:[{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"flaming-bladespinner",player3:"normal",player4:"normal"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player2:"normal"}],objectives:[1]}]},{index:"162.4",name:"Elemental Cores",edition:"fh",parent:"66",marker:"element:dark",monsters:["frost-demon","night-demon","wind-demon"],rooms:[{roomNumber:6,initial:!0,treasures:["G"],monster:[{name:"frost-demon",type:"normal"},{name:"night-demon",type:"normal"},{name:"night-demon",type:"normal"},{name:"night-demon",player4:"elite"},{name:"wind-demon",player3:"normal",player4:"normal"}]}]},{index:"163.2",name:"Infiltrating the Lair",edition:"fh",parent:"75",parentSections:[["99.2"]],marker:"3",monsters:["abael-herder","abael-scout","frost-demon","piranha-pig"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"abael-herder",player2:"normal",player3:"normal",player4:"elite"},{name:"abael-scout",player4:"normal"},{name:"frost-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",player3:"normal",player4:"elite"}]}]},{index:"164.1",name:"Gaps in the Road A",edition:"fh",parent:"74A",parentSections:[["52.2A"]],marker:"3",monsters:["algox-priest","wind-demon"],rooms:[{roomNumber:5,initial:!0,monster:[{name:"algox-priest",player2:"normal",player3:"elite",player4:"elite"},{name:"wind-demon",type:"normal"},{name:"wind-demon",type:"normal"},{name:"wind-demon",player3:"normal",player4:"elite"}]}]},{index:"164.2",name:"Library Built: If %game.trait:educated%",edition:"fh",parentSections:[["190.3"]],conclusion:!0,named:!0,rewards:{events:["summer-outpost:SO-58","winter-road:WR-45","summer-road:SR-47"]}},{index:"164.3",name:"Ruins of the Solstice",edition:"fh",parent:"104",marker:"1",monsters:["earth-demon","forest-imp","frost-demon","savvas-icestorm","wind-demon"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"earth-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"forest-imp",type:"normal"},{name:"forest-imp",type:"elite"},{name:"forest-imp",player3:"normal",player4:"normal"},{name:"forest-imp",player4:"elite"},{name:"savvas-icestorm",type:"normal"},{name:"savvas-icestorm",player3:"normal",player4:"normal"}]}]},{index:"165.2",name:"Fish King's Ascension",edition:"fh",parent:"77",parentSections:[["102.2"]],monsters:["frost-demon"],rules:[{round:"true",always:!0,once:!0,note:"Read %data.section:184.5%",figures:[{identifier:{type:"monster",edition:"fh",name:"frost-demon"},type:"dead"}]}],rooms:[{roomNumber:4,initial:!0,monster:[{name:"frost-demon",type:"normal"},{name:"frost-demon",type:"normal"},{name:"frost-demon",player3:"normal",player4:"elite"}]}]},{index:"165.3",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"165.4",name:"Letter from %game.characterIconColored.drill%",edition:"fh",conclusion:!0,rewards:{custom:"See Section Book"}},{index:"165.5",name:"Lustrous Pit",edition:"fh",parent:"108",parentSections:[["140.1"]],marker:"2",monsters:["ice-wraith"],rooms:[{roomNumber:3,initial:!0,treasures:[3],monster:[{name:"ice-wraith",type:"elite"},{name:"ice-wraith",player3:"normal",player4:"normal"},{name:"ice-wraith",player4:"normal"}]}]},{index:"166.2",name:"A Tall Drunken Tale",edition:"fh",parent:"128",parentSections:[["139.1"]]},{index:"166.3",name:"Furious Factory",edition:"fh",parent:"109",marker:"1",monsters:["ancient-artillery","ruined-machine"],rules:[{round:"true",always:!0,once:!0,sections:["195.2"]}],rooms:[{roomNumber:4,initial:!0,treasures:[80],monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player4:"elite"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",player2:"elite",player3:"elite",player4:"normal"}],objectives:[1]}]},{index:"166.4",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["85"]},{index:"166.5",name:"Destroy the automaton and pass along the vermling technology",edition:"fh",parent:"121",conclusion:!0,rewards:{calendarSection:["184.3-6"]}},{index:"167.1",name:"Among the Wreckage",edition:"fh",parent:"54",marker:"1",monsters:[],rooms:[{roomNumber:4,initial:!0,treasures:[5],monster:[],objectives:[1,1,1,1,1,1,2,2,2]}]},{index:"167.2",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["78"]},{index:"167.3",name:"Infiltrating the Lair",edition:"fh",parent:"75",parentSections:[["81.2"],["163.2"]],monsters:["chaos-demon"],rules:[{round:"true",always:!0,once:!0,spawns:[{monster:{name:"chaos-demon",player2:"normal",player4:"elite"},marker:"c",count:"2"},{monster:{name:"chaos-demon",player3:"normal"},marker:"c"},{monster:{name:"chaos-demon",player3:"elite"},marker:"c"}]}],rooms:[{roomNumber:3,initial:!0,monster:[]}]},{index:"167.4",name:"Underground Station",edition:"fh",parent:"96",parentSections:[["116.2"]],marker:"3",monsters:["ancient-artillery","black-imp","rending-drake"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"ancient-artillery",type:"normal"},{name:"black-imp",type:"elite"},{name:"black-imp",player3:"elite",player4:"elite"},{name:"rending-drake",type:"normal"},{name:"rending-drake",player4:"elite"}]}]},{index:"168.1",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"168.2",name:"Blast the Lurkers",edition:"fh",parentSections:[["114.2"]],conclusion:!0,unlocks:["50"],rewards:{overlaySticker:{name:"Z",location:"F2",coordinates:{x:1444,y:350,width:366,height:288}},custom:"Do not resolve an outpost event this week."}},{index:"168.4",name:"My Private Empire",edition:"fh",parent:"107",marker:"a",monsters:["living-bones"],rooms:[{roomNumber:8,initial:!0,monster:[{name:"living-bones",type:"normal"},{name:"living-bones",type:"normal"},{name:"living-bones",type:"normal"},{name:"living-bones",player3:"normal",player4:"normal"},{name:"living-bones",player4:"normal"},{name:"living-bones",player4:"normal"}]}]},{index:"168.6",name:"A Waiting Game",edition:"fh",parent:"117",marker:"1",monsters:["hound","vermling-priest","vermling-scout"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"hound",player2:"normal",player3:"normal",player4:"elite"},{name:"vermling-priest",player2:"normal",player3:"elite",player4:"elite"},{name:"vermling-scout",type:"elite"},{name:"vermling-scout",player3:"normal",player4:"elite"}]}]},{index:"169.1",name:"%game.characterIconColored.trap% Returns",edition:"fh",conclusion:!0,unlocks:["117"]},{index:"169.2",name:"Sled Build",edition:"fh",conclusion:!0,rewards:{prosperity:1,overlayCampaignSticker:{name:"sled",location:"B",coordinates:{x:1579.375,y:2462.375,width:111,height:71}},custom:"You may now play scenarios with the %game.fhIcon:sled% requirement."}},{index:"169.3",name:"Crain's Recovery",edition:"fh",conclusion:!0,unlocks:["36","37"],rewards:{custom:"Open the Puzzle Book to the first page"}},{index:"170.1",name:"A Tall Drunken Tale",edition:"fh",parent:"128",monsters:["abael-scout","lurker-wavethrower"],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"character",name:".*"},type:"discard",value:"1"}]}],rooms:[{roomNumber:4,initial:!0,monster:[{name:"abael-scout",type:"elite"},{name:"abael-scout",type:"elite"},{name:"abael-scout",player3:"elite",player4:"elite"},{name:"abael-scout",player4:"elite"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",player3:"normal",player4:"normal"},{name:"lurker-wavethrower",player4:"normal"}]}]},{index:"170.2",name:"Abandoned Hideout",edition:"fh",parent:"136",marker:"1",monsters:["lightning-eel","piranha-pig"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"lightning-eel",type:"elite"},{name:"lightning-eel",player2:"normal",player3:"elite",player4:"elite"},{name:"lightning-eel",player3:"normal",player4:"elite"},{name:"lightning-eel",player4:"elite"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",player2:"normal",player3:"elite",player4:"elite"},{name:"piranha-pig",player3:"normal",player4:"elite"}]}]},{index:"171.1",name:"Temple of Feline Power",edition:"fh",parent:"132",rooms:[{roomNumber:4,initial:!0,monster:[]}]},{index:"171.2",name:"Random Scenario",edition:"fh",conclusion:!0,named:!0,random:!0,unlocks:["108"]},{index:"171.3",name:"Harrower Library",edition:"fh",parent:"101",parentSections:[["126.2"]],marker:"3",monsters:["algox-archer","algox-priest"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"algox-archer",player2:"normal",player3:"elite",player4:"normal"},{name:"algox-priest",player3:"elite",player4:"normal"}]}]},{index:"171.5",name:"Return the sun agates to Derrick",edition:"fh",parent:"130",conclusion:!0,rewards:{prosperity:1,custom:"Gain 10 collective gold for each token carried",morale:-3}},{index:"172.1",name:"The Eternal Crave",edition:"fh",parent:"122",parentSections:[["152.1"]],blockedSections:["179.2"],marker:"4",monsters:["ice-wraith","polar-bear"],rooms:[{roomNumber:1,ref:"07-A",initial:!0,monster:[{name:"ice-wraith",type:"elite"},{name:"ice-wraith",player3:"normal",player4:"normal"},{name:"polar-bear",type:"normal"},{name:"polar-bear",player4:"normal"}]}]},{index:"172.2",name:"A Tall Drunken Tale",edition:"fh",parent:"128",parentSections:[["176.3"]]},{index:"172.3",name:"Hunting Lodge Upgraded",edition:"fh",conclusion:!0,named:!0,rewards:{unlockCharacter:"trap"}},{index:"172.5",name:"Furious Factory",edition:"fh",parent:"109",marker:"4",monsters:["ancient-artillery","flaming-bladespinner"],rules:[{round:"true",always:!0,once:!0,sections:["195.2"]}],rooms:[{roomNumber:5,initial:!0,monster:[{name:"ancient-artillery",type:"normal"},{name:"flaming-bladespinner",type:"normal"},{name:"flaming-bladespinner",player4:"normal"}],objectives:[1]}]},{index:"173.2",name:"And Then, a Stream",edition:"fh",parent:"130",monsters:["frozen-corpse","lightning-eel","shrike-fiend"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"frozen-corpse",type:"normal"},{name:"frozen-corpse",player4:"normal"},{name:"lightning-eel",type:"normal"},{name:"lightning-eel",type:"normal"},{name:"lightning-eel",player3:"normal",player4:"normal"},{name:"lightning-eel",player4:"normal"},{name:"shrike-fiend",type:"normal"},{name:"shrike-fiend",player3:"normal",player4:"normal"}]}]},{index:"173.3",name:"Bolt",edition:"fh",parent:"133",marker:"1",monsters:["forest-imp","rending-drake","spitting-drake"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"forest-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"rending-drake",type:"normal"},{name:"rending-drake",type:"normal"},{name:"rending-drake",player3:"elite",player4:"elite"},{name:"spitting-drake",type:"normal"},{name:"spitting-drake",player4:"normal"}]}]},{index:"173.1",name:"Hide Depot Built",edition:"fh",conclusion:!0,named:!0,rewards:{events:["summer-outpost:SO-56","summer-road:SR-41"]}},{index:"174.2",name:"%game.characterIconColored.meteor% Returns",edition:"fh",conclusion:!0,rewards:{inspiration:3}},{index:"174.3",name:"Ruinous Research Lab",edition:"fh",parent:"81",marker:"1",monsters:["ancient-artillery","flaming-bladespinner","ruined-machine","steel-automaton"],objectives:[{name:"Barricade",health:"L+5",marker:"e"}],rooms:[{roomNumber:3,initial:!0,treasures:[19],monster:[{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ancient-artillery",player3:"normal",player4:"elite"},{name:"flaming-bladespinner",type:"elite"},{name:"flaming-bladespinner",player2:"normal",player3:"elite",player4:"normal"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"steel-automaton",player4:"normal"}],objectives:[1]}]},{index:"174.5",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"175.1",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["94"]},{index:"175.2",name:"Low Morale",edition:"fh",conclusion:!0,named:!0,rewards:{prosperity:-2,custom:"<b>%wip%!</b> manually apply:<br>Rebuild all wrecked buildings for free.",morale:5}},{index:"175.4",name:"Elemental Cores",edition:"fh",parent:"66",marker:"element:fire",monsters:["flame-demon","sun-demon","wind-demon"],rooms:[{roomNumber:7,initial:!0,treasures:["G"],monster:[{name:"flame-demon",type:"normal"},{name:"flame-demon",type:"normal"},{name:"flame-demon",player4:"elite"},{name:"sun-demon",player3:"normal",player4:"normal"},{name:"wind-demon",type:"normal"}]}]},{index:"176.3",name:"A Tall Drunken Tale",edition:"fh",parent:"128",parentSections:[["152.2"]],monsters:["abael-scout","steel-automaton"],rules:[{round:"true",always:!0,once:!0,figures:[{identifier:{type:"character",name:".*"},type:"gainCondition",value:"bane"},{identifier:{type:"character",name:".*"},type:"gainCondition",value:"impair"},{identifier:{type:"character",name:".*"},type:"amAdd",value:"curse:1"}]},{round:"true",always:!0,once:!0,sections:["172.2"],figures:[{identifier:{type:"all",name:".*"},type:"initiative",value:">=67"}],finish:"round"}],rooms:[{roomNumber:5,initial:!0,monster:[{name:"abael-scout",type:"normal"},{name:"abael-scout",type:"normal"},{name:"abael-scout",player3:"normal",player4:"normal"},{name:"abael-scout",player4:"normal"},{name:"steel-automaton",type:"elite"},{name:"steel-automaton",player3:"normal",player4:"elite"}]}]},{index:"176.4",name:"Funeral for the Winter Fallen",edition:"fh",conclusion:!0,rewards:{morale:2}},{index:"177.2",name:"Infiltrating the Lair",edition:"fh",parent:"75",parentSections:[["163.2"]],marker:"4",monsters:["frost-demon"],rooms:[{roomNumber:5,initial:!0,treasures:[20,51,55],monster:[{name:"frost-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"frost-demon",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"177.3",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"177.4",name:"Care Package from %game.characterIconColored.snowflake%",edition:"fh",conclusion:!0,rewards:{morale:3}},{index:"177.5",name:"1 - 4 episodes overcome",edition:"fh",parent:"107",parentSections:[["150.3"]],conclusion:!0,blockedSections:["116.1"],rewards:{custom:"Gain any X collective material resources, where X is the number of episodes overcome"}},{index:"177.6",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["22.4"]],marker:"e",monsters:["black-imp","burrowing-blade","polar-bear"],rooms:[{roomNumber:15,initial:!0,monster:[{name:"black-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",player3:"normal",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"178.2",name:"Hall of Revelry Built",edition:"fh",conclusion:!0,named:!0},{index:"178.3",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["89"]},{index:"178.4",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["47.3"],["110.4"]],marker:"b",rooms:[{roomNumber:16,initial:!0,monster:[]}]},{index:"179.2",name:"The Eternal Crave",edition:"fh",parent:"122",parentSections:[["152.1"]],blockedSections:["172.1"],marker:"3",monsters:["ice-wraith","polar-bear","snow-imp"],rooms:[{roomNumber:1,ref:"01-F",initial:!0,monster:[{name:"ice-wraith",type:"normal"},{name:"polar-bear",type:"elite"},{name:"polar-bear",player3:"normal",player4:"elite"},{name:"snow-imp",player3:"elite",player4:"elite"},{name:"snow-imp",player4:"elite"}]}]},{index:"179.6",name:"%game.characterIconColored.shackles% Retires",edition:"fh",conclusion:!0,rewards:{events:["winter-road:WR-32"]},retirement:"shackles"},{index:"180.3",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["84"]},{index:"180.4",name:"Abandoned Hideout",edition:"fh",parent:"136",parentSections:[["170.2"]],marker:"2",monsters:["living-bones","living-spirit"],rooms:[{roomNumber:3,initial:!0,treasures:[83],monster:[{name:"living-bones",type:"normal"},{name:"living-bones",type:"normal"},{name:"living-bones",player2:"normal",player3:"normal",player4:"elite"},{name:"living-bones",player3:"normal",player4:"elite"},{name:"living-spirit",type:"elite"},{name:"living-spirit",player2:"normal",player3:"elite",player4:"elite"},{name:"living-spirit",player3:"normal",player4:"elite"}]}]},{index:"181.2",name:"HE-RO-IC-S",edition:"fh",conclusion:!0,rewards:{custom:"If building 88 is built, read %data.section:135.4% now.<br>Otherwise, read %data.section:33.1% now."}},{index:"181.3",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["134.2"]],marker:"10",rooms:[{roomNumber:17,initial:!0,monster:[]}]},{index:"181.4",name:"The Lady in White",edition:"fh",parent:"86",parentSections:[["6.3"]],monsters:["lady-in-white"],rooms:[{roomNumber:2,initial:!0,monster:[{name:"lady-in-white",type:"elite"}]}]},{index:"181.5",name:"The Dancing Iceberg",edition:"fh",parent:"131",parentSections:[["120.2"]],monsters:["lurker-mindsnipper","lurker-soldier"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"lurker-mindsnipper",type:"elite"},{name:"lurker-soldier",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-soldier",player4:"normal"}]}]},{index:"182.1",name:"Keep the sun agates",edition:"fh",parent:"130",conclusion:!0,rewards:{custom:"Gain 5 collective gold for each token carried"}},{index:"182.2",name:"Ice Cave",edition:"fh",parent:"111",marker:"1",monsters:["frost-demon","night-demon","the-shimmer","wind-demon"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"night-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"night-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"the-shimmer",type:"boss"}]}]},{index:"182.3",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"183.1",name:"The Tempus Forge",edition:"fh",parent:"106",marker:"4",monsters:["wind-demon"],objectives:[{name:"Altar 4",health:"[(L+2)xC/2{$math.floor}]"}],rules:[{round:"true",note:"The Altar performs %game.action.push%1, %game.action.target% all characters, %game.action.range%5",figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Altar 4"}}]}],rooms:[{roomNumber:4,initial:!0,monster:[{name:"wind-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"wind-demon",player2:"normal",player3:"elite",player4:"elite"}],objectives:[1]}]},{index:"183.2",name:"Lush Grotto",edition:"fh",parent:"113",parentSections:[["146.5"],["154.1"]],monsters:["chaos-demon","polar-bear"],rooms:[{roomNumber:5,initial:!0,monster:[{name:"chaos-demon",type:"normal"},{name:"chaos-demon",player4:"normal"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"183.5",name:"Alchemist Upgraded",edition:"fh",conclusion:!0,named:!0,rewards:{randomItemBlueprints:"59-65"}},{index:"184.3",name:"Rumor of Vengeance",edition:"fh",conclusion:!0,rewards:{inspiration:3}},{index:"184.4",name:"The Tempus Forge",edition:"fh",parent:"106",marker:"2",monsters:["earth-demon"],objectives:[{name:"Altar 2",health:"[(L+2)xC/2{$math.floor}]"}],rules:[{round:"true",figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Altar 2"}},{identifier:{type:"monster",edition:"fh",name:".*"},type:"heal",value:"2"}]}],rooms:[{roomNumber:5,initial:!0,monster:[{name:"earth-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"earth-demon",player2:"normal",player3:"elite",player4:"elite"}],objectives:[1]}]},{index:"184.6",name:"The Collection",edition:"fh",parent:"87",parentSections:[["31.2"]],marker:"2",monsters:["polar-bear"],rooms:[{roomNumber:5,initial:!0,treasures:[38],monster:[{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"185.1",name:"The Dancing Iceberg",edition:"fh",parent:"131",parentSections:[["181.5"]],monsters:["lurker-wavethrower"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",type:"normal"},{name:"lurker-wavethrower",player3:"normal",player4:"normal"},{name:"lurker-wavethrower",player4:"normal"}]}]},{index:"185.4",name:"Letter from %game.characterIconColored.fist%",edition:"fh",conclusion:!0,rewards:{collectiveResources:[{type:"axenut",value:3}]}},{index:"186.1",name:"Bolt",edition:"fh",parent:"133",marker:"2",monsters:["forest-imp","rending-drake","spitting-drake"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"forest-imp",player2:"normal",player3:"elite",player4:"elite"},{name:"rending-drake",type:"elite"},{name:"rending-drake",player2:"normal",player3:"elite",player4:"elite"},{name:"rending-drake",player4:"normal"},{name:"spitting-drake",player4:"normal"}]}]},{index:"186.2",name:"Furious Factory",edition:"fh",parent:"109",marker:"2",monsters:["ancient-artillery","ruined-machine"],rules:[{round:"true",always:!0,once:!0,sections:["195.2"]}],rooms:[{roomNumber:6,initial:!0,monster:[{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",type:"normal"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"}],objectives:[1]}]},{index:"186.3",name:"Guardian's Temple",edition:"fh",parent:"110",monsters:["living-doom","living-spirit"],rules:[{round:"true",always:!0,disableRules:[{edition:"fh",scenario:"110",index:1,section:!1},{edition:"fh",scenario:"110",index:2,section:!1},{edition:"fh",scenario:"110",index:3,section:!1}]},{round:"true",start:!0,note:"Remaining two Ice Pillars are always active"}],rooms:[{roomNumber:2,initial:!0,treasures:[75],monster:[{name:"living-doom",player2:"normal",player3:"normal",player4:"elite"},{name:"living-spirit",player2:"normal",player3:"normal",player4:"elite"},{name:"living-spirit",player3:"normal"}]}]},{index:"186.4",name:"A Tall Drunken Tale",edition:"fh",parent:"128",parentSections:[["132.4"]],rules:[{round:"true",always:!0,once:!0,note:"Place three snow rocks in any empty hexes on tile 15-A (if able).",figures:[{identifier:{type:"all",name:".*"},type:"setHp",value:"1"}]}]},{index:"186.5",name:"Random Scenario",edition:"fh",conclusion:!0,named:!0,random:!0,unlocks:["104"]},{index:"188.1",name:"My Private Empire",edition:"fh",parent:"107",parentSections:[["95.2"]],marker:"2",rooms:[{roomNumber:9,initial:!0,monster:[]}]},{index:"188.2",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"188.3",name:"5 episodes overcome",edition:"fh",parent:"107",conclusion:!0,rewards:{items:["214"],custom:"Gain any 5 collective material resources"}},{index:"189.1",name:"Town Hall Built",edition:"fh",conclusion:!0,named:!0,rewards:{events:["summer-outpost:SO-59","summer-outpost:SO-62","summer-road:SR-38"]}},{index:"189.2",name:"The Tempus Forge",edition:"fh",parent:"106",marker:"3",monsters:["frost-demon"],objectives:[{name:"Altar 3",health:"[(L+2)xC/2{$math.floor}]"}],rules:[{round:"true",figures:[{type:"present",identifier:{type:"objective",edition:"objective",name:"Altar 3"}},{identifier:{type:"character",name:".*"},type:"gainCondition",value:"muddle"}]}],rooms:[{roomNumber:6,initial:!0,monster:[{name:"frost-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"frost-demon",player2:"normal",player3:"elite",player4:"elite"}],objectives:[1]}]},{index:"190-2-1",name:"1 crate looted",edition:"fh",parent:"127",conclusion:!0,rewards:{collectiveGold:10}},{index:"190-2-2",name:"2 crates looted",edition:"fh",parent:"127",conclusion:!0,rewards:{collectiveGold:10,collectiveResources:[{type:"lumber",value:2}]}},{index:"190-2-3",name:"3 crates looted",edition:"fh",parent:"127",conclusion:!0,rewards:{collectiveGold:10,items:["195"],collectiveResources:[{type:"lumber",value:2}]}},{index:"190-2-4",name:"4 crates looted",edition:"fh",parent:"127",conclusion:!0,rewards:{collectiveGold:10,prosperity:1,items:["195"],collectiveResources:[{type:"lumber",value:2}]}},{index:"190.3",name:"Library Built",edition:"fh",conclusion:!0,named:!0},{index:"191.2",name:"Pirate Queen's Haul",edition:"fh",parent:"137",marker:"1",monsters:["forest-imp","piranha-pig","polar-bear"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"forest-imp",type:"normal"},{name:"forest-imp",type:"normal"},{name:"forest-imp",player3:"elite",player4:"elite"},{name:"piranha-pig",player2:"normal",player3:"elite",player4:"elite"},{name:"piranha-pig",player3:"normal",player4:"elite"},{name:"polar-bear",type:"elite"},{name:"polar-bear",player4:"normal"}]}]},{index:"191.3",name:"Ruins of the Equinox",edition:"fh",parent:"105",marker:"1",monsters:["flame-demon","rending-drake"],rules:[{round:"true",always:!0,disableRules:[{edition:"fh",scenario:"105",index:0,section:!1},{edition:"fh",scenario:"105",index:1,section:!1},{edition:"fh",scenario:"105",index:2,section:!1},{edition:"fh",scenario:"105",index:3,section:!1}]},{round:"true",always:!0,once:!0,elements:[{type:"air",state:"strong"},{type:"fire",state:"always"}]},{round:"true",figures:[{identifier:{type:"character",name:".*"},type:"damage",value:"1"}]}],rooms:[{roomNumber:2,initial:!0,monster:[{name:"flame-demon",type:"normal"},{name:"flame-demon",type:"normal"},{name:"flame-demon",player3:"normal",player4:"elite"},{name:"rending-drake",type:"normal"},{name:"rending-drake",type:"elite"},{name:"rending-drake",player3:"normal",player4:"normal"},{name:"rending-drake",player4:"elite"}]}]},{index:"192.1",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["79"]},{index:"192.4",name:"Lustrous Pit",edition:"fh",parent:"108",parentSections:[["140.1"]],marker:"3",monsters:["ice-wraith"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"ice-wraith",type:"normal"},{name:"ice-wraith",type:"elite"},{name:"ice-wraith",player3:"normal",player4:"normal"},{name:"ice-wraith",player4:"normal"}]}]},{index:"192.5",name:"Temple Built",edition:"fh",conclusion:!0,named:!0,rewards:{events:["winter-outpost:WO-73","summer-road:SR-43"]}},{index:"193.1",name:"Enhancer Built",edition:"fh",conclusion:!0,named:!0,rewards:{events:["summer-outpost:SO-63","winter-road:WR-44"],calendarSectionManual:[{section:"118.3",hint:"If you have completed <b><i>Forgotten Circles</i></b>, add %data.section:118.3% to the calendar in three weeks."}]}},{index:"193.2",name:"%game.characterIconColored.geminate% Returns",edition:"fh",conclusion:!0,rewards:{hints:{campaignSticker:["if not already gained"]},campaignSticker:["into-the-forest"]}},{index:"193.3",name:"The Titan",edition:"fh",parent:"123",parentSections:[["104.2"]],marker:"3",monsters:["algox-snowspeaker","ancient-artillery"],rooms:[{roomNumber:5,initial:!0,monster:[{name:"algox-snowspeaker",type:"elite"},{name:"algox-snowspeaker",player3:"normal",player4:"elite"},{name:"ancient-artillery",type:"elite"},{name:"ancient-artillery",player3:"normal",player4:"elite"}]}]},{index:"193.4",name:"Metal Depot Built",edition:"fh",conclusion:!0,named:!0,rewards:{events:["winter-outpost:WO-72","winter-outpost:WO-74"]}},{index:"193.5",name:"Old Coin",edition:"fh",conclusion:!0,named:!0,rewards:{custom:"The looting character gains X gold, where X is how much gold one money token is worth at L+1 (= [2 + [(L+1)/2{$math.floor}]] gold).",lootingGold:"2 + Math.floor((L+1)/2)"}},{index:"194.1",name:"Deadly Pastimes",edition:"fh",parent:"85",parentSections:[["56.1"]],marker:"9",monsters:["black-imp","polar-bear"],rooms:[{roomNumber:18,initial:!0,monster:[{name:"black-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"black-imp",player4:"elite"},{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"194.2",name:"The Dancing Iceberg",edition:"fh",parent:"131",parentSections:[["185.1"]],monsters:["lurker-conductor"],rules:[{round:"R % 2 == 1",start:!0,spawns:[{monster:{name:"lurker-wavethrower",player3:"normal",player4:"normal"},marker:"d"},{monster:{name:"lurker-soldier",player2:"normal",player3:"normal",player4:"elite"},marker:"e"}]}],rooms:[{roomNumber:5,initial:!0,monster:[{name:"lurker-conductor",type:"boss"}]}]},{index:"194.3",name:"Job Posting",edition:"fh",conclusion:!0,named:!0,unlocks:["132"]},{index:"194.4",name:"Harrower Library",edition:"fh",parent:"101",parentSections:[["126.2"]],marker:"2",monsters:["algox-archer","algox-guard","algox-priest"],rooms:[{roomNumber:4,initial:!0,monster:[{name:"algox-archer",player2:"normal",player3:"elite",player4:"normal"},{name:"algox-archer",player4:"elite"},{name:"algox-guard",type:"normal"},{name:"algox-guard",player4:"normal"},{name:"algox-priest",player3:"normal",player4:"normal"}]}]},{index:"195.1",name:"Belara's Keep",edition:"fh",parent:"135",parentSections:[["87.2"]],marker:"f",monsters:["belara","earth-demon","flame-demon","rending-drake","sun-demon"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"belara",type:"boss"},{name:"rending-drake",type:"normal"},{name:"rending-drake",player3:"normal",player4:"elite"},{name:"sun-demon",type:"elite"},{name:"sun-demon",player3:"normal",player4:"normal"},{name:"sun-demon",player4:"normal"}]}]},{index:"195.2",name:"Furious Factory",edition:"fh",parent:"109",monsters:["laser-spires"],rooms:[{roomNumber:7,initial:!0,monster:[{name:"laser-spires",type:"boss"}]}]},{index:"195.3",name:"A Growing Problem",edition:"fh",parent:"124",parentSections:[["119.4"]],marker:"2",monsters:["living-bones","living-spirit"],rooms:[{roomNumber:3,initial:!0,monster:[{name:"living-bones",player2:"normal",player3:"normal",player4:"elite"},{name:"living-bones",player2:"normal",player3:"elite",player4:"elite"},{name:"living-spirit",player2:"normal",player3:"normal",player4:"elite"},{name:"living-spirit",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"196.1",name:"Hall of Revelry Built: Otherwise",edition:"fh",parentSections:[["178.2"]],conclusion:!0,named:!0},{index:"196.2",name:"Trading Post Upgraded",edition:"fh",conclusion:!0,named:!0,rewards:{itemBlueprints:["147-155"]}},{index:"196-3-1",name:"7 or less embellishments",edition:"fh",parent:"128",conclusion:!0,rewards:{calendarSection:["100.3-3"],morale:1}},{index:"196-3-2",name:"8 to 15 embellishments",edition:"fh",parent:"128",conclusion:!0,rewards:{calendarSection:["100.3-3"],morale:2}},{index:"196-3-3",name:"16 or more embellishments",edition:"fh",parent:"128",conclusion:!0,rewards:{items:["215"],calendarSection:["100.3-3"],morale:3}},{index:"891",group:"randomMonsterCard",name:"Smashing",edition:"fh",named:!0,monsters:["algox-archer","algox-icespeaker"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"earth",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"algox-archer",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-archer",player3:"normal",player4:"normal"},{name:"algox-archer",player3:"normal"},{name:"algox-icespeaker",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-icespeaker",player2:"normal",player4:"normal"}]}]},{index:"892",group:"randomMonsterCard",name:"Stormy",edition:"fh",named:!0,monsters:["algox-guard","algox-snowspeaker"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"air",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"algox-guard",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-guard",player3:"normal",player4:"normal"},{name:"algox-guard",player3:"normal"},{name:"algox-snowspeaker",player2:"normal",player3:"normal",player4:"elite"},{name:"algox-snowspeaker",player2:"normal",player4:"normal"}]}]},{index:"893",group:"randomMonsterCard",name:"Territorial",edition:"fh",named:!0,monsters:["algox-priest","algox-scout"],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"algox-priest",type:"normal"},{name:"algox-priest",player2:"normal",player3:"elite",player4:"elite"},{name:"algox-priest",player4:"normal"},{name:"algox-scout",type:"elite"},{name:"algox-scout",player3:"normal",player4:"normal"},{name:"algox-scout",player4:"normal"}]}]},{index:"894",group:"randomMonsterCard",name:"Feral",edition:"fh",named:!0,monsters:["hound","polar-bear","snow-imp"],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"hound",type:"elite"},{name:"hound",player3:"normal",player4:"normal"},{name:"polar-bear",player2:"normal",player3:"normal",player4:"elite"},{name:"polar-bear",player3:"normal",player4:"normal"},{name:"snow-imp",type:"elite"},{name:"snow-imp",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"895",group:"randomMonsterCard",name:"Tamed",edition:"fh",named:!0,monsters:["polar-bear","vermling-priest","vermling-scout"],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"polar-bear",player2:"normal",player3:"elite",player4:"elite"},{name:"vermling-priest",player2:"normal",player3:"normal",player4:"elite"},{name:"vermling-priest",player2:"normal",player3:"normal",player4:"elite"},{name:"vermling-scout",type:"elite"},{name:"vermling-scout",player2:"normal",player3:"normal",player4:"elite"},{name:"vermling-scout",player3:"normal",player4:"normal"},{name:"vermling-scout",player3:"normal",player4:"elite"}]}]},{index:"896",group:"randomMonsterCard",name:"Swarming",edition:"fh",named:!0,monsters:["forest-imp","harrower-infester","shrike-fiend"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"dark",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"forest-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"forest-imp",player3:"normal",player4:"elite"},{name:"forest-imp",player4:"normal"},{name:"harrower-infester",type:"normal"},{name:"harrower-infester",player3:"normal",player4:"normal"},{name:"shrike-fiend",type:"elite"},{name:"shrike-fiend",player4:"normal"}]}]},{index:"897",group:"randomMonsterCard",name:"Traitorous",edition:"fh",named:!0,monsters:["chaos-demon","city-guard"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"light",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"chaos-demon",type:"normal"},{name:"chaos-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"chaos-demon",player4:"normal"},{name:"city-guard",type:"elite"},{name:"city-guard",player2:"normal",player3:"elite",player4:"elite"},{name:"city-guard",player3:"normal",player4:"normal"},{name:"city-guard",player3:"normal",player4:"normal"}]}]},{index:"898",group:"randomMonsterCard",name:"Bleak",edition:"fh",named:!0,monsters:["living-bones","living-doom","living-spirit"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"ice",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"living-bones",player2:"normal",player3:"normal",player4:"elite"},{name:"living-bones",player3:"normal",player4:"normal"},{name:"living-doom",type:"elite"},{name:"living-doom",player3:"normal",player4:"normal"},{name:"living-spirit",player2:"normal",player3:"normal",player4:"elite"},{name:"living-spirit",player4:"normal"}]}]},{index:"899",group:"randomMonsterCard",name:"Sapping",edition:"fh",named:!0,monsters:["frost-demon","ice-wraith","snow-imp"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"ice",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"frost-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"frost-demon",player4:"normal"},{name:"ice-wraith",type:"normal"},{name:"ice-wraith",type:"elite"},{name:"ice-wraith",player3:"normal",player4:"normal"},{name:"snow-imp",player3:"normal",player4:"normal"}]}]},{index:"900",group:"randomMonsterCard",name:"Decayed",edition:"fh",named:!0,monsters:["frozen-corpse","living-bones"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"ice",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"frozen-corpse",type:"normal"},{name:"frozen-corpse",player2:"normal",player3:"normal",player4:"elite"},{name:"frozen-corpse",player2:"normal",player3:"elite",player4:"elite"},{name:"frozen-corpse",player4:"normal"},{name:"living-bones",type:"normal"},{name:"living-bones",player3:"normal",player4:"normal"}]}]},{index:"901",group:"randomMonsterCard",name:"Deomesticated",edition:"fh",named:!0,monsters:["abael-herder","abael-scout","piranha-pig"],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"abael-herder",player2:"normal",player3:"normal",player4:"elite"},{name:"abael-herder",player3:"elite",player4:"elite"},{name:"abael-scout",type:"elite"},{name:"piranha-pig",type:"normal"},{name:"piranha-pig",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"902",group:"randomMonsterCard",name:"Trashing",edition:"fh",named:!0,monsters:["lurker-soldier","lurker-wavethrower","piranha-pig"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"ice",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"lurker-soldier",type:"normal"},{name:"lurker-soldier",player3:"normal",player4:"normal"},{name:"lurker-wavethrower",type:"elite"},{name:"lurker-wavethrower",player3:"normal",player4:"elite"},{name:"piranha-pig",player2:"normal",player3:"normal",player4:"elite"},{name:"piranha-pig",player2:"normal",player3:"normal",player4:"elite"}]}]},{index:"903",group:"randomMonsterCard",name:"Daunting",edition:"fh",named:!0,monsters:["lurker-clawcrusher","lurker-mindsnipper","lurker-wavethrower"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"earth",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"lurker-clawcrusher",type:"normal"},{name:"lurker-clawcrusher",player2:"normal",player3:"elite",player4:"elite"},{name:"lurker-mindsnipper",type:"normal"},{name:"lurker-mindsnipper",player4:"normal"},{name:"lurker-wavethrower",player3:"normal",player4:"elite"}]}]},{index:"904",group:"randomMonsterCard",name:"Abandoned",edition:"fh",named:!0,monsters:["ancient-artillery","ruined-machine"],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"normal",player4:"elite"},{name:"ancient-artillery",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",type:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"ruined-machine",player2:"normal",player3:"elite",player4:"elite"},{name:"ruined-machine",player3:"normal",player4:"normal"},{name:"ruined-machine",player3:"normal",player4:"normal"}]}]},{index:"905",group:"randomMonsterCard",name:"Reinforced",edition:"fh",named:!0,monsters:["robotic-boltshooter","steel-automaton"],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"robotic-boltshooter",type:"normal"},{name:"robotic-boltshooter",player2:"normal",player3:"normal",player4:"elite"},{name:"robotic-boltshooter",player2:"normal",player3:"normal",player4:"elite"},{name:"robotic-boltshooter",player4:"normal"},{name:"steel-automaton",type:"normal"},{name:"steel-automaton",player3:"normal",player4:"normal"}]}]},{index:"906",group:"randomMonsterCard",name:"Rusted",edition:"fh",named:!0,monsters:["flaming-bladespinner","ruined-machine","steel-automaton"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"fire",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"flaming-bladespinner",type:"normal"},{name:"flaming-bladespinner",player4:"normal"},{name:"ruined-machine",player2:"normal",player3:"normal",player4:"elite"},{name:"steel-automaton",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"907",group:"randomMonsterCard",name:"Unsettling",edition:"fh",named:!0,monsters:["black-imp","chaos-demon","ooze"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"dark",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"black-imp",player2:"normal",player3:"normal",player4:"elite"},{name:"black-imp",player3:"normal",player4:"elite"},{name:"chaos-demon",type:"normal"},{name:"chaos-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"chaos-demon",player3:"normal",player4:"normal"},{name:"ooze",type:"elite"},{name:"ooze",player3:"normal",player4:"normal"}]}]},{index:"908",group:"randomMonsterCard",name:"Taloned",edition:"fh",named:!0,monsters:["rending-drake","shrike-fiend"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"dark",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"rending-drake",type:"normal"},{name:"rending-drake",player2:"normal",player3:"elite",player4:"elite"},{name:"rending-drake",player4:"normal"},{name:"shrike-fiend",type:"normal"},{name:"shrike-fiend",player2:"normal",player3:"normal",player4:"elite"},{name:"shrike-fiend",player3:"normal",player4:"normal"}]}]},{index:"909",group:"randomMonsterCard",name:"Segmented",edition:"fh",named:!0,monsters:["burrowing-blade","spitting-drake"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"earth",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"burrowing-blade",type:"normal"},{name:"burrowing-blade",player2:"normal",player3:"normal",player4:"elite"},{name:"burrowing-blade",player3:"normal",player4:"normal"},{name:"spitting-drake",player2:"normal",player3:"normal",player4:"elite"},{name:"spitting-drake",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"910",group:"randomMonsterCard",name:"Dirty",edition:"fh",named:!0,monsters:["earth-demon","forest-imp","ooze"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"earth",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"earth-demon",type:"normal"},{name:"earth-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"earth-demon",player4:"normal"},{name:"forest-imp",type:"normal"},{name:"forest-imp",player3:"normal",player4:"normal"},{name:"ooze",player2:"normal",player3:"normal",player4:"elite"},{name:"ooze",player2:"normal",player3:"elite",player4:"elite"}]}]},{index:"911",group:"randomMonsterCard",name:"Grave",edition:"fh",named:!0,monsters:["deep-terror","ice-wraith","night-demon"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"dark",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"deep-terror",type:"normal"},{name:"deep-terror",player4:"normal"},{name:"ice-wraith",type:"normal"},{name:"ice-wraith",player4:"elite"},{name:"night-demon",type:"normal"},{name:"night-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"night-demon",player3:"normal",player4:"normal"}]}]},{index:"912",group:"randomMonsterCard",name:"Luminous",edition:"fh",named:!0,monsters:["lurker-wavethrower","sun-demo"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"light",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"lurker-wavethrower",type:"elite"},{name:"lurker-wavethrower",player2:"normal",player3:"normal",player4:"elite"},{name:"lurker-wavethrower",player4:"elite"},{name:"sun-demon",type:"normal"},{name:"sun-demon",player2:"normal",player3:"elite",player4:"elite"},{name:"sun-demon",player3:"normal",player4:"normal"}]}]},{index:"913",group:"randomMonsterCard",name:"Scorching",edition:"fh",named:!0,monsters:["flame-demon","flaming-bladespinner"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"fire",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"flame-demon",player2:"normal",player3:"elite",player4:"normal"},{name:"flame-demon",player3:"normal",player4:"normal"},{name:"flaming-bladespinner",type:"normal"},{name:"flaming-bladespinner",player2:"normal",player3:"normal",player4:"elite"},{name:"flaming-bladespinner",player4:"normal"}]}]},{index:"914",group:"randomMonsterCard",name:"Swift",edition:"fh",named:!0,monsters:["algox-scout","wind-demon"],rules:[{round:"true",always:!0,once:!0,elements:[{type:"air",state:"new"}]}],rooms:[{roomNumber:1,initial:!0,treasures:[],monster:[{name:"algox-scout",type:"elite"},{name:"algox-scout",player3:"normal",player4:"elite"},{name:"wind-demon",type:"normal"},{name:"wind-demon",player2:"normal",player3:"normal",player4:"elite"},{name:"wind-demon",player3:"normal",player4:"normal"}]}]}],characters:[{name:"astral",traits:["arcane","educated","strong"],color:"#6fb54e",stats:[{level:1,health:8},{level:2,health:9},{level:3,health:11},{level:4,health:12},{level:5,health:14},{level:6,health:15},{level:7,health:17},{level:8,health:18},{level:9,health:20}]},{name:"banner-spear",traits:["armored","persuasive","resourceful"],color:"#edbc47",stats:[{level:1,health:10},{level:2,health:12},{level:3,health:14},{level:4,health:16},{level:5,health:18},{level:6,health:20},{level:7,health:22},{level:8,health:24},{level:9,health:26}]},{name:"blinkblade",traits:["educated","nimble","resourceful"],color:"#01b0db",stats:[{level:1,health:8},{level:2,health:9},{level:3,health:11},{level:4,health:12},{level:5,health:14},{level:6,health:15},{level:7,health:17},{level:8,health:18},{level:9,health:20}]},{name:"boneshaper",traits:["arcane","educated","intimidating"],color:"#49a967",stats:[{level:1,health:6},{level:2,health:7},{level:3,health:8},{level:4,health:9},{level:5,health:10},{level:6,health:11},{level:7,health:12},{level:8,health:13},{level:9,health:14}]},{name:"coral",traits:["armored","chaotic","strong"],color:"#4c988b",stats:[{level:1,health:10},{level:2,health:12},{level:3,health:14},{level:4,health:16},{level:5,health:18},{level:6,health:20},{level:7,health:22},{level:8,health:24},{level:9,health:26}]},{name:"deathwalker",traits:["arcane","outcast","persuasive"],color:"#8c97a9",stats:[{level:1,health:6},{level:2,health:7},{level:3,health:8},{level:4,health:9},{level:5,health:10},{level:6,health:11},{level:7,health:12},{level:8,health:13},{level:9,health:14}]},{name:"drifter",traits:["outcast","resourceful","strong"],color:"#a28b7c",stats:[{level:1,health:10},{level:2,health:12},{level:3,health:14},{level:4,health:16},{level:5,health:18},{level:6,health:20},{level:7,health:22},{level:8,health:24},{level:9,health:26}]},{name:"drill",traits:["armored","resourceful","strong"],color:"#ad8f68",stats:[{level:1,health:10},{level:2,health:12},{level:3,health:14},{level:4,health:16},{level:5,health:18},{level:6,health:20},{level:7,health:22},{level:8,health:24},{level:9,health:26}]},{name:"fist",traits:["intimidating","persuasive","strong"],color:"#88abc6",stats:[{level:1,health:10},{level:2,health:12},{level:3,health:14},{level:4,health:16},{level:5,health:18},{level:6,health:20},{level:7,health:22},{level:8,health:24},{level:9,health:26}]},{name:"geminate",traits:["arcane","chaotic","nimble"],color:"#c33e69",stats:[{level:1,health:8},{level:2,health:9},{level:3,health:11},{level:4,health:12},{level:5,health:14},{level:6,health:15},{level:7,health:17},{level:8,health:18},{level:9,health:20}]},{name:"kelp",color:"#987bab",traits:["armored","intimidating","nimble"],stats:[{level:1,health:8},{level:2,health:9},{level:3,health:11},{level:4,health:12},{level:5,health:14},{level:6,health:15},{level:7,health:17},{level:8,health:18},{level:9,health:20}]},{name:"meteor",traits:["arcane","chaotic","intimidating"],color:"#eb5b38",stats:[{level:1,health:8},{level:2,health:9},{level:3,health:11},{level:4,health:12},{level:5,health:14},{level:6,health:15},{level:7,health:17},{level:8,health:18},{level:9,health:20}]},{name:"prism",traits:["armored","educated","resourceful"],color:"#d7ad47",stats:[{level:1,health:8},{level:2,health:9},{level:3,health:11},{level:4,health:12},{level:5,health:14},{level:6,health:15},{level:7,health:17},{level:8,health:18},{level:9,health:20}]},{name:"shackles",traits:["chaotic","intimidating","outcast"],color:"#7476a7",stats:[{level:1,health:8},{level:2,health:9},{level:3,health:11},{level:4,health:12},{level:5,health:14},{level:6,health:15},{level:7,health:17},{level:8,health:18},{level:9,health:20}]},{name:"shards",traits:["educated","outcast","persuasive"],color:"#c0d7e9",stats:[{level:1,health:8},{level:2,health:9},{level:3,health:11},{level:4,health:12},{level:5,health:14},{level:6,health:15},{level:7,health:17},{level:8,health:18},{level:9,health:20}]},{name:"snowflake",traits:["chaotic","nimble","persuasive"],color:"#83b5be",stats:[{level:1,health:8},{level:2,health:9},{level:3,health:11},{level:4,health:12},{level:5,health:14},{level:6,health:15},{level:7,health:17},{level:8,health:18},{level:9,health:20}]},{name:"trap",traits:["nimble","outcast","resourceful"],color:"#ddb586",stats:[{level:1,health:6},{level:2,health:7},{level:3,health:8},{level:4,health:9},{level:5,health:10},{level:6,health:11},{level:7,health:12},{level:8,health:13},{level:9,health:14}]}]}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Wj=(()=>{class e{parseInt(t){return parseInt(void 0!==t?String(t):"0")||0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),my=(()=>{class e{dataLoader;stringUtils;creatureIdCounter=0;dataFile;constructor(t,r){this.dataLoader=t,this.stringUtils=r,this.dataFile=this.dataLoader.getData()}generateCreatureId(){return Date.now()+""+ ++this.creatureIdCounter}createCreature(t){const r=this.findMonsterStats(t);return{id:this.generateCreatureId(),name:t.aggressive?this.createCreatureName(t):t.name,type:t.type,standee:t.standee??"#",level:t.level??1,hp:Math.max(this.stringUtils.parseInt(r?.baseStat?.health??0),this.stringUtils.parseInt(r?.stats[0]?.health??0),this.stringUtils.parseInt(t.hp??0)),attack:Math.max(this.stringUtils.parseInt(r?.baseStat?.attack??0),this.stringUtils.parseInt(r?.stats[0]?.attack??0)),movement:Math.max(this.stringUtils.parseInt(r?.baseStat?.movement??0),this.stringUtils.parseInt(r?.stats[0]?.movement??0)),initiative:t.initiative??0,armor:this.stringUtils.parseInt(r?.stats?.[0]?.actions?.find(a=>"shield"===a.type)?.value??r?.stats?.[0]?.baseStat?.actions?.find(a=>"shield"===a.type)?.value??0),retaliate:this.stringUtils.parseInt(r?.stats?.[0]?.actions?.find(a=>"retaliate"===a.type)?.value??r?.stats?.[0]?.baseStat?.actions?.find(a=>"retaliate"===a.type)?.value??0),aggressive:t.aggressive,boss:r?.boss??!1,flying:r?.flying??!1,isElite:t.isElite??!1,conditions:t.conditions??[],roundArmor:t.roundArmor??0,roundRetaliate:t.roundRetaliate??0,actions:r?.actions?.filter(a=>"condition"===a.type)??r?.baseStat?.actions?.filter(a=>"condition"===a.type)??r?.stats?.flatMap(a=>a.actions??[]).filter(a=>"condition"===a.type)??[],log:t.log??[],traits:t.traits??[]}}createCreatureName(t){let r=`${t.type} ${t.standee??""}`;return t.isElite?`\u2605 ${r}`:r}createCreatureList(t){const r=[];return t.forEach(o=>{r.push(this.createCreature(o))}),r}findMonsterStats(t){const r=this.dataFile.monsters.find(i=>i.name===t.name||i.name===t.type);if(!r)return;const o=this.isCreatureElite(t),a=r.stats.find(i=>(o?"elite"===i.type:"normal"===i.type||!i.type)&&i.level===t.level);return a?{...r,stats:[a]}:void 0}isCreatureElite(t){return"elite"===t.type||"elite"===t.player4||!0===t.isElite}static \u0275fac=function(r){return new(r||e)(H(Gs),H(Wj))};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function cE(e,n){return Vn((t,r)=>{let o=0;t.subscribe(Sn(r,a=>e.call(n,a,o++)&&r.next(a)))})}const Qj=["name","standee","level","hp","aggressive"];let dE=(()=>{class e{logsSubject=new En([]);logs$=this.logsSubject.asObservable();init(t){t.pipe(Ft(o=>(o??[]).map(a=>({id:a.id,name:a.name,type:a.type,standee:a.standee,level:a.level,hp:a.hp,aggressive:a?.aggressive})))).pipe(function Kj(){return Vn((e,n)=>{let t,r=!1;e.subscribe(Sn(n,o=>{const a=t;t=o,r&&n.next([a,o]),r=!0}))})}(),Ft(([o,a])=>this.diff(o,a)),cE(o=>o.length>0)).subscribe(o=>{this.logsSubject.next([...o,...this.logsSubject.value])})}characterOptions$=this.logs$.pipe(Ft(t=>{const r=new Map;for(const o of t)o.creatureId&&!r.has(o.creatureId)&&r.set(o.creatureId,o.creature);return Array.from(r.entries()).map(([o,a])=>({value:o,text:a}))}));getLastAliveHpBefore(t,r){const o=this.logsSubject.value,a=o.findIndex(i=>i.id===t);if(-1!==a)for(let i=a+1;i<o.length;i++){const s=o[i];if(s.creatureId===r&&"hp"===s.stat){const l="number"==typeof s.value?s.value:void 0;if(void 0!==l&&l>0)return l}}}getLastPositiveHp(t){const r=this.logsSubject.value;for(const o of r)if(o.creatureId===t&&"hp"===o.stat){const a="number"==typeof o.value?o.value:void 0;if(void 0!==a&&a>0)return a}}diff(t,r){const o=new Map((t??[]).map(l=>[l.id,l])),a=new Map((r??[]).map(l=>[l.id,l])),i=[],s=l=>!!l?.aggressive;for(const[l,u]of a){const c=o.get(l);if(c)for(const d of Qj){const p=c[d],m=u[d];if(!Object.is(p,m)){if("aggressive"===d){m&&!p&&i.push(this.entry(l,u.name??"(unknown)","aggressive",!0,!!p));continue}(s(c)||s(u))&&i.push(this.entry(l,u.name??"(unknown)",String(d),m,p))}}else s(u)&&i.push(this.entry(l,u.name??"(unknown)","created",this.pretty(u),null,{new:this.snap(u)}))}for(const[l,u]of o)!a.has(l)&&s(u)&&i.push(this.entry(l,u.name??"(unknown)","killed",null,this.pretty(u),{old:this.snap(u)}));return i}pretty(t){return`hp=${t.hp}, lvl=${t.level}`}entry(t,r,o,a,i,s){return{id:this.randId(),time:(new Date).toLocaleString(),creatureId:t,creature:r,stat:o,value:a,oldValue:i,data:s}}snap(t){return{name:t.name,type:t.type,standee:t.standee,level:t.level,hp:t.hp,aggressive:t?.aggressive}}eq(t,r){return Object.is(t,r)}randId(){return Math.random().toString(36).slice(2,10)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class py extends Error{constructor(n,t="FunctionsError",r){super(n),this.name=t,this.context=r}}class Yj extends py{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class mE extends py{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class pE extends py{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var hE=function(e){return e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2",e}(hE||{});class Xj{constructor(n,{headers:t={},customFetch:r,region:o=hE.Any}={}){this.url=n,this.headers=t,this.region=o,this.fetch=(e=>{let n;return n=e||(typeof fetch>"u"?(...t)=>Promise.resolve().then(se.bind(se,286)).then(({default:r})=>r(...t)):fetch),(...t)=>n(...t)})(r)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,t={}){var r;return function(e,n,t,r){return new(t||(t=Promise))(function(a,i){function s(c){try{u(r.next(c))}catch(d){i(d)}}function l(c){try{u(r.throw(c))}catch(d){i(d)}}function u(c){c.done?a(c.value):function o(a){return a instanceof t?a:new t(function(i){i(a)})}(c.value).then(s,l)}u((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{const{headers:o,method:a,body:i}=t;let s={},{region:l}=t;l||(l=this.region);const u=new URL(`${this.url}/${n}`);let c;l&&"any"!==l&&(s["x-region"]=l,u.searchParams.set("forceFunctionRegion",l)),i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(s["Content-Type"]="application/octet-stream",c=i):"string"==typeof i?(s["Content-Type"]="text/plain",c=i):typeof FormData<"u"&&i instanceof FormData?c=i:(s["Content-Type"]="application/json",c=JSON.stringify(i)));const d=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},s),this.headers),o),body:c}).catch(f=>{throw new Yj(f)}),p=d.headers.get("x-relay-error");if(p&&"true"===p)throw new mE(d);if(!d.ok)throw new pE(d);let h,m=(null!==(r=d.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return h="application/json"===m?yield d.json():"application/octet-stream"===m?yield d.blob():"text/event-stream"===m?d:"multipart/form-data"===m?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(o){return{data:null,error:o,response:o instanceof pE||o instanceof mE?o.context:void 0}}})}}var e9=se(60);const{PostgrestClient:fE}=e9,s9=class i9{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&null!==(n=navigator.userAgent)&&void 0!==n&&n.includes("Vercel-Edge"))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let t=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(t+=`\n\nSuggested solution: ${n.workaround}`),new Error(t)}static createWebSocket(n,t){return new(this.getWebSocketConstructor())(n,t)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return"native"===n.type||"ws"===n.type}catch{return!1}}};var Bc=function(e){return e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed",e}(Bc||{}),ct=function(e){return e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving",e}(ct||{}),Wn=function(e){return e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token",e}(Wn||{}),yE=function(e){return e.websocket="websocket",e}(yE||{}),ai=function(e){return e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed",e}(ai||{});class m9{constructor(){this.HEADER_LENGTH=1}decode(n,t){return n.constructor===ArrayBuffer?t(this._binaryDecode(n)):t("string"==typeof n?JSON.parse(n):{})}_binaryDecode(n){const t=new DataView(n),r=new TextDecoder;return this._decodeBroadcast(n,t,r)}_decodeBroadcast(n,t,r){const o=t.getUint8(1),a=t.getUint8(2);let i=this.HEADER_LENGTH+2;const s=r.decode(n.slice(i,i+o));i+=o;const l=r.decode(n.slice(i,i+a));return i+=a,{ref:null,topic:s,event:l,payload:JSON.parse(r.decode(n.slice(i,n.byteLength)))}}}class gE{constructor(n,t){this.callback=n,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var je=function(e){return e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange",e}(je||{});const vE=(e,n,t={})=>{var r;const o=null!==(r=t.skipTypes)&&void 0!==r?r:[];return Object.keys(n).reduce((a,i)=>(a[i]=p9(i,e,n,o),a),{})},p9=(e,n,t,r)=>{const o=n.find(s=>s.name===e),a=o?.type,i=t[e];return a&&!r.includes(a)?bE(a,i):fy(i)},bE=(e,n)=>{if("_"===e.charAt(0)){const t=e.slice(1,e.length);return g9(n,t)}switch(e){case je.bool:return h9(n);case je.float4:case je.float8:case je.int2:case je.int4:case je.int8:case je.numeric:case je.oid:return f9(n);case je.json:case je.jsonb:return y9(n);case je.timestamp:return v9(n);default:return fy(n)}},fy=e=>e,h9=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},f9=e=>{if("string"==typeof e){const n=parseFloat(e);if(!Number.isNaN(n))return n}return e},y9=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(n){return console.log(`JSON parse error: ${n}`),e}return e},g9=(e,n)=>{if("string"!=typeof e)return e;const t=e.length-1;if("{"===e[0]&&"}"===e[t]){let a;const i=e.slice(1,t);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(s=>bE(n,s))}return e},v9=e=>"string"==typeof e?e.replace(" ","T"):e,_E=e=>{let n=e;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class yy{constructor(n,t,r={},o=1e4){this.channel=n,this.event=t,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,t){var r;return this._hasReceived(n)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:n,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(n,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:t}){this.recHooks.filter(r=>r.status===n).forEach(r=>r.callback(t))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}class qs{constructor(n,t){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:a,onLeave:i,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qs.syncState(this.state,o,a,i),this.pendingDiffs.forEach(l=>{this.state=qs.syncDiff(this.state,l,a,i)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},o=>{const{onJoin:a,onLeave:i,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=qs.syncDiff(this.state,o,a,i),s())}),this.onJoin((o,a,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:i})}),this.onLeave((o,a,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,t,r,o){const a=this.cloneDeep(n),i=this.transformState(t),s={},l={};return this.map(a,(u,c)=>{i[u]||(l[u]=c)}),this.map(i,(u,c)=>{const d=a[u];if(d){const p=c.map(y=>y.presence_ref),m=d.map(y=>y.presence_ref),h=c.filter(y=>m.indexOf(y.presence_ref)<0),f=d.filter(y=>p.indexOf(y.presence_ref)<0);h.length>0&&(s[u]=h),f.length>0&&(l[u]=f)}else s[u]=c}),this.syncDiff(a,{joins:s,leaves:l},r,o)}static syncDiff(n,t,r,o){const{joins:a,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(a,(s,l)=>{var u;const c=null!==(u=n[s])&&void 0!==u?u:[];if(n[s]=this.cloneDeep(l),c.length>0){const d=n[s].map(m=>m.presence_ref),p=c.filter(m=>d.indexOf(m.presence_ref)<0);n[s].unshift(...p)}r(s,c,l)}),this.map(i,(s,l)=>{let u=n[s];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),n[s]=u,o(s,u,l),0===u.length&&delete n[s]}),n}static map(n,t){return Object.getOwnPropertyNames(n).map(r=>t(r,n[r]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((t,r)=>{const o=n[r];return t[r]="metas"in o?o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):o,t},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Vc=function(e){return e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system",e}(Vc||{}),Kr=function(e){return e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR",e}(Kr||{});class gy{constructor(n,t={config:{}},r){this.topic=n,this.params=t,this.socket=r,this.bindings={},this.state=ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new yy(this,Wn.join,this.params,this.timeout),this.rejoinTimer=new gE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ct.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wn.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new qs(this),this.broadcastEndpointURL=_E(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(n,t=this.timeout){var o,a,r=this;if(this.socket.isConnected()||this.socket.connect(),this.state==ct.closed){const{config:{broadcast:i,presence:s,private:l}}=this.params,u=null!==(a=null===(o=this.bindings.postgres_changes)||void 0===o?void 0:o.map(m=>m.filter))&&void 0!==a?a:[],c=!!this.bindings[Vc.PRESENCE]&&this.bindings[Vc.PRESENCE].length>0,d={},p={broadcast:i,presence:Object.assign(Object.assign({},s),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>n?.(Kr.CHANNEL_ERROR,m)),this._onClose(()=>n?.(Kr.CLOSED)),this.updateJoinPayload(Object.assign({config:p},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",function(){var m=b(function*({postgres_changes:h}){var f;if(r.socket.setAuth(),void 0!==h){const y=r.bindings.postgres_changes,g=null!==(f=y?.length)&&void 0!==f?f:0,v=[];for(let M=0;M<g;M++){const A=y[M],{filter:{event:T,schema:ne,table:ae,filter:X}}=A,ge=h&&h[M];if(!ge||ge.event!==T||ge.schema!==ne||ge.table!==ae||ge.filter!==X)return r.unsubscribe(),r.state=ct.errored,void n?.(Kr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));v.push(Object.assign(Object.assign({},A),{id:ge.id}))}return r.bindings.postgres_changes=v,void(n&&n(Kr.SUBSCRIBED))}n?.(Kr.SUBSCRIBED)});return function(h){return m.apply(this,arguments)}}()).receive("error",m=>{this.state=ct.errored,n?.(Kr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{n?.(Kr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(n){var t=this;return b(function*(r,o={}){return yield t.send({type:"presence",event:"track",payload:r},o.timeout||t.timeout)}).apply(this,arguments)}untrack(){var n=this;return b(function*(t={}){return yield n.send({type:"presence",event:"untrack"},t)}).apply(this,arguments)}on(n,t,r){return this.state===ct.joined&&n===Vc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,t,r)}send(n){var t=this;return b(function*(r,o={}){var a,i;if(t._canPush()||"broadcast"!==r.type)return new Promise(s=>{var l,u,c;const d=t._push(r.type,r,o.timeout||t.timeout);"broadcast"===r.type&&!(null!==(c=null===(u=null===(l=t.params)||void 0===l?void 0:l.config)||void 0===u?void 0:u.broadcast)&&void 0!==c&&c.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))});{const{event:s,payload:l}=r,c={method:"POST",headers:{Authorization:t.socket.accessTokenValue?`Bearer ${t.socket.accessTokenValue}`:"",apikey:t.socket.apiKey?t.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:t.subTopic,event:s,payload:l,private:t.private}]})};try{const d=yield t._fetchWithTimeout(t.broadcastEndpointURL,c,null!==(a=o.timeout)&&void 0!==a?a:t.timeout);return yield null===(i=d.body)||void 0===i?void 0:i.cancel(),d.ok?"ok":"error"}catch(d){return"AbortError"===d.name?"timed out":"error"}}}).apply(this,arguments)}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ct.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new yy(this,Wn.leave,{},n),r.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ct.closed,this.bindings={}}_fetchWithTimeout(n,t,r){var o=this;return b(function*(){const a=new AbortController,i=setTimeout(()=>a.abort(),r),s=yield o.socket.fetch(n,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(i),s})()}_push(n,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new yy(this,n,t,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>100){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(n,t,r){return t}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,t,r){var o,a;const i=n.toLocaleLowerCase(),{close:s,error:l,leave:u,join:c}=Wn;if(r&&[s,l,u,c].indexOf(i)>=0&&r!==this._joinRef())return;let p=this._onMessage(i,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(o=this.bindings.postgres_changes)||void 0===o||o.filter(m=>{var h,f,y;return"*"===(null===(h=m.filter)||void 0===h?void 0:h.event)||(null===(y=null===(f=m.filter)||void 0===f?void 0:f.event)||void 0===y?void 0:y.toLocaleLowerCase())===i}).map(m=>m.callback(p,r)):null===(a=this.bindings[i])||void 0===a||a.filter(m=>{var h,f,y,g,v,M;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in m){const A=m.id,T=null===(h=m.filter)||void 0===h?void 0:h.event;return A&&(null===(f=t.ids)||void 0===f?void 0:f.includes(A))&&("*"===T||T?.toLocaleLowerCase()===(null===(y=t.data)||void 0===y?void 0:y.type.toLocaleLowerCase()))}{const A=null===(v=null===(g=m?.filter)||void 0===g?void 0:g.event)||void 0===v?void 0:v.toLocaleLowerCase();return"*"===A||A===(null===(M=t?.event)||void 0===M?void 0:M.toLocaleLowerCase())}}return m.type.toLocaleLowerCase()===i}).map(m=>{if("object"==typeof p&&"ids"in p){const h=p.data,{schema:f,table:y,commit_timestamp:g,type:v,errors:M}=h;p=Object.assign(Object.assign({},{schema:f,table:y,commit_timestamp:g,eventType:v,new:{},old:{},errors:M}),this._getPayloadRecords(h))}m.callback(p,r)})}_isClosed(){return this.state===ct.closed}_isJoined(){return this.state===ct.joined}_isJoining(){return this.state===ct.joining}_isLeaving(){return this.state===ct.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,t,r){const o=n.toLocaleLowerCase(),a={type:o,filter:t,callback:r};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(n,t){const r=n.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var a;return!((null===(a=o.type)||void 0===a?void 0:a.toLocaleLowerCase())===r&&gy.isEqual(o.filter,t))})),this}static isEqual(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const r in n)if(n[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Wn.close,{},n)}_onError(n){this._on(Wn.error,{},t=>n(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ct.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const t={new:{},old:{}};return("INSERT"===n.type||"UPDATE"===n.type)&&(t.new=vE(n.columns,n.record)),("UPDATE"===n.type||"DELETE"===n.type)&&(t.old=vE(n.columns,n.old_record)),t}}const wE=()=>{},w9=[1e3,2e3,5e3,1e4];class E9{constructor(n,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wE,this.ref=0,this.reconnectTimer=null,this.logger=wE,this.conn=null,this.sendBuffer=[],this.serializer=new m9,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let a;return a=o||(typeof fetch>"u"?(...i)=>Promise.resolve().then(se.bind(se,286)).then(({default:s})=>s(...i)).catch(s=>{throw new Error(`Failed to load @supabase/node-fetch: ${s.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...i)=>a(...i)},null===(r=t?.params)||void 0===r||!r.apikey)throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${n}/${yE.websocket}`,this.httpEndpoint=_E(n),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=s9.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const t=n.message;throw t.includes("Node.js")?new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(n,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},n?this.conn.close(n,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(n){var t=this;return b(function*(){const r=yield n.unsubscribe();return 0===t.channels.length&&t.disconnect(),r})()}removeAllChannels(){var n=this;return b(function*(){const t=yield Promise.all(n.channels.map(r=>r.unsubscribe()));return n.channels=[],n.disconnect(),t})()}log(n,t,r){this.logger(n,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Bc.connecting:return ai.Connecting;case Bc.open:return ai.Open;case Bc.closing:return ai.Closing;default:return ai.Closed}}isConnected(){return this.connectionState()===ai.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(n,t={config:{}}){const r=`realtime:${n}`,o=this.getChannels().find(a=>a.topic===r);if(o)return o;{const a=new gy(`realtime:${n}`,t,this);return this.channels.push(a),a}}push(n){const{topic:t,event:r,payload:o,ref:a}=n,i=()=>{this.encode(n,s=>{var l;null===(l=this.conn)||void 0===l||l.send(s)})};this.log("push",`${t} ${r} (${a})`,o),this.isConnected()?i():this.sendBuffer.push(i)}setAuth(){var n=this;return b(function*(t=null){n._authPromise=n._performAuth(t);try{yield n._authPromise}finally{n._authPromise=null}}).apply(this,arguments)}sendHeartbeat(){var n=this;return b(function*(){var t;if(n.isConnected())return n.pendingHeartbeatRef?(n.pendingHeartbeatRef=null,n.log("transport","heartbeat timeout. Attempting to re-establish connection"),n.heartbeatCallback("timeout"),n._wasManualDisconnect=!1,null===(t=n.conn)||void 0===t||t.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var r;n.isConnected()||null===(r=n.reconnectTimer)||void 0===r||r.scheduleTimeout()},100)):(n.pendingHeartbeatRef=n._makeRef(),n.push({topic:"phoenix",event:"heartbeat",payload:{},ref:n.pendingHeartbeatRef}),n.heartbeatCallback("sent"),void n._setAuthSafely("heartbeat"));n.heartbeatCallback("disconnected")})()}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return this.ref=n===this.ref?0:n,this.ref.toString()}_leaveOpenTopic(n){let t=this.channels.find(r=>r.topic===n&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${n}"`),t.unsubscribe())}_remove(n){this.channels=this.channels.filter(t=>t.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,t=>{"phoenix"===t.topic&&"phx_reply"===t.event&&this.heartbeatCallback("ok"===t.payload.status?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:a,ref:i}=t;this.log("receive",`${a.status||""} ${r} ${o} ${i?`(${i})`:""}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(o,a,i)),this._triggerStateCallbacks("message",t)})}_clearTimer(n){var t;"heartbeat"===n&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===n&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.log("worker",this.workerUrl?`starting worker for from ${this.workerUrl}`:"starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{"keepAlive"===t.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var t;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Wn.error))}_appendParams(n,t){if(0===Object.keys(t).length)return n;const r=n.match(/\?/)?"&":"?";return`${n}${r}${new URLSearchParams(t)}`}_workerObjectUrl(n){let t;if(n)t=n;else{const r=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(n,t=!1){this._connectionState=n,"connecting"===n?this._wasManualDisconnect=!1:"disconnecting"===n&&(this._wasManualDisconnect=t)}_performAuth(){var n=this;return b(function*(t=null){let r;r=t||(n.accessToken?yield n.accessToken():n.accessTokenValue),n.accessTokenValue!=r&&(n.accessTokenValue=r,n.channels.forEach(o=>{r&&o.updateJoinPayload({access_token:r,version:"realtime-js/2.15.1"}),o.joinedOnce&&o._isJoined()&&o._push(Wn.access_token,{access_token:r})}))}).apply(this,arguments)}_waitForAuthIfNeeded(){var n=this;return b(function*(){n._authPromise&&(yield n._authPromise)})()}_setAuthSafely(n="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${n}`,t)})}_triggerStateCallbacks(n,t){try{this.stateChangeCallbacks[n].forEach(r=>{try{r(t)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(r){this.log("error",`error triggering ${n} callbacks`,r)}}_setupReconnectionTimer(){var n=this;this.reconnectTimer=new gE(b(function*(){setTimeout(b(function*(){yield n._waitForAuthIfNeeded(),n.isConnected()||n.connect()}),10)}),this.reconnectAfterMs)}_initializeOptions(n){var t,r,o,a,i,s,l,u;if(this.transport=null!==(t=n?.transport)&&void 0!==t?t:null,this.timeout=null!==(r=n?.timeout)&&void 0!==r?r:1e4,this.heartbeatIntervalMs=null!==(o=n?.heartbeatIntervalMs)&&void 0!==o?o:25e3,this.worker=null!==(a=n?.worker)&&void 0!==a&&a,this.accessToken=null!==(i=n?.accessToken)&&void 0!==i?i:null,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(s=n?.reconnectAfterMs)&&void 0!==s?s:c=>w9[c-1]||1e4,this.encode=null!==(l=n?.encode)&&void 0!==l?l:(c,d)=>d(JSON.stringify(c)),this.decode=null!==(u=n?.decode)&&void 0!==u?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class vy extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function it(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class D9 extends vy{constructor(n,t,r){super(n),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class by extends vy{constructor(n,t){super(n),this.name="StorageUnknownError",this.originalError=t}}const kE=e=>{let n;return n=e||(typeof fetch>"u"?(...t)=>Promise.resolve().then(se.bind(se,286)).then(({default:r})=>r(...t)):fetch),(...t)=>n(...t)},_y=e=>{if(Array.isArray(e))return e.map(t=>_y(t));if("function"==typeof e||e!==Object(e))return e;const n={};return Object.entries(e).forEach(([t,r])=>{const o=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));n[o]=_y(r)}),n};var qo=function(e,n,t,r){return new(t||(t=Promise))(function(a,i){function s(c){try{u(r.next(c))}catch(d){i(d)}}function l(c){try{u(r.throw(c))}catch(d){i(d)}}function u(c){c.done?a(c.value):function o(a){return a instanceof t?a:new t(function(i){i(a)})}(c.value).then(s,l)}u((r=r.apply(e,n||[])).next())})};const wy=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),I9=(e,n,t)=>qo(void 0,void 0,void 0,function*(){const r=yield function(e,n,t,r){return new(t||(t=Promise))(function(a,i){function s(c){try{u(r.next(c))}catch(d){i(d)}}function l(c){try{u(r.throw(c))}catch(d){i(d)}}function u(c){c.done?a(c.value):function o(a){return a instanceof t?a:new t(function(i){i(a)})}(c.value).then(s,l)}u((r=r.apply(e,n||[])).next())})}(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(se.bind(se,286))).Response:Response});e instanceof r&&!t?.noResolveJson?e.json().then(o=>{const a=e.status||500,i=o?.statusCode||a+"";n(new D9(wy(o),a,i))}).catch(o=>{n(new by(wy(o),o))}):n(new by(wy(e),e))});function Ws(e,n,t,r,o,a){return qo(this,void 0,void 0,function*(){return new Promise((i,s)=>{e(t,((e,n,t,r)=>{const o={method:e,headers:n?.headers||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const n=Object.getPrototypeOf(e);return!(null!==n&&n!==Object.prototype&&null!==Object.getPrototypeOf(n)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(o.headers=Object.assign({"Content-Type":"application/json"},n?.headers),o.body=JSON.stringify(r)):o.body=r,n?.duplex&&(o.duplex=n.duplex),Object.assign(Object.assign({},o),t)):o})(n,r,o,a)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>I9(l,s,r))})})}function Hc(e,n,t,r){return qo(this,void 0,void 0,function*(){return Ws(e,"GET",n,t,r)})}function Kn(e,n,t,r,o){return qo(this,void 0,void 0,function*(){return Ws(e,"POST",n,r,o,t)})}function ky(e,n,t,r,o){return qo(this,void 0,void 0,function*(){return Ws(e,"PUT",n,r,o,t)})}function CE(e,n,t,r,o){return qo(this,void 0,void 0,function*(){return Ws(e,"DELETE",n,r,o,t)})}var Rt=function(e,n,t,r){return new(t||(t=Promise))(function(a,i){function s(c){try{u(r.next(c))}catch(d){i(d)}}function l(c){try{u(r.throw(c))}catch(d){i(d)}}function u(c){c.done?a(c.value):function o(a){return a instanceof t?a:new t(function(i){i(a)})}(c.value).then(s,l)}u((r=r.apply(e,n||[])).next())})};const N9={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},EE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class R9{constructor(n,t={},r,o){this.url=n,this.headers=t,this.bucketId=r,this.fetch=kE(o)}uploadOrUpdate(n,t,r,o){return Rt(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},EE),o);let s=Object.assign(Object.assign({},this.headers),"POST"===n&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",i.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=r,s["cache-control"]=`max-age=${i.cacheControl}`,s["content-type"]=i.contentType,l&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),o?.headers&&(s=Object.assign(Object.assign({},s),o.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),d=yield("PUT"==n?ky:Kn)(this.fetch,`${this.url}/object/${c}`,a,Object.assign({headers:s},i?.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(it(a))return{data:null,error:a};throw a}})}upload(n,t,r){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,t,r)})}uploadToSignedUrl(n,t,r,o){return Rt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(n),i=this._getFinalPath(a),s=new URL(this.url+`/object/upload/sign/${i}`);s.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:EE.upsert},o),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{data:{path:a,fullPath:(yield ky(this.fetch,s.toString(),l,{headers:c})).Key},error:null}}catch(l){if(it(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(n,t){return Rt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(n);const o=Object.assign({},this.headers);t?.upsert&&(o["x-upsert"]="true");const a=yield Kn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+a.url),s=i.searchParams.get("token");if(!s)throw new vy("No token returned by API");return{data:{signedUrl:i.toString(),path:n,token:s},error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}})}update(n,t,r){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,t,r)})}move(n,t,r){return Rt(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(it(o))return{data:null,error:o};throw o}})}copy(n,t,r){return Rt(this,void 0,void 0,function*(){try{return{data:{path:(yield Kn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(it(o))return{data:null,error:o};throw o}})}createSignedUrl(n,t,r){return Rt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n),a=yield Kn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r?.download?`&download=${!0===r.download?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(o){if(it(o))return{data:null,error:o};throw o}})}createSignedUrls(n,t,r){return Rt(this,void 0,void 0,function*(){try{const o=yield Kn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:n},{headers:this.headers}),a=r?.download?`&download=${!0===r.download?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(o){if(it(o))return{data:null,error:o};throw o}})}download(n,t){return Rt(this,void 0,void 0,function*(){const o=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),i=a?`?${a}`:"";try{const s=this._getFinalPath(n);return{data:yield(yield Hc(this.fetch,`${this.url}/${o}/${s}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(s){if(it(s))return{data:null,error:s};throw s}})}info(n){return Rt(this,void 0,void 0,function*(){const t=this._getFinalPath(n);try{const r=yield Hc(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:_y(r),error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}})}exists(n){return Rt(this,void 0,void 0,function*(){const t=this._getFinalPath(n);try{return yield function A9(e,n,t,r){return qo(this,void 0,void 0,function*(){return Ws(e,"HEAD",n,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(it(r)&&r instanceof by){const o=r.originalError;if([400,404].includes(o?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(n,t){const r=this._getFinalPath(n),o=[],a=t?.download?`download=${!0===t.download?"":t.download}`:"";""!==a&&o.push(a);const s=typeof t?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(t?.transform||{});""!==l&&o.push(l);let u=o.join("&");return""!==u&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${u}`)}}}remove(n){return Rt(this,void 0,void 0,function*(){try{return{data:yield CE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(t){if(it(t))return{data:null,error:t};throw t}})}list(n,t,r){return Rt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},N9),t),{prefix:n||""});return{data:yield Kn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(it(o))return{data:null,error:o};throw o}})}listV2(n,t){return Rt(this,void 0,void 0,function*(){try{const r=Object.assign({},n);return{data:yield Kn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const t=[];return n.width&&t.push(`width=${n.width}`),n.height&&t.push(`height=${n.height}`),n.resize&&t.push(`resize=${n.resize}`),n.format&&t.push(`format=${n.format}`),n.quality&&t.push(`quality=${n.quality}`),t.join("&")}}const O9={"X-Client-Info":"storage-js/2.11.0"};var ii=function(e,n,t,r){return new(t||(t=Promise))(function(a,i){function s(c){try{u(r.next(c))}catch(d){i(d)}}function l(c){try{u(r.throw(c))}catch(d){i(d)}}function u(c){c.done?a(c.value):function o(a){return a instanceof t?a:new t(function(i){i(a)})}(c.value).then(s,l)}u((r=r.apply(e,n||[])).next())})};class P9{constructor(n,t={},r,o){const a=new URL(n);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},O9),t),this.fetch=kE(r)}listBuckets(){return ii(this,void 0,void 0,function*(){try{return{data:yield Hc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}})}getBucket(n){return ii(this,void 0,void 0,function*(){try{return{data:yield Hc(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(t){if(it(t))return{data:null,error:t};throw t}})}createBucket(n,t={public:!1}){return ii(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}})}updateBucket(n,t){return ii(this,void 0,void 0,function*(){try{return{data:yield ky(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}})}emptyBucket(n){return ii(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(it(t))return{data:null,error:t};throw t}})}deleteBucket(n){return ii(this,void 0,void 0,function*(){try{return{data:yield CE(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(t){if(it(t))return{data:null,error:t};throw t}})}}class F9 extends P9{constructor(n,t={},r,o){super(n,t,r,o)}from(n){return new R9(this.url,this.headers,n,this.fetch)}}let Ks="";Ks=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const j9={headers:{"X-Client-Info":`supabase-js-${Ks}/2.56.0`}},B9={schema:"public"},V9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$9={};var DE=se(286);const G9=(e,n,t)=>{const r=(e=>{let n;return n=e||(typeof fetch>"u"?DE.default:fetch),(...t)=>n(...t)})(t),o=typeof Headers>"u"?DE.Headers:Headers;return(a,i)=>function(e,n,t,r){return new(t||(t=Promise))(function(a,i){function s(c){try{u(r.next(c))}catch(d){i(d)}}function l(c){try{u(r.throw(c))}catch(d){i(d)}}function u(c){c.done?a(c.value):function o(a){return a instanceof t?a:new t(function(i){i(a)})}(c.value).then(s,l)}u((r=r.apply(e,n||[])).next())})}(void 0,void 0,void 0,function*(){var s;const l=null!==(s=yield n())&&void 0!==s?s:e;let u=new o(i?.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(a,Object.assign(Object.assign({},i),{headers:u}))})};const si=3e4,Dy="X-Supabase-Api-Version",SE_2024_01_01_timestamp=Date.parse("2024-01-01T00:00:00.0Z"),SE_2024_01_01_name="2024-01-01",Z9=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class xy extends Error{constructor(n,t,r){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function te(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class eB extends xy{constructor(n,t,r){super(n,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class TE extends xy{constructor(n,t){super(n),this.name="AuthUnknownError",this.originalError=t}}class Qr extends xy{constructor(n,t,r,o){super(n,r,o),this.name=t,this.status=r}}class Jr extends Qr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Uc extends Qr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zc extends Qr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Gc extends Qr{constructor(n,t=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class IE extends Qr{constructor(n,t=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sy extends Qr{constructor(n,t){super(n,"AuthRetryableFetchError",t,void 0)}}function Ty(e){return te(e)&&"AuthRetryableFetchError"===e.name}class ME extends Qr{constructor(n,t,r){super(n,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Iy extends Qr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const qc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),AE=" \t\n\r=".split(""),oB=(()=>{const e=new Array(128);for(let n=0;n<e.length;n+=1)e[n]=-1;for(let n=0;n<AE.length;n+=1)e[AE[n].charCodeAt(0)]=-2;for(let n=0;n<qc.length;n+=1)e[qc[n].charCodeAt(0)]=n;return e})();function Wc(e,n,t){if(null!==e)for(n.queue=n.queue<<8|e,n.queuedBits+=8;n.queuedBits>=6;)t(qc[n.queue>>n.queuedBits-6&63]),n.queuedBits-=6;else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;)t(qc[n.queue>>n.queuedBits-6&63]),n.queuedBits-=6}function NE(e,n,t){const r=oB[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(n.queue=n.queue<<6|r,n.queuedBits+=6;n.queuedBits>=8;)t(n.queue>>n.queuedBits-8&255),n.queuedBits-=8}function RE(e){const n=[],t=i=>{n.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=i=>{!function iB(e,n,t){if(0===n.utf8seq){if(e<=127)return void t(e);for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){n.utf8seq=r;break}if(2===n.utf8seq)n.codepoint=31&e;else if(3===n.utf8seq)n.codepoint=15&e;else{if(4!==n.utf8seq)throw new Error("Invalid UTF-8 sequence");n.codepoint=7&e}n.utf8seq-=1}else if(n.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|63&e,n.utf8seq-=1,0===n.utf8seq&&t(n.codepoint)}}(i,r,t)};for(let i=0;i<e.length;i+=1)NE(e.charCodeAt(i),o,a);return n.join("")}function aB(e,n){if(!(e<=127)){if(e<=2047)return n(192|e>>6),void n(128|63&e);if(e<=65535)return n(224|e>>12),n(128|e>>6&63),void n(128|63&e);if(e<=1114111)return n(240|e>>18),n(128|e>>12&63),n(128|e>>6&63),void n(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}n(e)}function sB(e){const n=[],t={queue:0,queuedBits:0},r=o=>{n.push(o)};for(let o=0;o<e.length;o+=1)NE(e.charCodeAt(o),t,r);return new Uint8Array(n)}function uB(e){const n=[],t={queue:0,queuedBits:0},r=o=>{n.push(o)};return e.forEach(o=>Wc(o,t,r)),Wc(null,t,r),n.join("")}const Rn=()=>typeof window<"u"&&typeof document<"u",Wo={tested:!1,writable:!1},PE=()=>{if(!Rn())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(Wo.tested)return Wo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Wo.tested=!0,Wo.writable=!0}catch{Wo.tested=!0,Wo.writable=!1}return Wo.writable},FE=e=>{let n;return n=e||(typeof fetch>"u"?(...t)=>Promise.resolve().then(se.bind(se,286)).then(({default:r})=>r(...t)):fetch),(...t)=>n(...t)},li=function(){var e=b(function*(n,t,r){yield n.setItem(t,JSON.stringify(r))});return function(t,r,o){return e.apply(this,arguments)}}(),Ko=function(){var e=b(function*(n,t){const r=yield n.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}});return function(t,r){return e.apply(this,arguments)}}(),Yr=function(){var e=b(function*(n,t){yield n.removeItem(t)});return function(t,r){return e.apply(this,arguments)}}();class Kc{constructor(){this.promise=new Kc.promiseConstructor((n,t)=>{this.resolve=n,this.reject=t})}}function My(e){const n=e.split(".");if(3!==n.length)throw new Iy("Invalid JWT structure");for(let r=0;r<n.length;r++)if(!Z9.test(n[r]))throw new Iy("JWT not in base64url format");return{header:JSON.parse(RE(n[0])),payload:JSON.parse(RE(n[1])),signature:sB(n[2]),raw:{header:n[0],payload:n[1]}}}function Ay(){return(Ay=b(function*(e){return yield new Promise(n=>{setTimeout(()=>n(null),e)})})).apply(this,arguments)}function yB(e){return("0"+e.toString(16)).substr(-2)}function Ny(){return(Ny=b(function*(e){const t=(new TextEncoder).encode(e),r=yield crypto.subtle.digest("SHA-256",t),o=new Uint8Array(r);return Array.from(o).map(a=>String.fromCharCode(a)).join("")})).apply(this,arguments)}function Ry(){return Ry=b(function*(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=yield function vB(e){return Ny.apply(this,arguments)}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}),Ry.apply(this,arguments)}function ui(e,n){return Oy.apply(this,arguments)}function Oy(){return Oy=b(function*(e,n,t=!1){const r=function gB(){const n=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let o="";for(let a=0;a<56;a++)o+=t.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(n),Array.from(n,yB).join("")}();let o=r;t&&(o+="/PASSWORD_RECOVERY"),yield li(e,`${n}-code-verifier`,o);const a=yield function bB(e){return Ry.apply(this,arguments)}(r);return[a,r===a?"plain":"s256"]}),Oy.apply(this,arguments)}Kc.promiseConstructor=Promise;const _B=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,EB=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ci(e){if(!EB.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Py(){return new Proxy({},{get:(n,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const r=t.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function LE(e){return JSON.parse(JSON.stringify(e))}const Qo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),xB=[502,503,504];function jE(e){return Fy.apply(this,arguments)}function Fy(){return(Fy=b(function*(e){var n;if(!(e=>"object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json)(e))throw new Sy(Qo(e),0);if(xB.includes(e.status))throw new Sy(Qo(e),e.status);let t,r;try{t=yield e.json()}catch(a){throw new TE(Qo(a),a)}const o=function wB(e){const n=e.headers.get(Dy);if(!n||!n.match(_B))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}(e);if(o&&o.getTime()>=SE_2024_01_01_timestamp&&"object"==typeof t&&t&&"string"==typeof t.code?r=t.code:"object"==typeof t&&t&&"string"==typeof t.error_code&&(r=t.error_code),r){if("weak_password"===r)throw new ME(Qo(t),e.status,(null===(n=t.weak_password)||void 0===n?void 0:n.reasons)||[]);if("session_not_found"===r)throw new Jr}else if("object"==typeof t&&t&&"object"==typeof t.weak_password&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,i)=>a&&"string"==typeof i,!0))throw new ME(Qo(t),e.status,t.weak_password.reasons);throw new eB(Qo(t),e.status||500,r)})).apply(this,arguments)}function de(e,n,t,r){return Ly.apply(this,arguments)}function Ly(){return Ly=b(function*(e,n,t,r){var o;const a=Object.assign({},r?.headers);a[Dy]||(a[Dy]=SE_2024_01_01_name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const i=null!==(o=r?.query)&&void 0!==o?o:{};r?.redirectTo&&(i.redirect_to=r.redirectTo);const s=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=yield function TB(e,n,t,r,o,a){return jy.apply(this,arguments)}(e,n,t+s,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}),Ly.apply(this,arguments)}function jy(){return(jy=b(function*(e,n,t,r,o,a){const i=((e,n,t,r)=>{const o={method:e,headers:n?.headers||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),t))})(n,r,o,a);let s;try{s=yield e(t,Object.assign({},i))}catch(l){throw console.error(l),new Sy(Qo(l),0)}if(s.ok||(yield jE(s)),r?.noResolveJson)return s;try{return yield s.json()}catch(l){yield jE(l)}})).apply(this,arguments)}function gr(e){var n;let t=null;return function NB(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&(t=Object.assign({},e),e.expires_at||(t.expires_at=function cB(e){return Math.round(Date.now()/1e3)+e}(e.expires_in))),{data:{session:t,user:null!==(n=e.user)&&void 0!==n?n:e},error:null}}function BE(e){const n=gr(e);return!n.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((t,r)=>t&&"string"==typeof r,!0)&&(n.data.weak_password=e.weak_password),n}function Zr(e){var n;return{data:{user:null!==(n=e.user)&&void 0!==n?n:e},error:null}}function IB(e){return{data:e,error:null}}function MB(e){const{action_link:n,email_otp:t,hashed_token:r,redirect_to:o,verification_type:a}=e,i=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:n,email_otp:t,hashed_token:r,redirect_to:o,verification_type:a},user:Object.assign({},i)},error:null}}function AB(e){return e}const By=["global","local","others"];class OB{constructor({url:n="",headers:t={},fetch:r}){this.url=n,this.headers=t,this.fetch=FE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(n){var t=this;return b(function*(r,o=By[0]){if(By.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${By.join(", ")}`);try{return yield de(t.fetch,"POST",`${t.url}/logout?scope=${o}`,{headers:t.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(a){if(te(a))return{data:null,error:a};throw a}}).apply(this,arguments)}inviteUserByEmail(n){var t=this;return b(function*(r,o={}){try{return yield de(t.fetch,"POST",`${t.url}/invite`,{body:{email:r,data:o.data},headers:t.headers,redirectTo:o.redirectTo,xform:Zr})}catch(a){if(te(a))return{data:{user:null},error:a};throw a}}).apply(this,arguments)}generateLink(n){var t=this;return b(function*(){try{const{options:r}=n,o=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}(n,["options"]),a=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(a.new_email=o?.newEmail,delete a.newEmail),yield de(t.fetch,"POST",`${t.url}/admin/generate_link`,{body:a,headers:t.headers,xform:MB,redirectTo:r?.redirectTo})}catch(r){if(te(r))return{data:{properties:null,user:null},error:r};throw r}})()}createUser(n){var t=this;return b(function*(){try{return yield de(t.fetch,"POST",`${t.url}/admin/users`,{body:n,headers:t.headers,xform:Zr})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}})()}listUsers(n){var t=this;return b(function*(){var r,o,a,i,s,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=yield de(t.fetch,"GET",`${t.url}/admin/users`,{headers:t.headers,noResolveJson:!0,query:{page:null!==(o=null===(r=n?.page)||void 0===r?void 0:r.toString())&&void 0!==o?o:"",per_page:null!==(i=null===(a=n?.perPage)||void 0===a?void 0:a.toString())&&void 0!==i?i:""},xform:AB});if(d.error)throw d.error;const p=yield d.json(),m=null!==(s=d.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(u=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==u?u:[];return h.length>0&&(h.forEach(f=>{const y=parseInt(f.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(f.split(";")[1].split("=")[1]);c[`${g}Page`]=y}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(te(c))return{data:{users:[]},error:c};throw c}})()}getUserById(n){var t=this;return b(function*(){ci(n);try{return yield de(t.fetch,"GET",`${t.url}/admin/users/${n}`,{headers:t.headers,xform:Zr})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}})()}updateUserById(n,t){var r=this;return b(function*(){ci(n);try{return yield de(r.fetch,"PUT",`${r.url}/admin/users/${n}`,{body:t,headers:r.headers,xform:Zr})}catch(o){if(te(o))return{data:{user:null},error:o};throw o}})()}deleteUser(n){var t=this;return b(function*(r,o=!1){ci(r);try{return yield de(t.fetch,"DELETE",`${t.url}/admin/users/${r}`,{headers:t.headers,body:{should_soft_delete:o},xform:Zr})}catch(a){if(te(a))return{data:{user:null},error:a};throw a}}).apply(this,arguments)}_listFactors(n){var t=this;return b(function*(){ci(n.userId);try{const{data:r,error:o}=yield de(t.fetch,"GET",`${t.url}/admin/users/${n.userId}/factors`,{headers:t.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:o}}catch(r){if(te(r))return{data:null,error:r};throw r}})()}_deleteFactor(n){var t=this;return b(function*(){ci(n.userId),ci(n.id);try{return{data:yield de(t.fetch,"DELETE",`${t.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:t.headers}),error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}})()}}function VE(e={}){return{getItem:n=>e[n]||null,setItem:(n,t)=>{e[n]=t},removeItem:n=>{delete e[n]}}}const di_debug=!!(globalThis&&PE()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class $E extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class FB extends $E{}function jB(e,n,t){return Vy.apply(this,arguments)}function Vy(){return Vy=b(function*(e,n,t){di_debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,n);const r=new globalThis.AbortController;return n>0&&setTimeout(()=>{r.abort(),di_debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},n),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===n?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},function(){var o=b(function*(a){if(!a){if(0===n)throw di_debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new FB(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(di_debug)try{const i=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}di_debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return yield t()}finally{di_debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}});return function(a){return o.apply(this,arguments)}}()))}),Vy.apply(this,arguments)}!function PB(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const BB={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.71.1"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function UE(e,n,t){return Hy.apply(this,arguments)}function Hy(){return(Hy=b(function*(e,n,t){return yield t()})).apply(this,arguments)}const mi={};const $B=(()=>{class e{constructor(t){var o,a,r=this;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=e.nextInstanceID,e.nextInstanceID+=1,this.instanceID>0&&Rn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},BB),t);if(this.logDebugMessages=!!i.debug,"function"==typeof i.debug&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new OB({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=FE(i.fetch),this.lock=i.lock||UE,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.lock=i.lock?i.lock:Rn()&&null!==(o=globalThis?.navigator)&&void 0!==o&&o.locks?jB:UE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:PE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=VE(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=VE(this.memoryStorage)),Rn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}null===(a=this.broadcastChannel)||void 0===a||a.addEventListener("message",function(){var s=b(function*(l){r._debug("received broadcast notification from other tab or client",l),yield r._notifyAllSubscribers(l.data.event,l.data.session,!1)});return function(l){return s.apply(this,arguments)}}())}this.initialize()}get jwks(){var t,r;return null!==(r=null===(t=mi[this.storageKey])||void 0===t?void 0:t.jwks)&&void 0!==r?r:{keys:[]}}set jwks(t){mi[this.storageKey]=Object.assign(Object.assign({},mi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return null!==(r=null===(t=mi[this.storageKey])||void 0===t?void 0:t.cachedAt)&&void 0!==r?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){mi[this.storageKey]=Object.assign(Object.assign({},mi[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (2.71.1) ${(new Date).toISOString()}`,...t),this}initialize(){var t=this;return b(function*(){return t.initializePromise||(t.initializePromise=b(function*(){return yield t._acquireLock(-1,b(function*(){return yield t._initialize()}))})()),yield t.initializePromise})()}_initialize(){var t=this;return b(function*(){var r;try{const o=function mB(e){const n={},t=new URL(e);if(t.hash&&"#"===t.hash[0])try{new URLSearchParams(t.hash.substring(1)).forEach((o,a)=>{n[a]=o})}catch{}return t.searchParams.forEach((r,o)=>{n[o]=r}),n}(window.location.href);let a="none";if(t._isImplicitGrantCallback(o)?a="implicit":(yield t._isPKCECallback(o))&&(a="pkce"),Rn()&&t.detectSessionInUrl&&"none"!==a){const{data:i,error:s}=yield t._getSessionFromURL(o,a);if(s){if(t._debug("#_initialize()","error detecting session from URL",s),function rB(e){return te(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const c=null===(r=s.details)||void 0===r?void 0:r.code;if("identity_already_exists"===c||"identity_not_found"===c||"single_identity_not_deletable"===c)return{error:s}}return yield t._removeSession(),{error:s}}const{session:l,redirectType:u}=i;return t._debug("#_initialize()","detected session in URL",l,"redirect type",u),yield t._saveSession(l),setTimeout(b(function*(){"recovery"===u?yield t._notifyAllSubscribers("PASSWORD_RECOVERY",l):yield t._notifyAllSubscribers("SIGNED_IN",l)}),0),{error:null}}return yield t._recoverAndRefresh(),{error:null}}catch(o){return te(o)?{error:o}:{error:new TE("Unexpected error during initialization",o)}}finally{yield t._handleVisibilityChange(),t._debug("#_initialize()","end")}})()}signInAnonymously(t){var r=this;return b(function*(){var o,a,i;try{const s=yield de(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{data:null!==(a=null===(o=t?.options)||void 0===o?void 0:o.data)&&void 0!==a?a:{},gotrue_meta_security:{captcha_token:null===(i=t?.options)||void 0===i?void 0:i.captchaToken}},xform:gr}),{data:l,error:u}=s;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}})()}signUp(t){var r=this;return b(function*(){var o,a,i;try{let s;if("email"in t){const{email:p,password:m,options:h}=t;let f=null,y=null;"pkce"===r.flowType&&([f,y]=yield ui(r.storage,r.storageKey)),s=yield de(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,redirectTo:h?.emailRedirectTo,body:{email:p,password:m,data:null!==(o=h?.data)&&void 0!==o?o:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:f,code_challenge_method:y},xform:gr})}else{if(!("phone"in t))throw new zc("You must provide either an email or phone number and a password");{const{phone:p,password:m,options:h}=t;s=yield de(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{phone:p,password:m,data:null!==(a=h?.data)&&void 0!==a?a:{},channel:null!==(i=h?.channel)&&void 0!==i?i:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:gr})}}const{data:l,error:u}=s;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}})()}signInWithPassword(t){var r=this;return b(function*(){try{let o;if("email"in t){const{email:s,password:l,options:u}=t;o=yield de(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{email:s,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:BE})}else{if(!("phone"in t))throw new zc("You must provide either an email or phone number and a password");{const{phone:s,password:l,options:u}=t;o=yield de(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{phone:s,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:BE})}}const{data:a,error:i}=o;return i?{data:{user:null,session:null},error:i}:a&&a.session&&a.user?(a.session&&(yield r._saveSession(a.session),yield r._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:i}):{data:{user:null,session:null},error:new Uc}}catch(o){if(te(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOAuth(t){var r=this;return b(function*(){var o,a,i,s;return yield r._handleProviderSignIn(t.provider,{redirectTo:null===(o=t.options)||void 0===o?void 0:o.redirectTo,scopes:null===(a=t.options)||void 0===a?void 0:a.scopes,queryParams:null===(i=t.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:null===(s=t.options)||void 0===s?void 0:s.skipBrowserRedirect})})()}exchangeCodeForSession(t){var r=this;return b(function*(){return yield r.initializePromise,r._acquireLock(-1,b(function*(){return r._exchangeCodeForSession(t)}))})()}signInWithWeb3(t){var r=this;return b(function*(){const{chain:o}=t;if("solana"===o)return yield r.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)})()}signInWithSolana(t){var r=this;return b(function*(){var o,a,i,s,l,u,c,d,p,m,h,f;let y,g;if("message"in t)y=t.message,g=t.signature;else{const{wallet:M,statement:A,options:T}=t;let ne;if(Rn())if("object"==typeof M)ne=M;else{const X=window;if(!("solana"in X)||"object"!=typeof X.solana||!("signIn"in X.solana&&"function"==typeof X.solana.signIn||"signMessage"in X.solana&&"function"==typeof X.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");ne=X.solana}else{if("object"!=typeof M||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ne=M}const ae=new URL(null!==(o=T?.url)&&void 0!==o?o:window.location.href);if("signIn"in ne&&ne.signIn){const X=yield ne.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},T?.signInWithSolana),{version:"1",domain:ae.host,uri:ae.href}),A?{statement:A}:null));let ge;if(Array.isArray(X)&&X[0]&&"object"==typeof X[0])ge=X[0];else{if(!(X&&"object"==typeof X&&"signedMessage"in X&&"signature"in X))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");ge=X}if(!("signedMessage"in ge&&"signature"in ge&&("string"==typeof ge.signedMessage||ge.signedMessage instanceof Uint8Array)&&ge.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");y="string"==typeof ge.signedMessage?ge.signedMessage:(new TextDecoder).decode(ge.signedMessage),g=ge.signature}else{if(!("signMessage"in ne&&"function"==typeof ne.signMessage&&"publicKey"in ne&&"object"==typeof ne&&ne.publicKey&&"toBase58"in ne.publicKey&&"function"==typeof ne.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${ae.host} wants you to sign in with your Solana account:`,ne.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${ae.href}`,`Issued At: ${null!==(i=null===(a=T?.signInWithSolana)||void 0===a?void 0:a.issuedAt)&&void 0!==i?i:(new Date).toISOString()}`,...null!==(s=T?.signInWithSolana)&&void 0!==s&&s.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...null!==(l=T?.signInWithSolana)&&void 0!==l&&l.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...null!==(u=T?.signInWithSolana)&&void 0!==u&&u.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...null!==(c=T?.signInWithSolana)&&void 0!==c&&c.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...null!==(d=T?.signInWithSolana)&&void 0!==d&&d.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...null!==(m=null===(p=T?.signInWithSolana)||void 0===p?void 0:p.resources)&&void 0!==m&&m.length?["Resources",...T.signInWithSolana.resources.map(ge=>`- ${ge}`)]:[]].join("\n");const X=yield ne.signMessage((new TextEncoder).encode(y),"utf8");if(!(X&&X instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=X}}try{const{data:v,error:M}=yield de(r.fetch,"POST",`${r.url}/token?grant_type=web3`,{headers:r.headers,body:Object.assign({chain:"solana",message:y,signature:uB(g)},null!==(h=t.options)&&void 0!==h&&h.captchaToken?{gotrue_meta_security:{captcha_token:null===(f=t.options)||void 0===f?void 0:f.captchaToken}}:null),xform:gr});if(M)throw M;return v&&v.session&&v.user?(v.session&&(yield r._saveSession(v.session),yield r._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:M}):{data:{user:null,session:null},error:new Uc}}catch(v){if(te(v))return{data:{user:null,session:null},error:v};throw v}})()}_exchangeCodeForSession(t){var r=this;return b(function*(){const o=yield Ko(r.storage,`${r.storageKey}-code-verifier`),[a,i]=(o??"").split("/");try{const{data:s,error:l}=yield de(r.fetch,"POST",`${r.url}/token?grant_type=pkce`,{headers:r.headers,body:{auth_code:t,code_verifier:a},xform:gr});if(yield Yr(r.storage,`${r.storageKey}-code-verifier`),l)throw l;return s&&s.session&&s.user?(s.session&&(yield r._saveSession(s.session),yield r._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:l}):{data:{user:null,session:null,redirectType:null},error:new Uc}}catch(s){if(te(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}})()}signInWithIdToken(t){var r=this;return b(function*(){try{const{options:o,provider:a,token:i,access_token:s,nonce:l}=t,u=yield de(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,body:{provider:a,id_token:i,access_token:s,nonce:l,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:gr}),{data:c,error:d}=u;return d?{data:{user:null,session:null},error:d}:c&&c.session&&c.user?(c.session&&(yield r._saveSession(c.session),yield r._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d}):{data:{user:null,session:null},error:new Uc}}catch(o){if(te(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithOtp(t){var r=this;return b(function*(){var o,a,i,s,l;try{if("email"in t){const{email:u,options:c}=t;let d=null,p=null;"pkce"===r.flowType&&([d,p]=yield ui(r.storage,r.storageKey));const{error:m}=yield de(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{email:u,data:null!==(o=c?.data)&&void 0!==o?o:{},create_user:null===(a=c?.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:p},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:u,options:c}=t,{data:d,error:p}=yield de(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{phone:u,data:null!==(i=c?.data)&&void 0!==i?i:{},create_user:null===(s=c?.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:null!==(l=c?.channel)&&void 0!==l?l:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:p}}throw new zc("You must provide either an email or phone number.")}catch(u){if(te(u))return{data:{user:null,session:null},error:u};throw u}})()}verifyOtp(t){var r=this;return b(function*(){var o,a;try{let i,s;"options"in t&&(i=null===(o=t.options)||void 0===o?void 0:o.redirectTo,s=null===(a=t.options)||void 0===a?void 0:a.captchaToken);const{data:l,error:u}=yield de(r.fetch,"POST",`${r.url}/verify`,{headers:r.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:gr});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c?.access_token&&(yield r._saveSession(c),yield r._notifyAllSubscribers("recovery"==t.type?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}})()}signInWithSSO(t){var r=this;return b(function*(){var o,a,i;try{let s=null,l=null;return"pkce"===r.flowType&&([s,l]=yield ui(r.storage,r.storageKey)),yield de(r.fetch,"POST",`${r.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:null!==(a=null===(o=t.options)||void 0===o?void 0:o.redirectTo)&&void 0!==a?a:void 0}),null!==(i=t?.options)&&void 0!==i&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:r.headers,xform:IB})}catch(s){if(te(s))return{data:null,error:s};throw s}})()}reauthenticate(){var t=this;return b(function*(){return yield t.initializePromise,yield t._acquireLock(-1,b(function*(){return yield t._reauthenticate()}))})()}_reauthenticate(){var t=this;return b(function*(){try{return yield t._useSession(function(){var r=b(function*(o){const{data:{session:a},error:i}=o;if(i)throw i;if(!a)throw new Jr;const{error:s}=yield de(t.fetch,"GET",`${t.url}/reauthenticate`,{headers:t.headers,jwt:a.access_token});return{data:{user:null,session:null},error:s}});return function(o){return r.apply(this,arguments)}}())}catch(r){if(te(r))return{data:{user:null,session:null},error:r};throw r}})()}resend(t){var r=this;return b(function*(){try{const o=`${r.url}/resend`;if("email"in t){const{email:a,type:i,options:s}=t,{error:l}=yield de(r.fetch,"POST",o,{headers:r.headers,body:{email:a,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in t){const{phone:a,type:i,options:s}=t,{data:l,error:u}=yield de(r.fetch,"POST",o,{headers:r.headers,body:{phone:a,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:u}}throw new zc("You must provide either an email or phone number and a type")}catch(o){if(te(o))return{data:{user:null,session:null},error:o};throw o}})()}getSession(){var t=this;return b(function*(){return yield t.initializePromise,yield t._acquireLock(-1,b(function*(){return t._useSession(function(){var o=b(function*(a){return a});return function(a){return o.apply(this,arguments)}}())}))})()}_acquireLock(t,r){var o=this;return b(function*(){o._debug("#_acquireLock","begin",t);try{if(o.lockAcquired){const a=o.pendingInLock.length?o.pendingInLock[o.pendingInLock.length-1]:Promise.resolve(),i=b(function*(){return yield a,yield r()})();return o.pendingInLock.push(b(function*(){try{yield i}catch{}})()),i}return yield o.lock(`lock:${o.storageKey}`,t,b(function*(){o._debug("#_acquireLock","lock acquired for storage key",o.storageKey);try{o.lockAcquired=!0;const a=r();for(o.pendingInLock.push(b(function*(){try{yield a}catch{}})()),yield a;o.pendingInLock.length;){const i=[...o.pendingInLock];yield Promise.all(i),o.pendingInLock.splice(0,i.length)}return yield a}finally{o._debug("#_acquireLock","lock released for storage key",o.storageKey),o.lockAcquired=!1}}))}finally{o._debug("#_acquireLock","end")}})()}_useSession(t){var r=this;return b(function*(){r._debug("#_useSession","begin");try{const o=yield r.__loadSession();return yield t(o)}finally{r._debug("#_useSession","end")}})()}__loadSession(){var t=this;return b(function*(){t._debug("#__loadSession()","begin"),t.lockAcquired||t._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let r=null;const o=yield Ko(t.storage,t.storageKey);if(t._debug("#getSession()","session from storage",o),null!==o&&(t._isValidSession(o)?r=o:(t._debug("#getSession()","session from storage is not valid"),yield t._removeSession())),!r)return{data:{session:null},error:null};const a=!!r.expires_at&&1e3*r.expires_at-Date.now()<9e4;if(t._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",r.expires_at),!a){if(t.userStorage){const l=yield Ko(t.userStorage,t.storageKey+"-user");r.user=l?.user?l.user:Py()}if(t.storage.isServer&&r.user){let l=t.suppressGetSessionWarning;r=new Proxy(r,{get:(c,d,p)=>(!l&&"user"===d&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,t.suppressGetSessionWarning=!0),Reflect.get(c,d,p))})}return{data:{session:r},error:null}}const{session:i,error:s}=yield t._callRefreshToken(r.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{t._debug("#__loadSession()","end")}})()}getUser(t){var r=this;return b(function*(){return t?yield r._getUser(t):(yield r.initializePromise,yield r._acquireLock(-1,b(function*(){return yield r._getUser()})))})()}_getUser(t){var r=this;return b(function*(){try{return t?yield de(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:t,xform:Zr}):yield r._useSession(function(){var o=b(function*(a){var i,s,l;const{data:u,error:c}=a;if(c)throw c;return null!==(i=u.session)&&void 0!==i&&i.access_token||r.hasCustomAuthorizationHeader?yield de(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:null!==(l=null===(s=u.session)||void 0===s?void 0:s.access_token)&&void 0!==l?l:void 0,xform:Zr}):{data:{user:null},error:new Jr}});return function(a){return o.apply(this,arguments)}}())}catch(o){if(te(o))return function nB(e){return te(e)&&"AuthSessionMissingError"===e.name}(o)&&(yield r._removeSession(),yield Yr(r.storage,`${r.storageKey}-code-verifier`)),{data:{user:null},error:o};throw o}})()}updateUser(t){var r=this;return b(function*(o,a={}){return yield r.initializePromise,yield r._acquireLock(-1,b(function*(){return yield r._updateUser(o,a)}))}).apply(this,arguments)}_updateUser(t){var r=this;return b(function*(o,a={}){try{return yield r._useSession(function(){var i=b(function*(s){const{data:l,error:u}=s;if(u)throw u;if(!l.session)throw new Jr;const c=l.session;let d=null,p=null;"pkce"===r.flowType&&null!=o.email&&([d,p]=yield ui(r.storage,r.storageKey));const{data:m,error:h}=yield de(r.fetch,"PUT",`${r.url}/user`,{headers:r.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},o),{code_challenge:d,code_challenge_method:p}),jwt:c.access_token,xform:Zr});if(h)throw h;return c.user=m.user,yield r._saveSession(c),yield r._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}});return function(s){return i.apply(this,arguments)}}())}catch(i){if(te(i))return{data:{user:null},error:i};throw i}}).apply(this,arguments)}setSession(t){var r=this;return b(function*(){return yield r.initializePromise,yield r._acquireLock(-1,b(function*(){return yield r._setSession(t)}))})()}_setSession(t){var r=this;return b(function*(){try{if(!t.access_token||!t.refresh_token)throw new Jr;const o=Date.now()/1e3;let a=o,i=!0,s=null;const{payload:l}=My(t.access_token);if(l.exp&&(a=l.exp,i=a<=o),i){const{session:u,error:c}=yield r._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};s=u}else{const{data:u,error:c}=yield r._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:a-o,expires_at:a},yield r._saveSession(s),yield r._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(o){if(te(o))return{data:{session:null,user:null},error:o};throw o}})()}refreshSession(t){var r=this;return b(function*(){return yield r.initializePromise,yield r._acquireLock(-1,b(function*(){return yield r._refreshSession(t)}))})()}_refreshSession(t){var r=this;return b(function*(){try{return yield r._useSession(function(){var o=b(function*(a){var i;if(!t){const{data:u,error:c}=a;if(c)throw c;t=null!==(i=u.session)&&void 0!==i?i:void 0}if(!t?.refresh_token)throw new Jr;const{session:s,error:l}=yield r._callRefreshToken(t.refresh_token);return l?{data:{user:null,session:null},error:l}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}});return function(a){return o.apply(this,arguments)}}())}catch(o){if(te(o))return{data:{user:null,session:null},error:o};throw o}})()}_getSessionFromURL(t,r){var o=this;return b(function*(){try{if(!Rn())throw new Gc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Gc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if("pkce"===o.flowType)throw new IE("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===o.flowType)throw new Gc("Not a valid implicit grant flow url.")}if("pkce"===r){if(o._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new IE("No code detected.");const{data:A,error:T}=yield o._exchangeCodeForSession(t.code);if(T)throw T;const ne=new URL(window.location.href);return ne.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ne.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:i,access_token:s,refresh_token:l,expires_in:u,expires_at:c,token_type:d}=t;if(!(s&&u&&l&&d))throw new Gc("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(u);let h=p+m;c&&(h=parseInt(c));const f=h-p;1e3*f<=si&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${m}s`);const y=h-m;p-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,p):p-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,p);const{data:g,error:v}=yield o._getUser(s);if(v)throw v;const M={provider_token:a,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:h,refresh_token:l,token_type:d,user:g.user};return window.location.hash="",o._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:M,redirectType:t.type},error:null}}catch(a){if(te(a))return{data:{session:null,redirectType:null},error:a};throw a}})()}_isImplicitGrantCallback(t){return!(!t.access_token&&!t.error_description)}_isPKCECallback(t){var r=this;return b(function*(){const o=yield Ko(r.storage,`${r.storageKey}-code-verifier`);return!(!t.code||!o)})()}signOut(){var t=this;return b(function*(r={scope:"global"}){return yield t.initializePromise,yield t._acquireLock(-1,b(function*(){return yield t._signOut(r)}))}).apply(this,arguments)}_signOut(){var t=this;return b(function*({scope:r}={scope:"global"}){return yield t._useSession(function(){var o=b(function*(a){var i;const{data:s,error:l}=a;if(l)return{error:l};const u=null===(i=s.session)||void 0===i?void 0:i.access_token;if(u){const{error:c}=yield t.admin.signOut(u,r);if(c&&(!function tB(e){return te(e)&&"AuthApiError"===e.name}(c)||404!==c.status&&401!==c.status&&403!==c.status))return{error:c}}return"others"!==r&&(yield t._removeSession(),yield Yr(t.storage,`${t.storageKey}-code-verifier`)),{error:null}});return function(a){return o.apply(this,arguments)}}())}).apply(this,arguments)}onAuthStateChange(t){var r=this;const o=function dB(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)})}(),a={id:o,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,a),b(function*(){yield r.initializePromise,yield r._acquireLock(-1,b(function*(){r._emitInitialSession(o)}))})(),{data:{subscription:a}}}_emitInitialSession(t){var r=this;return b(function*(){return yield r._useSession(function(){var o=b(function*(a){var i,s;try{const{data:{session:l},error:u}=a;if(u)throw u;yield null===(i=r.stateChangeEmitters.get(t))||void 0===i?void 0:i.callback("INITIAL_SESSION",l),r._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){yield null===(s=r.stateChangeEmitters.get(t))||void 0===s?void 0:s.callback("INITIAL_SESSION",null),r._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}});return function(a){return o.apply(this,arguments)}}())})()}resetPasswordForEmail(t){var r=this;return b(function*(o,a={}){let i=null,s=null;"pkce"===r.flowType&&([i,s]=yield ui(r.storage,r.storageKey,!0));try{return yield de(r.fetch,"POST",`${r.url}/recover`,{body:{email:o,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:r.headers,redirectTo:a.redirectTo})}catch(l){if(te(l))return{data:null,error:l};throw l}}).apply(this,arguments)}getUserIdentities(){var t=this;return b(function*(){var r;try{const{data:o,error:a}=yield t.getUser();if(a)throw a;return{data:{identities:null!==(r=o.user.identities)&&void 0!==r?r:[]},error:null}}catch(o){if(te(o))return{data:null,error:o};throw o}})()}linkIdentity(t){var r=this;return b(function*(){var o;try{const{data:a,error:i}=yield r._useSession(function(){var s=b(function*(l){var u,c,d,p,m;const{data:h,error:f}=l;if(f)throw f;const y=yield r._getUrlForProvider(`${r.url}/user/identities/authorize`,t.provider,{redirectTo:null===(u=t.options)||void 0===u?void 0:u.redirectTo,scopes:null===(c=t.options)||void 0===c?void 0:c.scopes,queryParams:null===(d=t.options)||void 0===d?void 0:d.queryParams,skipBrowserRedirect:!0});return yield de(r.fetch,"GET",y,{headers:r.headers,jwt:null!==(m=null===(p=h.session)||void 0===p?void 0:p.access_token)&&void 0!==m?m:void 0})});return function(l){return s.apply(this,arguments)}}());if(i)throw i;return Rn()&&!(null!==(o=t.options)&&void 0!==o&&o.skipBrowserRedirect)&&window.location.assign(a?.url),{data:{provider:t.provider,url:a?.url},error:null}}catch(a){if(te(a))return{data:{provider:t.provider,url:null},error:a};throw a}})()}unlinkIdentity(t){var r=this;return b(function*(){try{return yield r._useSession(function(){var o=b(function*(a){var i,s;const{data:l,error:u}=a;if(u)throw u;return yield de(r.fetch,"DELETE",`${r.url}/user/identities/${t.identity_id}`,{headers:r.headers,jwt:null!==(s=null===(i=l.session)||void 0===i?void 0:i.access_token)&&void 0!==s?s:void 0})});return function(a){return o.apply(this,arguments)}}())}catch(o){if(te(o))return{data:null,error:o};throw o}})()}_refreshAccessToken(t){var r=this;return b(function*(){const o=`#_refreshAccessToken(${t.substring(0,5)}...)`;r._debug(o,"begin");try{const a=Date.now();return yield function fB(e,n){return new Promise((r,o)=>{b(function*(){for(let a=0;a<1/0;a++)try{const i=yield e(a);if(!n(a,null,i))return void r(i)}catch(i){if(!n(a,i))return void o(i)}})()})}(function(){var i=b(function*(s){return s>0&&(yield function hB(e){return Ay.apply(this,arguments)}(200*Math.pow(2,s-1))),r._debug(o,"refreshing attempt",s),yield de(r.fetch,"POST",`${r.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:r.headers,xform:gr})});return function(s){return i.apply(this,arguments)}}(),(i,s)=>{const l=200*Math.pow(2,i);return s&&Ty(s)&&Date.now()+l-a<si})}catch(a){if(r._debug(o,"error",a),te(a))return{data:{session:null,user:null},error:a};throw a}finally{r._debug(o,"end")}})()}_isValidSession(t){return"object"==typeof t&&null!==t&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,r){var o=this;return b(function*(){const a=yield o._getUrlForProvider(`${o.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return o._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),Rn()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}})()}_recoverAndRefresh(){var t=this;return b(function*(){var r,o;const a="#_recoverAndRefresh()";t._debug(a,"begin");try{const i=yield Ko(t.storage,t.storageKey);if(i&&t.userStorage){let l=yield Ko(t.userStorage,t.storageKey+"-user");!t.storage.isServer&&Object.is(t.storage,t.userStorage)&&!l&&(l={user:i.user},yield li(t.userStorage,t.storageKey+"-user",l)),i.user=null!==(r=l?.user)&&void 0!==r?r:Py()}else if(i&&!i.user&&!i.user){const l=yield Ko(t.storage,t.storageKey+"-user");l&&l?.user?(i.user=l.user,yield Yr(t.storage,t.storageKey+"-user"),yield li(t.storage,t.storageKey,i)):i.user=Py()}if(t._debug(a,"session from storage",i),!t._isValidSession(i))return t._debug(a,"session is not valid"),void(null!==i&&(yield t._removeSession()));const s=1e3*(null!==(o=i.expires_at)&&void 0!==o?o:1/0)-Date.now()<9e4;if(t._debug(a,`session has${s?"":" not"} expired with margin of 90000s`),s){if(t.autoRefreshToken&&i.refresh_token){const{error:l}=yield t._callRefreshToken(i.refresh_token);l&&(console.error(l),Ty(l)||(t._debug(a,"refresh failed with a non-retryable error, removing the session",l),yield t._removeSession()))}}else if(i.user&&!0===i.user.__isUserNotAvailableProxy)try{const{data:l,error:u}=yield t._getUser(i.access_token);!u&&l?.user?(i.user=l.user,yield t._saveSession(i),yield t._notifyAllSubscribers("SIGNED_IN",i)):t._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),t._debug(a,"error getting user data, skipping SIGNED_IN notification",l)}else yield t._notifyAllSubscribers("SIGNED_IN",i)}catch(i){return t._debug(a,"error",i),void console.error(i)}finally{t._debug(a,"end")}})()}_callRefreshToken(t){var r=this;return b(function*(){var o,a;if(!t)throw new Jr;if(r.refreshingDeferred)return r.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;r._debug(i,"begin");try{r.refreshingDeferred=new Kc;const{data:s,error:l}=yield r._refreshAccessToken(t);if(l)throw l;if(!s.session)throw new Jr;yield r._saveSession(s.session),yield r._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const u={session:s.session,error:null};return r.refreshingDeferred.resolve(u),u}catch(s){if(r._debug(i,"error",s),te(s)){const l={session:null,error:s};return Ty(s)||(yield r._removeSession()),null===(o=r.refreshingDeferred)||void 0===o||o.resolve(l),l}throw null===(a=r.refreshingDeferred)||void 0===a||a.reject(s),s}finally{r.refreshingDeferred=null,r._debug(i,"end")}})()}_notifyAllSubscribers(t,r){var o=this;return b(function*(a,i,s=!0){const l=`#_notifyAllSubscribers(${a})`;o._debug(l,"begin",i,`broadcast = ${s}`);try{o.broadcastChannel&&s&&o.broadcastChannel.postMessage({event:a,session:i});const u=[],c=Array.from(o.stateChangeEmitters.values()).map(function(){var d=b(function*(p){try{yield p.callback(a,i)}catch(m){u.push(m)}});return function(p){return d.apply(this,arguments)}}());if(yield Promise.all(c),u.length>0){for(let d=0;d<u.length;d+=1)console.error(u[d]);throw u[0]}}finally{o._debug(l,"end")}}).apply(this,arguments)}_saveSession(t){var r=this;return b(function*(){r._debug("#_saveSession()",t),r.suppressGetSessionWarning=!0;const o=Object.assign({},t);if(r.userStorage){(!o.user||!0!==o.user.__isUserNotAvailableProxy)&&o.user&&(yield li(r.userStorage,r.storageKey+"-user",{user:o.user}));const i=Object.assign({},o);delete i.user;const s=LE(i);yield li(r.storage,r.storageKey,s)}else{const i=LE(o);yield li(r.storage,r.storageKey,i)}})()}_removeSession(){var t=this;return b(function*(){t._debug("#_removeSession()"),yield Yr(t.storage,t.storageKey),yield Yr(t.storage,t.storageKey+"-code-verifier"),yield Yr(t.storage,t.storageKey+"-user"),t.userStorage&&(yield Yr(t.userStorage,t.storageKey+"-user")),yield t._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Rn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){var t=this;return b(function*(){yield t._stopAutoRefresh(),t._debug("#_startAutoRefresh()");const r=setInterval(()=>t._autoRefreshTokenTick(),si);t.autoRefreshTicker=r,r&&"object"==typeof r&&"function"==typeof r.unref?r.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(r),setTimeout(b(function*(){yield t.initializePromise,yield t._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var t=this;return b(function*(){t._debug("#_stopAutoRefresh()");const r=t.autoRefreshTicker;t.autoRefreshTicker=null,r&&clearInterval(r)})()}startAutoRefresh(){var t=this;return b(function*(){t._removeVisibilityChangedCallback(),yield t._startAutoRefresh()})()}stopAutoRefresh(){var t=this;return b(function*(){t._removeVisibilityChangedCallback(),yield t._stopAutoRefresh()})()}_autoRefreshTokenTick(){var t=this;return b(function*(){t._debug("#_autoRefreshTokenTick()","begin");try{yield t._acquireLock(0,b(function*(){try{const r=Date.now();try{return yield t._useSession(function(){var o=b(function*(a){const{data:{session:i}}=a;if(!i||!i.refresh_token||!i.expires_at)return void t._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*i.expires_at-r)/si);t._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&(yield t._callRefreshToken(i.refresh_token))});return function(a){return o.apply(this,arguments)}}())}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{t._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(!(r.isAcquireTimeout||r instanceof $E))throw r;t._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var t=this;return b(function*(){if(t._debug("#_handleVisibilityChange()"),!Rn()||!window?.addEventListener)return t.autoRefreshToken&&t.startAutoRefresh(),!1;try{t.visibilityChangedCallback=b(function*(){return yield t._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",t.visibilityChangedCallback),yield t._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}})()}_onVisibilityChanged(t){var r=this;return b(function*(){const o=`#_onVisibilityChanged(${t})`;r._debug(o,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(r.autoRefreshToken&&r._startAutoRefresh(),t||(yield r.initializePromise,yield r._acquireLock(-1,b(function*(){"visible"===document.visibilityState?yield r._recoverAndRefresh():r._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&r.autoRefreshToken&&r._stopAutoRefresh()})()}_getUrlForProvider(t,r,o){var a=this;return b(function*(){const i=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&i.push(`scopes=${encodeURIComponent(o.scopes)}`),"pkce"===a.flowType){const[s,l]=yield ui(a.storage,a.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(o?.queryParams){const s=new URLSearchParams(o.queryParams);i.push(s.toString())}return o?.skipBrowserRedirect&&i.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${t}?${i.join("&")}`})()}_unenroll(t){var r=this;return b(function*(){try{return yield r._useSession(function(){var o=b(function*(a){var i;const{data:s,error:l}=a;return l?{data:null,error:l}:yield de(r.fetch,"DELETE",`${r.url}/factors/${t.factorId}`,{headers:r.headers,jwt:null===(i=s?.session)||void 0===i?void 0:i.access_token})});return function(a){return o.apply(this,arguments)}}())}catch(o){if(te(o))return{data:null,error:o};throw o}})()}_enroll(t){var r=this;return b(function*(){try{return yield r._useSession(function(){var o=b(function*(a){var i,s;const{data:l,error:u}=a;if(u)return{data:null,error:u};const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},"phone"===t.factorType?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:p}=yield de(r.fetch,"POST",`${r.url}/factors`,{body:c,headers:r.headers,jwt:null===(i=l?.session)||void 0===i?void 0:i.access_token});return p?{data:null,error:p}:("totp"===t.factorType&&!(null===(s=d?.totp)||void 0===s)&&s.qr_code&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})});return function(a){return o.apply(this,arguments)}}())}catch(o){if(te(o))return{data:null,error:o};throw o}})()}_verify(t){var r=this;return b(function*(){return r._acquireLock(-1,b(function*(){try{return yield r._useSession(function(){var o=b(function*(a){var i;const{data:s,error:l}=a;if(l)return{data:null,error:l};const{data:u,error:c}=yield de(r.fetch,"POST",`${r.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:r.headers,jwt:null===(i=s?.session)||void 0===i?void 0:i.access_token});return c?{data:null,error:c}:(yield r._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),yield r._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:c})});return function(a){return o.apply(this,arguments)}}())}catch(o){if(te(o))return{data:null,error:o};throw o}}))})()}_challenge(t){var r=this;return b(function*(){return r._acquireLock(-1,b(function*(){try{return yield r._useSession(function(){var o=b(function*(a){var i;const{data:s,error:l}=a;return l?{data:null,error:l}:yield de(r.fetch,"POST",`${r.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:r.headers,jwt:null===(i=s?.session)||void 0===i?void 0:i.access_token})});return function(a){return o.apply(this,arguments)}}())}catch(o){if(te(o))return{data:null,error:o};throw o}}))})()}_challengeAndVerify(t){var r=this;return b(function*(){const{data:o,error:a}=yield r._challenge({factorId:t.factorId});return a?{data:null,error:a}:yield r._verify({factorId:t.factorId,challengeId:o.id,code:t.code})})()}_listFactors(){var t=this;return b(function*(){const{data:{user:r},error:o}=yield t.getUser();if(o)return{data:null,error:o};const a=r?.factors||[],i=a.filter(l=>"totp"===l.factor_type&&"verified"===l.status),s=a.filter(l=>"phone"===l.factor_type&&"verified"===l.status);return{data:{all:a,totp:i,phone:s},error:null}})()}_getAuthenticatorAssuranceLevel(){var t=this;return b(function*(){return t._acquireLock(-1,b(function*(){return yield t._useSession(function(){var r=b(function*(o){var a,i;const{data:{session:s},error:l}=o;if(l)return{data:null,error:l};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=My(s.access_token);let c=null;u.aal&&(c=u.aal);let d=c;return(null!==(i=null===(a=s.user.factors)||void 0===a?void 0:a.filter(h=>"verified"===h.status))&&void 0!==i?i:[]).length>0&&(d="aal2"),{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:u.amr||[]},error:null}});return function(o){return r.apply(this,arguments)}}())}))})()}fetchJwk(t){var r=this;return b(function*(o,a={keys:[]}){let i=a.keys.find(c=>c.kid===o);if(i)return i;const s=Date.now();if(i=r.jwks.keys.find(c=>c.kid===o),i&&r.jwks_cached_at+6e5>s)return i;const{data:l,error:u}=yield de(r.fetch,"GET",`${r.url}/.well-known/jwks.json`,{headers:r.headers});if(u)throw u;return l.keys&&0!==l.keys.length&&(r.jwks=l,r.jwks_cached_at=s,i=l.keys.find(c=>c.kid===o),i)?i:null}).apply(this,arguments)}getClaims(t){var r=this;return b(function*(o,a={}){try{let i=o;if(!i){const{data:y,error:g}=yield r.getSession();if(g||!y.session)return{data:null,error:g};i=y.session.access_token}const{header:s,payload:l,signature:u,raw:{header:c,payload:d}}=My(i);a?.allowExpired||function kB(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(l.exp);const p=s.alg&&!s.alg.startsWith("HS")&&s.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield r.fetchJwk(s.kid,a?.keys?{keys:a.keys}:a?.jwks):null;if(!p){const{error:y}=yield r.getUser(i);if(y)throw y;return{data:{claims:l,header:s,signature:u},error:null}}const m=function CB(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),h=yield crypto.subtle.importKey("jwk",p,m,!0,["verify"]);if(!(yield crypto.subtle.verify(m,h,u,function lB(e){const n=[];return function OE(e,n){for(let t=0;t<e.length;t+=1){let r=e.charCodeAt(t);if(r>55295&&r<=56319){const o=1024*(r-55296)&65535;r=65536+(e.charCodeAt(t+1)-56320&65535|o),t+=1}aB(r,n)}}(e,t=>n.push(t)),new Uint8Array(n)}(`${c}.${d}`))))throw new Iy("Invalid JWT signature");return{data:{claims:l,header:s,signature:u},error:null}}catch(i){if(te(i))return{data:null,error:i};throw i}}).apply(this,arguments)}}return e.nextInstanceID=0,e})();class HB extends $B{constructor(n){super(n)}}(function qB(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(null==e)return!1;const n=e.match(/^v(\d+)\./);return!!n&&parseInt(n[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const zE=globalThis,Qs=zE.__supabaseClient??new class zB{constructor(n,t,r){var o,a,i;if(this.supabaseUrl=n,this.supabaseKey=t,!n)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const s=function W9(e){return e.endsWith("/")?e:e+"/"}(n),l=new URL(s);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function K9(e,n){var t,r;const{db:o,auth:a,realtime:i,global:s}=e,{db:l,auth:u,realtime:c,global:d}=n,p={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},c),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},null!==(t=d?.headers)&&void 0!==t?t:{}),null!==(r=s?.headers)&&void 0!==r?r:{})}),accessToken:()=>function(e,n,t,r){return new(t||(t=Promise))(function(a,i){function s(c){try{u(r.next(c))}catch(d){i(d)}}function l(c){try{u(r.throw(c))}catch(d){i(d)}}function u(c){c.done?a(c.value):function o(a){return a instanceof t?a:new t(function(i){i(a)})}(c.value).then(s,l)}u((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}(r??{},{db:B9,realtime:$9,auth:Object.assign(Object.assign({},V9),{storageKey:u}),global:j9});this.storageKey=null!==(o=d.auth.storageKey)&&void 0!==o?o:"",this.headers=null!==(a=d.global.headers)&&void 0!==a?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=d.auth)&&void 0!==i?i:{},this.headers,d.global.fetch),this.fetch=G9(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new fE(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new F9(this.storageUrl.href,this.headers,this.fetch,r?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Xj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,t={},r={}){return this.rest.rpc(n,t,r)}channel(n,t={config:{}}){return this.realtime.channel(n,t)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,t;return function(e,n,t,r){return new(t||(t=Promise))(function(a,i){function s(c){try{u(r.next(c))}catch(d){i(d)}}function l(c){try{u(r.throw(c))}catch(d){i(d)}}function u(c){c.done?a(c.value):function o(a){return a instanceof t?a:new t(function(i){i(a)})}(c.value).then(s,l)}u((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:t,detectSessionInUrl:r,storage:o,storageKey:a,flowType:i,lock:s,debug:l},u,c){return new HB({url:this.authUrl.href,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),u),storageKey:a,autoRefreshToken:n,persistSession:t,detectSessionInUrl:r,storage:o,flowType:i,lock:s,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(n){return new E9(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(n,t,r){"TOKEN_REFRESHED"!==n&&"SIGNED_IN"!==n||this.changedAccessToken===r?"SIGNED_OUT"===n&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}("https://ymlekirbwjanuxrclsgf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InltbGVraXJid2phbnV4cmNsc2dmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwNjk4OTUsImV4cCI6MjA3MTY0NTg5NX0._a0-aMgphg5_bFCzy7oHhPRkP9Q54dRWGrZN4rzVnHM",{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}});zE.__supabaseClient=Qs;let QB=(()=>{class e{list(){return b(function*(){const{data:t,error:r}=yield Qs.from("character").select("id,name,type,level").order("id",{ascending:!0});if(r)throw r;return t??[]})()}updateById(t,r){return b(function*(){null!=r.level&&(r.level=Math.max(1,Math.min(8,Math.floor(+r.level))));const{error:o}=yield Qs.from("character").update(r).eq("id",t);if(o)throw o})()}insert(t){return b(function*(){const r={...t,level:Math.max(1,Math.min(8,Math.floor(+t.level)))},{error:o}=yield Qs.from("character").insert(r);if(o)throw o})()}remove(t){return b(function*(){const{error:r}=yield Qs.from("character").delete().eq("id",t);if(r)throw r})()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),rn=(()=>{class e{dataLoader;creatureFactory;logService;notificationService;db;injector;defaultLevel=1;isGroupSelected=!1;selectedCreature=null;addMonsterToggled=!1;creaturesSubject=new En([]);creatures$=this.creaturesSubject.asObservable();graveyardSubject=new En([]);graveyard$=this.graveyardSubject.asObservable();roundNumberSubject=new En(1);roundNumber$=this.roundNumberSubject.asObservable();defaultLevelSubject=new En(1);defaultLevel$=this.defaultLevelSubject.asObservable();elementsSubject=new En([{type:nn.Fire,state:Qe.None},{type:nn.Ice,state:Qe.None},{type:nn.Earth,state:Qe.None},{type:nn.Air,state:Qe.None},{type:nn.Light,state:Qe.None},{type:nn.Dark,state:Qe.None}]);elements$=this.elementsSubject.asObservable();constructor(t,r,o,a,i,s){this.dataLoader=t,this.creatureFactory=r,this.logService=o,this.notificationService=a,this.db=i,this.injector=s,this.addDefaultCharacters(),this.logService.init(this.creatures$)}getRoundNumber(){return this.roundNumberSubject.getValue()}setRoundNumber(t){this.roundNumberSubject.next(t)}getElements(){return this.elementsSubject.getValue()}setElements(t){this.elementsSubject.next([...t])}setElementState(t,r){const o=this.getElements().map(a=>a.type===t?{...a,state:r}:a);this.setElements(o)}getCreatures(){return this.creaturesSubject.value}setCreatures(t){this.creaturesSubject.next(t)}addCreature(t){this.creaturesSubject.next([...this.creaturesSubject.value,this.creatureFactory.createCreature(t)])}addCreatures(t){this.creaturesSubject.next([...this.creaturesSubject.value,...this.creatureFactory.createCreatureList(t)])}removeCreature(t){this.creaturesSubject.next(this.creaturesSubject.value.filter(r=>r.id!==t))}getGraveyard(){return this.graveyardSubject.value}setGraveyard(t){this.graveyardSubject.next(t)}addGraveyard(t){this.graveyardSubject.next([...this.graveyardSubject.value,JSON.parse(JSON.stringify(t))])}removeGraveyard(t){this.graveyardSubject.next(this.graveyardSubject.value.filter(r=>r.id!==t))}updateCreatureBaseStat(t,r,o,a){const i=this.getCreatures(),s=this.findCreature(t);"name"===r&&(o=this.creatureFactory.createCreatureName(s)),a?i.filter(u=>u.type===s.type).forEach(u=>{this.updateCreatureBaseStat(u.id,r,o,!1)}):s[r]=o,this.creaturesSubject.next([...i])}toggleCreatureConditions(t,r){const o=this.findCreature(t);if(!o)return;const a=o.conditions||[];o.conditions=a.indexOf(r)>-1?a.filter(s=>s!==r):[...a,r],this.creaturesSubject.next([...this.getCreatures()])}killCreature(t){const r=this.findCreature(t);if(!r)return;const o=this.creaturesSubject.value.filter(i=>i.id!==t);this.creaturesSubject.next(o);const a=JSON.parse(JSON.stringify(r));this.addGraveyard(a),this.notificationService.emitInfoMessage(`${r.name} has been killed!`)}reviveCreature(t,r){const o=this.getGraveyard?this.getGraveyard():this.graveyardSubject?.value??[],a=o.findIndex(c=>c.id===t);if(-1===a)return;const i={...o[a]},s=[...o];s.splice(a,1);const l=Number.isFinite(r)?Number(r):void 0;i.hp=Math.max(1,Number(l??i.hp??1)),i.aggressive=!0;const u=[...this.creaturesSubject.value,i];this.creaturesSubject.next(u),this.graveyardSubject&&this.graveyardSubject.next(s),this.notificationService?.emitInfoMessage?.(`${i.name} has been revived!`)}findCreature(t){const o=this.getCreatures().find(a=>a.id===t);if(!o)throw Error("Creature not found");return o}addDefaultCharacters(){var t=this;return b(function*(){try{const r=yield t.db.list(),o=r.map(l=>Number(l.level)||1),a=o.reduce((l,u)=>l+u,0)/o.length,i=Math.max(1,Math.round(a/2));t.defaultLevelSubject.next(i);const s=r.map(({name:l,type:u,level:c})=>{const d=t.dataLoader.getData().characters.find(f=>f.name===u),p=d?.stats?.find(f=>f.level===Number(c)),m=Number(p?.health)||10;return t.creatureFactory.createCreature({name:l,type:u,hp:m,traits:d?.traits??[],level:Number(c)||1,aggressive:!1})});t.addCreatures(s)}catch(r){console.error("addDefaultCharacters failed",r)}})()}static \u0275fac=function(r){return new(r||e)(H(Gs),H(my),H(dE),H(Ur),H(QB),H(Yt))};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Qc=(()=>{class e{appContext;CHARACTERS="characters";GRAVEYARD="graveyard";SESSION_ID="sessionId";constructor(t){this.appContext=t}load(t){const r=localStorage.getItem(t);return null!==r?JSON.parse(r):null}loadCreatures(){return this.load(this.CHARACTERS)||this.appContext.getCreatures()}loadGraveyard(){return this.load(this.GRAVEYARD)||this.appContext.getGraveyard()}loadSessionId(){const t=this.load(this.SESSION_ID);return null!==t?t:0}set(t,r){localStorage.setItem(t,r)}setSessionId(t){this.set(this.SESSION_ID,t.toString())}clear(t){localStorage.removeItem(t)}loadingEventSubject=new ot;loadingEvent$=this.loadingEventSubject.asObservable();saveGame(){this.loadingEventSubject.emit(!0);const t=JSON.stringify(this.appContext.getCreatures()),r=JSON.stringify(this.appContext.getGraveyard);this.set(this.CHARACTERS,t),this.set(this.GRAVEYARD,r),this.loadingEventSubject.emit(!1)}resetGame(){localStorage.clear(),location.reload()}loadFile(t,r){var o=this;return b(function*(){if(!t)throw new Error("Enter a valid scenario number");const a=String(t).padStart(3,"0"),s=`${(document.querySelector("base")?.getAttribute("href")||"/").replace(/\/$/,"")}/scenarios/${a}.json`;try{const l=yield fetch(s);if(!l.ok)throw new Error(`Failed to load file: ${l.status} ${l.statusText}`);const u=yield l.json();return o.processScenarioData(u,r)}catch(l){throw console.error("Error loading file:",l),new Error(`Error loading scenario ${t}. Check the file path and make sure it exists.`)}})()}processScenarioData(t,r=1){return t.rooms&&t.rooms[0]&&t.rooms[0].monster?t.rooms[0].monster.map(o=>({type:o.name,level:r,isElite:"elite"===o?.type||"elite"===o?.player4,aggressive:!0})):[]}static \u0275fac=function(r){return new(r||e)(H(rn))};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var pi=function(e){return e.Host="host",e.Client="client",e}(pi||{}),vr=function(e){return e.JoinSession="join-session",e.ElementsUpdate="elements-update",e.RoundUpdate="round-update",e.GraveyardUpdate="graveyard-update",e.CharactersUpdate="characters-update",e}(vr||{});let GE=(()=>{class e{appContext;notificationService;localStorageService;ws=null;isConnected=!1;reconnectAttempts=0;maxReconnectAttempts=5;reconnecting=!1;role;updatingFromServer=!1;clientId=null;clientIdSubject=new En(null);sessionId=0;sessionIdSubject=new En(null);clientId$=this.clientIdSubject.asObservable();sessionId$=this.sessionIdSubject.asObservable();constructor(t,r,o){this.appContext=t,this.notificationService=r,this.localStorageService=o,this.subscribeAndBroadcast(this.appContext.roundNumber$,vr.RoundUpdate,a=>({roundNumber:a})),this.subscribeAndBroadcast(this.appContext.creatures$,vr.CharactersUpdate,a=>({characters:a})),this.subscribeAndBroadcast(this.appContext.elements$,vr.ElementsUpdate,a=>({elements:a}))}subscribeAndBroadcast(t,r,o){t.subscribe(a=>{this.updatingFromServer||this.sendUpdateMessage(r,{...o(a),originatingClientId:this.clientId})})}connect(t,r){this.role=t,null!=r&&(this.sessionId=r,this.localStorageService.setSessionId(r)),null!=r&&(this.sessionId=r,this.localStorageService.setSessionId(r)),this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.close(1e3,"Switching session or reconnecting"),this.ws=new WebSocket(window.location.hostname.includes("github.io")?"wss://frosthaven-assistant.onrender.com":"ws://localhost:8080"),this.ws.onopen=()=>{const o=this.getSessionId(),a={type:vr.JoinSession,...null!=o&&{sessionId:o},characters:this.role===pi.Host?this.appContext.getCreatures():[],roundNumber:this.role===pi.Host?this.appContext.getRoundNumber():1,elementStates:this.role===pi.Host?this.appContext.getElements():[]};this.ws.send(JSON.stringify(a)),this.isConnected=!0,this.reconnectAttempts=0},this.ws.onerror=o=>{this.isConnected=!1,this.notificationService.emitErrorMessage("Unable to connect to the server. Retrying..."),this.tryReconnect()},this.ws.onclose=()=>{this.isConnected&&this.notificationService.emitInfoMessage("The connection was closed. Trying to reconnect."),this.isConnected=!1,this.tryReconnect()},this.ws.onmessage=o=>{const a=JSON.parse(o.data);if("session-joined"===a.type)return this.handleSessionJoined(a);if(a.originatingClientId!==this.clientId){switch(this.updatingFromServer=!0,a.type){case vr.CharactersUpdate:this.appContext.setCreatures(a.characters);break;case vr.GraveyardUpdate:this.appContext.setGraveyard(a.graveyard);break;case vr.RoundUpdate:this.appContext.setRoundNumber(a.roundNumber);break;case vr.ElementsUpdate:this.appContext.setElements(a.elements);break;default:this.notificationService.emitErrorMessage(`Unhandled message type: ${a.type}`)}this.updatingFromServer=!1}}}tryReconnect(){if(!this.reconnecting&&this.getSessionId())if(this.reconnectAttempts<this.maxReconnectAttempts){this.reconnecting=!0,this.reconnectAttempts++;const t=Math.min(500*Math.pow(2,this.reconnectAttempts-1),3e4);setTimeout(()=>{this.connect(this.role,this.getSessionId()),this.reconnecting=!1},t)}else this.notificationService.emitErrorMessage("Failed to reconnect after multiple attempts.")}sendUpdateMessage(t,r){this.ws?.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:t,...r,originatingClientId:this.clientId}))}handleSessionJoined(t){this.clientId=t.clientId,this.clientIdSubject.next(this.clientId),this.sessionId=t.sessionId,this.localStorageService.setSessionId(t.sessionId),this.requestServerState(this.getSessionId()),this.notificationService.emitInfoMessage(`Connected to session ${t.sessionId}.`)}requestServerState(t){this.sendUpdateMessage("request-latest-state",{sessionId:t})}getSessionId(){return this.sessionId||this.localStorageService.loadSessionId()}static \u0275fac=function(r){return new(r||e)(H(rn),H(Ur),H(Qc))};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function JB(e,n){if(1&e&&(w(0,"span"),L(1),E()),2&e){const t=pe();I(),Wu("client ",t.clientId," connected to session: ",t.sessionId)}}let YB=(()=>{class e{notificationService;storageService;appContext;dataLoader;creatureFactory;webSocketService;scenarioLevel=1;scenarioId;sectionId;sessionId=1;clientId=null;constructor(t,r,o,a,i,s){this.notificationService=t,this.storageService=r,this.appContext=o,this.dataLoader=a,this.creatureFactory=i,this.webSocketService=s,this.appContext.defaultLevel$.subscribe(l=>{this.scenarioLevel=l}),this.webSocketService.clientId$.subscribe(l=>{this.clientId=l}),this.webSocketService.sessionId$.subscribe(l=>{null!=l&&(this.sessionId=l)})}startNewGame(){this.storageService.resetGame(),this.notificationService.emitInfoMessage("Started a new game")}loadScenario(){var t=this;return b(function*(){const r=yield t.storageService.loadFile(t.scenarioId,t.scenarioLevel).catch(o=>t.notificationService.emitErrorMessage(`Failed to load scenario: ${o.message}`));r&&(r.forEach(o=>{const a={level:t.scenarioLevel,aggressive:!0,...o};t.appContext.addCreature(t.creatureFactory.createCreature(a))}),t.notificationService.emitInfoMessage(`Loaded scenario ${t.scenarioId} at level ${t.scenarioLevel}.`))})()}loadSection(){const t=this.sectionId.toString().replace("#","."),r=this.dataLoader.getData().sections.find(a=>a.index===t);r&&r.rooms&&0!==r.rooms.length&&r.rooms[0].monster?(r.rooms[0].monster.forEach(a=>{this.appContext.addCreature(this.creatureFactory.createCreature({type:a.name,level:this.scenarioLevel,aggressive:!0}))}),this.notificationService.emitInfoMessage(`Loaded section ${t} at level ${this.scenarioLevel}.`)):this.notificationService.emitErrorMessage(`Section ${this.sectionId} does not exist or has no monsters.`)}startSession(){this.webSocketService.connect(pi.Host)}joinSession(){this.webSocketService.connect(pi.Client,this.sessionId)}static \u0275fac=function(r){return new(r||e)(x(Ur),x(Qc),x(rn),x(Gs),x(my),x(GE))};static \u0275cmp=Bt({type:e,selectors:[["app-setup"]],decls:47,vars:5,consts:[[1,"setup-container","row","content"],[1,"section"],[1,"label-group"],["for","scenario-level"],["type","tel","placeholder","#",3,"ngModelChange","ngModel"],[1,"action-button",3,"click"],["for","scenario-id"],["type","tel","placeholder","1",3,"ngModelChange","ngModel"],[1,"technical-info"],["href","https://grey-astronaut-764049.postman.co/collection/1419604-3345b5ec-84d0-4b3c-9b89-30bdc88ac94a?source=rip_html&active-environment=1419604-50e897d1-5175-44ef-a5fc-6f70370eae60","target","_blank","title","Postman",1,"button-link"],["href","https://supabase.com/dashboard/project/ymlekirbwjanuxrclsgf/editor/17421?schema=public","target","_blank","title","Postman",1,"button-link"],["href","https://docs.google.com/spreadsheets/d/e/2PACX-1vQ3mIO6M9EcAcvLxGvf368ZtNINTWFTPUY3w8immfofr0ViH4KllF0lqUv_vTZzIdb74hHYOvI_Hwkq/pubhtml","target","_blank","title","Unlocked craftables",1,"button-link"],["href","https://www.gloomhavencards.com/fh/items?fbclid=IwY2xjawL8IHRleHRuA2FlbQIxMQABHkKcdLIcbofW8IUeOP6v5TWQoy0Zy87jam0ER3Wlj5h5ix4GIPpDYmtn_MYa_aem_uNM6fXKf3vBZx724Hs_wlw","target","_blank","title","Unlocked craftables",1,"button-link"],["href","https://docs.google.com/spreadsheets/d/1LXfBFjL74gE959ogz9Kj6Wbo_ieL4kZBT3jss13WZto/edit?gid=800894000#gid=800894000","target","_blank","title","Unlocked craftables",1,"button-link"],[4,"ngIf"]],template:function(r,o){1&r&&(w(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),L(4,"Level"),E(),w(5,"input",4),gn("ngModelChange",function(i){return In(o.scenarioLevel,i)||(o.scenarioLevel=i),i}),E()(),w(6,"button",5),J("click",function(){return o.startNewGame()}),L(7,"New"),E()(),w(8,"div",1)(9,"div",2)(10,"label",6),L(11,"Mission"),E(),w(12,"input",4),gn("ngModelChange",function(i){return In(o.scenarioId,i)||(o.scenarioId=i),i}),E()(),w(13,"button",5),J("click",function(){return o.loadScenario()}),L(14,"Load"),E()(),w(15,"div",1)(16,"div",2)(17,"label",6),L(18,"Room"),E(),w(19,"input",4),gn("ngModelChange",function(i){return In(o.sectionId,i)||(o.sectionId=i),i}),E()(),w(20,"button",5),J("click",function(){return o.loadSection()}),L(21,"Load"),E()(),w(22,"div",1)(23,"button",5),J("click",function(){return o.appContext.addMonsterToggled=!o.appContext.addMonsterToggled}),L(24," + Monster"),E()(),w(25,"div",1)(26,"button",5),J("click",function(){return o.startSession()}),L(27,"Host"),E()(),w(28,"div",1)(29,"div",2)(30,"label",6),L(31,"ID"),E(),w(32,"input",7),gn("ngModelChange",function(i){return In(o.sessionId,i)||(o.sessionId=i),i}),E()(),w(33,"button",5),J("click",function(){return o.joinSession()}),L(34,"Join"),E()(),w(35,"div",8)(36,"a",9),L(37,"Run Postman "),E(),w(38,"a",10),L(39,"Open DB "),E(),w(40,"a",11),L(41," View Unlocked Craftables "),E(),w(42,"a",12),L(43," View All Items "),E(),w(44,"a",13),L(45," View Crafting Calculator "),E(),Ie(46,JB,2,2,"span",14),E()()),2&r&&(I(5),yn("ngModel",o.scenarioLevel),I(7),yn("ngModel",o.scenarioId),I(7),yn("ngModel",o.sectionId),I(13),yn("ngModel",o.sessionId),I(14),V("ngIf",o.clientId))},dependencies:[tn,fr,Go,ei,Ec,Hs,oi],styles:[".setup-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:center;background-color:var(--content-background-left);padding:10px 0 10px 5px}.setup-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-left:1rem;border-left:5px solid;gap:.5rem;flex:1 1 0px}.setup-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .label-group[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.setup-container[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]   .label-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:0;font-size:20px}.setup-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none}.technical-info[_ngcontent-%COMP%]{position:absolute;bottom:-10em;left:0;width:100%;text-align:center;padding:8px;font-size:.7em;color:var(--font-color)}@media (max-width: 768px){.setup-container[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}"]})}return e})();function qE(e){return Vn((n,t)=>{Gr(e).subscribe(Sn(t,()=>t.complete(),_d)),!t.closed&&n.subscribe(t)})}const ZB=(e,n,t)=>[e,n,t];function XB(e,n){if(1&e&&(w(0,"div",8),L(1),E()),2&e){const t=pe();I(),zt(" ",t.creature.type," ")}}function eV(e,n){if(1&e&&(w(0,"div",17)(1,"div",18),L(2),E()()),2&e){const t=pe(2);I(2),zt(" ",t.creature.armor+t.creature.roundArmor," ")}}function tV(e,n){if(1&e&&(w(0,"div",17)(1,"div",19),L(2),E()()),2&e){const t=pe(2);I(2),zt(" ",t.creature.retaliate+t.creature.roundRetaliate," ")}}function nV(e,n){1&e&&fe(0,"div",22),2&e&&Gu(n.$implicit.value)}function rV(e,n){if(1&e&&(w(0,"div",20),Ie(1,nV,1,2,"div",21),E()),2&e){const t=pe(2);I(),V("ngForOf",t.creature.actions)}}function oV(e,n){1&e&&(w(0,"div",17),fe(1,"div",23),E())}function aV(e,n){if(1&e&&(w(0,"div",9)(1,"div",10)(2,"div",11),fe(3,"div",12),w(4,"span",13),L(5),E()(),Ie(6,eV,3,1,"div",14)(7,tV,3,1,"div",14)(8,rV,2,1,"div",15),E(),w(9,"div",10)(10,"div",11),fe(11,"div",16),w(12,"span",13),L(13),E()(),Ie(14,oV,2,0,"div",14),E()()),2&e){const t=pe();I(5),fn(t.creature.attack),I(),V("ngIf",(t.creature.armor||t.creature.roundArmor)&&t.creature.armor+t.creature.roundArmor>0),I(),V("ngIf",(t.creature.retaliate||t.creature.roundRetaliate)&&t.creature.retaliate+t.creature.roundRetaliate>0),I(),V("ngIf",t.creature.aggressive),I(5),fn(t.creature.movement),I(),V("ngIf",t.creature.flying)}}let iV=(()=>{class e{appContext;creature;constructor(t){this.appContext=t}getCreaturePic(t){return t.aggressive?t.boss?"./images/bb/daemon-skull.svg":`./images/monster/thumbnail/fh-${t?.type}.png`:`./images/character/thumbnail/fh-${t?.type}.png`}onImgError(t){t.target.src="./images/bb/daemon-skull.svg"}openConditionModal(){this.appContext.selectedCreature=this.creature,this.appContext.isGroupSelected=!0}static \u0275fac=function(r){return new(r||e)(x(rn))};static \u0275cmp=Bt({type:e,selectors:[["app-creature-group-header"]],inputs:{creature:"creature"},decls:8,vars:9,consts:[[1,"creature-details",3,"ngClass"],[1,"base-stat","row"],[1,"creature-initiative"],["type","tel","maxlength","2",1,"stat-input",3,"blur","value"],["class","name",4,"ngIf"],[1,"info","row"],[1,"profile",3,"error","click","src"],["class","group-stats",4,"ngIf"],[1,"name"],[1,"group-stats"],[1,"stats"],[1,"base-stat","bordered"],[1,"icon","attack"],[1,"stat-value"],["class","base-stat",4,"ngIf"],["class","traits",4,"ngIf"],[1,"icon","move"],[1,"base-stat"],[1,"icon","shield"],[1,"icon","retaliate"],[1,"traits"],["class","icon",3,"class",4,"ngFor","ngForOf"],[1,"icon"],[1,"icon","flying"]],template:function(r,o){1&r&&(w(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),J("blur",function(i){return o.appContext.updateCreatureBaseStat(o.creature.id,"initiative",+i.target.value,!0)}),E()(),Ie(4,XB,2,1,"div",4),E(),w(5,"div",5)(6,"img",6),J("error",function(i){return o.onImgError(i)})("click",function(){return o.openConditionModal()}),E(),Ie(7,aV,15,6,"div",7),E()()),2&r&&(V("ngClass",Uk(5,ZB,o.creature.type,o.creature.boss?"boss":o.creature.isElite?"elite":"non-elite",o.creature.aggressive?"":"character")),I(3),V("value",o.creature.initiative),I(),V("ngIf",o.creature.aggressive),I(2),V("src",o.getCreaturePic(o.creature),op),I(),V("ngIf",o.creature.aggressive))},dependencies:[tn,Xa,Gn,fr,oi,Go],styles:[".creature-details[_ngcontent-%COMP%]{flex-direction:column;justify-content:space-between;align-items:center;padding:0 10px 10px;display:flex;width:calc(100% - 20px);min-height:135px}.creature-details.elite[_ngcontent-%COMP%]{background:var(--elite-color)}.creature-details.non-elite[_ngcontent-%COMP%]{background:var(--nonelite-color)}.creature-details.boss[_ngcontent-%COMP%]{background:var(--boss-color)}.creature-details.character.coral[_ngcontent-%COMP%]{background-color:var(--coral-color)}.creature-details.character.fist[_ngcontent-%COMP%]{background-color:var(--fist-color)}.creature-details.character.blinkblade[_ngcontent-%COMP%]{background-color:var(--blinkblade-color)}.creature-details.character.meteor[_ngcontent-%COMP%]{background-color:var(--meteor-color)}.creature-details.character[_ngcontent-%COMP%]{background-color:var(--character-bg, var(--background-secondary))}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;justify-content:center;align-items:center}.right-info[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:10px}.base-stat[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.base-stat[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:none;color:var(--font-color);border:none}img.profile[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%;box-shadow:0 0 5px 2px}.base-info[_ngcontent-%COMP%], .group-stats[_ngcontent-%COMP%]{display:flex}.base-info[_ngcontent-%COMP%]   .traits[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .group-stats[_ngcontent-%COMP%]   .traits[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:30px;height:40px}.bordered[_ngcontent-%COMP%]{border-right:1px solid var(--secondary-color);padding-right:10px}.group-stats[_ngcontent-%COMP%]{flex-direction:column;flex-shrink:2;margin-left:20px}.group-stats[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{justify-content:flex-start;display:flex;margin-top:5px;gap:.5rem;flex-wrap:nowrap}.group-stats[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .base-stat[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.5rem}.group-stats[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .base-stat[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:30px;height:30px}.group-stats[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .base-stat[_ngcontent-%COMP%]   .icon.shield[_ngcontent-%COMP%], .group-stats[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .base-stat[_ngcontent-%COMP%]   .icon.retaliate[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.group-stats[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .base-stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{min-width:12px}.group-stats[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px}"]})}return e})();function sV(e,n){if(1&e&&(w(0,"div",4)(1,"div",5),L(2),fe(3,"div",6),E(),w(4,"div",7),L(5),fe(6,"div",8),E()()),2&e){const t=pe();I(2),zt(" ",t.creature.armor+t.creature.roundArmor," "),I(3),zt(" ",t.creature.retaliate+t.creature.roundRetaliate," ")}}function lV(e,n){if(1&e){const t=Xt();w(0,"div",9),J("click",function(){const o=mt(t).$implicit;return pt(pe().toggleCondition(o))}),fe(1,"div",10),E()}if(2&e){const t=n.$implicit,r=pe();V("ngClass",t),I(),Gu(t),V("ngClass",r.isActive(t)?"active":"")}}let WE=(()=>{class e{creature;conditions;shouldShowBuffs;activeConditions=[];conditionToggled=new ot;constructor(){}ngOnInit(){this.creature?.conditions?.forEach(t=>{this.activeConditions.push(t)})}toggleCondition(t){this.creature&&(this.activeConditions.includes(t)?this.removeCondition(t):this.activeConditions.push(t),this.conditionToggled.emit(t))}isActive(t){return this.activeConditions.includes(t)}removeCondition(t){const r=this.activeConditions.findIndex(o=>o===t);-1!==r&&this.activeConditions.splice(r,1)}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Bt({type:e,selectors:[["app-conditions"]],inputs:{creature:"creature",conditions:"conditions",shouldShowBuffs:"shouldShowBuffs"},outputs:{conditionToggled:"conditionToggled"},decls:4,vars:2,consts:[[1,"container"],["class","buffs",4,"ngIf"],[1,"conditions"],["class","condition-element",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"buffs"],[1,"armor","stat"],[1,"icon","shield"],[1,"retaliate","stat"],[1,"icon","retaliate"],[1,"condition-element",3,"click","ngClass"],[1,"icon",3,"ngClass"]],template:function(r,o){1&r&&(w(0,"div",0),Ie(1,sV,7,2,"div",1),w(2,"div",2),Ie(3,lV,2,4,"div",3),E()()),2&r&&(I(),V("ngIf",o.shouldShowBuffs),I(2),V("ngForOf",o.conditions))},dependencies:[tn,Xa,Gn,fr],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;height:100%}.container[_ngcontent-%COMP%]   .conditions[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .buffs[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center}.container[_ngcontent-%COMP%]   .conditions[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .buffs[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline}.container[_ngcontent-%COMP%]   .conditions[_ngcontent-%COMP%]   .condition-element[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .buffs[_ngcontent-%COMP%]   .condition-element[_ngcontent-%COMP%]{cursor:pointer;margin:5px}.container[_ngcontent-%COMP%]   .conditions[_ngcontent-%COMP%]   .condition-element[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:not(.active), .container[_ngcontent-%COMP%]   .buffs[_ngcontent-%COMP%]   .condition-element[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:not(.active){opacity:.5;filter:brightness(50%)}"]})}return e})();const uV=(e,n)=>[e,n];function cV(e,n){if(1&e){const t=Xt();w(0,"div",5)(1,"input",6),J("blur",function(o){mt(t);const a=pe();return pt(a.updateStandee(a.creature.id,a.creature.type,+o.target.value))}),E(),w(2,"div",7)(3,"div",8)(4,"input",9),J("blur",function(o){mt(t);const a=pe();return pt(a.updateCreatureHp(a.creature.id,+o.target.value))}),E()()()()}if(2&e){const t=pe();I(),V("value",t.creature.standee),I(3),V("value",t.creature.hp)}}function dV(e,n){if(1&e&&(w(0,"div",12),L(1),E()),2&e){const t=n.$implicit;$o("background","var(--"+pe(2).creature.type+"-color)"),I(),zt(" ",t," ")}}function mV(e,n){if(1&e&&(w(0,"div",10),Ie(1,dV,2,3,"div",11),E()),2&e){const t=pe();I(),V("ngForOf",t.creature.traits)}}function pV(e,n){if(1&e){const t=Xt();w(0,"button",13),J("click",function(){return mt(t),pt(pe().openConditionModal())}),fe(1,"div",14),L(2,"Attack "),E()}}let hV=(()=>{class e{appContext;notificationService;creature;constructor(t,r){this.appContext=t,this.notificationService=r}openConditionModal(){this.appContext.selectedCreature=this.creature,this.appContext.isGroupSelected=!1}toggleCondition(t){this.creature&&this.appContext.toggleCreatureConditions(this.creature.id,t)}updateCreatureHp(t,r){this.appContext.updateCreatureBaseStat(t,"hp",r),r<=0&&this.appContext.killCreature(t)}updateStandee(t,r,o){this.appContext.updateCreatureBaseStat(t,"standee",o),this.appContext.updateCreatureBaseStat(t,"name",`${r} - ${o}`)}static \u0275fac=function(r){return new(r||e)(x(rn),x(Ur))};static \u0275cmp=Bt({type:e,selectors:[["app-creature"]],inputs:{creature:"creature"},decls:7,vars:11,consts:[["traitsBlock",""],[1,"container",3,"ngClass"],["class","creature-standee stat",4,"ngIf","ngIfElse"],[3,"conditionToggled","creature","conditions"],["class","open-modal button attack",3,"click",4,"ngIf"],[1,"creature-standee","stat"],["type","tel","maxlength","2",1,"stat-input","initiative",3,"blur","value"],[1,"header","stat"],[1,"icon","heart"],["type","tel","maxlength","3",1,"stat-input",3,"blur","value"],[1,"creature-traits"],["class","trait",3,"background",4,"ngFor","ngForOf"],[1,"trait"],[1,"open-modal","button","attack",3,"click"],[1,"icon","attack"]],template:function(r,o){if(1&r){const a=Xt();w(0,"div")(1,"div",1),Ie(2,cV,5,2,"div",2)(3,mV,2,1,"ng-template",null,0,Jk),w(5,"app-conditions",3),J("conditionToggled",function(s){return mt(a),pt(o.toggleCondition(s))}),E()(),Ie(6,pV,3,0,"button",4),E()}if(2&r){const a=ik(4);I(),Gu(o.creature.type),V("ngClass",zh(8,uV,o.creature.boss?"boss":o.creature.isElite?"elite":"non-elite",o.creature.aggressive?"":"friendly")),I(),V("ngIf",o.creature.aggressive)("ngIfElse",a),I(3),V("creature",o.creature)("conditions",o.creature.conditions),I(),V("ngIf",o.creature.aggressive)}},dependencies:[tn,Xa,Gn,fr,oi,Go,WE],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;width:100%;background:var(--nonelite-color)}.container.elite[_ngcontent-%COMP%]{background:var(--elite-color)}.container.friendly[_ngcontent-%COMP%]{background-color:var(--background-color)}.container.boss[_ngcontent-%COMP%]{background-color:var(--boss-color)}.container[_ngcontent-%COMP%]   .initiative[_ngcontent-%COMP%]{border:none;background-color:var(--base-color-spots);border-radius:0 30px 30px 0;line-height:20px;font-size:20px;height:25px}.creature-traits[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;font-size:1rem;width:100%}.creature-traits[_ngcontent-%COMP%]   .trait[_ngcontent-%COMP%]{border-radius:6px;padding:2px 6px;text-align:center}input[_ngcontent-%COMP%]{background:none;color:var(--font-color)}.creature-standee[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:60px}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center}.header[_ngcontent-%COMP%]   .icon.heart[_ngcontent-%COMP%]{width:60px;height:60px;justify-content:center}.header[_ngcontent-%COMP%]   .icon.heart[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff;width:100%;height:100%;font-size:20px;box-sizing:border-box;border:none}button.open-modal[_ngcontent-%COMP%]{display:flex;width:100%;border-radius:0;border:1px solid;justify-content:center;font-size:20px;background-color:var(--attack-button-color)}button.open-modal[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:10px;width:24px;height:24px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{justify-content:center}.container[_ngcontent-%COMP%]   .initiative[_ngcontent-%COMP%]{border-radius:30px}}"]})}return e})();function fV(e,n){if(1&e&&(w(0,"div",7),fe(1,"app-creature",4),E()),2&e){const t=n.$implicit;V("ngClass",t.type),I(),V("creature",t)}}function yV(e,n){if(1&e&&(w(0,"div",2)(1,"div",3),fe(2,"app-creature-group-header",4),w(3,"div",5),Ie(4,fV,2,2,"div",6),E()()()),2&e){const t=n.$implicit;I(2),V("creature",t.creatureType),I(2),V("ngForOf",t.creatures)}}let gV=(()=>{class e{appContext;groupedCreatures=[];groupedGraveyard=[];unsubscribe$=new Cr;creatureHpInputs={};constructor(t){this.appContext=t,this.sortCreatures(),this.sortGraveyard(),this.appContext.creatures$.pipe(qE(this.unsubscribe$)).subscribe(r=>{this.sortCreatures()}),this.appContext.graveyard$.pipe(qE(this.unsubscribe$)).subscribe(r=>{this.sortGraveyard()})}sortCreatures(){const t={};for(const r of this.appContext.getCreatures()){const o=`${r.type}-${r.isElite}`;t[o]||(t[o]=[]),t[o].push(r)}this.groupedCreatures=Object.keys(t).map(r=>({type:r,creatureType:t[r][0],creatures:t[r]}))}get sortedCreatureGroups(){return[...this.groupedCreatures].sort((t,r)=>{const o=t.creatureType,a=r.creatureType;if((o.initiative??0)!==(a.initiative??0))return(o.initiative??0)-(a.initiative??0);if(o.aggressive!==a.aggressive)return o.aggressive?1:-1;const i=(o.type||"").toLowerCase(),s=(a.type||"").toLowerCase();if(i<s)return-1;if(i>s)return 1;if(o.isElite!==a.isElite)return o.isElite?-1:1;const l=o.standee??0,u=a.standee??0;return l<u?-1:l>u?1:0})}sortGraveyard(){const t={};for(const r of this.appContext.getCreatures()){const o=`${r.type}-${r.isElite}`;t[o]||(t[o]=[]),t[o].push(r)}this.groupedGraveyard=Object.keys(t).map(r=>({type:r,creatureType:t[r][0],creatures:t[r]}))}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}static \u0275fac=function(r){return new(r||e)(x(rn))};static \u0275cmp=Bt({type:e,selectors:[["app-game"]],decls:2,vars:1,consts:[[1,"game-container"],["class","creature-group",4,"ngFor","ngForOf"],[1,"creature-group"],[1,"creature-container"],[3,"creature"],[1,"creature-list"],["class","creature",3,"ngClass",4,"ngFor","ngForOf"],[1,"creature",3,"ngClass"]],template:function(r,o){1&r&&(w(0,"div",0),Ie(1,yV,5,2,"div",1),E()),2&r&&(I(),V("ngForOf",o.sortedCreatureGroups))},dependencies:[tn,Xa,Gn,Go,iV,hV],styles:[".game-container[_ngcontent-%COMP%]{margin-top:.5rem;display:flex;flex-direction:row;gap:1rem;flex-wrap:wrap}.game-container[_ngcontent-%COMP%]   .creature-group[_ngcontent-%COMP%]{border:1px solid;border-color:var(--font-color)}.game-container[_ngcontent-%COMP%]   .creature-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;gap:.5rem;justify-content:flex-start}.game-container[_ngcontent-%COMP%]   .creature-container[_ngcontent-%COMP%]   .creature-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem;flex-wrap:nowrap;width:100%}.game-container[_ngcontent-%COMP%]   .creature-container[_ngcontent-%COMP%]   .creature-list[_ngcontent-%COMP%]   .creature[_ngcontent-%COMP%]{width:100%;border:1px solid}@media (max-width: 768px){.game-container[_ngcontent-%COMP%]   .creature-container[_ngcontent-%COMP%]{max-width:none;width:100%}}"]})}return e})();function vV(e,n){if(1&e){const t=Xt();w(0,"div",18),J("click",function(){const o=mt(t).$implicit;return pt(pe(2).selectMonster(o))}),L(1),E()}if(2&e){const t=n.$implicit;I(),zt(" ",t.name," ")}}function bV(e,n){if(1&e&&(w(0,"div",16),Ie(1,vV,2,1,"div",17),E()),2&e){const t=pe();I(),V("ngForOf",t.filteredMonsters)}}let _V=(()=>{class e{appContext;dataLoader;creatureFactory;notificationService;monsterEvent=new ot;level=1;standee=1;isElite=!1;type="";monsters=[];filteredMonsters=[];constructor(t,r,o,a){this.appContext=t,this.dataLoader=r,this.creatureFactory=o,this.notificationService=a,this.monsters=this.dataLoader.getData().monsters,this.appContext.defaultLevel$.subscribe(i=>{this.level=i})}onTypeInput(){const t=this.type.toLowerCase();this.filteredMonsters=this.monsters.filter(r=>r.name.toLowerCase().includes(t))}selectMonster(t){this.type=t.name,this.filteredMonsters=[]}onFocus(){this.filteredMonsters=this.monsters.slice()}onBlur(){setTimeout(()=>{this.filteredMonsters=[]},150)}addMonster(){this.type?(this.appContext.addCreature(this.creatureFactory.createCreature({type:this.type,standee:this.standee,level:this.level,isElite:this.isElite,aggressive:!0})),this.monsterEvent.emit("monster-added"),this.notificationService.emitInfoMessage(`${this.type} added successfully!`)):this.notificationService.emitErrorMessage("Please select a monster type.")}close(){this.appContext.addMonsterToggled=!1}static \u0275fac=function(r){return new(r||e)(x(rn),x(Gs),x(my),x(Ur))};static \u0275cmp=Bt({type:e,selectors:[["app-add-monster"]],outputs:{monsterEvent:"monsterEvent"},decls:27,vars:5,consts:[[1,"layout",3,"click"],[1,"modal"],[1,"content"],[1,"title"],[1,"form-row"],["for","type"],["type","text","autocomplete","off",3,"ngModelChange","input","focus","blur","ngModel"],["class","monster-type-list",4,"ngIf"],["for","Level"],["type","tel","placeholder","#",3,"ngModelChange","ngModel"],["for","Standee"],["for","Elite"],["type","checkbox","id","elite-monster",3,"ngModelChange","ngModel"],[1,"buttons"],["type","button",1,"cancel",3,"click"],["type","button",1,"confirm",3,"click"],[1,"monster-type-list"],["class","monster-type-item",3,"click",4,"ngFor","ngForOf"],[1,"monster-type-item",3,"click"]],template:function(r,o){1&r&&(w(0,"div",0),J("click",function(){return o.close()}),E(),w(1,"div",1)(2,"div",2)(3,"div",3),L(4,"Add Monster"),E(),w(5,"div",4)(6,"label",5),L(7,"Type"),E(),w(8,"input",6),gn("ngModelChange",function(i){return In(o.type,i)||(o.type=i),i}),J("input",function(){return o.onTypeInput()})("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()}),E()(),Ie(9,bV,2,1,"div",7),w(10,"div",4)(11,"label",8),L(12,"Level"),E(),w(13,"input",9),gn("ngModelChange",function(i){return In(o.level,i)||(o.level=i),i}),E()(),w(14,"div",4)(15,"label",10),L(16,"Standee"),E(),w(17,"input",9),gn("ngModelChange",function(i){return In(o.standee,i)||(o.standee=i),i}),E()(),w(18,"div",4)(19,"label",11),L(20,"Elite"),E(),w(21,"input",12),gn("ngModelChange",function(i){return In(o.isElite,i)||(o.isElite=i),i}),E()(),w(22,"div",13)(23,"button",14),J("click",function(){return o.close()}),L(24,"Close"),E(),w(25,"button",15),J("click",function(){return o.addMonster()}),L(26,"Confirm"),E()()()()),2&r&&(I(8),yn("ngModel",o.type),I(),V("ngIf",o.filteredMonsters.length),I(4),yn("ngModel",o.level),I(4),yn("ngModel",o.standee),I(4),yn("ngModel",o.isElite))},dependencies:[tn,Gn,fr,Go,ei,zf,Ec,Hs,oi],styles:[".modal[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;text-align:left}.modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;text-align:center;width:100%;margin-bottom:1rem;justify-content:center}.modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.form-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100px;font-weight:600;text-align:right}.modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.form-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.form-row[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%]{flex:1;margin-bottom:0;width:100%}.modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   div.form-row[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;vertical-align:middle}.modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .monster-type-list[_ngcontent-%COMP%]{flex:1 1 auto;min-height:0;max-height:25dvh;overflow-y:auto;overscroll-behavior:contain;border:1px solid var(--secondary-color);border-radius:8px;padding:.25rem 0}.modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .monster-type-item[_ngcontent-%COMP%]{padding:.4rem;cursor:pointer}.modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .monster-type-item[_ngcontent-%COMP%]:hover{background:var(--secondary-color)}.modal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:.5rem;margin-top:1rem}@media (max-width: 768px){.modal[_ngcontent-%COMP%]{top:10%;width:90%}.monster-type-list[_ngcontent-%COMP%]{max-height:45dvh}}"]})}return e})();function wV(e,n){1&e&&(mm(),fe(0,"path",11)),2&e&&It("d",n.$implicit)}let kV=(()=>{class e{appContext;element;constructor(t){this.appContext=t}symbols={fire:{transform:"matrix(0.35277777,0,0,-0.35277777,129.1384,74.102455)",d:["m 0,0 c -42.5,34.5 -58.5,99.5 -47,143.5 -25.5,-2.5 -66.272,-25.288 -83.5,-89.5 -22,-82 43.996,-140.5 0,-170.5 -51.444,-35.079 -86.5,26 -82,82.5 -30,-23.5 -48.447,-119.579 -9.5,-178 28,-42 63.811,-66.136 109.516,-71.391 -14.745,10.442 -15.741,29.913 -10.516,44.891 7.5,21.5 32.239,31.107 55.5,49 26,20 37,40 38.5,49.5 13,-19.5 28.581,-48.317 15.5,-91 -6.013,-19.62 -16.979,-38.34 -34.339,-49.45 C 7.137,-266.249 71.825,-218.559 72,-134.5 72.156,-59.5 34.135,-27.709 0,0"]},ice:{transform:"matrix(0.35277777,0,0,-0.35277777,98.77778,114.17392)",d:["M 0,0 -37.729,21.782 V 65.349 L 0,87.132 37.729,65.349 V 21.782 Z m 182.664,-2.602 -38.139,-27.986 -30.576,18.524 49.5,34.673 c 3.166,2.218 3.935,6.583 1.717,9.75 -2.219,3.165 -6.582,3.936 -9.75,1.717 L 100.863,-4.137 51.729,25.63 v 35.871 l 49.135,29.768 54.552,-38.214 c 1.223,-0.856 2.623,-1.267 4.011,-1.267 2.206,0 4.377,1.04 5.739,2.984 2.218,3.166 1.449,7.532 -1.717,9.749 l -49.499,34.675 30.575,18.524 38.139,-27.987 c 1.248,-0.916 2.698,-1.357 4.136,-1.357 2.153,0 4.278,0.99 5.649,2.859 2.287,3.118 1.614,7.498 -1.502,9.786 l -33.459,24.552 29.336,17.773 c 3.348,1.932 4.495,6.214 2.563,9.562 -1.933,3.348 -6.213,4.496 -9.563,2.562 l -30.065,-16.465 -4.529,41.199 c -0.421,3.844 -3.881,6.621 -7.722,6.193 -3.843,-0.422 -6.616,-3.879 -6.194,-7.722 l 5.161,-46.945 -31.334,-17.159 -5.268,60.069 c -0.338,3.85 -3.711,6.71 -7.585,6.361 -3.851,-0.337 -6.699,-3.733 -6.362,-7.584 L 91.729,107.227 41.16,79.534 10.482,97.246 9.212,154.965 69.49,183.06 c 3.504,1.632 5.021,5.797 3.388,9.301 -1.633,3.503 -5.796,5.022 -9.302,3.388 L 8.875,170.254 8.088,205.979 51.35,224.996 c 3.54,1.556 5.147,5.686 3.591,9.225 -1.556,3.538 -5.686,5.148 -9.224,3.591 L 7.755,221.125 7,255.404 c 0,3.867 -3.134,7 -7,7 -3.866,0 -7,-3.133 -7,-7 l -0.746,-34.282 -37.972,16.69 c -3.538,1.557 -7.67,-0.053 -9.224,-3.591 -1.556,-3.539 0.051,-7.669 3.591,-9.225 l 43.276,-19.022 -0.778,-35.73 -54.724,25.505 c -3.506,1.633 -7.668,0.116 -9.302,-3.388 -1.633,-3.504 -0.116,-7.669 3.388,-9.301 L -9.186,154.953 -10.439,97.27 -41.15,79.54 l -50.579,27.694 5.802,66.183 c 0.337,3.851 -2.51,7.247 -6.362,7.584 -3.858,0.347 -7.248,-2.511 -7.585,-6.361 l -5.266,-60.063 -31.334,17.157 5.159,46.941 c 0.422,3.843 -2.351,7.301 -6.194,7.722 -3.83,0.425 -7.3,-2.349 -7.722,-6.193 l -4.528,-41.196 -30.065,16.463 c -3.348,1.932 -7.629,0.785 -9.563,-2.563 -1.932,-3.347 -0.785,-7.629 2.563,-9.561 l 29.336,-17.773 -33.46,-24.553 c -3.116,-2.288 -3.789,-6.668 -1.502,-9.785 1.371,-1.869 3.496,-2.859 5.649,-2.859 1.438,0 2.888,0.441 4.136,1.356 l 38.14,27.987 30.575,-18.524 -49.5,-34.675 c -3.166,-2.217 -3.935,-6.583 -1.717,-9.749 1.362,-1.944 3.533,-2.984 5.739,-2.984 1.387,0 2.788,0.411 4.011,1.267 L -100.864,91.269 -51.729,61.5 V 26.002 l -49.316,-30.013 -54.373,38.087 c -3.164,2.219 -7.529,1.449 -9.749,-1.718 -2.218,-3.166 -1.449,-7.531 1.718,-9.749 l 49.346,-34.566 -30.509,-18.567 -38.053,27.922 c -3.118,2.289 -7.499,1.614 -9.785,-1.502 -2.287,-3.117 -1.614,-7.498 1.502,-9.785 l 33.399,-24.508 -29.275,-17.817 c -3.348,-1.933 -4.495,-6.215 -2.563,-9.562 1.297,-2.246 3.65,-3.501 6.07,-3.501 1.187,0 2.39,0.302 3.493,0.938 l 30.057,16.537 4.536,-41.27 c 0.393,-3.583 3.425,-6.237 6.949,-6.237 0.256,0 0.513,0.015 0.773,0.043 3.843,0.422 6.616,3.88 6.194,7.723 l -5.17,47.048 31.329,17.236 5.282,-60.249 c 0.319,-3.643 3.376,-6.388 6.966,-6.388 0.204,0 0.411,0.008 0.619,0.026 3.852,0.338 6.699,3.733 6.362,7.585 l -5.821,66.402 50.276,27.66 30.91,-17.845 1.299,-57.635 -60.228,-28.071 c -3.504,-1.633 -5.021,-5.798 -3.388,-9.302 1.188,-2.548 3.712,-4.045 6.35,-4.045 0.989,0 1.996,0.212 2.952,0.657 l 54.659,25.476 0.805,-35.717 -43.238,-19.006 c -3.54,-1.556 -5.147,-5.685 -3.591,-9.225 1.153,-2.623 3.719,-4.185 6.412,-4.185 0.94,0 1.896,0.191 2.812,0.594 l 37.946,16.679 0.772,-34.271 c 0,-3.866 3.134,-7 7,-7 3.866,0 7,3.134 7,7 l 0.729,34.291 37.988,-16.699 c 0.916,-0.404 1.872,-0.594 2.812,-0.594 2.693,0 5.26,1.562 6.412,4.185 1.556,3.54 -0.051,7.669 -3.59,9.225 l -43.301,19.034 0.759,35.739 54.767,-25.526 c 0.957,-0.446 1.962,-0.657 2.952,-0.657 2.637,0 5.162,1.497 6.35,4.045 1.633,3.504 0.116,7.669 -3.388,9.302 l -60.356,28.13 1.22,57.456 30.797,17.781 50.578,-27.695 -5.803,-66.183 c -0.337,-3.852 2.511,-7.247 6.362,-7.585 0.208,-0.018 0.414,-0.026 0.619,-0.026 3.59,0 6.646,2.745 6.966,6.388 l 5.267,60.064 31.333,-17.158 -5.159,-46.941 c -0.422,-3.843 2.351,-7.301 6.194,-7.723 0.26,-0.028 0.517,-0.043 0.773,-0.043 3.523,0 6.556,2.654 6.949,6.237 l 4.528,41.197 30.066,-16.464 c 1.103,-0.636 2.306,-0.938 3.493,-0.938 2.419,0 4.773,1.256 6.07,3.501 1.932,3.347 0.785,7.629 -2.563,9.562 l -29.336,17.773 33.459,24.552 c 3.116,2.287 3.789,6.668 1.502,9.785 -2.286,3.117 -6.667,3.791 -9.785,1.502"]},earth:{transform:"matrix(0.35277777,0,0,-0.35277777,60.624366,132.24034)",d:["m 0,0 c -0.423,-4 -4.892,-6.179 -8.264,-3.987 -24.283,15.779 -85.571,80.677 -11.571,162.809 73.487,81.563 169.567,37.861 265.702,95.873 2.907,1.755 6.665,0.165 7.401,-3.15 13.134,-59.172 20.961,-187.976 -39.103,-247.223 -73.5,-72.5 -133.5,-40.5 -166,-29 -1.5,-18 4.501,-41.921 9.501,-58.421 5,-16.5 -27.001,-21.079 -31.001,-18.079 -4,3 -18.611,83.753 18.5,133 47.5,63.032 163,118 166.5,162.5 -22.5,-20 -51.809,-46.518 -129,-89.5 C 14.221,66.711 2.036,19.224 0,0"]},air:{transform:"",d:["m 20.688488,108.37995 c -0.487826,-0.10197 -0.465777,-0.80891 0.02756,-0.87368 4.4111,-0.5898 15.013728,-0.97289 28.807886,5.52594 18.344445,8.64305 47.966756,27.9535 65.510566,26.90481 14.83458,-0.88745 22.05963,-6.46575 21.27277,-13.32287 -0.61736,-5.37986 -6.61458,-8.90764 -11.20069,-7.14375 -4.58611,1.76389 -6.61458,5.90903 -6.26181,9.78958 -3.88055,-2.99861 -2.46944,-8.81944 -1.23472,-10.40694 1.23472,-1.5875 8.00503,-10.8176 19.57917,-2.82222 9.70139,6.70278 5.60035,19.76106 0,24.69444 -3.70417,3.2632 -14.81667,11.46528 -35.80695,6.17361 -20.990276,-5.29166 -43.620421,-24.4588 -55.562499,-30.1625 -10.991233,-5.24895 -15.72617,-6.37893 -25.131284,-8.35642","m 52.230405,106.05382 c -0.343133,-0.18741 -0.126781,-0.70969 0.246669,-0.59531 7.845171,2.39503 27.789516,6.9081 42.202418,3.16397 21.048158,-5.46805 24.870838,-17.991663 45.861108,-28.162962 13.38765,-6.487806 30.86806,-1.823145 35.63056,11.229631 4.7625,13.052781 -7.64398,22.048611 -17.4625,21.519451 -8.10424,-0.43547 -13.57919,-5.06429 -14.64028,-8.82634 -1.17684,-4.16719 0.46991,-9.575991 5.29167,-11.105611 -1.41111,6.35 2.04087,13.292561 9.17222,12.876391 7.05556,-0.41065 13.28704,-9.250771 6.70278,-15.875001 -6.59529,-6.633877 -14.81667,-5.349543 -19.75556,-2.293055 -5.26686,3.260439 -17.63889,15.522226 -28.22222,20.637496 -10.15752,4.90858 -25.033443,10.26501 -40.41648,6.17362 -13.106524,-3.48368 -17.129016,-4.64675 -24.610385,-8.74228","m 32.342558,94.131028 c -0.445107,-0.170869 -0.305926,-0.83646 0.170875,-0.81717 6.042699,0.24529 22.947094,-0.0317 31.82717,-9.914986 10.936111,-12.170834 8.445997,-20.473515 18.168056,-29.280556 6.790972,-6.150183 22.320081,-8.109755 33.249301,1.234722 12.17084,10.406945 5.70233,30.721985 -6.38031,36.98379 -10.23056,5.30131 -23.07663,3.58565 -25.987047,-4.704623 -3.241146,-9.231477 3.439583,-17.374306 10.230556,-17.286111 7.161661,0.0937 6.173611,7.231944 6.173611,7.231944 0,0 -2.11667,-3.701411 -5.027083,-3.263194 -3.689008,0.556725 -6.943934,5.177289 -5.027084,9.789583 2.38125,5.732639 12.621457,8.270981 19.989817,-0.46991 7.58473,-8.995834 5.93935,-21.225923 -6.58426,-25.635646 -11.575522,-4.074858 -18.36236,4.462089 -24.518057,15.877756 -4.850694,8.993078 -10.31875,20.458351 -26.9875,21.418851 -12.219065,0.7028 -16.949868,-0.26321 -19.298045,-1.16445"]},light:{transform:"matrix(0.35277777,0,0,-0.35277777,141.35502,111.71516)",d:["m 0,0 -9.044,27.255 23.505,9.418 -23.504,9.418 9.042,27.252 61.997,-36.673 z m 8.504,-92.473 -69.776,17.889 12.869,25.65 23.279,-9.961 -9.961,23.28 25.675,12.882 z m -129.142,-53.492 -36.693,61.957 27.222,9.032 9.418,-23.503 9.417,23.503 27.262,-9.045 z m -129.142,53.492 17.848,69.718 25.633,-12.86 -9.96,-23.28 23.279,9.961 12.875,-25.661 z m -53.492,129.143 61.897,36.648 9.034,-27.228 -23.504,-9.417 23.504,-9.417 -9.035,-27.232 z m 53.492,129.142 69.674,-17.875 -12.874,-25.658 -23.279,9.961 9.96,-23.279 -25.634,-12.86 z m 129.142,53.493 36.625,-61.939 -27.26,-9.046 -9.418,23.505 -9.418,-23.505 -27.221,9.033 z m 66.4,-155.106 14.078,32.9 26.922,-15.926 -7.78,-30.284 z m 0,-55.053 33.22,13.311 7.78,-30.287 -26.922,-15.924 z m -38.928,-38.927 32.902,-14.078 -15.909,-26.906 -30.302,7.769 z m -55.052,0 13.31,-33.217 -30.267,-7.766 -15.936,26.909 z m -38.927,38.927 -14.076,-32.895 -26.889,15.92 7.753,30.283 z m 0,55.053 -33.212,-13.307 -7.753,30.281 26.889,15.921 z m 38.927,38.928 -32.893,14.074 15.935,26.906 30.267,-7.764 z m 55.052,0 -13.308,33.213 30.302,7.767 15.908,-26.902 z m 101.67,62.685 -17.913,-69.733 -25.676,12.882 9.961,23.279 -23.279,-9.961 -12.868,25.648 z M 98.306,42.036 5.124,88.788 37.955,187.735 c 0.715,2.155 0.153,4.528 -1.452,6.132 -1.605,1.605 -3.98,2.171 -6.132,1.452 l -98.947,-32.831 -46.752,93.183 c -1.019,2.029 -3.094,3.309 -5.363,3.309 -2.27,0 -4.345,-1.28 -5.364,-3.309 l -46.752,-93.183 -98.947,32.831 c -2.153,0.718 -4.528,0.153 -6.132,-1.452 -1.605,-1.604 -2.167,-3.977 -1.452,-6.132 l 32.83,-98.948 -93.181,-46.751 c -2.03,-1.018 -3.31,-3.094 -3.31,-5.363 0,-2.27 1.28,-4.345 3.31,-5.363 l 93.181,-46.751 -32.83,-98.949 c -0.715,-2.154 -0.153,-4.527 1.452,-6.131 1.605,-1.605 3.978,-2.169 6.132,-1.453 l 98.947,32.831 46.752,-93.182 c 1.019,-2.029 3.094,-3.31 5.364,-3.31 2.269,0 4.344,1.281 5.363,3.31 l 46.751,93.182 98.948,-32.831 c 0.619,-0.206 1.257,-0.305 1.889,-0.305 1.566,0 3.1,0.614 4.243,1.758 1.605,1.604 2.167,3.977 1.452,6.131 L 5.123,-15.442 98.306,31.31 c 2.029,1.018 3.309,3.093 3.309,5.363 0,2.269 -1.28,4.345 -3.309,5.363"]},dark:{transform:"matrix(0.35277777,0,0,-0.35277777,114.94562,150.20756)",d:["m 0,0 c -8.87,0 -17.561,0.8 -26,2.32 6.06,2.781 11.92,5.941 17.54,9.441 1.786,1.112 3.539,2.271 5.276,3.453 73.09,1.203 131.963,59.194 131.963,130.566 0,71.385 -58.877,129.378 -131.971,130.577 -1.739,1.181 -3.492,2.34 -5.279,3.454 -5.619,3.5 -11.469,6.659 -17.529,9.439 8.439,1.521 17.13,2.32 26,2.32 80.38,0 145.779,-65.4 145.779,-145.79 C 145.779,65.4 80.38,0 0,0 M -45.83,7.38 C -52.25,5.24 -58.88,3.55 -65.66,2.32 -74.1,0.8 -82.78,0 -91.65,0 c -80.39,0 -145.79,65.4 -145.79,145.78 0,80.39 65.4,145.79 145.79,145.79 8.87,0 17.55,-0.799 25.99,-2.32 6.78,-1.229 13.41,-2.92 19.83,-5.06 6.019,-1.99 11.87,-4.379 17.51,-7.11 48.75,-23.61 82.45,-73.59 82.45,-131.3 0,-57.7 -33.7,-107.679 -82.45,-131.29 -5.64,-2.729 -11.491,-5.12 -17.51,-7.11 M 0,303.57 c -15.93,0 -31.311,-2.37 -45.82,-6.79 -14.51,4.42 -29.901,6.79 -45.83,6.79 -87.01,0 -157.79,-70.78 -157.79,-157.79 0,-87 70.78,-157.78 157.79,-157.78 15.929,0 31.32,2.37 45.83,6.79 C -31.311,-9.63 -15.93,-12 0,-12 87,-12 157.779,58.78 157.779,145.78 157.779,232.79 87,303.57 0,303.57"]}};ngOnInit(){this.appContext.elements$.subscribe(t=>{const r=t.find(o=>o.type===this.element.type);r&&(this.element={...r})})}get fillUrl(){return`url(#${this.element.type}-${this.element.state})`}toggleColor(){const t=this.element.state===Qe.None?Qe.Full:this.element.state===Qe.Full?Qe.Half:Qe.None;this.appContext.setElementState(this.element.type,t),this.element={...this.element,state:t}}static \u0275fac=function(r){return new(r||e)(x(rn))};static \u0275cmp=Bt({type:e,selectors:[["app-element"]],inputs:{element:"element"},decls:15,vars:14,consts:[[1,"element-container"],["viewBox","0 0 197.55556 197.55556","xmlns","http://www.w3.org/2000/svg",1,"element-icon",3,"click"],["x1","0%","y1","100%","x2","0%","y2","0%"],["offset","50%",2,"stop-opacity","1"],["x1","0%","y1","100%"],["offset","190%",2,"stop-opacity","1"],["d","m 98.77778,194.73333 c -25.630363,0 -49.727202,-9.98114 -67.850807,-28.10475 C 12.803368,148.50498 2.8222266,124.40814 2.8222266,98.777777 2.8222266,73.14706 12.803368,49.050575 30.926973,30.92697 49.050578,12.803365 73.147417,2.8222231 98.77778,2.8222231 c 25.63036,0 49.7272,9.9811419 67.85081,28.1047469 18.1236,18.123605 28.10474,42.22009 28.10474,67.850807 0,25.630363 -9.98114,49.727203 -28.10474,67.850803 -18.12361,18.12361 -42.22045,28.10475 -67.85081,28.10475"],["transform","matrix(0.35277777,0,0,-0.35277777,98.77778,1.9e-6)",1,"outline"],["d","m 0,0 c -37.793,0 -74.464,-7.405 -108.993,-22.01 -33.345,-14.104 -63.287,-34.291 -88.997,-60 -25.709,-25.71 -45.897,-55.652 -59.999,-88.996 C -272.595,-205.537 -280,-242.207 -280,-280 c 0,-37.793 7.405,-74.464 22.011,-108.993 14.102,-33.345 34.29,-63.287 59.999,-88.997 25.71,-25.709 55.652,-45.897 88.997,-59.999 C -74.464,-552.595 -37.793,-560 0,-560 c 37.793,0 74.464,7.405 108.993,22.011 33.345,14.102 63.287,34.29 88.997,59.999 25.709,25.71 45.897,55.652 59.999,88.997 14.606,34.529 22.011,71.2 22.011,108.993 0,37.793 -7.405,74.463 -22.011,108.994 -14.102,33.344 -34.29,63.286 -59.999,88.996 -25.71,25.709 -55.652,45.896 -88.997,60 C 74.464,-7.405 37.793,0 0,0 m 0,-16 c 145.803,0 264,-118.197 264,-264 0,-145.803 -118.197,-264 -264,-264 -145.803,0 -264,118.197 -264,264 0,145.803 118.197,264 264,264",2,"fill-opacity","1","fill-rule","nonzero","stroke","none"],[1,"symbol"],["style","fill-opacity:1;fill-rule:nonzero;stroke:none",4,"ngFor","ngForOf"],[2,"fill-opacity","1","fill-rule","nonzero","stroke","none"]],template:function(r,o){1&r&&(w(0,"div",0),mm(),w(1,"svg",1),J("click",function(){return o.toggleColor()}),w(2,"defs")(3,"linearGradient",2),fe(4,"stop",3)(5,"stop",3),E(),w(6,"linearGradient",4),fe(7,"stop",5),E(),w(8,"linearGradient",4),fe(9,"stop",5),E()(),fe(10,"path",6),w(11,"g",7),fe(12,"path",8),E(),w(13,"g",9),Ie(14,wV,1,1,"path",10),E()()()),2&r&&(I(3),It("id",o.element.type+"-half"),I(),$o("stop-color","var(--element-"+o.element.type+"-color)"),I(),$o("stop-color","var(--font-color)"),I(),It("id",o.element.type+"-full"),I(),$o("stop-color","var(--element-"+o.element.type+"-color)"),I(),It("id",o.element.type+"-none"),I(),$o("stop-color","var(--font-color)"),I(),It("fill",o.fillUrl),I(3),It("transform",o.symbols[o.element.type].transform),I(),V("ngForOf",o.symbols[o.element.type].d))},dependencies:[tn,Gn],styles:[".element-container[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;gap:8px}svg[_ngcontent-%COMP%]{background-color:var(--content-background-right);border-radius:50%}svg[_ngcontent-%COMP%]   g[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--font-color-dark)}.element[_ngcontent-%COMP%]{width:100%;height:100%;transform-origin:center;display:block}"]})}return e})(),KE=(()=>{class e{appContext;creature;buffs=[];constructor(t){this.appContext=t}storeBuff(t,r){this.buffs.push({type:t,value:r})}publishBuffs(){this.buffs.forEach(t=>{this.appContext.updateCreatureBaseStat(this.creature.id,t.type,t.value,!0)})}static \u0275fac=function(r){return new(r||e)(x(rn))};static \u0275cmp=Bt({type:e,selectors:[["app-buffs"]],inputs:{creature:"creature"},decls:19,vars:4,consts:[[1,"buffs"],[1,"stats","base-stats"],[1,"armor","stat"],[1,"icon","shield"],["type","tel","maxlength","3",1,"stat-input",3,"blur","value"],[1,"retaliate","stat"],[1,"icon","retaliate"],[1,"stats","round-stats"]],template:function(r,o){1&r&&(w(0,"div",0)(1,"div",1)(2,"div"),L(3,"Base"),E(),w(4,"div",2),fe(5,"div",3),w(6,"input",4),J("blur",function(i){return o.storeBuff("armor",+i.target.value)}),E()(),w(7,"div",5),fe(8,"div",6),w(9,"input",4),J("blur",function(i){return o.storeBuff("retaliate",+i.target.value)}),E()()(),w(10,"div",7)(11,"div"),L(12,"Round"),E(),w(13,"div",2),fe(14,"div",3),w(15,"input",4),J("blur",function(i){return o.storeBuff("roundArmor",+i.target.value)}),E()(),w(16,"div",5),fe(17,"div",6),w(18,"input",4),J("blur",function(i){return o.storeBuff("roundRetaliate",+i.target.value)}),E()()()()),2&r&&(I(6),V("value",o.creature.armor),I(3),V("value",o.creature.retaliate),I(6),V("value",o.creature.roundArmor),I(3),V("value",o.creature.roundRetaliate))},dependencies:[tn,oi],styles:[".buffs[_ngcontent-%COMP%]{font-size:30px;display:flex;flex-direction:column}.buffs[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;margin:5px 0}.buffs[_ngcontent-%COMP%]   .stats.round-stats[_ngcontent-%COMP%]{border-top:5px solid}.buffs[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.buffs[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-input[_ngcontent-%COMP%]{height:40px;line-height:40px}"]})}return e})();function EV(e,n){1&e&&fe(0,"app-buffs",10),2&e&&V("creature",pe().creature)}function DV(e,n){if(1&e){const t=Xt();w(0,"div",12),fe(1,"div",17),w(2,"input",14),gn("ngModelChange",function(o){mt(t);const a=pe(2);return In(a.armorPen,o)||(a.armorPen=o),pt(o)}),J("ngModelChange",function(){return mt(t),pt(pe(2).calculateDamage())}),E()()}if(2&e){const t=pe(2);I(2),yn("ngModel",t.armorPen)}}function xV(e,n){if(1&e&&(w(0,"div",18),L(1),E()),2&e){const t=pe(2);I(),zt(" total: ",t.damage," ")}}function SV(e,n){if(1&e){const t=Xt();w(0,"div",11)(1,"div",12),fe(2,"div",13),w(3,"input",14),gn("ngModelChange",function(o){mt(t);const a=pe();return In(a.attack,o)||(a.attack=o),pt(o)}),J("ngModelChange",function(){return mt(t),pt(pe().calculateDamage())}),E()(),Ie(4,DV,3,1,"div",15)(5,xV,2,1,"div",16),E()}if(2&e){const t=pe();I(3),yn("ngModel",t.attack),I(),V("ngIf",t.creature.armor+t.creature.roundArmor>0),I(),V("ngIf",t.damage>0)}}function TV(e,n){if(1&e){const t=Xt();w(0,"app-conditions",19),J("conditionToggled",function(o){return mt(t),pt(pe().toggleCondition(o))}),E()}if(2&e){const t=pe();V("creature",t.creature)("conditions",t.conditions)("shouldShowBuffs",!0)}}let IV=(()=>{class e{appContext;notificationService;buffsComponent;creature;conditions=Object.values(zs);attack=0;armorPen=0;damage=0;tempConditions=[];constructor(t,r){this.appContext=t,this.notificationService=r,this.creature=t.selectedCreature}toggleCondition(t){this.tempConditions.push(t)}attackCreature(){if(this.attack<=0)return;const t=this.calculateDamage(),r=this.creature.hp-t;this.appContext.updateCreatureBaseStat(this.creature.id,"hp",this.creature.hp-t),r<=0&&this.appContext.killCreature(this.creature.id)}calculateDamage(){let t=this.attack;const r=Math.max(this.creature.armor+this.creature.roundArmor-this.armorPen,0);t-=r;const o={[zs.poison]:i=>i+1,[zs.brittle]:i=>2*i,[zs.ward]:i=>Math.floor(i/2)};return t=this.creature.conditions.filter(i=>o[i]&&t>0).map(i=>o[i]).reduce((i,s)=>s(i),t),this.damage=Math.max(t,0),this.damage}confirm(){this.attackCreature(),this.tempConditions.forEach(t=>{this.creature&&this.appContext.toggleCreatureConditions(this.creature.id,t)}),this.buffsComponent?.publishBuffs(),this.close()}close(){this.appContext.selectedCreature=null}static \u0275fac=function(r){return new(r||e)(x(rn),x(Ur))};static \u0275cmp=Bt({type:e,selectors:[["app-attack-modal"]],viewQuery:function(r,o){if(1&r&&function rk(e,n,t){sw(e,n,t)}(KE,5),2&r){let a;(function ok(e){const n=C(),t=re(),r=um();Tl(r+1);const o=eh(t,r);if(e.dirty&&function ox(e){return!(4&~e[2])}(n)===!(2&~o.metadata.flags)){if(null===o.matches)e.reset([]);else{const a=cw(n,r);e.reset(a,b1),e.notifyOnChanges()}return!0}return!1})(a=function ak(){return function Xp(e,n){return e[18].queries[n].queryList}(C(),um())}())&&(o.buffsComponent=a.first)}},decls:13,vars:4,consts:[[1,"layout",3,"click"],[1,"modal"],[1,"content"],[1,"name"],[3,"creature",4,"ngIf"],["class","attack",4,"ngIf"],[3,"creature","conditions","shouldShowBuffs","conditionToggled",4,"ngIf"],[1,"buttons"],["type","button",1,"cancel",3,"click"],["type","button",1,"confirm",3,"click"],[3,"creature"],[1,"attack"],[1,"stat"],[1,"icon","damage"],["type","tel","maxlength","3",1,"stat-input",3,"ngModelChange","ngModel"],["class","stat",4,"ngIf"],["class","damage-preview",4,"ngIf"],[1,"icon","pierce"],[1,"damage-preview"],[3,"conditionToggled","creature","conditions","shouldShowBuffs"]],template:function(r,o){1&r&&(w(0,"div",0),J("click",function(){return o.close()}),E(),w(1,"div",1)(2,"div",2)(3,"div",3),L(4),E(),Ie(5,EV,1,1,"app-buffs",4)(6,SV,6,3,"div",5)(7,TV,1,3,"app-conditions",6),w(8,"div",7)(9,"button",8),J("click",function(){return o.close()}),L(10,"Cancel"),E(),w(11,"button",9),J("click",function(){return o.confirm()}),L(12,"Confirm"),E()()()()),2&r&&(I(4),zt("",o.appContext.isGroupSelected&&o.creature.aggressive?o.creature.type:o.creature.name," "),I(),V("ngIf",o.appContext.isGroupSelected),I(),V("ngIf",!o.appContext.isGroupSelected),I(),V("ngIf",!o.appContext.isGroupSelected))},dependencies:[tn,fr,WE,oi,KE,Go,ei,Ec,dy,Hs],styles:["[_nghost-%COMP%]{position:fixed;inset:0}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{box-shadow:0 0 0 3px var(--content-box-shadow-1),0 0 4px 3px var(--content-box-shadow-2),inset 0 0 7px 0 var(--content-box-shadow-3),3px 3px 1px 1px var(--content-box-shadow-4),-3px 3px 1px 1px var(--content-box-shadow-4);padding:15px;gap:.5rem;display:flex;flex-direction:column}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:35px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .icon.damage[_ngcontent-%COMP%]{height:55px}"]})}return e})(),MV=(()=>{class e{appContext;roundNumber=1;roundAdvanced=new ot;elements=[];sub;constructor(t){this.appContext=t}ngOnInit(){this.sub=this.appContext.roundNumber$.subscribe(t=>{this.roundNumber=t})}ngOnDestroy(){this.sub?.unsubscribe()}nextRound(){this.resetAllCreatures(),this.resetElements();const t=this.roundNumber+1;this.roundNumber=t,this.appContext.setRoundNumber(t),this.roundAdvanced.emit(t)}resetAllCreatures(){const t=this.appContext.getCreatures().map(r=>({...r,initiative:0,roundArmor:0,roundRetaliate:0}));this.appContext.setCreatures(t)}resetElements(){const t=this.appContext.getElements().map(r=>{let o;return o=r.state===Qe.Half?Qe.None:r.state===Qe.Full?Qe.Half:r.state,{...r,state:o}});this.appContext.setElements(t)}static \u0275fac=function(r){return new(r||e)(x(rn))};static \u0275cmp=Bt({type:e,selectors:[["app-round"]],inputs:{elements:"elements"},outputs:{roundAdvanced:"roundAdvanced"},decls:5,vars:1,consts:[[1,"section"],[1,"cancel",3,"click"]],template:function(r,o){1&r&&(gs(0,"div",0)(1,"div"),L(2),vs(),gs(3,"button",1),Oh("click",function(){return o.nextRound()}),L(4," Next "),vs()()),2&r&&(I(2),zt(" Round ",o.roundNumber," "))},dependencies:[tn],styles:[".section[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;gap:1rem;align-items:center;border-left:5px solid;padding-left:1rem}"]})}return e})();function QE(...e){const n=wc(e),t=lC(e),{args:r,keys:o}=sC(e);if(0===r.length)return Ls([],n);const a=new gt(function AV(e,n,t=dl){return r=>{JE(n,()=>{const{length:o}=e,a=new Array(o);let i=o,s=o;for(let l=0;l<o;l++)JE(n,()=>{const u=Ls(e[l],n);let c=!1;u.subscribe(Sn(r,d=>{a[l]=d,c||(c=!0,s--),s||r.next(t(a.slice()))},()=>{--i||r.complete()}))},r)},r)}}(r,n,o?i=>cC(o,i):dl));return t?a.pipe(uC(t)):a}function JE(e,n,t){e?yr(t,e,n):n()}function Jc(e,n,t=1/0){return Je(n)?Jc((r,o)=>Ft((a,i)=>n(r,a,o,i))(Gr(e(r,o))),t):("number"==typeof n&&(t=n),Vn((r,o)=>function NV(e,n,t,r,o,a,i,s){const l=[];let u=0,c=0,d=!1;const p=()=>{d&&!l.length&&!u&&n.complete()},m=f=>u<r?h(f):l.push(f),h=f=>{a&&n.next(f),u++;let y=!1;Gr(t(f,c++)).subscribe(Sn(n,g=>{o?.(g),a?m(g):n.next(g)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;l.length&&u<r;){const g=l.shift();i?yr(n,i,()=>h(g)):h(g)}p()}catch(g){n.error(g)}}))};return e.subscribe(Sn(n,m,()=>{d=!0,p()})),()=>{s?.()}}(r,o,e,t)))}function YE(...e){return function OV(){return function RV(e=1/0){return Jc(dl,e)}(1)}()(Ls(e,wc(e)))}function PV(...e){const n=wc(e);return Vn((t,r)=>{(n?YE(e,t,n):YE(e,t)).subscribe(r)})}function FV(e,n){if(1&e&&(w(0,"option",9),L(1),E()),2&e){const t=n.$implicit;V("value",t.value),I(),fn(t.text)}}function LV(e,n){if(1&e){const t=Xt();ju(0),w(1,"select",7),J("change",function(o){return mt(t),pt(pe(2).onFilterChange(o))}),Ie(2,FV,2,2,"option",8),E(),bs()}if(2&e){const t=pe().ngIf;I(2),V("ngForOf",t)}}function jV(e,n){if(1&e&&(w(0,"div",5),Ie(1,LV,3,1,"ng-container",6),E()),2&e){const t=n.ngIf;I(),V("ngIf",t.length)}}function BV(e,n){if(1&e){const t=Xt();w(0,"tr")(1,"td"),L(2),E(),w(3,"td"),L(4),E(),w(5,"td"),L(6),E(),w(7,"td"),L(8),E(),w(9,"td"),L(10),E(),w(11,"td")(12,"button",10),J("click",function(){const o=mt(t).$implicit;return pt(pe().undo(o))}),E()()()}if(2&e){const t=n.$implicit;I(2),fn(t.time),I(2),fn(t.creature),I(2),fn(t.stat),I(2),fn(t.value),I(2),fn(t.oldValue)}}function VV(e,n){if(1&e){const t=Xt();w(0,"div",11)(1,"button",12),J("click",function(){const o=mt(t).ngIf;return pt(pe().prevPage(o))}),L(2,"Prev"),E(),w(3,"span"),L(4),E(),w(5,"button",12),J("click",function(){const o=mt(t).ngIf;return pt(pe().nextPage(o))}),L(6,"Next"),E()()}if(2&e){const t=n.ngIf,r=pe();I(),V("disabled",1===r.currentPage$.value),I(3),Wu("Page ",r.currentPage$.value," / ",t),I(),V("disabled",r.currentPage$.value===t)}}let $V=(()=>{class e{logService;appContext;pageSize=10;defaultUpdate;undoHandlers;currentPage$=new En(1);selectedIds$=new En([]);characters$;filteredAll$;totalPages$;filteredLogs$;constructor(t,r){this.logService=t,this.appContext=r,this.characters$=this.logService.characterOptions$,this.filteredAll$=QE([this.logService.logs$,this.selectedIds$.pipe(PV([]))]).pipe(Ft(([o,a])=>{if(!a||0===a.length)return o;const i=new Set(a);return o.filter(s=>!!s.creatureId&&i.has(s.creatureId))})),this.totalPages$=this.filteredAll$.pipe(Ft(o=>Math.max(1,Math.ceil(o.length/this.pageSize)))),this.filteredLogs$=QE([this.filteredAll$,this.currentPage$]).pipe(Ft(([o,a])=>{const i=(a-1)*this.pageSize;return o.slice(i,i+this.pageSize)})),this.defaultUpdate=(o,a,i)=>this.appContext.updateCreatureBaseStat(o,i.stat,a,!1),this.undoHandlers={killed:(o,a,i)=>{const s=this.logService.getLastAliveHpBefore(i.id,o),l=i.data?.old?.hp,u=this.logService.getLastPositiveHp(o);this.appContext.reviveCreature(o,s??(l&&l>0?l:void 0)??u??1)},created:o=>{this.appContext.killCreature&&this.appContext.killCreature(o)}}}onFilterChange(t){const o=Array.from(t.target.selectedOptions).map(a=>a.value);this.currentPage$.next(1),this.selectedIds$.next(o)}prevPage(t){const r=this.currentPage$.value;r>1&&this.currentPage$.next(r-1)}nextPage(t){const r=this.currentPage$.value;r<t&&this.currentPage$.next(r+1)}undo(t){const r=t.creatureId;r&&(this.undoHandlers[t.stat]??this.defaultUpdate)(r,t.oldValue,t)}static \u0275fac=function(r){return new(r||e)(x(dE),x(rn))};static \u0275cmp=Bt({type:e,selectors:[["app-log"]],decls:25,vars:9,consts:[[1,"log-container"],["class","log-filter",4,"ngIf"],[1,"log-table"],[4,"ngFor","ngForOf"],["class","pager",4,"ngIf"],[1,"log-filter"],[4,"ngIf"],["multiple","",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"icon","undo",3,"click"],[1,"pager"],[3,"click","disabled"]],template:function(r,o){1&r&&(w(0,"div",0)(1,"span"),L(2,"Audit History"),E(),Ie(3,jV,2,1,"div",1),Ss(4,"async"),w(5,"table",2)(6,"thead")(7,"tr")(8,"th"),L(9,"When"),E(),w(10,"th"),L(11,"Who"),E(),w(12,"th"),L(13,"What"),E(),w(14,"th"),L(15,"Is"),E(),w(16,"th"),L(17,"Was"),E(),w(18,"th"),L(19,"Shit"),E()()(),w(20,"tbody"),Ie(21,BV,13,5,"tr",3),Ss(22,"async"),E()(),Ie(23,VV,7,4,"div",4),Ss(24,"async"),E()),2&r&&(I(3),V("ngIf",Qu(4,3,o.characters$)),I(18),V("ngForOf",Qu(22,5,o.filteredLogs$)),I(2),V("ngIf",Qu(24,7,o.totalPages$)))},dependencies:[tn,Gn,fr,$0],styles:[".log-container[_ngcontent-%COMP%]{margin:.5rem}.log-container[_ngcontent-%COMP%]   .log-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:15px}.log-container[_ngcontent-%COMP%]   .log-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .log-container[_ngcontent-%COMP%]   .log-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;text-align:left;border-bottom:1px solid var(--font-color)}.log-container[_ngcontent-%COMP%]   .log-filter[_ngcontent-%COMP%]{width:100%;margin:1rem 0;display:flex;align-items:center;gap:1rem}.log-container[_ngcontent-%COMP%]   .log-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;font-size:14px;color:var(--font-color)}.log-container[_ngcontent-%COMP%]   .log-filter[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1;min-height:2.5rem;padding:.5rem;border:1px solid var(--font-color);border-radius:6px;font-size:16px;background-color:var(--background-color);color:var(--font-color, #333)}.log-container[_ngcontent-%COMP%]   .log-filter[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{cursor:pointer;padding:6px 10px;font-size:16px}.log-container[_ngcontent-%COMP%]   .log-filter[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:hover{background-color:var(--background-secondary, var(--secondary-color));color:#000}.log-container[_ngcontent-%COMP%]   .pager[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;justify-content:flex-end;margin-top:.5rem;font-size:15px}.log-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--font-color);background-color:var(--background-color);border:1px solid var(--font-color);border-radius:4px;padding:.25rem .75rem;cursor:pointer;font-size:13px}.log-container[_ngcontent-%COMP%]   button.undo[_ngcontent-%COMP%]{border:none;width:20px;height:20px}"]})}return e})();function HV(e,n){1&e&&fe(0,"app-element",5),2&e&&V("element",n.$implicit)}function UV(e,n){1&e&&fe(0,"app-attack-modal")}function zV(e,n){1&e&&fe(0,"app-add-monster")}let GV=(()=>{class e{storageService;appContext;title=Ir("frosthaven-assistant-angular");elements=[{type:nn.Fire,state:Qe.None},{type:nn.Ice,state:Qe.None},{type:nn.Earth,state:Qe.None},{type:nn.Air,state:Qe.None},{type:nn.Light,state:Qe.None},{type:nn.Dark,state:Qe.None}];constructor(t,r){this.storageService=t,this.appContext=r;const o=this.storageService.loadGraveyard(),a=this.storageService.loadCreatures();o&&this.appContext.setCreatures(a),a&&this.appContext.setGraveyard(o)}ngOnInit(){this.storageService.loadingEvent$.subscribe(t=>{})}static \u0275fac=function(r){return new(r||e)(x(Qc),x(rn))};static \u0275cmp=Bt({type:e,selectors:[["app-root"]],decls:11,vars:3,consts:[["id","master-container"],[1,"content"],[1,"elements-row"],[3,"element",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"element"]],template:function(r,o){1&r&&(w(0,"div",0),fe(1,"app-setup"),w(2,"div",1)(3,"div",2),Ie(4,HV,1,1,"app-element",3),E(),fe(5,"app-round"),E(),fe(6,"app-game"),Ie(7,UV,1,0,"app-attack-modal",4)(8,zV,1,0,"app-add-monster",4),fe(9,"app-log"),E(),fe(10,"app-toast-notification")),2&r&&(I(4),V("ngForOf",o.elements),I(3),V("ngIf",o.appContext.selectedCreature),I(),V("ngIf",o.appContext.addMonsterToggled))},dependencies:[tn,Gn,fr,Go,J7,YB,gV,kV,IV,MV,_V,$V],styles:["#master-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.content[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.content[_ngcontent-%COMP%]   .elements-row[_ngcontent-%COMP%]{display:flex;gap:10px}@media (max-width: 768px){.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;align-items:stretch}.content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{min-width:0}.content[_ngcontent-%COMP%]   app-round[_ngcontent-%COMP%]{display:block;width:100%;justify-self:stretch}}"]})}return e})();var K=function(e){return e[e.State=0]="State",e[e.Transition=1]="Transition",e[e.Sequence=2]="Sequence",e[e.Group=3]="Group",e[e.Animate=4]="Animate",e[e.Keyframes=5]="Keyframes",e[e.Style=6]="Style",e[e.Trigger=7]="Trigger",e[e.Reference=8]="Reference",e[e.AnimateChild=9]="AnimateChild",e[e.AnimateRef=10]="AnimateRef",e[e.Query=11]="Query",e[e.Stagger=12]="Stagger",e}(K||{});const br="*";function ZE(e){return{type:K.Style,styles:e,offset:null}}class Js{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(n=0,t=0){this.totalTime=n+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class XE{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(n){this.players=n;let t=0,r=0,o=0;const a=this.players.length;0==a?queueMicrotask(()=>this._onFinish()):this.players.forEach(i=>{i.onDone(()=>{++t==a&&this._onFinish()}),i.onDestroy(()=>{++r==a&&this._onDestroy()}),i.onStart(()=>{++o==a&&this._onStart()})}),this.totalTime=this.players.reduce((i,s)=>Math.max(i,s.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const t=n*this.totalTime;this.players.forEach(r=>{const o=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(o)})}getPosition(){const n=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function e4(e){return new _(3e3,!1)}function n$(e){return new _(3002,!1)}function Xr(e){switch(e.length){case 0:return new Js;case 1:return e[0];default:return new XE(e)}}function t4(e,n,t=new Map,r=new Map){const o=[],a=[];let i=-1,s=null;if(n.forEach(l=>{const u=l.get("offset"),c=u==i,d=c&&s||new Map;l.forEach((p,m)=>{let h=m,f=p;if("offset"!==m)switch(h=e.normalizePropertyName(h,o),f){case"!":f=t.get(m);break;case br:f=r.get(m);break;default:f=e.normalizeStyleValue(m,h,f,o)}d.set(h,f)}),c||a.push(d),s=d,i=u}),o.length)throw function p$(){return new _(3502,!1)}();return a}function zy(e,n,t,r){switch(n){case"start":e.onStart(()=>r(t&&Gy(t,"start",e)));break;case"done":e.onDone(()=>r(t&&Gy(t,"done",e)));break;case"destroy":e.onDestroy(()=>r(t&&Gy(t,"destroy",e)))}}function Gy(e,n,t){const a=qy(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,t.totalTime??e.totalTime,!!t.disabled),i=e._data;return null!=i&&(a._data=i),a}function qy(e,n,t,r,o="",a=0,i){return{element:e,triggerName:n,fromState:t,toState:r,phaseName:o,totalTime:a,disabled:!!i}}function on(e,n,t){let r=e.get(n);return r||e.set(n,r=t),r}function n4(e){const n=e.indexOf(":");return[e.substring(1,n),e.slice(n+1)]}const D$=typeof document>"u"?null:document.documentElement;function Wy(e){const n=e.parentNode||e.host||null;return n===D$?null:n}let Jo=null,r4=!1;function o4(e,n){for(;n;){if(n===e)return!0;n=Wy(n)}return!1}function a4(e,n,t){if(t)return Array.from(e.querySelectorAll(n));const r=e.querySelector(n);return r?[r]:[]}const s4="ng-enter",Ky="ng-leave",Yc="ng-trigger",Zc=".ng-trigger",l4="ng-animating",Qy=".ng-animating";function _r(e){if("number"==typeof e)return e;const n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:Jy(parseFloat(n[1]),n[2])}function Jy(e,n){return"s"===n?1e3*e:e}function Xc(e,n,t){return e.hasOwnProperty("duration")?e:function N$(e,n,t){let r,o=0,a="";if("string"==typeof e){const i=e.match(A$);if(null===i)return n.push(e4()),{duration:0,delay:0,easing:""};r=Jy(parseFloat(i[1]),i[2]);const s=i[3];null!=s&&(o=Jy(parseFloat(s),i[4]));const l=i[5];l&&(a=l)}else r=e;if(!t){let i=!1,s=n.length;r<0&&(n.push(function WV(){return new _(3100,!1)}()),i=!0),o<0&&(n.push(function KV(){return new _(3101,!1)}()),i=!0),i&&n.splice(s,0,e4())}return{duration:r,delay:o,easing:a}}(e,n,t)}const A$=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function Qn(e,n,t){n.forEach((r,o)=>{const a=Zy(o);t&&!t.has(o)&&t.set(o,e.style[a]),e.style[a]=r})}function Yo(e,n){n.forEach((t,r)=>{const o=Zy(r);e.style[o]=""})}function Ys(e){return Array.isArray(e)?1==e.length?e[0]:function qV(e,n=null){return{type:K.Sequence,steps:e,options:n}}(e):e}const Yy=new RegExp("{{\\s*(.+?)\\s*}}","g");function u4(e){let n=[];if("string"==typeof e){let t;for(;t=Yy.exec(e);)n.push(t[1]);Yy.lastIndex=0}return n}function Zs(e,n,t){const r=`${e}`,o=r.replace(Yy,(a,i)=>{let s=n[i];return null==s&&(t.push(function JV(){return new _(3003,!1)}()),s=""),s.toString()});return o==r?e:o}const P$=/-+([a-z0-9])/g;function Zy(e){return e.replace(P$,(...n)=>n[1].toUpperCase())}function an(e,n,t){switch(n.type){case K.Trigger:return e.visitTrigger(n,t);case K.State:return e.visitState(n,t);case K.Transition:return e.visitTransition(n,t);case K.Sequence:return e.visitSequence(n,t);case K.Group:return e.visitGroup(n,t);case K.Animate:return e.visitAnimate(n,t);case K.Keyframes:return e.visitKeyframes(n,t);case K.Style:return e.visitStyle(n,t);case K.Reference:return e.visitReference(n,t);case K.AnimateChild:return e.visitAnimateChild(n,t);case K.AnimateRef:return e.visitAnimateRef(n,t);case K.Query:return e.visitQuery(n,t);case K.Stagger:return e.visitStagger(n,t);default:throw function YV(){return new _(3004,!1)}()}}function Xy(e,n){return window.getComputedStyle(e)[n]}let eg=(()=>{class e{validateStyleProperty(t){return function S$(e){Jo||(Jo=function T$(){return typeof document<"u"?document.body:null}()||{},r4=!!Jo.style&&"WebkitAppearance"in Jo.style);let n=!0;return Jo.style&&!function x$(e){return"ebkit"==e.substring(1,6)}(e)&&(n=e in Jo.style,!n&&r4&&(n="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in Jo.style)),n}(t)}containsElement(t,r){return o4(t,r)}getParentElement(t){return Wy(t)}query(t,r,o){return a4(t,r,o)}computeStyle(t,r,o){return o||""}animate(t,r,o,a,i,s=[],l){return new Js(o,a)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=U({token:e,factory:e.\u0275fac})}return e})();class tg{static NOOP=new eg}class ng{}const B$=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class c4 extends ng{normalizePropertyName(n,t){return Zy(n)}normalizeStyleValue(n,t,r,o){let a="";const i=r.toString().trim();if(B$.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const s=r.match(/^[+-]?[\d\.]+([a-z]*)$/);s&&0==s[1].length&&o.push(function ZV(){return new _(3005,!1)}())}return i+a}}const td=new Set(["true","1"]),nd=new Set(["false","0"]);function d4(e,n){const t=td.has(e)||nd.has(e),r=td.has(n)||nd.has(n);return(o,a)=>{let i="*"==e||e==o,s="*"==n||n==a;return!i&&t&&"boolean"==typeof o&&(i=o?td.has(e):nd.has(e)),!s&&r&&"boolean"==typeof a&&(s=a?td.has(n):nd.has(n)),i&&s}}const U$=new RegExp("s*:selfs*,?","g");function og(e,n,t,r){return new z$(e).build(n,t,r)}class z${_driver;constructor(n){this._driver=n}build(n,t,r){const o=new W$(t);return this._resetContextStyleTimingState(o),an(this,Ys(n),o)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,t){let r=t.queryCount=0,o=t.depCount=0;const a=[],i=[];return"@"==n.name.charAt(0)&&t.errors.push(function XV(){return new _(3006,!1)}()),n.definitions.forEach(s=>{if(this._resetContextStyleTimingState(t),s.type==K.State){const l=s,u=l.name;u.toString().split(/\s*,\s*/).forEach(c=>{l.name=c,a.push(this.visitState(l,t))}),l.name=u}else if(s.type==K.Transition){const l=this.visitTransition(s,t);r+=l.queryCount,o+=l.depCount,i.push(l)}else t.errors.push(function e$(){return new _(3007,!1)}())}),{type:K.Trigger,name:n.name,states:a,transitions:i,queryCount:r,depCount:o,options:null}}visitState(n,t){const r=this.visitStyle(n.styles,t),o=n.options&&n.options.params||null;if(r.containsDynamicStyles){const a=new Set,i=o||{};r.styles.forEach(s=>{s instanceof Map&&s.forEach(l=>{u4(l).forEach(u=>{i.hasOwnProperty(u)||a.add(u)})})}),a.size&&t.errors.push(function t$(){return new _(3008,!1)}(0,a.values()))}return{type:K.State,name:n.name,style:r,options:o?{params:o}:null}}visitTransition(n,t){t.queryCount=0,t.depCount=0;const r=an(this,Ys(n.animation),t),o=function V$(e,n){const t=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(r=>function $$(e,n,t){if(":"==e[0]){const l=function H$(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return n.push(function d$(){return new _(3016,!1)}()),"* => *"}}(e,t);if("function"==typeof l)return void n.push(l);e=l}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function c$(){return new _(3015,!1)}()),n;const o=r[1],a=r[2],i=r[3];n.push(d4(o,i)),"<"==a[0]&&("*"!=o||"*"!=i)&&n.push(d4(i,o))}(r,t,n)):t.push(e),t}(n.expr,t.errors);return{type:K.Transition,matchers:o,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Zo(n.options)}}visitSequence(n,t){return{type:K.Sequence,steps:n.steps.map(r=>an(this,r,t)),options:Zo(n.options)}}visitGroup(n,t){const r=t.currentTime;let o=0;const a=n.steps.map(i=>{t.currentTime=r;const s=an(this,i,t);return o=Math.max(o,t.currentTime),s});return t.currentTime=o,{type:K.Group,steps:a,options:Zo(n.options)}}visitAnimate(n,t){const r=function Q$(e,n){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return ag(Xc(e,n).duration,0,"");const t=e;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=ag(0,0,"");return a.dynamic=!0,a.strValue=t,a}const o=Xc(t,n);return ag(o.duration,o.delay,o.easing)}(n.timings,t.errors);t.currentAnimateTimings=r;let o,a=n.styles?n.styles:ZE({});if(a.type==K.Keyframes)o=this.visitKeyframes(a,t);else{let i=n.styles,s=!1;if(!i){s=!0;const u={};r.easing&&(u.easing=r.easing),i=ZE(u)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(i,t);l.isEmptyStep=s,o=l}return t.currentAnimateTimings=null,{type:K.Animate,timings:r,style:o,options:null}}visitStyle(n,t){const r=this._makeStyleAst(n,t);return this._validateStyleAst(r,t),r}_makeStyleAst(n,t){const r=[],o=Array.isArray(n.styles)?n.styles:[n.styles];for(let s of o)"string"==typeof s?s===br?r.push(s):t.errors.push(n$()):r.push(new Map(Object.entries(s)));let a=!1,i=null;return r.forEach(s=>{if(s instanceof Map&&(s.has("easing")&&(i=s.get("easing"),s.delete("easing")),!a))for(let l of s.values())if(l.toString().indexOf("{{")>=0){a=!0;break}}),{type:K.Style,styles:r,easing:i,offset:n.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(n,t){const r=t.currentAnimateTimings;let o=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),n.styles.forEach(i=>{"string"!=typeof i&&i.forEach((s,l)=>{const u=t.collectedStyles.get(t.currentQuerySelector),c=u.get(l);let d=!0;c&&(a!=o&&a>=c.startTime&&o<=c.endTime&&(t.errors.push(function r$(){return new _(3010,!1)}()),d=!1),a=c.startTime),d&&u.set(l,{startTime:a,endTime:o}),t.options&&function O$(e,n,t){const r=n.params||{},o=u4(e);o.length&&o.forEach(a=>{r.hasOwnProperty(a)||t.push(function QV(){return new _(3001,!1)}())})}(s,t.options,t.errors)})})}visitKeyframes(n,t){const r={type:K.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function o$(){return new _(3011,!1)}()),r;let a=0;const i=[];let s=!1,l=!1,u=0;const c=n.steps.map(g=>{const v=this._makeStyleAst(g,t);let M=null!=v.offset?v.offset:function K$(e){if("string"==typeof e)return null;let n=null;if(Array.isArray(e))e.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const t=e;n=parseFloat(t.get("offset")),t.delete("offset")}return n}(v.styles),A=0;return null!=M&&(a++,A=v.offset=M),l=l||A<0||A>1,s=s||A<u,u=A,i.push(A),v});l&&t.errors.push(function a$(){return new _(3012,!1)}()),s&&t.errors.push(function i$(){return new _(3200,!1)}());const d=n.steps.length;let p=0;a>0&&a<d?t.errors.push(function s$(){return new _(3202,!1)}()):0==a&&(p=1/(d-1));const m=d-1,h=t.currentTime,f=t.currentAnimateTimings,y=f.duration;return c.forEach((g,v)=>{const M=p>0?v==m?1:p*v:i[v],A=M*y;t.currentTime=h+f.delay+A,f.duration=A,this._validateStyleAst(g,t),g.offset=M,r.styles.push(g)}),r}visitReference(n,t){return{type:K.Reference,animation:an(this,Ys(n.animation),t),options:Zo(n.options)}}visitAnimateChild(n,t){return t.depCount++,{type:K.AnimateChild,options:Zo(n.options)}}visitAnimateRef(n,t){return{type:K.AnimateRef,animation:this.visitReference(n.animation,t),options:Zo(n.options)}}visitQuery(n,t){const r=t.currentQuerySelector,o=n.options||{};t.queryCount++,t.currentQuery=n;const[a,i]=function G$(e){const n=!!e.split(/\s*,\s*/).find(t=>":self"==t);return n&&(e=e.replace(U$,"")),e=e.replace(/@\*/g,Zc).replace(/@\w+/g,t=>Zc+"-"+t.slice(1)).replace(/:animating/g,Qy),[e,n]}(n.selector);t.currentQuerySelector=r.length?r+" "+a:a,on(t.collectedStyles,t.currentQuerySelector,new Map);const s=an(this,Ys(n.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:K.Query,selector:a,limit:o.limit||0,optional:!!o.optional,includeSelf:i,animation:s,originalSelector:n.selector,options:Zo(n.options)}}visitStagger(n,t){t.currentQuery||t.errors.push(function l$(){return new _(3013,!1)}());const r="full"===n.timings?{duration:0,delay:0,easing:"full"}:Xc(n.timings,t.errors,!0);return{type:K.Stagger,animation:an(this,Ys(n.animation),t),timings:r,options:null}}}class W${errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(n){this.errors=n}}function Zo(e){return e?(e={...e}).params&&(e.params=function q$(e){return e?{...e}:null}(e.params)):e={},e}function ag(e,n,t){return{duration:e,delay:n,easing:t}}function ig(e,n,t,r,o,a,i=null,s=!1){return{type:1,element:e,keyframes:n,preStyleProps:t,postStyleProps:r,duration:o,delay:a,totalTime:o+a,easing:i,subTimeline:s}}class rd{_map=new Map;get(n){return this._map.get(n)||[]}append(n,t){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...t)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const Z$=new RegExp(":enter","g"),eH=new RegExp(":leave","g");function sg(e,n,t,r,o,a=new Map,i=new Map,s,l,u=[]){return(new tH).buildKeyframes(e,n,t,r,o,a,i,s,l,u)}class tH{buildKeyframes(n,t,r,o,a,i,s,l,u,c=[]){u=u||new rd;const d=new lg(n,t,u,o,a,c,[]);d.options=l;const p=l.delay?_r(l.delay):0;d.currentTimeline.delayNextStep(p),d.currentTimeline.setStyles([i],null,d.errors,l),an(this,r,d);const m=d.timelines.filter(h=>h.containsAnimation());if(m.length&&s.size){let h;for(let f=m.length-1;f>=0;f--){const y=m[f];if(y.element===t){h=y;break}}h&&!h.allowOnlyTimelineStyles()&&h.setStyles([s],null,d.errors,l)}return m.length?m.map(h=>h.buildKeyframes()):[ig(t,[],[],[],0,p,"",!1)]}visitTrigger(n,t){}visitState(n,t){}visitTransition(n,t){}visitAnimateChild(n,t){const r=t.subInstructions.get(t.element);if(r){const o=t.createSubContext(n.options),a=t.currentTimeline.currentTime,i=this._visitSubInstructions(r,o,o.options);a!=i&&t.transformIntoNewTimeline(i)}t.previousNode=n}visitAnimateRef(n,t){const r=t.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],t,r),this.visitReference(n.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=n}_applyAnimationRefDelays(n,t,r){for(const o of n){const a=o?.delay;if(a){const i="number"==typeof a?a:_r(Zs(a,o?.params??{},t.errors));r.delayNextStep(i)}}}_visitSubInstructions(n,t,r){let a=t.currentTimeline.currentTime;const i=null!=r.duration?_r(r.duration):null,s=null!=r.delay?_r(r.delay):null;return 0!==i&&n.forEach(l=>{const u=t.appendInstructionToTimeline(l,i,s);a=Math.max(a,u.duration+u.delay)}),a}visitReference(n,t){t.updateOptions(n.options,!0),an(this,n.animation,t),t.previousNode=n}visitSequence(n,t){const r=t.subContextCount;let o=t;const a=n.options;if(a&&(a.params||a.delay)&&(o=t.createSubContext(a),o.transformIntoNewTimeline(),null!=a.delay)){o.previousNode.type==K.Style&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=od);const i=_r(a.delay);o.delayNextStep(i)}n.steps.length&&(n.steps.forEach(i=>an(this,i,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),t.previousNode=n}visitGroup(n,t){const r=[];let o=t.currentTimeline.currentTime;const a=n.options&&n.options.delay?_r(n.options.delay):0;n.steps.forEach(i=>{const s=t.createSubContext(n.options);a&&s.delayNextStep(a),an(this,i,s),o=Math.max(o,s.currentTimeline.currentTime),r.push(s.currentTimeline)}),r.forEach(i=>t.currentTimeline.mergeTimelineCollectedStyles(i)),t.transformIntoNewTimeline(o),t.previousNode=n}_visitTiming(n,t){if(n.dynamic){const r=n.strValue;return Xc(t.params?Zs(r,t.params,t.errors):r,t.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,t){const r=t.currentAnimateTimings=this._visitTiming(n.timings,t),o=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),o.snapshotCurrentStyles());const a=n.style;a.type==K.Keyframes?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),o.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=n}visitStyle(n,t){const r=t.currentTimeline,o=t.currentAnimateTimings;!o&&r.hasCurrentStyleProperties()&&r.forwardFrame();const a=o&&o.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(a):r.setStyles(n.styles,a,t.errors,t.options),t.previousNode=n}visitKeyframes(n,t){const r=t.currentAnimateTimings,o=t.currentTimeline.duration,a=r.duration,s=t.createSubContext().currentTimeline;s.easing=r.easing,n.styles.forEach(l=>{s.forwardTime((l.offset||0)*a),s.setStyles(l.styles,l.easing,t.errors,t.options),s.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(s),t.transformIntoNewTimeline(o+a),t.previousNode=n}visitQuery(n,t){const r=t.currentTimeline.currentTime,o=n.options||{},a=o.delay?_r(o.delay):0;a&&(t.previousNode.type===K.Style||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=od);let i=r;const s=t.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!o.optional,t.errors);t.currentQueryTotal=s.length;let l=null;s.forEach((u,c)=>{t.currentQueryIndex=c;const d=t.createSubContext(n.options,u);a&&d.delayNextStep(a),u===t.element&&(l=d.currentTimeline),an(this,n.animation,d),d.currentTimeline.applyStylesToKeyframe(),i=Math.max(i,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(i),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=n}visitStagger(n,t){const r=t.parentContext,o=t.currentTimeline,a=n.timings,i=Math.abs(a.duration),s=i*(t.currentQueryTotal-1);let l=i*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":l=s-l;break;case"full":l=r.currentStaggerTime}const c=t.currentTimeline;l&&c.delayNextStep(l);const d=c.currentTime;an(this,n.animation,t),t.previousNode=n,r.currentStaggerTime=o.currentTime-d+(o.startTime-r.currentTimeline.startTime)}}const od={};class lg{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=od;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(n,t,r,o,a,i,s,l){this._driver=n,this.element=t,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=a,this.errors=i,this.timelines=s,this.currentTimeline=l||new ad(this._driver,t,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,t){if(!n)return;const r=n;let o=this.options;null!=r.duration&&(o.duration=_r(r.duration)),null!=r.delay&&(o.delay=_r(r.delay));const a=r.params;if(a){let i=o.params;i||(i=this.options.params={}),Object.keys(a).forEach(s=>{(!t||!i.hasOwnProperty(s))&&(i[s]=Zs(a[s],i,this.errors))})}}_copyOptions(){const n={};if(this.options){const t=this.options.params;if(t){const r=n.params={};Object.keys(t).forEach(o=>{r[o]=t[o]})}}return n}createSubContext(n=null,t,r){const o=t||this.element,a=new lg(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(n),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(n){return this.previousNode=od,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,t,r){const o={duration:t??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},a=new nH(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,o,n.stretchStartingKeyframe);return this.timelines.push(a),o}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,t,r,o,a,i){let s=[];if(o&&s.push(this.element),n.length>0){n=(n=n.replace(Z$,"."+this._enterClassName)).replace(eH,"."+this._leaveClassName);let u=this._driver.query(this.element,n,1!=r);0!==r&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),s.push(...u)}return!a&&0==s.length&&i.push(function u$(){return new _(3014,!1)}()),s}}class ad{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(n,t,r,o){this._driver=n,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=o,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+n),t&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,t){return this.applyStylesToKeyframe(),new ad(this._driver,n,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,t){this._localTimelineStyles.set(n,t),this._globalTimelineStyles.set(n,t),this._styleSummary.set(n,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||br),this._currentKeyframe.set(t,br);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,t,r,o){t&&this._previousKeyframe.set("easing",t);const a=o&&o.params||{},i=function rH(e,n){const t=new Map;let r;return e.forEach(o=>{if("*"===o){r??=n.keys();for(let a of r)t.set(a,br)}else for(let[a,i]of o)t.set(a,i)}),t}(n,this._globalTimelineStyles);for(let[s,l]of i){const u=Zs(l,a,r);this._pendingStyles.set(s,u),this._localTimelineStyles.has(s)||this._backFill.set(s,this._globalTimelineStyles.get(s)??br),this._updateStyle(s,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,t)=>{this._currentKeyframe.set(t,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,n)}))}snapshotCurrentStyles(){for(let[n,t]of this._localTimelineStyles)this._pendingStyles.set(n,t),this._updateStyle(n,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let t in this._currentKeyframe)n.push(t);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((t,r)=>{const o=this._styleSummary.get(r);(!o||t.time>o.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((s,l)=>{const u=new Map([...this._backFill,...s]);u.forEach((c,d)=>{"!"===c?n.add(d):c===br&&t.add(d)}),r||u.set("offset",l/this.duration),o.push(u)});const a=[...n.values()],i=[...t.values()];if(r){const s=o[0],l=new Map(s);s.set("offset",0),l.set("offset",1),o=[s,l]}return ig(this.element,o,a,i,this.duration,this.startTime,this.easing,!1)}}class nH extends ad{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(n,t,r,o,a,i,s=!1){super(n,t,i.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=a,this._stretchStartingKeyframe=s,this.timings={duration:i.duration,delay:i.delay,easing:i.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:t,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],i=r+t,s=t/i,l=new Map(n[0]);l.set("offset",0),a.push(l);const u=new Map(n[0]);u.set("offset",h4(s)),a.push(u);const c=n.length-1;for(let d=1;d<=c;d++){let p=new Map(n[d]);const m=p.get("offset");p.set("offset",h4((t+m*r)/i)),a.push(p)}r=i,t=0,o="",n=a}return ig(this.element,n,this.preStyleProps,this.postStyleProps,r,t,o,!0)}}function h4(e,n=3){const t=Math.pow(10,n-1);return Math.round(e*t)/t}function f4(e,n,t,r,o,a,i,s,l,u,c,d,p){return{type:0,element:e,triggerName:n,isRemovalTransition:o,fromState:t,fromStyles:a,toState:r,toStyles:i,timelines:s,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:d,errors:p}}const ug={};class y4{_triggerName;ast;_stateStyles;constructor(n,t,r){this._triggerName=n,this.ast=t,this._stateStyles=r}match(n,t,r,o){return function oH(e,n,t,r,o){return e.some(a=>a(n,t,r,o))}(this.ast.matchers,n,t,r,o)}buildStyles(n,t,r){let o=this._stateStyles.get("*");return void 0!==n&&(o=this._stateStyles.get(n?.toString())||o),o?o.buildStyles(t,r):new Map}build(n,t,r,o,a,i,s,l,u,c){const d=[],p=this.ast.options&&this.ast.options.params||ug,h=this.buildStyles(r,s&&s.params||ug,d),f=l&&l.params||ug,y=this.buildStyles(o,f,d),g=new Set,v=new Map,M=new Map,A="void"===o,T={params:g4(f,p),delay:this.ast.options?.delay},ne=c?[]:sg(n,t,this.ast.animation,a,i,h,y,T,u,d);let ae=0;return ne.forEach(X=>{ae=Math.max(X.duration+X.delay,ae)}),d.length?f4(t,this._triggerName,r,o,A,h,y,[],[],v,M,ae,d):(ne.forEach(X=>{const ge=X.element,fi=on(v,ge,new Set);X.preStyleProps.forEach(ta=>fi.add(ta));const Y4=on(M,ge,new Set);X.postStyleProps.forEach(ta=>Y4.add(ta)),ge!==t&&g.add(ge)}),f4(t,this._triggerName,r,o,A,h,y,ne,[...g.values()],v,M,ae))}}function g4(e,n){const t={...n};return Object.entries(e).forEach(([r,o])=>{null!=o&&(t[r]=o)}),t}class aH{styles;defaultParams;normalizer;constructor(n,t,r){this.styles=n,this.defaultParams=t,this.normalizer=r}buildStyles(n,t){const r=new Map,o=g4(n,this.defaultParams);return this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((i,s)=>{i&&(i=Zs(i,o,t));const l=this.normalizer.normalizePropertyName(s,t);i=this.normalizer.normalizeStyleValue(s,l,i,t),r.set(s,i)})}),r}}class sH{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(n,t,r){this.name=n,this.ast=t,this._normalizer=r,t.states.forEach(o=>{this.states.set(o.name,new aH(o.style,o.options&&o.options.params||{},r))}),v4(this.states,"true","1"),v4(this.states,"false","0"),t.transitions.forEach(o=>{this.transitionFactories.push(new y4(n,o,this.states))}),this.fallbackTransition=function lH(e,n){return new y4(e,{type:K.Transition,animation:{type:K.Sequence,steps:[],options:null},matchers:[(i,s)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,t,r,o){return this.transitionFactories.find(i=>i.match(n,t,r,o))||null}matchStyles(n,t,r){return this.fallbackTransition.buildStyles(n,t,r)}}function v4(e,n,t){e.has(n)?e.has(t)||e.set(t,e.get(n)):e.has(t)&&e.set(n,e.get(t))}const uH=new rd;class cH{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(n,t,r){this.bodyNode=n,this._driver=t,this._normalizer=r}register(n,t){const r=[],a=og(this._driver,t,r,[]);if(r.length)throw function h$(){return new _(3503,!1)}();this._animations.set(n,a)}_buildPlayer(n,t,r){const o=n.element,a=t4(this._normalizer,n.keyframes,t,r);return this._driver.animate(o,a,n.duration,n.delay,n.easing,[],!0)}create(n,t,r={}){const o=[],a=this._animations.get(n);let i;const s=new Map;if(a?(i=sg(this._driver,t,a,s4,Ky,new Map,new Map,r,uH,o),i.forEach(c=>{const d=on(s,c.element,new Map);c.postStyleProps.forEach(p=>d.set(p,null))})):(o.push(function f$(){return new _(3300,!1)}()),i=[]),o.length)throw function y$(){return new _(3504,!1)}();s.forEach((c,d)=>{c.forEach((p,m)=>{c.set(m,this._driver.computeStyle(d,m,br))})});const u=Xr(i.map(c=>{const d=s.get(c.element);return this._buildPlayer(c,new Map,d)}));return this._playersById.set(n,u),u.onDestroy(()=>this.destroy(n)),this.players.push(u),u}destroy(n){const t=this._getPlayer(n);t.destroy(),this._playersById.delete(n);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(n){const t=this._playersById.get(n);if(!t)throw function g$(){return new _(3301,!1)}();return t}listen(n,t,r,o){const a=qy(t,"","","");return zy(this._getPlayer(n),r,a,o),()=>{}}command(n,t,r,o){if("register"==r)return void this.register(n,o[0]);if("create"==r)return void this.create(n,t,o[0]||{});const a=this._getPlayer(n);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(n)}}}const b4="ng-animate-queued",cg="ng-animate-disabled",fH=[],_4={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},yH={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},On="__ng_removed";class dg{namespaceId;value;options;get params(){return this.options.params}constructor(n,t=""){this.namespaceId=t;const r=n&&n.hasOwnProperty("value");if(this.value=function _H(e){return e??null}(r?n.value:n),r){const{value:a,...i}=n;this.options=i}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const t=n.params;if(t){const r=this.options.params;Object.keys(t).forEach(o=>{null==r[o]&&(r[o]=t[o])})}}}const Xs="void",mg=new dg(Xs);class gH{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(n,t,r){this.id=n,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+n,_n(t,this._hostClassName)}listen(n,t,r,o){if(!this._triggers.has(t))throw function v$(){return new _(3302,!1)}();if(null==r||0==r.length)throw function b$(){return new _(3303,!1)}();if(!function wH(e){return"start"==e||"done"==e}(r))throw function _$(){return new _(3400,!1)}();const a=on(this._elementListeners,n,[]),i={name:t,phase:r,callback:o};a.push(i);const s=on(this._engine.statesByElement,n,new Map);return s.has(t)||(_n(n,Yc),_n(n,Yc+"-"+t),s.set(t,mg)),()=>{this._engine.afterFlush(()=>{const l=a.indexOf(i);l>=0&&a.splice(l,1),this._triggers.has(t)||s.delete(t)})}}register(n,t){return!this._triggers.has(n)&&(this._triggers.set(n,t),!0)}_getTrigger(n){const t=this._triggers.get(n);if(!t)throw function w$(){return new _(3401,!1)}();return t}trigger(n,t,r,o=!0){const a=this._getTrigger(t),i=new pg(this.id,t,n);let s=this._engine.statesByElement.get(n);s||(_n(n,Yc),_n(n,Yc+"-"+t),this._engine.statesByElement.set(n,s=new Map));let l=s.get(t);const u=new dg(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),s.set(t,u),l||(l=mg),u.value!==Xs&&l.value===u.value){if(!function EH(e,n){const t=Object.keys(e),r=Object.keys(n);if(t.length!=r.length)return!1;for(let o=0;o<t.length;o++){const a=t[o];if(!n.hasOwnProperty(a)||e[a]!==n[a])return!1}return!0}(l.params,u.params)){const f=[],y=a.matchStyles(l.value,l.params,f),g=a.matchStyles(u.value,u.params,f);f.length?this._engine.reportError(f):this._engine.afterFlush(()=>{Yo(n,y),Qn(n,g)})}return}const p=on(this._engine.playersByElement,n,[]);p.forEach(f=>{f.namespaceId==this.id&&f.triggerName==t&&f.queued&&f.destroy()});let m=a.matchTransition(l.value,u.value,n,u.params),h=!1;if(!m){if(!o)return;m=a.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:t,transition:m,fromState:l,toState:u,player:i,isFallbackTransition:h}),h||(_n(n,b4),i.onStart(()=>{hi(n,b4)})),i.onDone(()=>{let f=this.players.indexOf(i);f>=0&&this.players.splice(f,1);const y=this._engine.playersByElement.get(n);if(y){let g=y.indexOf(i);g>=0&&y.splice(g,1)}}),this.players.push(i),p.push(i),i}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(t=>t.delete(n)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(o=>o.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const t=this._engine.playersByElement.get(n);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,t){const r=this._engine.driver.query(n,Zc,!0);r.forEach(o=>{if(o[On])return;const a=this._engine.fetchNamespacesByElement(o);a.size?a.forEach(i=>i.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(n,t,r,o){const a=this._engine.statesByElement.get(n),i=new Map;if(a){const s=[];if(a.forEach((l,u)=>{if(i.set(u,l.value),this._triggers.has(u)){const c=this.trigger(n,u,Xs,o);c&&s.push(c)}}),s.length)return this._engine.markElementAsRemoved(this.id,n,!0,t,i),r&&Xr(s).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const t=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(t&&r){const o=new Set;t.forEach(a=>{const i=a.name;if(o.has(i))return;o.add(i);const l=this._triggers.get(i).fallbackTransition,u=r.get(i)||mg,c=new dg(Xs),d=new pg(this.id,i,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:i,transition:l,fromState:u,toState:c,player:d,isFallbackTransition:!0})})}}removeNode(n,t){const r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,t),this.triggerLeaveAnimation(n,t,!0))return;let o=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(n):[];if(a&&a.length)o=!0;else{let i=n;for(;i=i.parentNode;)if(r.statesByElement.get(i)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(n),o)r.markElementAsRemoved(this.id,n,!1,t);else{const a=n[On];(!a||a===_4)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,t))}}insertNode(n,t){_n(n,this._hostClassName)}drainQueuedTransitions(n){const t=[];return this._queue.forEach(r=>{const o=r.player;if(o.destroyed)return;const a=r.element,i=this._elementListeners.get(a);i&&i.forEach(s=>{if(s.name==r.triggerName){const l=qy(a,r.triggerName,r.fromState.value,r.toState.value);l._data=n,zy(r.player,s.phase,l,s.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):t.push(r)}),this._queue=[],t.sort((r,o)=>{const a=r.transition.ast.depCount,i=o.transition.ast.depCount;return 0==a||0==i?a-i:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(n){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}}class vH{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(n,t)=>{};_onRemovalComplete(n,t){this.onRemovalComplete(n,t)}constructor(n,t,r){this.bodyNode=n,this.driver=t,this._normalizer=r}get queuedPlayers(){const n=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,t){const r=new gH(n,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,t){const r=this._namespaceList,o=this.namespacesByHostElement;if(r.length-1>=0){let i=!1,s=this.driver.getParentElement(t);for(;s;){const l=o.get(s);if(l){const u=r.indexOf(l);r.splice(u+1,0,n),i=!0;break}s=this.driver.getParentElement(s)}i||r.unshift(n)}else r.push(n);return o.set(t,n),n}register(n,t){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,t)),r}registerTrigger(n,t,r){let o=this._namespaceLookup[n];o&&o.register(t,r)&&this.totalAnimations++}destroy(n,t){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(n);this.namespacesByHostElement.delete(r.hostElement);const o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1),r.destroy(t),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const t=new Set,r=this.statesByElement.get(n);if(r)for(let o of r.values())if(o.namespaceId){const a=this._fetchNamespace(o.namespaceId);a&&t.add(a)}return t}trigger(n,t,r,o){if(id(t)){const a=this._fetchNamespace(n);if(a)return a.trigger(t,r,o),!0}return!1}insertNode(n,t,r,o){if(!id(t))return;const a=t[On];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const i=this.collectedLeaveElements.indexOf(t);i>=0&&this.collectedLeaveElements.splice(i,1)}if(n){const i=this._fetchNamespace(n);i&&i.insertNode(t,r)}o&&this.collectEnterElement(t)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,t){t?this.disabledNodes.has(n)||(this.disabledNodes.add(n),_n(n,cg)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),hi(n,cg))}removeNode(n,t,r){if(id(t)){const o=n?this._fetchNamespace(n):null;o?o.removeNode(t,r):this.markElementAsRemoved(n,t,!1,r);const a=this.namespacesByHostElement.get(t);a&&a.id!==n&&a.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(n,t,r,o,a){this.collectedLeaveElements.push(t),t[On]={namespaceId:n,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(n,t,r,o,a){return id(t)?this._fetchNamespace(n).listen(t,r,o,a):()=>{}}_buildInstruction(n,t,r,o,a){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,o,n.fromState.options,n.toState.options,t,a)}destroyInnerAnimations(n){let t=this.driver.query(n,Zc,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(n,Qy,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){const t=this.playersByElement.get(n);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){const t=this.playersByQueriedElement.get(n);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Xr(this.players).onDone(()=>n());n()})}processLeaveNode(n){const t=n[On];if(t&&t.setForRemoval){if(n[On]=_4,t.namespaceId){this.destroyInnerAnimations(n);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,t.setForRemoval)}n.classList?.contains(cg)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)_n(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,n)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Xr(t).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(n){throw function k$(){return new _(3402,!1)}()}_flushAnimations(n,t){const r=new rd,o=[],a=new Map,i=[],s=new Map,l=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(j=>{c.add(j);const z=this.driver.query(j,".ng-animate-queued",!0);for(let W=0;W<z.length;W++)c.add(z[W])});const d=this.bodyNode,p=Array.from(this.statesByElement.keys()),m=C4(p,this.collectedEnterElements),h=new Map;let f=0;m.forEach((j,z)=>{const W=s4+f++;h.set(z,W),j.forEach(ye=>_n(ye,W))});const y=[],g=new Set,v=new Set;for(let j=0;j<this.collectedLeaveElements.length;j++){const z=this.collectedLeaveElements[j],W=z[On];W&&W.setForRemoval&&(y.push(z),g.add(z),W.hasAnimation?this.driver.query(z,".ng-star-inserted",!0).forEach(ye=>g.add(ye)):v.add(z))}const M=new Map,A=C4(p,Array.from(g));A.forEach((j,z)=>{const W=Ky+f++;M.set(z,W),j.forEach(ye=>_n(ye,W))}),n.push(()=>{m.forEach((j,z)=>{const W=h.get(z);j.forEach(ye=>hi(ye,W))}),A.forEach((j,z)=>{const W=M.get(z);j.forEach(ye=>hi(ye,W))}),y.forEach(j=>{this.processLeaveNode(j)})});const T=[],ne=[];for(let j=this._namespaceList.length-1;j>=0;j--)this._namespaceList[j].drainQueuedTransitions(t).forEach(W=>{const ye=W.player,dt=W.element;if(T.push(ye),this.collectedEnterElements.length){const Ct=dt[On];if(Ct&&Ct.setForMove){if(Ct.previousTriggersValues&&Ct.previousTriggersValues.has(W.triggerName)){const na=Ct.previousTriggersValues.get(W.triggerName),wn=this.statesByElement.get(W.element);if(wn&&wn.has(W.triggerName)){const pd=wn.get(W.triggerName);pd.value=na,wn.set(W.triggerName,pd)}}return void ye.destroy()}}const Jn=!d||!this.driver.containsElement(d,dt),sn=M.get(dt),ro=h.get(dt),Ue=this._buildInstruction(W,r,ro,sn,Jn);if(Ue.errors&&Ue.errors.length)return void ne.push(Ue);if(Jn)return ye.onStart(()=>Yo(dt,Ue.fromStyles)),ye.onDestroy(()=>Qn(dt,Ue.toStyles)),void o.push(ye);if(W.isFallbackTransition)return ye.onStart(()=>Yo(dt,Ue.fromStyles)),ye.onDestroy(()=>Qn(dt,Ue.toStyles)),void o.push(ye);const eD=[];Ue.timelines.forEach(Ct=>{Ct.stretchStartingKeyframe=!0,this.disabledNodes.has(Ct.element)||eD.push(Ct)}),Ue.timelines=eD,r.append(dt,Ue.timelines),i.push({instruction:Ue,player:ye,element:dt}),Ue.queriedElements.forEach(Ct=>on(s,Ct,[]).push(ye)),Ue.preStyleProps.forEach((Ct,na)=>{if(Ct.size){let wn=l.get(na);wn||l.set(na,wn=new Set),Ct.forEach((pd,kg)=>wn.add(kg))}}),Ue.postStyleProps.forEach((Ct,na)=>{let wn=u.get(na);wn||u.set(na,wn=new Set),Ct.forEach((pd,kg)=>wn.add(kg))})});if(ne.length){const j=[];ne.forEach(z=>{j.push(function C$(){return new _(3505,!1)}())}),T.forEach(z=>z.destroy()),this.reportError(j)}const ae=new Map,X=new Map;i.forEach(j=>{const z=j.element;r.has(z)&&(X.set(z,z),this._beforeAnimationBuild(j.player.namespaceId,j.instruction,ae))}),o.forEach(j=>{const z=j.element;this._getPreviousPlayers(z,!1,j.namespaceId,j.triggerName,null).forEach(ye=>{on(ae,z,[]).push(ye),ye.destroy()})});const ge=y.filter(j=>D4(j,l,u)),fi=new Map;k4(fi,this.driver,v,u,br).forEach(j=>{D4(j,l,u)&&ge.push(j)});const ta=new Map;m.forEach((j,z)=>{k4(ta,this.driver,new Set(j),l,"!")}),ge.forEach(j=>{const z=fi.get(j),W=ta.get(j);fi.set(j,new Map([...z?.entries()??[],...W?.entries()??[]]))});const wg=[],Z4=[],X4={};i.forEach(j=>{const{element:z,player:W,instruction:ye}=j;if(r.has(z)){if(c.has(z))return W.onDestroy(()=>Qn(z,ye.toStyles)),W.disabled=!0,W.overrideTotalTime(ye.totalTime),void o.push(W);let dt=X4;if(X.size>1){let sn=z;const ro=[];for(;sn=sn.parentNode;){const Ue=X.get(sn);if(Ue){dt=Ue;break}ro.push(sn)}ro.forEach(Ue=>X.set(Ue,dt))}const Jn=this._buildAnimation(W.namespaceId,ye,ae,a,ta,fi);if(W.setRealPlayer(Jn),dt===X4)wg.push(W);else{const sn=this.playersByElement.get(dt);sn&&sn.length&&(W.parentPlayer=Xr(sn)),o.push(W)}}else Yo(z,ye.fromStyles),W.onDestroy(()=>Qn(z,ye.toStyles)),Z4.push(W),c.has(z)&&o.push(W)}),Z4.forEach(j=>{const z=a.get(j.element);if(z&&z.length){const W=Xr(z);j.setRealPlayer(W)}}),o.forEach(j=>{j.parentPlayer?j.syncPlayerEvents(j.parentPlayer):j.destroy()});for(let j=0;j<y.length;j++){const z=y[j],W=z[On];if(hi(z,Ky),W&&W.hasAnimation)continue;let ye=[];if(s.size){let Jn=s.get(z);Jn&&Jn.length&&ye.push(...Jn);let sn=this.driver.query(z,Qy,!0);for(let ro=0;ro<sn.length;ro++){let Ue=s.get(sn[ro]);Ue&&Ue.length&&ye.push(...Ue)}}const dt=ye.filter(Jn=>!Jn.destroyed);dt.length?kH(this,z,dt):this.processLeaveNode(z)}return y.length=0,wg.forEach(j=>{this.players.push(j),j.onDone(()=>{j.destroy();const z=this.players.indexOf(j);this.players.splice(z,1)}),j.play()}),wg}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,t,r,o,a){let i=[];if(t){const s=this.playersByQueriedElement.get(n);s&&(i=s)}else{const s=this.playersByElement.get(n);if(s){const l=!a||a==Xs;s.forEach(u=>{u.queued||!l&&u.triggerName!=o||i.push(u)})}}return(r||o)&&(i=i.filter(s=>!(r&&r!=s.namespaceId||o&&o!=s.triggerName))),i}_beforeAnimationBuild(n,t,r){const a=t.element,i=t.isRemovalTransition?void 0:n,s=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const u=l.element,c=u!==a,d=on(r,u,[]);this._getPreviousPlayers(u,c,i,s,t.toState).forEach(m=>{const h=m.getRealPlayer();h.beforeDestroy&&h.beforeDestroy(),m.destroy(),d.push(m)})}Yo(a,t.fromStyles)}_buildAnimation(n,t,r,o,a,i){const s=t.triggerName,l=t.element,u=[],c=new Set,d=new Set,p=t.timelines.map(h=>{const f=h.element;c.add(f);const y=f[On];if(y&&y.removedBeforeQueried)return new Js(h.duration,h.delay);const g=f!==l,v=function CH(e){const n=[];return E4(e,n),n}((r.get(f)||fH).map(ae=>ae.getRealPlayer())).filter(ae=>!!ae.element&&ae.element===f),M=a.get(f),A=i.get(f),T=t4(this._normalizer,h.keyframes,M,A),ne=this._buildPlayer(h,T,v);if(h.subTimeline&&o&&d.add(f),g){const ae=new pg(n,s,f);ae.setRealPlayer(ne),u.push(ae)}return ne});u.forEach(h=>{on(this.playersByQueriedElement,h.element,[]).push(h),h.onDone(()=>function bH(e,n,t){let r=e.get(n);if(r){if(r.length){const o=r.indexOf(t);r.splice(o,1)}0==r.length&&e.delete(n)}return r}(this.playersByQueriedElement,h.element,h))}),c.forEach(h=>_n(h,l4));const m=Xr(p);return m.onDestroy(()=>{c.forEach(h=>hi(h,l4)),Qn(l,t.toStyles)}),d.forEach(h=>{on(o,h,[]).push(m)}),m}_buildPlayer(n,t,r){return t.length>0?this.driver.animate(n.element,t,n.duration,n.delay,n.easing,r):new Js(n.duration,n.delay)}}class pg{namespaceId;triggerName;element;_player=new Js;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(n,t,r){this.namespaceId=n,this.triggerName=t,this.element=r}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((t,r)=>{t.forEach(o=>zy(n,r,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const t=this._player;t.triggerCallback&&n.onStart(()=>t.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,t){on(this._queuedCallbacks,n,[]).push(t)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const t=this._player;t.triggerCallback&&t.triggerCallback(n)}}function id(e){return e&&1===e.nodeType}function w4(e,n){const t=e.style.display;return e.style.display=n??"none",t}function k4(e,n,t,r,o){const a=[];t.forEach(l=>a.push(w4(l)));const i=[];r.forEach((l,u)=>{const c=new Map;l.forEach(d=>{const p=n.computeStyle(u,d,o);c.set(d,p),(!p||0==p.length)&&(u[On]=yH,i.push(u))}),e.set(u,c)});let s=0;return t.forEach(l=>w4(l,a[s++])),i}function C4(e,n){const t=new Map;if(e.forEach(s=>t.set(s,[])),0==n.length)return t;const o=new Set(n),a=new Map;function i(s){if(!s)return 1;let l=a.get(s);if(l)return l;const u=s.parentNode;return l=t.has(u)?u:o.has(u)?1:i(u),a.set(s,l),l}return n.forEach(s=>{const l=i(s);1!==l&&t.get(l).push(s)}),t}function _n(e,n){e.classList?.add(n)}function hi(e,n){e.classList?.remove(n)}function kH(e,n,t){Xr(t).onDone(()=>e.processLeaveNode(n))}function E4(e,n){for(let t=0;t<e.length;t++){const r=e[t];r instanceof XE?E4(r.players,n):n.push(r)}}function D4(e,n,t){const r=t.get(e);if(!r)return!1;let o=n.get(e);return o?r.forEach(a=>o.add(a)):n.set(e,r),t.delete(e),!0}class el{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(n,t)=>{};constructor(n,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new vH(n.body,t,r),this._timelineEngine=new cH(n.body,t,r),this._transitionEngine.onRemovalComplete=(o,a)=>this.onRemovalComplete(o,a)}registerTrigger(n,t,r,o,a){const i=n+"-"+o;let s=this._triggerCache[i];if(!s){const l=[],c=og(this._driver,a,l,[]);if(l.length)throw function m$(){return new _(3404,!1)}();s=function iH(e,n,t){return new sH(e,n,t)}(o,c,this._normalizer),this._triggerCache[i]=s}this._transitionEngine.registerTrigger(t,o,s)}register(n,t){this._transitionEngine.register(n,t)}destroy(n,t){this._transitionEngine.destroy(n,t)}onInsert(n,t,r,o){this._transitionEngine.insertNode(n,t,r,o)}onRemove(n,t,r){this._transitionEngine.removeNode(n,t,r)}disableAnimations(n,t){this._transitionEngine.markElementAsDisabled(n,t)}process(n,t,r,o){if("@"==r.charAt(0)){const[a,i]=n4(r);this._timelineEngine.command(a,t,i,o)}else this._transitionEngine.trigger(n,t,r,o)}listen(n,t,r,o,a){if("@"==r.charAt(0)){const[i,s]=n4(r);return this._timelineEngine.listen(i,t,s,a)}return this._transitionEngine.listen(n,t,r,o,a)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}}let xH=(()=>{class e{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,o){this._element=t,this._startStyles=r,this._endStyles=o;let a=e.initialStylesByElement.get(t);a||e.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Qn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Qn(this._element,this._initialStyles),this._endStyles&&(Qn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(Yo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Yo(this._element,this._endStyles),this._endStyles=null),Qn(this._element,this._initialStyles),this._state=3)}}return e})();function hg(e){let n=null;return e.forEach((t,r)=>{(function SH(e){return"display"===e||"position"===e})(r)&&(n=n||new Map,n.set(r,t))}),n}class x4{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(n,t,r,o){this.element=n,this.keyframes=t,this.options=r,this._specialStyles=o,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const t=[];return n.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(n,t,r){return n.animate(this._convertKeyframesToObject(t),r)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,o)=>{"offset"!==o&&n.set(o,this._finished?r:Xy(this.element,o))}),this.currentSnapshot=n}triggerCallback(n){const t="start"===n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class S4{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}containsElement(n,t){return o4(n,t)}getParentElement(n){return Wy(n)}query(n,t,r){return a4(n,t,r)}computeStyle(n,t,r){return Xy(n,t)}animate(n,t,r,o,a,i=[]){const l={duration:r,delay:o,fill:0==o?"both":"forwards"};a&&(l.easing=a);const u=new Map,c=i.filter(m=>m instanceof x4);(function F$(e,n){return 0===e||0===n})(r,o)&&c.forEach(m=>{m.currentSnapshot.forEach((h,f)=>u.set(f,h))});let d=function R$(e){return e.length?e[0]instanceof Map?e:e.map(n=>new Map(Object.entries(n))):[]}(t).map(m=>new Map(m));d=function L$(e,n,t){if(t.size&&n.length){let r=n[0],o=[];if(t.forEach((a,i)=>{r.has(i)||o.push(i),r.set(i,a)}),o.length)for(let a=1;a<n.length;a++){let i=n[a];o.forEach(s=>i.set(s,Xy(e,s)))}}return n}(n,d,u);const p=function DH(e,n){let t=null,r=null;return Array.isArray(n)&&n.length?(t=hg(n[0]),n.length>1&&(r=hg(n[n.length-1]))):n instanceof Map&&(t=hg(n)),t||r?new xH(e,t,r):null}(n,d);return new x4(n,d,l,p)}}const T4="@.disabled";class I4{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(n,t,r,o){this.namespaceId=n,this.delegate=t,this.engine=r,this._onDestroy=o}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,t){return this.delegate.createElement(n,t)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,t){this.delegate.appendChild(n,t),this.engine.onInsert(this.namespaceId,t,n,!1)}insertBefore(n,t,r,o=!0){this.delegate.insertBefore(n,t,r),this.engine.onInsert(this.namespaceId,t,n,o)}removeChild(n,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(n,t){return this.delegate.selectRootElement(n,t)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,t,r,o){this.delegate.setAttribute(n,t,r,o)}removeAttribute(n,t,r){this.delegate.removeAttribute(n,t,r)}addClass(n,t){this.delegate.addClass(n,t)}removeClass(n,t){this.delegate.removeClass(n,t)}setStyle(n,t,r,o){this.delegate.setStyle(n,t,r,o)}removeStyle(n,t,r){this.delegate.removeStyle(n,t,r)}setProperty(n,t,r){"@"==t.charAt(0)&&t==T4?this.disableAnimations(n,!!r):this.delegate.setProperty(n,t,r)}setValue(n,t){this.delegate.setValue(n,t)}listen(n,t,r,o){return this.delegate.listen(n,t,r,o)}disableAnimations(n,t){this.engine.disableAnimations(n,t)}}class TH extends I4{factory;constructor(n,t,r,o,a){super(t,r,o,a),this.factory=n,this.namespaceId=t}setProperty(n,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==T4?this.disableAnimations(n,r=void 0===r||!!r):this.engine.process(this.namespaceId,n,t.slice(1),r):this.delegate.setProperty(n,t,r)}listen(n,t,r,o){if("@"==t.charAt(0)){const a=function IH(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(n);let i=t.slice(1),s="";return"@"!=i.charAt(0)&&([i,s]=function MH(e){const n=e.indexOf(".");return[e.substring(0,n),e.slice(n+1)]}(i)),this.engine.listen(this.namespaceId,a,i,s,l=>{this.factory.scheduleListenerCallback(l._data||-1,r,l)})}return this.delegate.listen(n,t,r,o)}}class AH{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(n,t,r){this.delegate=n,this.engine=t,this._zone=r,t.onRemovalComplete=(o,a)=>{a?.removeChild(null,o)}}createRenderer(n,t){const o=this.delegate.createRenderer(n,t);if(!n||!t?.data?.animation){const u=this._rendererCache;let c=u.get(o);return c||(c=new I4("",o,this.engine,()=>u.delete(o)),u.set(o,c)),c}const a=t.id,i=t.id+"-"+this._currentId;this._currentId++,this.engine.register(i,n);const s=u=>{Array.isArray(u)?u.forEach(s):this.engine.registerTrigger(a,i,n,u.name,u)};return t.data.animation.forEach(s),new TH(this,i,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,t,r){if(n>=0&&n<this._microtaskId)return void this._zone.run(()=>t(r));const o=this._animationCallbacksBuffer;0==o.length&&queueMicrotask(()=>{this._zone.run(()=>{o.forEach(a=>{const[i,s]=a;i(s)}),this._animationCallbacksBuffer=[]})}),o.push([t,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(n){this.engine.flush(),this.delegate.componentReplaced?.(n)}}const FH=[{provide:tg,useFactory:()=>new S4},{provide:V1,useFactory:()=>"BrowserAnimations"},...[{provide:ng,useFactory:function RH(){return new c4}},{provide:el,useClass:(()=>{class e extends el{constructor(t,r,o){super(t,r,o)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||e)(H(Bn),H(tg),H(ng))};static \u0275prov=U({token:e,factory:e.\u0275fac})}return e})()},{provide:bu,useFactory:function OH(e,n,t){return new AH(e,n,t)},deps:[vf,el,De]}]];function A4(...e){return Ls(e,wc(e))}class ld{}class ud{}class Pn{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),a=t.slice(r+1).trim();this.addHeaderEntry(o,a)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof Pn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new Pn;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Pn?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,t);const o=("a"===n.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const a=n.value;if(a){let i=this.headers.get(t);if(!i)return;i=i.filter(s=>-1===a.indexOf(s)),0===i.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,i)}else this.headers.delete(t),this.normalizedNames.delete(t)}}addHeaderEntry(n,t){const r=n.toLowerCase();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(n,t){const r=(Array.isArray(t)?t:[t]).map(a=>a.toString()),o=n.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(n,o)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class $H{encodeKey(n){return N4(n)}encodeValue(n){return N4(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const UH=/%(\d[a-f0-9])/gi,zH={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function N4(e){return encodeURIComponent(e).replace(UH,(n,t)=>zH[t]??n)}function cd(e){return`${e}`}class eo{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new $H,n.fromString){if(n.fromObject)throw new _(2805,!1);this.map=function HH(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(o=>{const a=o.indexOf("="),[i,s]=-1==a?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,a)),n.decodeValue(o.slice(a+1))],l=t.get(i)||[];l.push(s),t.set(i,l)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const r=n.fromObject[t],o=Array.isArray(r)?r.map(cd):[cd(r)];this.map.set(t,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(r=>{const o=n[r];Array.isArray(o)?o.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new eo({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(cd(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const o=r.indexOf(cd(n.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class GH{map=new Map;set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function R4(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function O4(e){return typeof Blob<"u"&&e instanceof Blob}function P4(e){return typeof FormData<"u"&&e instanceof FormData}const tl="Content-Type",fg="X-Request-URL",F4="text/plain",L4="application/json",j4=`${L4}, ${F4}, */*`;class nl{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(n,t,r,o){let a;if(this.url=t,this.method=n.toUpperCase(),function qH(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,a=o):a=r,a){if(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,this.keepalive=!!a.keepalive,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params),a.priority&&(this.priority=a.priority),a.cache&&(this.cache=a.cache),a.credentials&&(this.credentials=a.credentials),"number"==typeof a.timeout){if(a.timeout<1||!Number.isInteger(a.timeout))throw new Error("");this.timeout=a.timeout}a.mode&&(this.mode=a.mode),a.redirect&&(this.redirect=a.redirect),this.transferCache=a.transferCache}if(this.headers??=new Pn,this.context??=new GH,this.params){const i=this.params.toString();if(0===i.length)this.urlWithParams=t;else{const s=t.indexOf("?");this.urlWithParams=t+(-1===s?"?":s<t.length-1?"&":"")+i}}else this.params=new eo,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||R4(this.body)||O4(this.body)||P4(this.body)||function WH(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)?this.body:this.body instanceof eo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||P4(this.body)?null:O4(this.body)?this.body.type||null:R4(this.body)?null:"string"==typeof this.body?F4:this.body instanceof eo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?L4:null}clone(n={}){const t=n.method||this.method,r=n.url||this.url,o=n.responseType||this.responseType,a=n.keepalive??this.keepalive,i=n.priority||this.priority,s=n.cache||this.cache,l=n.mode||this.mode,u=n.redirect||this.redirect,c=n.credentials||this.credentials,d=n.transferCache??this.transferCache,p=n.timeout??this.timeout,m=void 0!==n.body?n.body:this.body,h=n.withCredentials??this.withCredentials,f=n.reportProgress??this.reportProgress;let y=n.headers||this.headers,g=n.params||this.params;const v=n.context??this.context;return void 0!==n.setHeaders&&(y=Object.keys(n.setHeaders).reduce((M,A)=>M.set(A,n.setHeaders[A]),y)),n.setParams&&(g=Object.keys(n.setParams).reduce((M,A)=>M.set(A,n.setParams[A]),g)),new nl(t,r,m,{params:g,headers:y,context:v,reportProgress:f,responseType:o,withCredentials:h,transferCache:d,keepalive:a,cache:s,priority:i,timeout:p,mode:l,redirect:u,credentials:c})}}var to=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(to||{});class yg{headers;status;statusText;url;ok;type;constructor(n,t=200,r="OK"){this.headers=n.headers||new Pn,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class md extends yg{constructor(n={}){super(n)}type=to.ResponseHeader;clone(n={}){return new md({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class rl extends yg{body;constructor(n={}){super(n),this.body=void 0!==n.body?n.body:null}type=to.Response;clone(n={}){return new rl({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Xo extends yg{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function gg(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache,keepalive:e.keepalive,priority:e.priority,cache:e.cache,mode:e.mode,redirect:e.redirect}}let JH=(()=>{class e{handler;constructor(t){this.handler=t}request(t,r,o={}){let a;if(t instanceof nl)a=t;else{let l,u;l=o.headers instanceof Pn?o.headers:new Pn(o.headers),o.params&&(u=o.params instanceof eo?o.params:new eo({fromObject:o.params})),a=new nl(t,r,void 0!==o.body?o.body:null,{headers:l,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache,keepalive:o.keepalive,priority:o.priority,cache:o.cache,mode:o.mode,redirect:o.redirect,credentials:o.credentials})}const i=A4(a).pipe(function jH(e,n){return Je(n)?Jc(e,n,1):Jc(e,1)}(l=>this.handler.handle(l)));if(t instanceof nl||"events"===o.observe)return i;const s=i.pipe(cE(l=>l instanceof rl));switch(o.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return s.pipe(Ft(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new _(2806,!1);return l.body}));case"blob":return s.pipe(Ft(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new _(2807,!1);return l.body}));case"text":return s.pipe(Ft(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new _(2808,!1);return l.body}));default:return s.pipe(Ft(l=>l.body))}case"response":return s;default:throw new _(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new eo).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,gg(o,r))}post(t,r,o={}){return this.request("POST",t,gg(o,r))}put(t,r,o={}){return this.request("PUT",t,gg(o,r))}static \u0275fac=function(r){return new(r||e)(H(ld))};static \u0275prov=U({token:e,factory:e.\u0275fac})}return e})();const $4=new N("");function H4(e,n){return n(e)}const ol=new N(""),rU=new N(""),U4=new N("",{providedIn:"root",factory:()=>!0});let z4=(()=>{class e extends ld{backend;injector;chain=null;pendingTasks=P(fm);contributeToStability=P(U4);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(ol),...this.injector.get(rU,[])]));this.chain=r.reduceRight((o,a)=>function tU(e,n,t){return(r,o)=>Jd(t,()=>n(r,a=>e(a,o)))}(o,a,this.injector),H4)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(function BH(e){return Vn((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}(r))}return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(H(ud),H(Wt))};static \u0275prov=U({token:e,factory:e.\u0275fac})}return e})();const lU=/^\)\]\}',?\n/,uU=RegExp(`^${fg}:`,"m");let q4=(()=>{class e{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new _(-2800,!1);const r=this.xhrFactory;return A4(null).pipe(function VH(e,n){return Vn((t,r)=>{let o=null,a=0,i=!1;const s=()=>i&&!o&&r.complete();t.subscribe(Sn(r,l=>{o?.unsubscribe();let u=0;const c=a++;Gr(e(l,c)).subscribe(o=Sn(r,d=>r.next(n?n(l,d,c,u++):d),()=>{o=null,s()}))},()=>{i=!0,s()}))})}(()=>new gt(a=>{const i=r.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((y,g)=>i.setRequestHeader(y,g.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept",j4),!t.headers.has(tl)){const y=t.detectContentTypeHeader();null!==y&&i.setRequestHeader(tl,y)}if(t.timeout&&(i.timeout=t.timeout),t.responseType){const y=t.responseType.toLowerCase();i.responseType="json"!==y?y:"text"}const s=t.serializeBody();let l=null;const u=()=>{if(null!==l)return l;const y=i.statusText||"OK",g=new Pn(i.getAllResponseHeaders()),v=function cU(e){return"responseURL"in e&&e.responseURL?e.responseURL:uU.test(e.getAllResponseHeaders())?e.getResponseHeader(fg):null}(i)||t.url;return l=new md({headers:g,status:i.status,statusText:y,url:v}),l},c=()=>{let{headers:y,status:g,statusText:v,url:M}=u(),A=null;204!==g&&(A=typeof i.response>"u"?i.responseText:i.response),0===g&&(g=A?200:0);let T=g>=200&&g<300;if("json"===t.responseType&&"string"==typeof A){const ne=A;A=A.replace(lU,"");try{A=""!==A?JSON.parse(A):null}catch(ae){A=ne,T&&(T=!1,A={error:ae,text:A})}}T?(a.next(new rl({body:A,headers:y,status:g,statusText:v,url:M||void 0})),a.complete()):a.error(new Xo({error:A,headers:y,status:g,statusText:v,url:M||void 0}))},d=y=>{const{url:g}=u(),v=new Xo({error:y,status:i.status||0,statusText:i.statusText||"Unknown Error",url:g||void 0});a.error(v)};let p=d;t.timeout&&(p=y=>{const{url:g}=u(),v=new Xo({error:new DOMException("Request timed out","TimeoutError"),status:i.status||0,statusText:i.statusText||"Request timeout",url:g||void 0});a.error(v)});let m=!1;const h=y=>{m||(a.next(u()),m=!0);let g={type:to.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(g.total=y.total),"text"===t.responseType&&i.responseText&&(g.partialText=i.responseText),a.next(g)},f=y=>{let g={type:to.UploadProgress,loaded:y.loaded};y.lengthComputable&&(g.total=y.total),a.next(g)};return i.addEventListener("load",c),i.addEventListener("error",d),i.addEventListener("timeout",p),i.addEventListener("abort",d),t.reportProgress&&(i.addEventListener("progress",h),null!==s&&i.upload&&i.upload.addEventListener("progress",f)),i.send(s),a.next({type:to.Sent}),()=>{i.removeEventListener("error",d),i.removeEventListener("abort",d),i.removeEventListener("load",c),i.removeEventListener("timeout",p),t.reportProgress&&(i.removeEventListener("progress",h),null!==s&&i.upload&&i.upload.removeEventListener("progress",f)),i.readyState!==i.DONE&&i.abort()}})))}static \u0275fac=function(r){return new(r||e)(H(zv))};static \u0275prov=U({token:e,factory:e.\u0275fac})}return e})();const _g=new N(""),W4=new N("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),K4=new N("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Q4{}let pU=(()=>{class e{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Uv(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||e)(H(Bn),H(W4))};static \u0275prov=U({token:e,factory:e.\u0275fac})}return e})();function hU(e,n){const t=e.url.toLowerCase();if(!P(_g)||"GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return n(e);const r=P(Q4).getToken(),o=P(K4);return null!=r&&!e.headers.has(o)&&(e=e.clone({headers:e.headers.set(o,r)})),n(e)}(function f6(e,n){return QF({rootComponent:e,...w0(n)})})(GV,{providers:[function LH(){return Zt("NgEagerAnimations"),[...FH]}(),function fU(...e){const n=[JH,q4,z4,{provide:ld,useExisting:z4},{provide:ud,useFactory:()=>P($4,{optional:!0})??P(q4)},{provide:ol,useValue:hU,multi:!0},{provide:_g,useValue:!0},{provide:Q4,useClass:pU}];for(const t of e)n.push(...t.\u0275providers);return function $d(e){return{\u0275providers:e}}(n)}(),GE,Qc,Ur,Gs]}).catch(e=>console.error(e))}},yt=>{yt(yt.s=983)}]);